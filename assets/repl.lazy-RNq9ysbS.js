import{r as Ne,j as pe,a7 as Hp,a6 as Wp,u as Gp,a4 as Vp}from"./index-CDaFRQIw.js";import{_ as ka}from"./extends-CF3RwP-h.js";import{A as qp,a as Yp,b as jp,c as Xp}from"./accordion-CHuMRvAA.js";import{C as zp,b as Kp}from"./card-SnUt5-d7.js";function $p(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;t[i]=n[i]}return t}let vo=[],Mh=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?Mh:vo).push(t=t+n[e])})();function Jp(n){if(n<768)return!1;for(let e=0,t=vo.length;;){let i=e+t>>1;if(n<vo[i])t=i;else if(n>=Mh[i])e=i+1;else return!0;if(e==t)return!1}}function Rl(n){return n>=127462&&n<=127487}const _l=8205;function Qp(n,e,t=!0,i=!0){return(t?Fh:Zp)(n,e,i)}function Fh(n,e,t){if(e==n.length)return e;e&&Uh(n.charCodeAt(e))&&Bh(n.charCodeAt(e-1))&&e--;let i=Jr(n,e);for(e+=Ol(i);e<n.length;){let s=Jr(n,e);if(i==_l||s==_l||t&&Jp(s))e+=Ol(s),i=s;else if(Rl(s)){let o=0,a=e-2;for(;a>=0&&Rl(Jr(n,a));)o++,a-=2;if(o%2==0)break;e+=2}else break}return e}function Zp(n,e,t){for(;e>0;){let i=Fh(n,e-2,t);if(i<e)return i;e--}return 0}function Jr(n,e){let t=n.charCodeAt(e);if(!Bh(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return Uh(i)?(t-55296<<10)+(i-56320)+65536:t}function Uh(n){return n>=56320&&n<57344}function Bh(n){return n>=55296&&n<56320}function Ol(n){return n<65536?1:2}class Re{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=li(this,e,t);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),Bt.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=li(this,e,t);let i=[];return this.decompose(e,t,i,0),Bt.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new Hi(this),o=new Hi(e);for(let a=t,l=t;;){if(s.next(a),o.next(a),a=0,s.lineBreak!=o.lineBreak||s.done!=o.done||s.value!=o.value)return!1;if(l+=s.value.length,s.done||l>=i)return!0}}iter(e=1){return new Hi(this,e)}iterRange(e,t=this.length){return new Hh(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Wh(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Re.empty:e.length<=32?new Me(e):Bt.from(Me.split(e,[]))}}class Me extends Re{constructor(e,t=em(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let o=0;;o++){let a=this.text[o],l=s+a.length;if((t?i:l)>=e)return new tm(s,l,i,a);s=l+1,i++}}decompose(e,t,i,s){let o=e<=0&&t>=this.length?this:new Me(Nl(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=i.pop(),l=Xs(o.text,a.text.slice(),0,o.length);if(l.length<=32)i.push(new Me(l,a.length+o.length));else{let c=l.length>>1;i.push(new Me(l.slice(0,c)),new Me(l.slice(c)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof Me))return super.replace(e,t,i);[e,t]=li(this,e,t);let s=Xs(this.text,Xs(i.text,Nl(this.text,0,e)),t),o=this.length+i.length-(t-e);return s.length<=32?new Me(s,o):Bt.from(Me.split(s,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=li(this,e,t);let s="";for(let o=0,a=0;o<=t&&a<this.text.length;a++){let l=this.text[a],c=o+l.length;o>e&&a&&(s+=i),e<c&&t>o&&(s+=l.slice(Math.max(0,e-o),t-o)),o=c+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let o of e)i.push(o),s+=o.length+1,i.length==32&&(t.push(new Me(i,s)),i=[],s=-1);return s>-1&&t.push(new Me(i,s)),t}}class Bt extends Re{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let o=0;;o++){let a=this.children[o],l=s+a.length,c=i+a.lines-1;if((t?c:l)>=e)return a.lineInner(e,t,i,s);s=l+1,i=c+1}}decompose(e,t,i,s){for(let o=0,a=0;a<=t&&o<this.children.length;o++){let l=this.children[o],c=a+l.length;if(e<=c&&t>=a){let h=s&((a<=e?1:0)|(c>=t?2:0));a>=e&&c<=t&&!h?i.push(l):l.decompose(e-a,t-a,i,h)}a=c+1}}replace(e,t,i){if([e,t]=li(this,e,t),i.lines<this.lines)for(let s=0,o=0;s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e>=o&&t<=l){let c=a.replace(e-o,t-o,i),h=this.lines-a.lines+c.lines;if(c.lines<h>>4&&c.lines>h>>6){let f=this.children.slice();return f[s]=c,new Bt(f,this.length-(t-e)+i.length)}return super.replace(o,l,c)}o=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=li(this,e,t);let s="";for(let o=0,a=0;o<this.children.length&&a<=t;o++){let l=this.children[o],c=a+l.length;a>e&&o&&(s+=i),e<c&&t>a&&(s+=l.sliceString(e-a,t-a,i)),a=c+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Bt))return 0;let i=0,[s,o,a,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,o+=t){if(s==a||o==l)return i;let c=this.children[s],h=e.children[o];if(c!=h)return i+c.scanIdentical(h,t);i+=c.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let T of e)i+=T.lines;if(i<32){let T=[];for(let N of e)N.flatten(T);return new Me(T,t)}let s=Math.max(32,i>>5),o=s<<1,a=s>>1,l=[],c=0,h=-1,f=[];function u(T){let N;if(T.lines>o&&T instanceof Bt)for(let y of T.children)u(y);else T.lines>a&&(c>a||!c)?(m(),l.push(T)):T instanceof Me&&c&&(N=f[f.length-1])instanceof Me&&T.lines+N.lines<=32?(c+=T.lines,h+=T.length+1,f[f.length-1]=new Me(N.text.concat(T.text),N.length+1+T.length)):(c+T.lines>s&&m(),c+=T.lines,h+=T.length+1,f.push(T))}function m(){c!=0&&(l.push(f.length==1?f[0]:Bt.from(f,h)),h=-1,c=f.length=0)}for(let T of e)u(T);return m(),l.length==1?l[0]:new Bt(l,t)}}Re.empty=new Me([""],0);function em(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Xs(n,e,t=0,i=1e9){for(let s=0,o=0,a=!0;o<n.length&&s<=i;o++){let l=n[o],c=s+l.length;c>=t&&(c>i&&(l=l.slice(0,i-s)),s<t&&(l=l.slice(t-s)),a?(e[e.length-1]+=l,a=!1):e.push(l)),s=c+1}return e}function Nl(n,e,t){return Xs(n,[""],e,t)}class Hi{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Me?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],o=this.offsets[i],a=o>>1,l=s instanceof Me?s.text.length:s.children.length;if(a==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Me){let c=s.text[a+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=s.children[a+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof Me?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Hh{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Hi(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Wh{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Re.prototype[Symbol.iterator]=function(){return this.iter()},Hi.prototype[Symbol.iterator]=Hh.prototype[Symbol.iterator]=Wh.prototype[Symbol.iterator]=function(){return this});class tm{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}function li(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Qe(n,e,t=!0,i=!0){return Qp(n,e,t,i)}function nm(n){return n>=56320&&n<57344}function im(n){return n>=55296&&n<56320}function ht(n,e){let t=n.charCodeAt(e);if(!im(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return nm(i)?(t-55296<<10)+(i-56320)+65536:t}function Pa(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Ht(n){return n<65536?1:2}const Do=/\r\n?|\n/;var st=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(st||(st={}));class qt{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let o=this.sections[t++],a=this.sections[t++];a<0?(e(i,s,o),s+=o):s+=a,i+=o}}iterChangedRanges(e,t=!1){ko(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new qt(e)}composeDesc(e){return this.empty?e:e.empty?this:Gh(this,e)}mapDesc(e,t=!1){return e.empty?this:Po(this,e,t)}mapPos(e,t=-1,i=st.Simple){let s=0,o=0;for(let a=0;a<this.sections.length;){let l=this.sections[a++],c=this.sections[a++],h=s+l;if(c<0){if(h>e)return o+(e-s);o+=l}else{if(i!=st.Simple&&h>=e&&(i==st.TrackDel&&s<e&&h>e||i==st.TrackBefore&&s<e||i==st.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==s||t<0?o:o+c;o+=c}s=h}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return o}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let o=this.sections[i++],a=this.sections[i++],l=s+o;if(a>=0&&s<=t&&l>=e)return s<e&&l>t?"cover":!0;s=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new qt(e)}static create(e){return new qt(e)}}class Ge extends qt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ko(this,(t,i,s,o,a)=>e=e.replace(s,s+(i-t),a),!1),e}mapDesc(e,t=!1){return Po(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,o=0;s<t.length;s+=2){let a=t[s],l=t[s+1];if(l>=0){t[s]=l,t[s+1]=a;let c=s>>1;for(;i.length<c;)i.push(Re.empty);i.push(a?e.slice(o,o+a):Re.empty)}o+=a}return new Ge(t,i)}compose(e){return this.empty?e:e.empty?this:Gh(this,e,!0)}map(e,t=!1){return e.empty?this:Po(this,e,t,!0)}iterChanges(e,t=!1){ko(this,e,t)}get desc(){return qt.create(this.sections)}filter(e){let t=[],i=[],s=[],o=new Yi(this);e:for(let a=0,l=0;;){let c=a==e.length?1e9:e[a++];for(;l<c||l==c&&o.len==0;){if(o.done)break e;let f=Math.min(o.len,c-l);tt(s,f,-1);let u=o.ins==-1?-1:o.off==0?o.ins:0;tt(t,f,u),u>0&&pn(i,t,o.text),o.forward(f),l+=f}let h=e[a++];for(;l<h;){if(o.done)break e;let f=Math.min(o.len,h-l);tt(t,f,-1),tt(s,f,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(f),l+=f}}return{changes:new Ge(t,i),filtered:qt.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],o=[],a=0,l=null;function c(f=!1){if(!f&&!s.length)return;a<t&&tt(s,t-a,-1);let u=new Ge(s,o);l=l?l.compose(u.map(l)):u,s=[],o=[],a=0}function h(f){if(Array.isArray(f))for(let u of f)h(u);else if(f instanceof Ge){if(f.length!=t)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${t})`);c(),l=l?l.compose(f.map(l)):f}else{let{from:u,to:m=u,insert:T}=f;if(u>m||u<0||m>t)throw new RangeError(`Invalid change range ${u} to ${m} (in doc of length ${t})`);let N=T?typeof T=="string"?Re.of(T.split(i||Do)):T:Re.empty,y=N.length;if(u==m&&y==0)return;u<a&&c(),u>a&&tt(s,u-a,-1),tt(s,m-u,y),pn(o,s,N),a=m}}return h(e),c(!l),l}static empty(e){return new Ge(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let o=e[s];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,l)=>l&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<s;)i.push(Re.empty);i[s]=Re.of(o.slice(1)),t.push(o[0],i[s].length)}}}return new Ge(t,i)}static createSet(e,t){return new Ge(e,t)}}function tt(n,e,t,i=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=t:i?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function pn(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Re.empty);n.push(t)}}function ko(n,e,t){let i=n.inserted;for(let s=0,o=0,a=0;a<n.sections.length;){let l=n.sections[a++],c=n.sections[a++];if(c<0)s+=l,o+=l;else{let h=s,f=o,u=Re.empty;for(;h+=l,f+=c,c&&i&&(u=u.append(i[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)l=n.sections[a++],c=n.sections[a++];e(s,h,o,f,u),s=h,o=f}}}function Po(n,e,t,i=!1){let s=[],o=i?[]:null,a=new Yi(n),l=new Yi(e);for(let c=-1;;){if(a.done&&l.len||l.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&l.ins==-1){let h=Math.min(a.len,l.len);tt(s,h,-1),a.forward(h),l.forward(h)}else if(l.ins>=0&&(a.ins<0||c==a.i||a.off==0&&(l.len<a.len||l.len==a.len&&!t))){let h=l.len;for(tt(s,l.ins,-1);h;){let f=Math.min(a.len,h);a.ins>=0&&c<a.i&&a.len<=f&&(tt(s,0,a.ins),o&&pn(o,s,a.text),c=a.i),a.forward(f),h-=f}l.next()}else if(a.ins>=0){let h=0,f=a.len;for(;f;)if(l.ins==-1){let u=Math.min(f,l.len);h+=u,f-=u,l.forward(u)}else if(l.ins==0&&l.len<f)f-=l.len,l.next();else break;tt(s,h,c<a.i?a.ins:0),o&&c<a.i&&pn(o,s,a.text),c=a.i,a.forward(a.len-f)}else{if(a.done&&l.done)return o?Ge.createSet(s,o):qt.create(s);throw new Error("Mismatched change set lengths")}}}function Gh(n,e,t=!1){let i=[],s=t?[]:null,o=new Yi(n),a=new Yi(e);for(let l=!1;;){if(o.done&&a.done)return s?Ge.createSet(i,s):qt.create(i);if(o.ins==0)tt(i,o.len,0,l),o.next();else if(a.len==0&&!a.done)tt(i,0,a.ins,l),s&&pn(s,i,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let c=Math.min(o.len2,a.len),h=i.length;if(o.ins==-1){let f=a.ins==-1?-1:a.off?0:a.ins;tt(i,c,f,l),s&&f&&pn(s,i,a.text)}else a.ins==-1?(tt(i,o.off?0:o.len,c,l),s&&pn(s,i,o.textBit(c))):(tt(i,o.off?0:o.len,a.off?0:a.ins,l),s&&!a.off&&pn(s,i,a.text));l=(o.ins>c||a.ins>=0&&a.len>c)&&(l||i.length>h),o.forward2(c),a.forward(c)}}}}class Yi{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Re.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Re.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Pn{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new Pn(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return B.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return B.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return B.range(e.anchor,e.head)}static create(e,t,i){return new Pn(e,t,i)}}class B{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:B.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new B([this.main],0)}addRange(e,t=!0){return B.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,B.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new B(e.ranges.map(t=>Pn.fromJSON(t)),e.main)}static single(e,t=e){return new B([B.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let o=e[s];if(o.empty?o.from<=i:o.from<i)return B.normalized(e.slice(),t);i=o.to}return new B(e,t)}static cursor(e,t=0,i,s){return Pn.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,t,i,s){let o=(i??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?Pn.create(t,e,48|o):Pn.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((s,o)=>s.from-o.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let o=e[s],a=e[s-1];if(o.empty?o.from<=a.to:o.from<a.to){let l=a.from,c=Math.max(o.to,a.to);s<=t&&t--,e.splice(--s,2,o.anchor>o.head?B.range(c,l):B.range(l,c))}}return new B(e,t)}}function Vh(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Ma=0;class ne{constructor(e,t,i,s,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=Ma++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new ne(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Fa),!!e.static,e.enables)}of(e){return new zs([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new zs(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new zs(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Fa(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class zs{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=Ma++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,o=this.id,a=e[o]>>1,l=this.type==2,c=!1,h=!1,f=[];for(let u of this.dependencies)u=="doc"?c=!0:u=="selection"?h=!0:((t=e[u.id])!==null&&t!==void 0?t:1)&1||f.push(e[u.id]);return{create(u){return u.values[a]=i(u),1},update(u,m){if(c&&m.docChanged||h&&(m.docChanged||m.selection)||Mo(u,f)){let T=i(u);if(l?!bl(T,u.values[a],s):!s(T,u.values[a]))return u.values[a]=T,1}return 0},reconfigure:(u,m)=>{let T,N=m.config.address[o];if(N!=null){let y=ar(m,N);if(this.dependencies.every(p=>p instanceof ne?m.facet(p)===u.facet(p):p instanceof Ze?m.field(p,!1)==u.field(p,!1):!0)||(l?bl(T=i(u),y,s):s(T=i(u),y)))return u.values[a]=y,0}else T=i(u);return u.values[a]=T,1}}}}function bl(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function Mo(n,e){let t=!1;for(let i of e)Wi(n,i)&1&&(t=!0);return t}function sm(n,e,t){let i=t.map(c=>n[c.id]),s=t.map(c=>c.type),o=i.filter(c=>!(c&1)),a=n[e.id]>>1;function l(c){let h=[];for(let f=0;f<i.length;f++){let u=ar(c,i[f]);if(s[f]==2)for(let m of u)h.push(m);else h.push(u)}return e.combine(h)}return{create(c){for(let h of i)Wi(c,h);return c.values[a]=l(c),1},update(c,h){if(!Mo(c,o))return 0;let f=l(c);return e.compare(f,c.values[a])?0:(c.values[a]=f,1)},reconfigure(c,h){let f=Mo(c,i),u=h.config.facets[e.id],m=h.facet(e);if(u&&!f&&Fa(t,u))return c.values[a]=m,0;let T=l(c);return e.compare(T,m)?(c.values[a]=m,0):(c.values[a]=T,1)}}}const yl=ne.define({static:!0});class Ze{constructor(e,t,i,s,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=o,this.provides=void 0}static define(e){let t=new Ze(Ma++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(yl).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let o=i.values[t],a=this.updateF(o,s);return this.compareF(o,a)?0:(i.values[t]=a,1)},reconfigure:(i,s)=>s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,yl.of({field:this,create:e})]}get extension(){return this}}const Dn={lowest:4,low:3,default:2,high:1,highest:0};function bi(n){return e=>new qh(e,n)}const qn={highest:bi(Dn.highest),high:bi(Dn.high),default:bi(Dn.default),low:bi(Dn.low),lowest:bi(Dn.lowest)};class qh{constructor(e,t){this.inner=e,this.prec=t}}class Pr{of(e){return new Fo(this,e)}reconfigure(e){return Pr.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Fo{constructor(e,t){this.compartment=e,this.inner=t}}class or{constructor(e,t,i,s,o,a){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],o=Object.create(null),a=new Map;for(let m of rm(e,t,a))m instanceof Ze?s.push(m):(o[m.facet.id]||(o[m.facet.id]=[])).push(m);let l=Object.create(null),c=[],h=[];for(let m of s)l[m.id]=h.length<<1,h.push(T=>m.slot(T));let f=i?.config.facets;for(let m in o){let T=o[m],N=T[0].facet,y=f&&f[m]||[];if(T.every(p=>p.type==0))if(l[N.id]=c.length<<1|1,Fa(y,T))c.push(i.facet(N));else{let p=N.combine(T.map(L=>L.value));c.push(i&&N.compare(p,i.facet(N))?i.facet(N):p)}else{for(let p of T)p.type==0?(l[p.id]=c.length<<1|1,c.push(p.value)):(l[p.id]=h.length<<1,h.push(L=>p.dynamicSlot(L)));l[N.id]=h.length<<1,h.push(p=>sm(p,N,T))}}let u=h.map(m=>m(l));return new or(e,a,u,l,c,o)}}function rm(n,e,t){let i=[[],[],[],[],[]],s=new Map;function o(a,l){let c=s.get(a);if(c!=null){if(c<=l)return;let h=i[c].indexOf(a);h>-1&&i[c].splice(h,1),a instanceof Fo&&t.delete(a.compartment)}if(s.set(a,l),Array.isArray(a))for(let h of a)o(h,l);else if(a instanceof Fo){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(a.compartment)||a.inner;t.set(a.compartment,h),o(h,l)}else if(a instanceof qh)o(a.inner,a.prec);else if(a instanceof Ze)i[l].push(a),a.provides&&o(a.provides,l);else if(a instanceof zs)i[l].push(a),a.facet.extensions&&o(a.facet.extensions,Dn.default);else{let h=a.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(h,l)}}return o(n,Dn.default),i.reduce((a,l)=>a.concat(l))}function Wi(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function ar(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Yh=ne.define(),Uo=ne.define({combine:n=>n.some(e=>e),static:!0}),jh=ne.define({combine:n=>n.length?n[0]:void 0,static:!0}),Xh=ne.define(),zh=ne.define(),Kh=ne.define(),$h=ne.define({combine:n=>n.length?n[0]:!1});class jt{constructor(e,t){this.type=e,this.value=t}static define(){return new om}}class om{of(e){return new jt(this,e)}}class am{constructor(e){this.map=e}of(e){return new me(this,e)}}class me{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new me(this.type,t)}is(e){return this.type==e}static define(e={}){return new am(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let o=s.map(t);o&&i.push(o)}return i}}me.reconfigure=me.define();me.appendConfig=me.define();class Ve{constructor(e,t,i,s,o,a){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,i&&Vh(i,t.newLength),o.some(l=>l.type==Ve.time)||(this.annotations=o.concat(Ve.time.of(Date.now())))}static create(e,t,i,s,o,a){return new Ve(e,t,i,s,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ve.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ve.time=jt.define();Ve.userEvent=jt.define();Ve.addToHistory=jt.define();Ve.remote=jt.define();function lm(n,e){let t=[];for(let i=0,s=0;;){let o,a;if(i<n.length&&(s==e.length||e[s]>=n[i]))o=n[i++],a=n[i++];else if(s<e.length)o=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<o?t.push(o,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function Jh(n,e,t){var i;let s,o,a;return t?(s=e.changes,o=Ge.empty(e.changes.length),a=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(s),effects:me.mapEffects(n.effects,s).concat(me.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Bo(n,e,t){let i=e.selection,s=ni(e.annotations);return e.userEvent&&(s=s.concat(Ve.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ge?e.changes:Ge.of(e.changes||[],t,n.facet(jh)),selection:i&&(i instanceof B?i:B.single(i.anchor,i.head)),effects:ni(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Qh(n,e,t){let i=Bo(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let a=!!e[o].sequential;i=Jh(i,Bo(n,e[o],a?i.changes.newLength:n.doc.length),a)}let s=Ve.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return hm(t?cm(s):s)}function cm(n){let e=n.startState,t=!0;for(let s of e.facet(Xh)){let o=s(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:lm(t,o))}if(t!==!0){let s,o;if(t===!1)o=n.changes.invertedDesc,s=Ge.empty(e.doc.length);else{let a=n.changes.filter(t);s=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}n=Ve.create(e,s,n.selection&&n.selection.map(o),me.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(zh);for(let s=i.length-1;s>=0;s--){let o=i[s](n);o instanceof Ve?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Ve?n=o[0]:n=Qh(e,ni(o),!1)}return n}function hm(n){let e=n.startState,t=e.facet(Kh),i=n;for(let s=t.length-1;s>=0;s--){let o=t[s](n);o&&Object.keys(o).length&&(i=Jh(i,Bo(e,o,n.changes.newLength),!0))}return i==n?n:Ve.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const fm=[];function ni(n){return n==null?fm:Array.isArray(n)?n:[n]}var De=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(De||(De={}));const um=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Ho;try{Ho=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function dm(n){if(Ho)return Ho.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||um.test(t)))return!0}return!1}function pm(n){return e=>{if(!/\S/.test(e))return De.Space;if(dm(e))return De.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return De.Word;return De.Other}}class Te{constructor(e,t,i,s,o,a){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Wi(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Wi(this,i),ar(this,i)}update(...e){return Qh(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let l of e.effects)l.is(Pr.reconfigure)?(t&&(s=new Map,t.compartments.forEach((c,h)=>s.set(h,c)),t=null),s.set(l.value.compartment,l.value.extension)):l.is(me.reconfigure)?(t=null,i=l.value):l.is(me.appendConfig)&&(t=null,i=ni(i).concat(l.value));let o;t?o=e.startState.values.slice():(t=or.resolve(i,s,this),o=new Te(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,h)=>h.reconfigure(c,this),null).values);let a=e.startState.facet(Uo)?e.newSelection:e.newSelection.asSingle();new Te(t,e.newDoc,a,o,(l,c)=>c.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:B.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),o=[i.range],a=ni(i.effects);for(let l=1;l<t.ranges.length;l++){let c=e(t.ranges[l]),h=this.changes(c.changes),f=h.map(s);for(let m=0;m<l;m++)o[m]=o[m].map(f);let u=s.mapDesc(h,!0);o.push(c.range.map(u)),s=s.compose(f),a=me.mapEffects(a,f).concat(me.mapEffects(ni(c.effects),u))}return{changes:s,selection:B.create(o,t.mainIndex),effects:a}}changes(e=[]){return e instanceof Ge?e:Ge.of(e,this.doc.length,this.facet(Te.lineSeparator))}toText(e){return Re.of(e.split(this.facet(Te.lineSeparator)||Do))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Wi(this,t),ar(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof Ze&&this.config.address[s.id]!=null&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let a=i[o],l=e[o];s.push(a.init(c=>a.spec.fromJSON(l,c)))}}return Te.create({doc:e.doc,selection:B.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=or.resolve(e.extensions||[],new Map),i=e.doc instanceof Re?e.doc:Re.of((e.doc||"").split(t.staticFacet(Te.lineSeparator)||Do)),s=e.selection?e.selection instanceof B?e.selection:B.single(e.selection.anchor,e.selection.head):B.single(0);return Vh(s,i.length),t.staticFacet(Uo)||(s=s.asSingle()),new Te(t,i,s,t.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet(Te.tabSize)}get lineBreak(){return this.facet(Te.lineSeparator)||`
`}get readOnly(){return this.facet($h)}phrase(e,...t){for(let i of this.facet(Te.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let o=+(s||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let s=[];for(let o of this.facet(Yh))for(let a of o(this,t,i))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return pm(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),o=this.charCategorizer(e),a=e-i,l=e-i;for(;a>0;){let c=Qe(t,a,!1);if(o(t.slice(c,a))!=De.Word)break;a=c}for(;l<s;){let c=Qe(t,l);if(o(t.slice(l,c))!=De.Word)break;l=c}return a==l?null:B.range(a+i,l+i)}}Te.allowMultipleSelections=Uo;Te.tabSize=ne.define({combine:n=>n.length?n[0]:4});Te.lineSeparator=jh;Te.readOnly=$h;Te.phrases=ne.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(s=>n[s]==e[s])}});Te.languageData=Yh;Te.changeFilter=Xh;Te.transactionFilter=zh;Te.transactionExtender=Kh;Pr.reconfigure=me.define();function Xt(n,e,t={}){let i={};for(let s of n)for(let o of Object.keys(s)){let a=s[o],l=i[o];if(l===void 0)i[o]=a;else if(!(l===a||a===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](l,a);else throw new Error("Config merge conflict for field "+o)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class Bn{eq(e){return this==e}range(e,t=e){return Wo.create(e,t,this)}}Bn.prototype.startSide=Bn.prototype.endSide=0;Bn.prototype.point=!1;Bn.prototype.mapMode=st.TrackDel;let Wo=class Zh{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Zh(e,t,i)}};function Go(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Ua{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let o=i?this.to:this.from;for(let a=s,l=o.length;;){if(a==l)return a;let c=a+l>>1,h=o[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==a)return h>=0?a:l;h>=0?l=c:a=c+1}}between(e,t,i,s){for(let o=this.findIndex(t,-1e9,!0),a=this.findIndex(i,1e9,!1,o);o<a;o++)if(s(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],s=[],o=[],a=-1,l=-1;for(let c=0;c<this.value.length;c++){let h=this.value[c],f=this.from[c]+e,u=this.to[c]+e,m,T;if(f==u){let N=t.mapPos(f,h.startSide,h.mapMode);if(N==null||(m=T=N,h.startSide!=h.endSide&&(T=t.mapPos(f,h.endSide),T<m)))continue}else if(m=t.mapPos(f,h.startSide),T=t.mapPos(u,h.endSide),m>T||m==T&&h.startSide>0&&h.endSide<=0)continue;(T-m||h.endSide-h.startSide)<0||(a<0&&(a=m),h.point&&(l=Math.max(l,T-m)),i.push(h),s.push(m-a),o.push(T-a))}return{mapped:i.length?new Ua(s,o,i,l):null,pos:a}}}class Ae{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new Ae(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:o=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(i&&(t=t.slice().sort(Go)),this.isEmpty)return t.length?Ae.of(t):this;let l=new ef(this,null,-1).goto(0),c=0,h=[],f=new nn;for(;l.value||c<t.length;)if(c<t.length&&(l.from-t[c].from||l.startSide-t[c].value.startSide)>=0){let u=t[c++];f.addInner(u.from,u.to,u.value)||h.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(l.chunkIndex)<t[c].from)&&(!a||s>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&f.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!a||s>l.to||o<l.from||a(l.from,l.to,l.value))&&(f.addInner(l.from,l.to,l.value)||h.push(Wo.create(l.from,l.to,l.value))),l.next());return f.finishInner(this.nextLayer.isEmpty&&!h.length?Ae.empty:this.nextLayer.update({add:h,filter:a,filterFrom:s,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],c=this.chunk[a],h=e.touchesRange(l,l+c.length);if(h===!1)s=Math.max(s,c.maxPoint),t.push(c),i.push(e.mapPos(l));else if(h===!0){let{mapped:f,pos:u}=c.map(l,e);f&&(s=Math.max(s,f.maxPoint),t.push(f),i.push(u))}}let o=this.nextLayer.map(e);return t.length==0?o:new Ae(i,t,o||Ae.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let o=this.chunkPos[s],a=this.chunk[s];if(t>=o&&e<=o+a.length&&a.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return ji.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return ji.from(e).goto(t)}static compare(e,t,i,s,o=-1){let a=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=o),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=o),c=Cl(a,l,i),h=new yi(a,c,o),f=new yi(l,c,o);i.iterGaps((u,m,T)=>Ll(h,u,f,m,T,s)),i.empty&&i.length==0&&Ll(h,0,f,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=999999999);let o=e.filter(f=>!f.isEmpty&&t.indexOf(f)<0),a=t.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let l=Cl(o,a),c=new yi(o,l,0).goto(i),h=new yi(a,l,0).goto(i);for(;;){if(c.to!=h.to||!Vo(c.active,h.active)||c.point&&(!h.point||!c.point.eq(h.point)))return!1;if(c.to>s)return!0;c.next(),h.next()}}static spans(e,t,i,s,o=-1){let a=new yi(e,null,o).goto(t),l=t,c=a.openStart;for(;;){let h=Math.min(a.to,i);if(a.point){let f=a.activeForPoint(a.to),u=a.pointFrom<t?f.length+1:a.point.startSide<0?f.length:Math.min(f.length,c);s.point(l,h,a.point,f,u,a.pointRank),c=Math.min(a.openEnd(h),f.length)}else h>l&&(s.span(l,h,a.active,c),c=a.openEnd(h));if(a.to>i)return c+(a.point&&a.to>i?1:0);l=a.to,a.next()}}static of(e,t=!1){let i=new nn;for(let s of e instanceof Wo?[e]:t?mm(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return Ae.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=Ae.empty;s=s.nextLayer)t=new Ae(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Ae.empty=new Ae([],[],null,-1);function mm(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(Go(e,i)>0)return n.slice().sort(Go);e=i}return n}Ae.empty.nextLayer=Ae.empty;class nn{finishChunk(e){this.chunks.push(new Ua(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new nn)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ae.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ae.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Cl(n,e,t){let i=new Map;for(let o of n)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&i.set(o.chunk[a],o.chunkPos[a]);let s=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let l=i.get(o.chunk[a]);l!=null&&(t?t.mapPos(l):l)==o.chunkPos[a]&&!t?.touchesRange(l,l+o.chunk[a].length)&&s.add(o.chunk[a])}return s}class ef{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ji{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&s.push(new ef(a,t,i,o));return s.length==1?s[0]:new ji(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Qr(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Qr(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Qr(this.heap,0)}}}function Qr(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let s=n[i];if(i+1<n.length&&s.compare(n[i+1])>=0&&(s=n[i+1],i++),t.compare(s)<0)break;n[i]=t,n[e]=s,e=i}}class yi{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ji.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Ns(this.active,e),Ns(this.activeTo,e),Ns(this.activeRank,e),this.minActive=Il(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||s-this.activeTo[t])>0;)t++;bs(this.active,t,i),bs(this.activeTo,t,s),bs(this.activeRank,t,o),e&&bs(e,t,this.cursor.from),this.minActive=Il(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&Ns(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Ll(n,e,t,i,s,o){n.goto(e),t.goto(i);let a=i+s,l=i,c=i-e;for(;;){let h=n.to+c-t.to,f=h||n.endSide-t.endSide,u=f<0?n.to+c:t.to,m=Math.min(u,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Vo(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(l,m,n.point,t.point):m>l&&!Vo(n.active,t.active)&&o.compareRange(l,m,n.active,t.active),u>a)break;(h||n.openEnd!=t.openEnd)&&o.boundChange&&o.boundChange(u),l=u,f<=0&&n.next(),f>=0&&t.next()}}function Vo(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Ns(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function bs(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function Il(n,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||n[s].endSide-n[t].endSide)<0&&(t=s,i=e[s]);return t}function gi(n,e,t=n.length){let i=0;for(let s=0;s<t;)n.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=Qe(n,s));return i}function qo(n,e,t,i){for(let s=0,o=0;;){if(o>=e)return s;if(s==n.length)break;o+=n.charCodeAt(s)==9?t-o%t:1,s=Qe(n,s)}return i===!0?-1:n.length}const Yo="ͼ",wl=typeof Symbol>"u"?"__"+Yo:Symbol.for(Yo),jo=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Sn{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,l,c,h){let f=[],u=/^@(\w+)\b/.exec(a[0]),m=u&&u[1]=="keyframes";if(u&&l==null)return c.push(a[0]+";");for(let T in l){let N=l[T];if(/&/.test(T))o(T.split(/,\s*/).map(y=>a.map(p=>y.replace(/&/,p))).reduce((y,p)=>y.concat(p)),N,c);else if(N&&typeof N=="object"){if(!u)throw new RangeError("The value of a property ("+T+") should be a primitive value.");o(s(T),N,f,m)}else N!=null&&f.push(T.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+N+";")}(f.length||m)&&c.push((i&&!u&&!h?a.map(i):a).join(", ")+" {"+f.join(" ")+"}")}for(let a in e)o(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=xl[wl]||1;return xl[wl]=e+1,Yo+e.toString(36)}static mount(e,t,i){let s=e[jo],o=i&&i.nonce;s?o&&s.setNonce(o):s=new gm(e,o),s.mount(Array.isArray(t)?t:[t],e)}}let vl=new Map;class gm{constructor(e,t){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let o=vl.get(i);if(o)return e[jo]=o;this.sheet=new s.CSSStyleSheet,vl.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[jo]=this}mount(e,t){let i=this.sheet,s=0,o=0;for(let a=0;a<e.length;a++){let l=e[a],c=this.modules.indexOf(l);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,l),i)for(let h=0;h<l.rules.length;h++)i.insertRule(l.rules[h],s++)}else{for(;o<c;)s+=this.modules[o++].rules.length;s+=l.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let c=0;c<this.modules.length;c++)a+=this.modules[c].getRules()+`
`;this.styleTag.textContent=a;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var An={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xi={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Em=typeof navigator<"u"&&/Mac/.test(navigator.platform),Tm=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Je=0;Je<10;Je++)An[48+Je]=An[96+Je]=String(Je);for(var Je=1;Je<=24;Je++)An[Je+111]="F"+Je;for(var Je=65;Je<=90;Je++)An[Je]=String.fromCharCode(Je+32),Xi[Je]=String.fromCharCode(Je);for(var Zr in An)Xi.hasOwnProperty(Zr)||(Xi[Zr]=An[Zr]);function Sm(n){var e=Em&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Tm&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Xi:An)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function zi(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Xo(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Ks(n,e){if(!e.anchorNode)return!1;try{return Xo(n,e.anchorNode)}catch{return!1}}function ci(n){return n.nodeType==3?Wn(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Gi(n,e,t,i){return t?Dl(n,e,t,i,-1)||Dl(n,e,t,i,1):!1}function Hn(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function lr(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function Dl(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:Yt(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Hn(n)+(s<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?Yt(n):0}else return!1}}function Yt(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function as(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function Am(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function tf(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function Rm(n,e,t,i,s,o,a,l){let c=n.ownerDocument,h=c.defaultView||window;for(let f=n,u=!1;f&&!u;)if(f.nodeType==1){let m,T=f==c.body,N=1,y=1;if(T)m=Am(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(u=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let D=f.getBoundingClientRect();({scaleX:N,scaleY:y}=tf(f,D)),m={left:D.left,right:D.left+f.clientWidth*N,top:D.top,bottom:D.top+f.clientHeight*y}}let p=0,L=0;if(s=="nearest")e.top<m.top?(L=-(m.top-e.top+a),t>0&&e.bottom>m.bottom+L&&(L=e.bottom-m.bottom+L+a)):e.bottom>m.bottom&&(L=e.bottom-m.bottom+a,t<0&&e.top-L<m.top&&(L=-(m.top+L-e.top+a)));else{let D=e.bottom-e.top,G=m.bottom-m.top;L=(s=="center"&&D<=G?e.top+D/2-G/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-G+a)-m.top}if(i=="nearest"?e.left<m.left?(p=-(m.left-e.left+o),t>0&&e.right>m.right+p&&(p=e.right-m.right+p+o)):e.right>m.right&&(p=e.right-m.right+o,t<0&&e.left<m.left+p&&(p=-(m.left+p-e.left+o))):p=(i=="center"?e.left+(e.right-e.left)/2-(m.right-m.left)/2:i=="start"==l?e.left-o:e.right-(m.right-m.left)+o)-m.left,p||L)if(T)h.scrollBy(p,L);else{let D=0,G=0;if(L){let q=f.scrollTop;f.scrollTop+=L/y,G=(f.scrollTop-q)*y}if(p){let q=f.scrollLeft;f.scrollLeft+=p/N,D=(f.scrollLeft-q)*N}e={left:e.left-D,top:e.top-G,right:e.right-D,bottom:e.bottom-G},D&&Math.abs(D-p)<1&&(i="nearest"),G&&Math.abs(G-L)<1&&(s="nearest")}if(T)break;f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function _m(n){let e=n.ownerDocument,t,i;for(let s=n.parentNode;s&&!(s==e.body||t&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:i}}class Om{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Yt(t):0),i,Math.min(e.focusOffset,i?Yt(i):0))}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let jn=null;function nf(n){if(n.setActive)return n.setActive();if(jn)return n.focus(jn);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(jn==null?{get preventScroll(){return jn={preventScroll:!0},!0}}:void 0),!jn){jn=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],o=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let kl;function Wn(n,e,t=e){let i=kl||(kl=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function ii(n,e,t,i){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let o=new KeyboardEvent("keydown",s);o.synthetic=!0,n.dispatchEvent(o);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,n.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function Nm(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function sf(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function bm(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Yt(t));;)if(i){if(t.nodeType!=1)return!1;let s=t.childNodes[i-1];s.contentEditable=="false"?i--:(t=s,i=Yt(t))}else{if(t==n)return!0;i=Hn(t),t=t.parentNode}}function rf(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function of(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=Yt(t)}else if(t.parentNode&&!lr(t))i=Hn(t),t=t.parentNode;else return null}}function af(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!lr(t))i=Hn(t)+1,t=t.parentNode;else return null}}class nt{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new nt(e.parentNode,Hn(e),t)}static after(e,t){return new nt(e.parentNode,Hn(e)+1,t)}}const Ba=[];class ye{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,s=null,o;for(let a of this.children){if(a.flags&7){if(!a.dom&&(o=s?s.nextSibling:i.firstChild)){let l=ye.get(o);(!l||!l.parent&&l.canReuseDOM(a))&&a.reuseDOM(o)}a.sync(e,t),a.flags&=-8}if(o=s?s.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&o!=a.dom&&(t.written=!0),a.dom.parentNode==i)for(;o&&o!=a.dom;)o=Pl(o);else i.insertBefore(a.dom,o);s=a.dom}for(o=s?s.nextSibling:i.firstChild,o&&t&&t.node==i&&(t.written=!0);o;)o=Pl(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=Yt(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;s==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?s=-1:s=1),e=o}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ye.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,o=0;;s++){let a=this.children[s];if(a.dom==i)return o;o+=a.length+a.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,o=-1,a=-1,l=-1;for(let c=0,h=i,f=i;c<this.children.length;c++){let u=this.children[c],m=h+u.length;if(h<e&&m>t)return u.domBoundsAround(e,t,h);if(m>=e&&s==-1&&(s=c,o=h),h>t&&u.dom.parentNode==this.dom){a=c,l=f;break}f=m,h=m+u.breakAfter}return{from:o,to:l<0?i+this.length:l,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Ba){this.markDirty();for(let s=e;s<t;s++){let o=this.children[s];o.parent==this&&i.indexOf(o)<0&&o.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new lf(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,s,o,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ye.prototype.breakAfter=0;function Pl(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class lf{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function cf(n,e,t,i,s,o,a,l,c){let{children:h}=n,f=h.length?h[e]:null,u=o.length?o[o.length-1]:null,m=u?u.breakAfter:a;if(!(e==i&&f&&!a&&!m&&o.length<2&&f.merge(t,s,o.length?u:null,t==0,l,c))){if(i<h.length){let T=h[i];T&&(s<T.length||T.breakAfter&&u?.breakAfter)?(e==i&&(T=T.split(s),s=0),!m&&u&&T.merge(0,s,u,!0,0,c)?o[o.length-1]=T:((s||T.children.length&&!T.children[0].length)&&T.merge(0,s,null,!1,0,c),o.push(T))):T?.breakAfter&&(u?u.breakAfter=1:a=1),i++}for(f&&(f.breakAfter=a,t>0&&(!a&&o.length&&f.merge(t,f.length,o[0],!1,l,0)?f.breakAfter=o.shift().breakAfter:(t<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(t,f.length,null,!1,l,0),e++));e<i&&o.length;)if(h[i-1].become(o[o.length-1]))i--,o.pop(),c=o.length?0:l;else if(h[e].become(o[0]))e++,o.shift(),l=o.length?0:c;else break;!o.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,c)&&e--,(e<i||o.length)&&n.replaceChildren(e,i,o)}}function hf(n,e,t,i,s,o){let a=n.childCursor(),{i:l,off:c}=a.findPos(t,1),{i:h,off:f}=a.findPos(e,-1),u=e-t;for(let m of i)u+=m.length;n.length+=u,cf(n,h,f,l,c,i,0,s,o)}let ft=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},zo=typeof document<"u"?document:{documentElement:{style:{}}};const Ko=/Edge\/(\d+)/.exec(ft.userAgent),ff=/MSIE \d/.test(ft.userAgent),$o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ft.userAgent),Mr=!!(ff||$o||Ko),Ml=!Mr&&/gecko\/(\d+)/i.test(ft.userAgent),eo=!Mr&&/Chrome\/(\d+)/.exec(ft.userAgent),Fl="webkitFontSmoothing"in zo.documentElement.style,uf=!Mr&&/Apple Computer/.test(ft.vendor),Ul=uf&&(/Mobile\/\w+/.test(ft.userAgent)||ft.maxTouchPoints>2);var te={mac:Ul||/Mac/.test(ft.platform),windows:/Win/.test(ft.platform),linux:/Linux|X11/.test(ft.platform),ie:Mr,ie_version:ff?zo.documentMode||6:$o?+$o[1]:Ko?+Ko[1]:0,gecko:Ml,gecko_version:Ml?+(/Firefox\/(\d+)/.exec(ft.userAgent)||[0,0])[1]:0,chrome:!!eo,chrome_version:eo?+eo[1]:0,ios:Ul,android:/Android\b/.test(ft.userAgent),webkit:Fl,safari:uf,webkit_version:Fl?+(/\bAppleWebKit\/(\d+)/.exec(ft.userAgent)||[0,0])[1]:0,tabSize:zo.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const ym=256;class xt extends ye{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof xt)||this.length-(t-e)+i.length>ym||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new xt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new nt(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Cm(this.dom,e,t)}}class sn extends ye{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if(sf(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,s,o,a){return i&&(!(i instanceof sn&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&a<=0)?!1:(hf(this,e,t,i?i.children.slice():[],o-1,a-1),this.markDirty(),!0)}split(e){let t=[],i=0,s=-1,o=0;for(let l of this.children){let c=i+l.length;c>e&&t.push(i<e?l.split(e-i):l),s<0&&i>=e&&(s=o),i=c,o++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new sn(this.mark,t,a)}domAtPos(e){return df(this,e)}coordsAt(e,t){return mf(this,e,t)}}function Cm(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let s=e,o=e,a=0;e==0&&t<0||e==i&&t>=0?te.chrome||te.gecko||(e?(s--,a=1):o<i&&(o++,a=-1)):t<0?s--:o<i&&o++;let l=Wn(n,s,o).getClientRects();if(!l.length)return null;let c=l[(a?a<0:t>=0)?0:l.length-1];return te.safari&&!a&&c.width==0&&(c=Array.prototype.find.call(l,h=>h.width)||c),a?as(c,a<0):c||null}class mn extends ye{static create(e,t,i){return new mn(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=mn.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,s,o,a){return i&&(!(i instanceof mn)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof mn&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Re.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):Re.empty}domAtPos(e){return(this.length?e==0:this.side>0)?nt.before(this.dom):nt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let l=a?s.length-1:0;o=s[l],!(e>0?l==0:l==s.length-1||o.top<o.bottom);l+=a?-1:1);return as(o,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class hi extends ye{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof hi&&e.side==this.side}split(){return new hi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?nt.before(this.dom):nt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Re.empty}get isHidden(){return!0}}xt.prototype.children=mn.prototype.children=hi.prototype.children=Ba;function df(n,e){let t=n.dom,{children:i}=n,s=0;for(let o=0;s<i.length;s++){let a=i[s],l=o+a.length;if(!(l==o&&a.getSide()<=0)){if(e>o&&e<l&&a.dom.parentNode==t)return a.domAtPos(e-o);if(e<=o)break;o=l}}for(let o=s;o>0;o--){let a=i[o-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let o=s;o<i.length;o++){let a=i[o];if(a.dom.parentNode==t)return a.domAtPos(0)}return new nt(t,0)}function pf(n,e,t){let i,{children:s}=n;t>0&&e instanceof sn&&s.length&&(i=s[s.length-1])instanceof sn&&i.mark.eq(e.mark)?pf(i,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function mf(n,e,t){let i=null,s=-1,o=null,a=-1;function l(h,f){for(let u=0,m=0;u<h.children.length&&m<=f;u++){let T=h.children[u],N=m+T.length;N>=f&&(T.children.length?l(T,f-m):(!o||o.isHidden&&t>0)&&(N>f||m==N&&T.getSide()>0)?(o=T,a=f-m):(m<f||m==N&&T.getSide()<0&&!T.isHidden)&&(i=T,s=f-m)),m=N}}l(n,e);let c=(t<0?i:o)||i||o;return c?c.coordsAt(Math.max(0,c==i?s:a),t):Lm(n)}function Lm(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=ci(e);return t[t.length-1]||null}function Jo(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const Bl=Object.create(null);function cr(n,e,t){if(n==e)return!0;n||(n=Bl),e||(e=Bl);let i=Object.keys(n),s=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let o of i)if(o!=t&&(s.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function Qo(n,e,t){let i=!1;if(e)for(let s in e)t&&s in t||(i=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(i=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return i}function Im(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class on{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var rt=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(rt||(rt={}));class ae extends Bn{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new ls(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Rn(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:o,end:a}=gf(e,t);i=(o?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new Rn(e,i,s,t,e.widget||null,!0)}static line(e){return new cs(e)}static set(e,t=!1){return Ae.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ae.none=Ae.empty;class ls extends ae{constructor(e){let{start:t,end:i}=gf(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof ls&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&cr(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ls.prototype.point=!1;class cs extends ae{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof cs&&this.spec.class==e.spec.class&&cr(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}cs.prototype.mapMode=st.TrackBefore;cs.prototype.point=!0;class Rn extends ae{constructor(e,t,i,s,o,a){super(t,i,o,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?st.TrackBefore:st.TrackAfter:st.TrackDel}get type(){return this.startSide!=this.endSide?rt.WidgetRange:this.startSide<=0?rt.WidgetBefore:rt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Rn&&wm(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Rn.prototype.point=!0;function gf(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function wm(n,e){return n==e||!!(n&&e&&n.compare(e))}function $s(n,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class Be extends ye{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,o,a){if(i){if(!(i instanceof Be))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),hf(this,e,t,i?i.children.slice():[],o,a),!0}split(e){let t=new Be;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){cr(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){pf(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Jo(t,this.attrs||{})),i&&(this.attrs=Jo({class:i},this.attrs||{}))}domAtPos(e){return df(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(sf(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Qo(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&ye.get(s)instanceof sn;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=ye.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!te.ios||!this.children.some(o=>o instanceof xt))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof xt)||/[^ -~]/.test(i.text))return null;let s=ci(i.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=mf(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:s}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-s.lineHeight)<2&&s.textHeight<o){let a=(o-s.textHeight)/2;return{top:i.top+a,bottom:i.bottom-a,left:i.left,right:i.left}}}return i}become(e){return e instanceof Be&&this.children.length==0&&e.children.length==0&&cr(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let o=e.children[i],a=s+o.length;if(a>=t){if(o instanceof Be)return o;if(a>t)break}s=a+o.breakAfter}return null}}class tn extends ye{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,o,a){return i&&(!(i instanceof tn)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?nt.before(this.dom):nt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new tn(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Ba}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Re.empty}domBoundsAround(){return null}become(e){return e instanceof tn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof Zo?null:as(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class Zo extends on{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Vi{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof tn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Be),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ys(new hi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof tn)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(ys(new xt(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,o,a){if(this.disallowBlockEffectsFor[a]&&i instanceof Rn){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Rn)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new tn(i.widget||fi.block,l,i));else{let c=mn.create(i.widget||fi.inline,l,l?0:i.startSide),h=this.atCursorPos&&!c.isEditable&&o<=s.length&&(e<t||i.startSide>0),f=!c.isEditable&&(e<t||o>s.length||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!h&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),h&&(u.append(ys(new hi(1),s),o),o=s.length+Math.max(0,o-s.length)),u.append(ys(c,s),o),this.atCursorPos=f,this.pendingBuffer=f?e<t||o>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,s,o){let a=new Vi(e,t,i,o);return a.openEnd=Ae.spans(s,t,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function ys(n,e){for(let t of e)n=new sn(t,[n],n.length);return n}class fi extends on{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}fi.inline=new fi("span");fi.block=new fi("div");var xe=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(xe||(xe={}));const Gn=xe.LTR,Ha=xe.RTL;function Ef(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const xm=Ef("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),vm=Ef("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ea=Object.create(null),Pt=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);ea[e]=t,ea[t]=-e}function Tf(n){return n<=247?xm[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?vm[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const Dm=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class gn{get dir(){return this.level%2?Ha:Gn}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,s){let o=-1;for(let a=0;a<e.length;a++){let l=e[a];if(l.from<=t&&l.to>=t){if(l.level==i)return a;(o<0||(s!=0?s<0?l.from<t:l.to>t:e[o].level>l.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}function Sf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],s=e[t];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!Sf(i.inner,s.inner))return!1}return!0}const be=[];function km(n,e,t,i,s){for(let o=0;o<=i.length;o++){let a=o?i[o-1].to:e,l=o<i.length?i[o].from:t,c=o?256:s;for(let h=a,f=c,u=c;h<l;h++){let m=Tf(n.charCodeAt(h));m==512?m=f:m==8&&u==4&&(m=16),be[h]=m==4?2:m,m&7&&(u=m),f=m}for(let h=a,f=c,u=c;h<l;h++){let m=be[h];if(m==128)h<l-1&&f==be[h+1]&&f&24?m=be[h]=f:be[h]=256;else if(m==64){let T=h+1;for(;T<l&&be[T]==64;)T++;let N=h&&f==8||T<t&&be[T]==8?u==1?1:8:256;for(let y=h;y<T;y++)be[y]=N;h=T-1}else m==8&&u==1&&(be[h]=1);f=m,m&7&&(u=m)}}}function Pm(n,e,t,i,s){let o=s==1?2:1;for(let a=0,l=0,c=0;a<=i.length;a++){let h=a?i[a-1].to:e,f=a<i.length?i[a].from:t;for(let u=h,m,T,N;u<f;u++)if(T=ea[m=n.charCodeAt(u)])if(T<0){for(let y=l-3;y>=0;y-=3)if(Pt[y+1]==-T){let p=Pt[y+2],L=p&2?s:p&4?p&1?o:s:0;L&&(be[u]=be[Pt[y]]=L),l=y;break}}else{if(Pt.length==189)break;Pt[l++]=u,Pt[l++]=m,Pt[l++]=c}else if((N=be[u])==2||N==1){let y=N==s;c=y?0:1;for(let p=l-3;p>=0;p-=3){let L=Pt[p+2];if(L&2)break;if(y)Pt[p+2]|=2;else{if(L&4)break;Pt[p+2]|=4}}}}}function Mm(n,e,t,i){for(let s=0,o=i;s<=t.length;s++){let a=s?t[s-1].to:n,l=s<t.length?t[s].from:e;for(let c=a;c<l;){let h=be[c];if(h==256){let f=c+1;for(;;)if(f==l){if(s==t.length)break;f=t[s++].to,l=s<t.length?t[s].from:e}else if(be[f]==256)f++;else break;let u=o==1,m=(f<e?be[f]:i)==1,T=u==m?u?1:2:i;for(let N=f,y=s,p=y?t[y-1].to:n;N>c;)N==p&&(N=t[--y].from,p=y?t[y-1].to:n),be[--N]=T;c=f}else o=h,c++}}}function ta(n,e,t,i,s,o,a){let l=i%2?2:1;if(i%2==s%2)for(let c=e,h=0;c<t;){let f=!0,u=!1;if(h==o.length||c<o[h].from){let y=be[c];y!=l&&(f=!1,u=y==16)}let m=!f&&l==1?[]:null,T=f?i:i+1,N=c;e:for(;;)if(h<o.length&&N==o[h].from){if(u)break e;let y=o[h];if(!f)for(let p=y.to,L=h+1;;){if(p==t)break e;if(L<o.length&&o[L].from==p)p=o[L++].to;else{if(be[p]==l)break e;break}}if(h++,m)m.push(y);else{y.from>c&&a.push(new gn(c,y.from,T));let p=y.direction==Gn!=!(T%2);na(n,p?i+1:i,s,y.inner,y.from,y.to,a),c=y.to}N=y.to}else{if(N==t||(f?be[N]!=l:be[N]==l))break;N++}m?ta(n,c,N,i+1,s,m,a):c<N&&a.push(new gn(c,N,T)),c=N}else for(let c=t,h=o.length;c>e;){let f=!0,u=!1;if(!h||c>o[h-1].to){let y=be[c-1];y!=l&&(f=!1,u=y==16)}let m=!f&&l==1?[]:null,T=f?i:i+1,N=c;e:for(;;)if(h&&N==o[h-1].to){if(u)break e;let y=o[--h];if(!f)for(let p=y.from,L=h;;){if(p==e)break e;if(L&&o[L-1].to==p)p=o[--L].from;else{if(be[p-1]==l)break e;break}}if(m)m.push(y);else{y.to<c&&a.push(new gn(y.to,c,T));let p=y.direction==Gn!=!(T%2);na(n,p?i+1:i,s,y.inner,y.from,y.to,a),c=y.from}N=y.from}else{if(N==e||(f?be[N-1]!=l:be[N-1]==l))break;N--}m?ta(n,N,c,i+1,s,m,a):N<c&&a.push(new gn(N,c,T)),c=N}}function na(n,e,t,i,s,o,a){let l=e%2?2:1;km(n,s,o,i,l),Pm(n,s,o,i,l),Mm(s,o,i,l),ta(n,s,o,e,t,i,a)}function Fm(n,e,t){if(!n)return[new gn(0,0,e==Ha?1:0)];if(e==Gn&&!t.length&&!Dm.test(n))return Af(n.length);if(t.length)for(;n.length>be.length;)be[be.length]=256;let i=[],s=e==Gn?0:1;return na(n,s,s,t,0,n.length,i),i}function Af(n){return[new gn(0,n,0)]}let Rf="";function Um(n,e,t,i,s){var o;let a=i.head-n.from,l=gn.find(e,a,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),c=e[l],h=c.side(s,t);if(a==h){let m=l+=s?1:-1;if(m<0||m>=e.length)return null;c=e[l=m],a=c.side(!s,t),h=c.side(s,t)}let f=Qe(n.text,a,c.forward(s,t));(f<c.from||f>c.to)&&(f=h),Rf=n.text.slice(Math.min(a,f),Math.max(a,f));let u=l==(s?e.length-1:0)?null:e[l+(s?1:-1)];return u&&f==h&&u.level+(s?0:1)<c.level?B.cursor(u.side(!s,t)+n.from,u.forward(s,t)?1:-1,u.level):B.cursor(f+n.from,c.forward(s,t)?-1:1,c.level)}function Bm(n,e,t){for(let i=e;i<t;i++){let s=Tf(n.charCodeAt(i));if(s==1)return Gn;if(s==2||s==4)return Ha}return Gn}const _f=ne.define(),Of=ne.define(),Nf=ne.define(),bf=ne.define(),ia=ne.define(),yf=ne.define(),Cf=ne.define(),Wa=ne.define(),Ga=ne.define(),Lf=ne.define({combine:n=>n.some(e=>e)}),If=ne.define({combine:n=>n.some(e=>e)}),wf=ne.define();class si{constructor(e,t="nearest",i="nearest",s=5,o=5,a=!1){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=o,this.isSnapshot=a}map(e){return e.empty?this:new si(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new si(B.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Cs=me.define({map:(n,e)=>n.map(e)}),xf=me.define();function dt(n,e,t){let i=n.facet(bf);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const en=ne.define({combine:n=>n.length?n[0]:!0});let Hm=0;const ki=ne.define();class Fe{constructor(e,t,i,s,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=s,this.extension=o(this)}static define(e,t){const{eventHandlers:i,eventObservers:s,provide:o,decorations:a}=t||{};return new Fe(Hm++,e,i,s,l=>{let c=[ki.of(l)];return a&&c.push(Ki.of(h=>{let f=h.plugin(l);return f?a(f):ae.none})),o&&c.push(o(l)),c})}static fromClass(e,t){return Fe.define(i=>new e(i),t)}}class to{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(dt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){dt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){dt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const vf=ne.define(),Va=ne.define(),Ki=ne.define(),Df=ne.define(),qa=ne.define(),kf=ne.define();function Hl(n,e){let t=n.state.facet(kf);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),s=[];return Ae.spans(i,e.from,e.to,{point(){},span(o,a,l,c){let h=o-e.from,f=a-e.from,u=s;for(let m=l.length-1;m>=0;m--,c--){let T=l[m].spec.bidiIsolate,N;if(T==null&&(T=Bm(e.text,h,f)),c>0&&u.length&&(N=u[u.length-1]).to==h&&N.direction==T)N.to=f,u=N.inner;else{let y={from:h,to:f,direction:T,inner:[]};u.push(y),u=y.inner}}}}),s}const Pf=ne.define();function Ya(n){let e=0,t=0,i=0,s=0;for(let o of n.state.facet(Pf)){let a=o(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(i=Math.max(i,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:i,bottom:s}}const Pi=ne.define();class yt{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new yt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,o=0,a=0,l=0;;s++){let c=s==e.length?null:e[s],h=a-l,f=c?c.fromB:1e9;for(;o<t.length&&t[o]<f;){let u=t[o],m=t[o+1],T=Math.max(l,u),N=Math.min(f,m);if(T<=N&&new yt(T+h,N+h,T,N).addToSet(i),m>f)break;o+=2}if(!c)return i;new yt(c.fromA,c.toA,c.fromB,c.toB).addToSet(i),a=c.toA,l=c.toB}}}class hr{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ge.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let s=[];this.changes.iterChangedRanges((o,a,l,c)=>s.push(new yt(o,a,l,c))),this.changedRanges=s}static create(e,t,i){return new hr(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Wl extends ye{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ae.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Be],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new yt(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:f})=>f<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!Xm(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let o=s>-1?Gm(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:f}=this.hasComposition;i=new yt(h,f,e.changes.mapPos(h,-1),e.changes.mapPos(f,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(te.ie||te.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,l=this.updateDeco(),c=Ym(a,l,e.changes);return i=yt.extendWithRanges(i,c),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=te.chrome||te.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof tn&&a.widget instanceof Zo&&o.push(a.dom);s.updateGaps(o)}updateChildren(e,t,i){let s=i?i.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let a=s.length-1;;a--){let l=a>=0?s[a]:null;if(!l)break;let{fromA:c,toA:h,fromB:f,toB:u}=l,m,T,N,y;if(i&&i.range.fromB<u&&i.range.toB>f){let q=Vi.build(this.view.state.doc,f,i.range.fromB,this.decorations,this.dynamicDecorationMap),H=Vi.build(this.view.state.doc,i.range.toB,u,this.decorations,this.dynamicDecorationMap);T=q.breakAtStart,N=q.openStart,y=H.openEnd;let M=this.compositionView(i);H.breakAtStart?M.breakAfter=1:H.content.length&&M.merge(M.length,M.length,H.content[0],!1,H.openStart,0)&&(M.breakAfter=H.content[0].breakAfter,H.content.shift()),q.content.length&&M.merge(0,0,q.content[q.content.length-1],!0,0,q.openEnd)&&q.content.pop(),m=q.content.concat(M).concat(H.content)}else({content:m,breakAtStart:T,openStart:N,openEnd:y}=Vi.build(this.view.state.doc,f,u,this.decorations,this.dynamicDecorationMap));let{i:p,off:L}=o.findPos(h,1),{i:D,off:G}=o.findPos(c,-1);cf(this,D,G,p,L,m,T,N,y)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(xf)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new xt(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new sn(s,[t],t.length);let i=new Be;return i.append(t,0),i}fixCompositionDOM(e){let t=(o,a)=>{a.flags|=8|(a.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(a);let l=ye.get(o);l&&l!=a&&(l.dom=null),a.setDOM(o)},i=this.childPos(e.range.fromB,1),s=this.children[i.i];t(e.line,s);for(let o=e.marks.length-1;o>=-1;o--)i=s.childPos(i.off,1),s=s.children[i.i],t(o>=0?e.marks[o].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,s=i==this.dom,o=!s&&!(this.view.state.facet(en)||this.dom.tabIndex>-1)&&Ks(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(s||t||o))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(l.anchor)),h=l.empty?c:this.moveToLine(this.domAtPos(l.head));if(te.gecko&&l.empty&&!this.hasComposition&&Wm(c)){let u=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(u,c.node.childNodes[c.offset]||null)),c=h=new nt(u,0),a=!0}let f=this.view.observer.selectionRange;(a||!f.focusNode||(!Gi(c.node,c.offset,f.anchorNode,f.anchorOffset)||!Gi(h.node,h.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,l))&&(this.view.observer.ignore(()=>{te.android&&te.chrome&&this.dom.contains(f.focusNode)&&jm(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=zi(this.view.root);if(u)if(l.empty){if(te.gecko){let m=Vm(c.node,c.offset);if(m&&m!=3){let T=(m==1?of:af)(c.node,c.offset);T&&(c=new nt(T.node,T.offset))}}u.collapse(c.node,c.offset),l.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=l.bidiLevel)}else if(u.extend){u.collapse(c.node,c.offset);try{u.extend(h.node,h.offset)}catch{}}else{let m=document.createRange();l.anchor>l.head&&([c,h]=[h,c]),m.setEnd(h.node,h.offset),m.setStart(c.node,c.offset),u.removeAllRanges(),u.addRange(m)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(c,h)),this.impreciseAnchor=c.precise?null:new nt(f.anchorNode,f.anchorOffset),this.impreciseHead=h.precise?null:new nt(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Gi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=zi(e.root),{anchorNode:s,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let a=Be.find(this,t.head);if(!a)return;let l=a.posAtStart;if(t.head==l||t.head==l+a.length)return;let c=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!c||!h||c.bottom>h.top)return;let f=this.domAtPos(t.head+t.assoc);i.collapse(f.node,f.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&i.collapse(s,o)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let s=e.offset;!i&&s<t.childNodes.length;s++){let o=ye.get(t.childNodes[s]);o instanceof Be&&(i=o.domAtPos(0))}for(let s=e.offset-1;!i&&s>=0;s--){let o=ye.get(t.childNodes[s]);o instanceof Be&&(i=o.domAtPos(o.length))}return i?new nt(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=ye.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof Be)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,s=0;for(let o=this.length,a=this.children.length-1;a>=0;a--){let l=this.children[a],c=o-l.breakAfter,h=c-l.length;if(c<e)break;if(h<=e&&(h<e||l.covers(-1))&&(c>e||l.covers(1))&&(!i||l instanceof Be&&!(i instanceof Be&&t>=0)))i=l,s=h;else if(i&&h==e&&c==e&&l instanceof tn&&Math.abs(t)<2){if(l.deco.startSide<0)break;a&&(i=null)}o=h}return i?i.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),s=this.children[t];if(!(s instanceof Be))return null;for(;s.children.length;){let{i:l,off:c}=s.childPos(i,1);for(;;l++){if(l==s.children.length)return null;if((s=s.children[l]).length)break}i=c}if(!(s instanceof xt))return null;let o=Qe(s.text,i);if(o==i)return null;let a=Wn(s.dom,i,o).getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(l==a.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,c=this.view.textDirection==xe.LTR;for(let h=0,f=0;f<this.children.length;f++){let u=this.children[f],m=h+u.length;if(m>s)break;if(h>=i){let T=u.dom.getBoundingClientRect();if(t.push(T.height),a){let N=u.dom.lastChild,y=N?ci(N):[];if(y.length){let p=y[y.length-1],L=c?p.right-T.left:T.right-p.left;L>l&&(l=L,this.minWidth=o,this.minWidthFrom=h,this.minWidthTo=m)}}}h=m+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?xe.RTL:xe.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Be){let a=o.measureTextSize();if(a)return a}let e=document.createElement("div"),t,i,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=ci(e.firstChild)[0];t=e.getBoundingClientRect().height,i=o?o.width/27:7,s=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new lf(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let o=s==t.viewports.length?null:t.viewports[s],a=o?o.from-1:this.length;if(a>i){let l=(t.lineBlockAt(a).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(ae.replace({widget:new Zo(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!o)break;i=o.to+1}return ae.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Ki).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,s=this.view.state.facet(Df).map((o,a)=>{let l=typeof o=="function";return l&&(i=!0),l?o(this.view):o});for(s.length&&(this.dynamicDecorationMap[e++]=i,t.push(Ae.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(wf))try{if(h(this.view,e.range,e))return!0}catch(f){dt(this.view.state,f,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let o=Ya(this.view),a={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:l,offsetHeight:c}=this.view.scrollDOM;Rm(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==xe.LTR)}}function Wm(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Mf(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=of(t.focusNode,t.focusOffset),s=af(t.focusNode,t.focusOffset),o=i||s;if(s&&i&&s.node!=i.node){let l=ye.get(s.node);if(!l||l instanceof xt&&l.text!=s.node.nodeValue)o=s;else if(n.docView.lastCompositionAfterCursor){let c=ye.get(i.node);!c||c instanceof xt&&c.text!=i.node.nodeValue||(o=s)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let a=e-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}function Gm(n,e,t){let i=Mf(n,t);if(!i)return null;let{node:s,from:o,to:a}=i,l=s.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(i.from,i.to)!=l)return null;let c=e.invertedDesc,h=new yt(c.mapPos(o),c.mapPos(a),o,a),f=[];for(let u=s.parentNode;;u=u.parentNode){let m=ye.get(u);if(m instanceof sn)f.push({node:u,deco:m.mark});else{if(m instanceof Be||u.nodeName=="DIV"&&u.parentNode==n.contentDOM)return{range:h,text:s,marks:f,line:u};if(u!=n.contentDOM)f.push({node:u,deco:new ls({inclusive:!0,attributes:Im(u),tagName:u.tagName.toLowerCase()})});else return null}}}function Vm(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let qm=class{constructor(){this.changes=[]}compareRange(e,t){$s(e,t,this.changes)}comparePoint(e,t){$s(e,t,this.changes)}boundChange(e){$s(e,e,this.changes)}};function Ym(n,e,t){let i=new qm;return Ae.compare(n,e,t,i),i.changes}function jm(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Xm(n,e){let t=!1;return e&&n.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(t=!0)}),t}function zm(n,e,t=1){let i=n.charCategorizer(e),s=n.doc.lineAt(e),o=e-s.from;if(s.length==0)return B.cursor(e);o==0?t=1:o==s.length&&(t=-1);let a=o,l=o;t<0?a=Qe(s.text,o,!1):l=Qe(s.text,o);let c=i(s.text.slice(a,l));for(;a>0;){let h=Qe(s.text,a,!1);if(i(s.text.slice(h,a))!=c)break;a=h}for(;l<s.length;){let h=Qe(s.text,l);if(i(s.text.slice(l,h))!=c)break;l=h}return B.range(a+s.from,l+s.from)}function Km(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function $m(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function no(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Gl(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function Vl(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function sa(n,e,t){let i,s,o,a,l=!1,c,h,f,u;for(let N=n.firstChild;N;N=N.nextSibling){let y=ci(N);for(let p=0;p<y.length;p++){let L=y[p];s&&no(s,L)&&(L=Gl(Vl(L,s.bottom),s.top));let D=Km(e,L),G=$m(t,L);if(D==0&&G==0)return N.nodeType==3?ql(N,e,t):sa(N,e,t);if(!i||a>G||a==G&&o>D){i=N,s=L,o=D,a=G;let q=G?t<L.top?-1:1:D?e<L.left?-1:1:0;l=!q||(q>0?p<y.length-1:p>0)}D==0?t>L.bottom&&(!f||f.bottom<L.bottom)?(c=N,f=L):t<L.top&&(!u||u.top>L.top)&&(h=N,u=L):f&&no(f,L)?f=Vl(f,L.bottom):u&&no(u,L)&&(u=Gl(u,L.top))}}if(f&&f.bottom>=t?(i=c,s=f):u&&u.top<=t&&(i=h,s=u),!i)return{node:n,offset:0};let m=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return ql(i,m,t);if(l&&i.contentEditable!="false")return sa(i,m,t);let T=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:T}}function ql(n,e,t){let i=n.nodeValue.length,s=-1,o=1e9,a=0;for(let l=0;l<i;l++){let c=Wn(n,l,l+1).getClientRects();for(let h=0;h<c.length;h++){let f=c[h];if(f.top==f.bottom)continue;a||(a=e-f.left);let u=(f.top>t?f.top-t:t-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&u<o){let m=e>=(f.left+f.right)/2,T=m;if((te.chrome||te.gecko)&&Wn(n,l).getBoundingClientRect().left==f.right&&(T=!m),u<=0)return{node:n,offset:l+(T?1:0)};s=l+(T?1:0),o=u}}}return{node:n,offset:s>-1?s:a>0?n.nodeValue.length:0}}function Ff(n,e,t,i=-1){var s,o;let a=n.contentDOM.getBoundingClientRect(),l=a.top+n.viewState.paddingTop,c,{docHeight:h}=n.viewState,{x:f,y:u}=e,m=u-l;if(m<0)return 0;if(m>h)return n.state.doc.length;for(let q=n.viewState.heightOracle.textHeight/2,H=!1;c=n.elementAtHeight(m),c.type!=rt.Text;)for(;m=i>0?c.bottom+q:c.top-q,!(m>=0&&m<=h);){if(H)return t?null:0;H=!0,i=-i}u=l+m;let T=c.from;if(T<n.viewport.from)return n.viewport.from==0?0:t?null:Yl(n,a,c,f,u);if(T>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:Yl(n,a,c,f,u);let N=n.dom.ownerDocument,y=n.root.elementFromPoint?n.root:N,p=y.elementFromPoint(f,u);p&&!n.contentDOM.contains(p)&&(p=null),p||(f=Math.max(a.left+1,Math.min(a.right-1,f)),p=y.elementFromPoint(f,u),p&&!n.contentDOM.contains(p)&&(p=null));let L,D=-1;if(p&&((s=n.docView.nearest(p))===null||s===void 0?void 0:s.isEditable)!=!1){if(N.caretPositionFromPoint){let q=N.caretPositionFromPoint(f,u);q&&({offsetNode:L,offset:D}=q)}else if(N.caretRangeFromPoint){let q=N.caretRangeFromPoint(f,u);q&&({startContainer:L,startOffset:D}=q,(!n.contentDOM.contains(L)||te.safari&&Jm(L,D,f)||te.chrome&&Qm(L,D,f))&&(L=void 0))}L&&(D=Math.min(Yt(L),D))}if(!L||!n.docView.dom.contains(L)){let q=Be.find(n.docView,T);if(!q)return m>c.top+c.height/2?c.to:c.from;({node:L,offset:D}=sa(q.dom,f,u))}let G=n.docView.nearest(L);if(!G)return null;if(G.isWidget&&((o=G.dom)===null||o===void 0?void 0:o.nodeType)==1){let q=G.dom.getBoundingClientRect();return e.y<q.top||e.y<=q.bottom&&e.x<=(q.left+q.right)/2?G.posAtStart:G.posAtEnd}else return G.localPosFromDOM(L,D)+G.posAtStart}function Yl(n,e,t,i,s){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,c=Math.floor((s-t.top-(n.defaultLineHeight-l)*.5)/l);o+=c*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+qo(a,o,n.state.tabSize)}function Jm(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let s=n.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Wn(n,i-1,i).getBoundingClientRect().left>t}function Qm(n,e,t){if(e!=0)return!1;for(let s=n;;){let o=s.parentNode;if(!o||o.nodeType!=1||o.firstChild!=s)return!1;if(o.classList.contains("cm-line"))break;s=o}let i=n.nodeType==1?n.getBoundingClientRect():Wn(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function ra(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==rt.Text))return i}return t}function Zm(n,e,t,i){let s=ra(n,e.head),o=!i||s.type!=rt.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(o){let a=n.dom.getBoundingClientRect(),l=n.textDirectionAt(s.from),c=n.posAtCoords({x:t==(l==xe.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(c!=null)return B.cursor(c,t?-1:1)}return B.cursor(t?s.to:s.from,t?-1:1)}function jl(n,e,t,i){let s=n.state.doc.lineAt(e.head),o=n.bidiSpans(s),a=n.textDirectionAt(s.from);for(let l=e,c=null;;){let h=Um(s,o,a,l,t),f=Rf;if(!h){if(s.number==(t?n.state.doc.lines:1))return l;f=`
`,s=n.state.doc.line(s.number+(t?1:-1)),o=n.bidiSpans(s),h=n.visualLineSide(s,!t)}if(c){if(!c(f))return l}else{if(!i)return h;c=i(f)}l=h}}function eg(n,e,t){let i=n.state.charCategorizer(e),s=i(t);return o=>{let a=i(o);return s==De.Space&&(s=a),s==a}}function tg(n,e,t,i){let s=e.head,o=t?1:-1;if(s==(t?n.state.doc.length:0))return B.cursor(s,e.assoc);let a=e.goalColumn,l,c=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(s,e.assoc||-1),f=n.documentTop;if(h)a==null&&(a=h.left-c.left),l=o<0?h.top:h.bottom;else{let T=n.viewState.lineBlockAt(s);a==null&&(a=Math.min(c.right-c.left,n.defaultCharacterWidth*(s-T.from))),l=(o<0?T.top:T.bottom)+f}let u=c.left+a,m=i??n.viewState.heightOracle.textHeight>>1;for(let T=0;;T+=10){let N=l+(m+T)*o,y=Ff(n,{x:u,y:N},!1,o);if(N<c.top||N>c.bottom||(o<0?y<s:y>s)){let p=n.docView.coordsForChar(y),L=!p||N<p.top?-1:1;return B.cursor(y,L,void 0,a)}}}function Js(n,e,t){for(;;){let i=0;for(let s of n)s.between(e-1,e+1,(o,a,l)=>{if(e>o&&e<a){let c=i||t||(e-o<a-e?-1:1);e=c<0?o:a,i=c}});if(!i)return e}}function io(n,e,t){let i=Js(n.state.facet(qa).map(s=>s(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:B.cursor(i,i<t.from?1:-1)}const Mi="￿";class ng{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Te.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Mi}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let o=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==t)break;let l=ye.get(s),c=ye.get(a);(l&&c?l.breakAfter:(l?l.breakAfter:lr(s))||lr(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>o)&&this.lineBreak(),s=a}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,l;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(l=s.exec(t))&&(o=l.index,a=l[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=a-1);i=o+a}}readNode(e){if(e.cmIgnore)return;let t=ye.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(ig(e,i.node,i.offset)?t:0))}}function ig(n,e,t){for(;;){if(!e||t<Yt(e))return!1;if(e==n)return!0;t=Hn(e)+1,e=e.parentNode}}class Xl{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class sg{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=o||a?[]:ag(e),c=new ng(l,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=lg(l,this.bounds.from)}else{let l=e.observer.selectionRange,c=o&&o.node==l.focusNode&&o.offset==l.focusOffset||!Xo(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),h=a&&a.node==l.anchorNode&&a.offset==l.anchorOffset||!Xo(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),f=e.viewport;if((te.ios||te.chrome)&&e.state.selection.main.empty&&c!=h&&(f.from>0||f.to<e.state.doc.length)){let u=Math.min(c,h),m=Math.max(c,h),T=f.from-u,N=f.to-m;(T==0||T==1||u==0)&&(N==0||N==-1||m==e.state.doc.length)&&(c=0,h=e.state.doc.length)}this.newSel=B.single(h,c)}}}function Uf(n,e){let t,{newSel:i}=e,s=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:l}=e.bounds,c=s.from,h=null;(o===8||te.android&&e.text.length<l-a)&&(c=s.to,h="end");let f=og(n.state.doc.sliceString(a,l,Mi),e.text,c-a,h);f&&(te.chrome&&o==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==Mi+Mi&&f.toB--,t={from:a+f.from,to:a+f.toA,insert:Re.of(e.text.slice(f.from,f.toB).split(Mi))})}else i&&(!n.hasFocus&&n.state.facet(en)||i.main.eq(s))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!s.empty&&i&&i.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:(te.mac||te.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=B.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Re.of([" "])}):te.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=B.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Re.of([" "])}),t)return ja(n,t,i,o);if(i&&!i.main.eq(s)){let a=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:a,userEvent:l}),!0}else return!1}function ja(n,e,t,i=-1){if(te.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(te.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ii(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&ii(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&ii(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,l=()=>a||(a=rg(n,e,t));return n.state.facet(yf).some(c=>c(n,e.from,e.to,o,l))||n.dispatch(l()),!0}function rg(n,e,t){let i,s=n.state,o=s.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let l=o.from<e.from?s.sliceDoc(o.from,e.from):"",c=o.to>e.to?s.sliceDoc(e.to,o.to):"";i=s.replaceSelection(n.state.toText(l+e.insert.sliceString(0,void 0,n.state.lineBreak)+c))}else{let l=s.changes(e),c=t&&t.main.to<=l.newLength?t.main:void 0;if(s.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let h=n.state.sliceDoc(e.from,e.to),f,u=t&&Mf(n,t.main.head);if(u){let N=e.insert.length-(e.to-e.from);f={from:u.from,to:u.to-N}}else f=n.state.doc.lineAt(o.head);let m=o.to-e.to,T=o.to-o.from;i=s.changeByRange(N=>{if(N.from==o.from&&N.to==o.to)return{changes:l,range:c||N.map(l)};let y=N.to-m,p=y-h.length;if(N.to-N.from!=T||n.state.sliceDoc(p,y)!=h||N.to>=f.from&&N.from<=f.to)return{range:N};let L=s.changes({from:p,to:y,insert:e.insert}),D=N.to-o.to;return{changes:L,range:c?B.range(Math.max(0,c.anchor+D),Math.max(0,c.head+D)):N.map(L)}})}else i={changes:l,selection:c&&s.selection.replaceRange(c)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:a,scrollIntoView:!0})}function og(n,e,t,i){let s=Math.min(n.length,e.length),o=0;for(;o<s&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==s&&n.length==e.length)return null;let a=n.length,l=e.length;for(;a>0&&l>0&&n.charCodeAt(a-1)==e.charCodeAt(l-1);)a--,l--;if(i=="end"){let c=Math.max(0,o-Math.min(a,l));t-=a+c-o}if(a<o&&n.length<e.length){let c=t<=o&&t>=a?o-t:0;o-=c,l=o+(l-a),a=o}else if(l<o){let c=t<=o&&t>=l?o-t:0;o-=c,a=o+(a-l),l=o}return{from:o,toA:a,toB:l}}function ag(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new Xl(t,i)),(s!=t||o!=i)&&e.push(new Xl(s,o))),e}function lg(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?B.single(t+e,i+e):null}class cg{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,te.safari&&e.contentDOM.addEventListener("input",()=>null),te.gecko&&bg(e.contentDOM.ownerDocument)}handleEvent(e){!Eg(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,t);for(let s of i.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=hg(e),i=this.handlers,s=this.view.contentDOM;for(let o in t)if(o!="scroll"){let a=!t[o].handlers.length,l=i[o];l&&a!=!l.handlers.length&&(s.removeEventListener(o,this.handleEvent),l=null),l||s.addEventListener(o,this.handleEvent,{passive:a})}for(let o in i)o!="scroll"&&!t[o]&&s.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Hf.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),te.android&&te.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return te.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Bf.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||fg.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ii(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:te.safari&&!te.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function zl(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(s){dt(t.state,s)}}}function hg(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let s=i.spec;if(s&&s.domEventHandlers)for(let o in s.domEventHandlers){let a=s.domEventHandlers[o];a&&t(o).handlers.push(zl(i.value,a))}if(s&&s.domEventObservers)for(let o in s.domEventObservers){let a=s.domEventObservers[o];a&&t(o).observers.push(zl(i.value,a))}}for(let i in vt)t(i).handlers.push(vt[i]);for(let i in Lt)t(i).observers.push(Lt[i]);return e}const Bf=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],fg="dthko",Hf=[16,17,18,20,91,92,224,225],Ls=6;function Is(n){return Math.max(0,n)*.7+8}function ug(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class dg{constructor(e,t,i,s){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=_m(e.contentDOM),this.atoms=e.state.facet(qa).map(a=>a(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Te.allowMultipleSelections)&&pg(e,t),this.dragging=gg(e,t)&&Vf(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&ug(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,s=0,o=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=Ya(this.view);e.clientX-c.left<=s+Ls?t=-Is(s-e.clientX):e.clientX+c.right>=a-Ls&&(t=Is(e.clientX-a)),e.clientY-c.top<=o+Ls?i=-Is(o-e.clientY):e.clientY+c.bottom>=l-Ls&&(i=Is(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],o=null;if(s.empty){let a=Js(this.atoms,s.from,0);a!=s.from&&(o=B.cursor(a,-1))}else{let a=Js(this.atoms,s.from,-1),l=Js(this.atoms,s.to,1);(a!=s.from||l!=s.to)&&(o=B.range(s.from==s.anchor?a:l,s.from==s.head?a:l))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?B.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function pg(n,e){let t=n.state.facet(_f);return t.length?t[0](e):te.mac?e.metaKey:e.ctrlKey}function mg(n,e){let t=n.state.facet(Of);return t.length?t[0](e):te.mac?!e.altKey:!e.ctrlKey}function gg(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=zi(n.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let o=0;o<s.length;o++){let a=s[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function Eg(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=ye.get(t))&&i.ignoreEvent(e))return!1;return!0}const vt=Object.create(null),Lt=Object.create(null),Wf=te.ie&&te.ie_version<15||te.ios&&te.webkit_version<604;function Tg(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Gf(n,t.value)},50)}function Fr(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function Gf(n,e){e=Fr(n.state,Wa,e);let{state:t}=n,i,s=1,o=t.toText(e),a=o.lines==t.selection.ranges.length;if(oa!=null&&t.selection.ranges.every(c=>c.empty)&&oa==o.toString()){let c=-1;i=t.changeByRange(h=>{let f=t.doc.lineAt(h.from);if(f.from==c)return{range:h};c=f.from;let u=t.toText((a?o.line(s++).text:e)+t.lineBreak);return{changes:{from:f.from,insert:u},range:B.cursor(h.from+u.length)}})}else a?i=t.changeByRange(c=>{let h=o.line(s++);return{changes:{from:c.from,to:c.to,insert:h.text},range:B.cursor(c.from+h.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Lt.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};vt.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Lt.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Lt.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};vt.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(Nf))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=Rg(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new dg(n,e,t,i)),i&&n.observer.ignore(()=>{nf(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function Kl(n,e,t,i){if(i==1)return B.cursor(e,t);if(i==2)return zm(n.state,e,t);{let s=Be.find(n.docView,e),o=n.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:o.from,l=s?s.posAtEnd:o.to;return l<n.state.doc.length&&l==o.to&&l++,B.range(a,l)}}let $l=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function Sg(n,e,t,i){let s=Be.find(n.docView,e);if(!s)return 1;let o=e-s.posAtStart;if(o==0)return 1;if(o==s.length)return-1;let a=s.coordsAt(o,-1);if(a&&$l(t,i,a))return-1;let l=s.coordsAt(o,1);return l&&$l(t,i,l)?1:a&&a.bottom>=i?-1:1}function Jl(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Sg(n,t,e.clientX,e.clientY)}}const Ag=te.ie&&te.ie_version<=11;let Ql=null,Zl=0,ec=0;function Vf(n){if(!Ag)return n.detail;let e=Ql,t=ec;return Ql=n,ec=Date.now(),Zl=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Zl+1)%3:1}function Rg(n,e){let t=Jl(n,e),i=Vf(e),s=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),s=s.map(o.changes))},get(o,a,l){let c=Jl(n,o),h,f=Kl(n,c.pos,c.bias,i);if(t.pos!=c.pos&&!a){let u=Kl(n,t.pos,t.bias,i),m=Math.min(u.from,f.from),T=Math.max(u.to,f.to);f=m<f.from?B.range(m,T):B.range(T,m)}return a?s.replaceRange(s.main.extend(f.from,f.to)):l&&i==1&&s.ranges.length>1&&(h=_g(s,c.pos))?h:l?s.addRange(f):B.create([f])}}}function _g(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:s}=n.ranges[t];if(i<=e&&s>=e)return B.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}vt.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let o=s.posAtStart,a=o+s.length;(o>=t.to||a<=t.from)&&(t=B.range(o,a))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Fr(n.state,Ga,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};vt.dragend=n=>(n.inputState.draggedContent=null,!1);function tc(n,e,t,i){if(t=Fr(n.state,Wa,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,a=i&&o&&mg(n,e)?{from:o.from,to:o.to}:null,l={from:s,insert:t},c=n.state.changes(a?[a,l]:l);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(s,-1),head:c.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}vt.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),s=0,o=()=>{++s==t.length&&tc(n,e,i.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[a]=l.result),o()},l.readAsText(t[a])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return tc(n,e,i,!0),!0}return!1};vt.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Wf?null:e.clipboardData;return t?(Gf(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(Tg(n),!1)};function Og(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function Ng(n){let e=[],t=[],i=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:o}of n.selection.ranges){let a=n.doc.lineAt(o);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),s=a.number}i=!0}return{text:Fr(n,Ga,e.join(n.lineBreak)),ranges:t,linewise:i}}let oa=null;vt.copy=vt.cut=(n,e)=>{let{text:t,ranges:i,linewise:s}=Ng(n.state);if(!t&&!s)return!1;oa=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=Wf?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(Og(n,t),!1)};const qf=jt.define();function Yf(n,e){let t=[];for(let i of n.facet(Cf)){let s=i(n,e);s&&t.push(s)}return t?n.update({effects:t,annotations:qf.of(!0)}):null}function jf(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Yf(n.state,e);t?n.dispatch(t):n.update([])}},10)}Lt.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),jf(n)};Lt.blur=n=>{n.observer.clearSelectionRange(),jf(n)};Lt.compositionstart=Lt.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Lt.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,te.chrome&&te.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Lt.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};vt.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(o&&a.length){let l=a[0],c=n.posAtDOM(l.startContainer,l.startOffset),h=n.posAtDOM(l.endContainer,l.endOffset);return ja(n,{from:c,to:h,insert:n.state.toText(o)},null),!0}}let s;if(te.chrome&&te.android&&(s=Bf.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return te.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),te.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Lt.compositionend(n,e),20),!1};const nc=new Set;function bg(n){nc.has(n)||(nc.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const ic=["pre-wrap","normal","pre-line","break-spaces"];let ui=!1;function sc(){ui=!1}class yg{constructor(e){this.lineWrapping=e,this.doc=Re.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return ic.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,o,a){let l=ic.indexOf(e)>-1,c=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=s,this.lineLength=o,c){this.heightSamples={};for(let h=0;h<a.length;h++){let f=a[h];f<0?h++:this.heightSamples[Math.floor(f*10)]=!0}}return c}}class Cg{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Wt{constructor(e,t,i,s,o){this.from=e,this.length=t,this.top=i,this.height=s,this._content=o}get type(){return typeof this._content=="number"?rt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Rn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Wt(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var we=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(we||(we={}));const Qs=.001;class ot{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Qs&&(ui=!0),this.height=e)}replace(e,t,i){return ot.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let o=this,a=i.doc;for(let l=s.length-1;l>=0;l--){let{fromA:c,toA:h,fromB:f,toB:u}=s[l],m=o.lineAt(c,we.ByPosNoHeight,i.setDoc(t),0,0),T=m.to>=h?m:o.lineAt(h,we.ByPosNoHeight,i,0,0);for(u+=T.to-h,h=T.to;l>0&&m.from<=s[l-1].toA;)c=s[l-1].fromA,f=s[l-1].fromB,l--,c<m.from&&(m=o.lineAt(c,we.ByPosNoHeight,i,0,0));f+=m.from-c,c=m.from;let N=Xa.build(i.setDoc(a),e,f,u);o=fr(o,o.replace(c,h,N))}return o.updateHeight(i,0)}static empty(){return new St(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,o=0;for(;;)if(t==i)if(s>o*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,s-=l.size}else if(o>s*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,o-=l.size}else break;else if(s<o){let l=e[t++];l&&(s+=l.size)}else{let l=e[--i];l&&(o+=l.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,i++),new Lg(ot.of(e.slice(0,t)),a,ot.of(e.slice(i)))}}function fr(n,e){return n==e?n:(n.constructor!=e.constructor&&(ui=!0),e)}ot.prototype.size=1;class Xf extends ot{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,s){return new Wt(s,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,s,o){return this.blockAt(0,i,s,o)}forEachLine(e,t,i,s,o,a){e<=o+this.length&&t>=o&&a(this.blockAt(0,i,s,o))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class St extends Xf{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,s){return new Wt(s,this.length,i,this.height,this.breaks)}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof St||s instanceof $e&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof $e?s=new St(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):ot.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class $e extends ot{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,o=s-i+1,a,l=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*o);a=c/o,this.length>o+1&&(l=(this.height-c)/(this.length-o-1))}else a=this.height/o;return{firstLine:i,lastLine:s,perLine:a,perChar:l}}blockAt(e,t,i,s){let{firstLine:o,lastLine:a,perLine:l,perChar:c}=this.heightMetrics(t,s);if(t.lineWrapping){let h=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),f=t.doc.lineAt(h),u=l+f.length*c,m=Math.max(i,e-u/2);return new Wt(f.from,f.length,m,u,0)}else{let h=Math.max(0,Math.min(a-o,Math.floor((e-i)/l))),{from:f,length:u}=t.doc.line(o+h);return new Wt(f,u,i+l*h,l,0)}}lineAt(e,t,i,s,o){if(t==we.ByHeight)return this.blockAt(e,i,s,o);if(t==we.ByPosNoHeight){let{from:T,to:N}=i.doc.lineAt(e);return new Wt(T,N-T,0,0,0)}let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,o),h=i.doc.lineAt(e),f=l+h.length*c,u=h.number-a,m=s+l*u+c*(h.from-o-u);return new Wt(h.from,h.length,Math.max(s,Math.min(m,s+this.height-f)),f,0)}forEachLine(e,t,i,s,o,a){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:l,perLine:c,perChar:h}=this.heightMetrics(i,o);for(let f=e,u=s;f<=t;){let m=i.doc.lineAt(f);if(f==e){let N=m.number-l;u+=c*N+h*(e-o-N)}let T=c+h*m.length;a(new Wt(m.from,m.length,u,T,0)),u+=T,f=m.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let o=i[i.length-1];o instanceof $e?i[i.length-1]=new $e(o.length+s):i.push(null,new $e(s-1))}if(e>0){let o=i[0];o instanceof $e?i[0]=new $e(e+o.length):i.unshift(new $e(e-1),null)}return ot.of(i)}decomposeLeft(e,t){t.push(new $e(e-1),null)}decomposeRight(e,t){t.push(null,new $e(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let o=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],l=Math.max(t,s.from),c=-1;for(s.from>t&&a.push(new $e(s.from-t-1).updateHeight(e,t));l<=o&&s.more;){let f=e.doc.lineAt(l).length;a.length&&a.push(null);let u=s.heights[s.index++];c==-1?c=u:Math.abs(u-c)>=Qs&&(c=-2);let m=new St(f,u);m.outdated=!1,a.push(m),l+=f+1}l<=o&&a.push(null,new $e(o-l).updateHeight(e,l));let h=ot.of(a);return(c<0||Math.abs(h.height-this.height)>=Qs||Math.abs(c-this.heightMetrics(e,t).perLine)>=Qs)&&(ui=!0),fr(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Lg extends ot{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,o,s+this.left.length+this.break)}lineAt(e,t,i,s,o){let a=s+this.left.height,l=o+this.left.length+this.break,c=t==we.ByHeight?e<a:e<l,h=c?this.left.lineAt(e,t,i,s,o):this.right.lineAt(e,t,i,a,l);if(this.break||(c?h.to<l:h.from>l))return h;let f=t==we.ByPosNoHeight?we.ByPosNoHeight:we.ByPos;return c?h.join(this.right.lineAt(l,f,i,a,l)):this.left.lineAt(l,f,i,s,o).join(h)}forEachLine(e,t,i,s,o,a){let l=s+this.left.height,c=o+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,s,o,a),t>=c&&this.right.forEachLine(e,t,i,l,c,a);else{let h=this.lineAt(c,we.ByPos,i,s,o);e<h.from&&this.left.forEachLine(e,h.from-1,i,s,o,a),h.to>=e&&h.from<=t&&a(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,c,a)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let l of i)o.push(l);if(e>0&&rc(o,a-1),t<this.length){let l=o.length;this.decomposeRight(t,o),rc(o,l)}return ot.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ot.of(this.break?[e,null,t]:[e,t]):(this.left=fr(this.left,e),this.right=fr(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:o,right:a}=this,l=t+o.length+this.break,c=null;return s&&s.from<=t+o.length&&s.more?c=o=o.updateHeight(e,t,i,s):o.updateHeight(e,t,i),s&&s.from<=l+a.length&&s.more?c=a=a.updateHeight(e,l,i,s):a.updateHeight(e,l,i),c?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function rc(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof $e&&(i=n[e+1])instanceof $e&&n.splice(e-1,3,new $e(t.length+1+i.length))}const Ig=5;class Xa{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof St?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new St(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;i.block?this.addBlock(new Xf(a,s,i)):(a||o||s>=Ig)&&this.addLineDeco(s,o,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new St(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new $e(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof St)return e;let t=new St(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof St)&&!this.isCovered?this.nodes.push(new St(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof St&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let o=new Xa(i,e);return Ae.spans(t,i,s,o,0),o.finish(i)}}function wg(n,e,t){let i=new xg;return Ae.compare(n,e,t,i,0),i.changes}class xg{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&$s(e,t,this.changes,5)}}function vg(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,s=i.defaultView||window,o=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),l=Math.max(0,t.top),c=Math.min(s.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let f=h,u=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&u.overflow!="visible"){let m=f.getBoundingClientRect();o=Math.max(o,m.left),a=Math.min(a,m.right),l=Math.max(l,m.top),c=Math.min(h==n.parentNode?s.innerHeight:c,m.bottom)}h=u.position=="absolute"||u.position=="fixed"?f.offsetParent:f.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:o-t.left,right:Math.max(o,a)-t.left,top:l-(t.top+e),bottom:Math.max(l,c)-(t.top+e)}}function Dg(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class so{constructor(e,t,i,s){this.from=e,this.to=t,this.size=i,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],o=t[i];if(s.from!=o.from||s.to!=o.to||s.size!=o.size)return!1}return!0}draw(e,t){return ae.replace({widget:new kg(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class kg extends on{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class oc{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=ac,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=xe.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Va).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new yg(t),this.stateDeco=e.facet(Ki).filter(i=>typeof i!="function"),this.heightMap=ot.empty().applyChanges(this.stateDeco,Re.empty,this.heightOracle.setDoc(e.doc),[new yt(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ae.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:o,to:a})=>s>=o&&s<=a)){let{from:o,to:a}=this.lineBlockAt(s);e.push(new ws(o,a))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?ac:new za(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Fi(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Ki).filter(f=>typeof f!="function");let s=e.changedRanges,o=yt.extendWithRanges(s,wg(i,this.stateDeco,e?e.changes:Ge.empty(this.state.doc.length))),a=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);sc(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=a||ui)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let c=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let h=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(If)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?xe.RTL:xe.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),l=t.getBoundingClientRect(),c=a||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,f=0;if(l.width&&l.height){let{scaleX:q,scaleY:H}=tf(t,l);(q>.005&&Math.abs(this.scaleX-q)>.005||H>.005&&Math.abs(this.scaleY-H)>.005)&&(this.scaleX=q,this.scaleY=H,h|=16,a=c=!0)}let u=(parseInt(i.paddingTop)||0)*this.scaleY,m=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=m)&&(this.paddingTop=u,this.paddingBottom=m,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let T=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=T&&(this.scrollAnchorHeight=-1,this.scrollTop=T),this.scrolledToBottom=rf(e.scrollDOM);let N=(this.printing?Dg:vg)(t,this.paddingTop),y=N.top-this.pixelViewport.top,p=N.bottom-this.pixelViewport.bottom;this.pixelViewport=N;let L=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(L!=this.inView&&(this.inView=L,L&&(c=!0)),!this.inView&&!this.scrollTarget)return 0;let D=l.width;if((this.contentDOMWidth!=D||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),c){let q=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(q)&&(a=!0),a||s.lineWrapping&&Math.abs(D-this.contentDOMWidth)>s.charWidth){let{lineHeight:H,charWidth:M,textHeight:V}=e.docView.measureTextSize();a=H>0&&s.refresh(o,H,M,V,D/M,q),a&&(e.docView.minWidth=0,h|=16)}y>0&&p>0?f=Math.max(y,p):y<0&&p<0&&(f=Math.min(y,p)),sc();for(let H of this.viewports){let M=H.from==this.viewport.from?q:e.docView.measureVisibleLineHeights(H);this.heightMap=(a?ot.empty().applyChanges(this.stateDeco,Re.empty,this.heightOracle,[new yt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new Cg(H.from,M))}ui&&(h|=2)}let G=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return G&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),h|=this.updateForViewport()),(h&2||G)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:l}=this,c=new ws(s.lineAt(a-i*1e3,we.ByHeight,o,0,0).from,s.lineAt(l+(1-i)*1e3,we.ByHeight,o,0,0).to);if(t){let{head:h}=t.range;if(h<c.from||h>c.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=s.lineAt(h,we.ByPos,o,0,0),m;t.y=="center"?m=(u.top+u.bottom)/2-f/2:t.y=="start"||t.y=="nearest"&&h<c.from?m=u.top:m=u.bottom-f,c=new ws(s.lineAt(m-1e3/2,we.ByHeight,o,0,0).from,s.lineAt(m+f+1e3/2,we.ByHeight,o,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new ws(this.heightMap.lineAt(i,we.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,we.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,we.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,we.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:l}=this;return(e==0||s<=a-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=l+Math.max(10,Math.min(i,250)))&&s>a-2*1e3&&o<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new so(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,o=s>>1,a=s<<1;if(this.defaultTextDirection!=xe.LTR&&!i)return[];let l=[],c=(f,u,m,T)=>{if(u-f<o)return;let N=this.state.selection.main,y=[N.from];N.empty||y.push(N.to);for(let L of y)if(L>f&&L<u){c(f,L-10,m,T),c(L+10,u,m,T);return}let p=Mg(e,L=>L.from>=m.from&&L.to<=m.to&&Math.abs(L.from-f)<o&&Math.abs(L.to-u)<o&&!y.some(D=>L.from<D&&L.to>D));if(!p){if(u<m.to&&t&&i&&t.visibleRanges.some(G=>G.from<=u&&G.to>=u)){let G=t.moveToLineBoundary(B.cursor(u),!1,!0).head;G>f&&(u=G)}let L=this.gapSize(m,f,u,T),D=i||L<2e6?L:2e6;p=new so(f,u,L,D)}l.push(p)},h=f=>{if(f.length<a||f.type!=rt.Text)return;let u=Pg(f.from,f.to,this.stateDeco);if(u.total<a)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,T,N;if(i){let y=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,p,L;if(m!=null){let D=vs(u,m),G=((this.visibleBottom-this.visibleTop)/2+y)/f.height;p=D-G,L=D+G}else p=(this.visibleTop-f.top-y)/f.height,L=(this.visibleBottom-f.top+y)/f.height;T=xs(u,p),N=xs(u,L)}else{let y=u.total*this.heightOracle.charWidth,p=s*this.heightOracle.charWidth,L=0;if(y>2e6)for(let M of e)M.from>=f.from&&M.from<f.to&&M.size!=M.displaySize&&M.from*this.heightOracle.charWidth+L<this.pixelViewport.left&&(L=M.size-M.displaySize);let D=this.pixelViewport.left+L,G=this.pixelViewport.right+L,q,H;if(m!=null){let M=vs(u,m),V=((G-D)/2+p)/y;q=M-V,H=M+V}else q=(D-p)/y,H=(G+p)/y;T=xs(u,q),N=xs(u,H)}T>f.from&&c(f.from,T,f,u),N<f.to&&c(N,f.to,f,u)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(h):h(f);return l}gapSize(e,t,i,s){let o=vs(s,i)-vs(s,t);return this.heightOracle.lineWrapping?e.height*o:s.total*this.heightOracle.charWidth*o}updateLineGaps(e){so.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ae.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Ae.spans(t,this.viewport.from,this.viewport.to,{span(o,a){i.push({from:o,to:a})},point(){}},20);let s=0;if(i.length!=this.visibleRanges.length)s=12;else for(let o=0;o<i.length&&!(s&8);o++){let a=this.visibleRanges[o],l=i[o];(a.from!=l.from||a.to!=l.to)&&(s|=4,e&&e.mapPos(a.from,-1)==l.from&&e.mapPos(a.to,1)==l.to||(s|=8))}return this.visibleRanges=i,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Fi(this.heightMap.lineAt(e,we.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Fi(this.heightMap.lineAt(this.scaler.fromDOM(e),we.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Fi(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ws{constructor(e,t){this.from=e,this.to=t}}function Pg(n,e,t){let i=[],s=n,o=0;return Ae.spans(t,n,e,{span(){},point(a,l){a>s&&(i.push({from:s,to:a}),o+=a-s),s=l}},20),s<e&&(i.push({from:s,to:e}),o+=e-s),{total:o,ranges:i}}function xs({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let s=0;;s++){let{from:o,to:a}=e[s],l=a-o;if(i<=l)return o+i;i-=l}}function vs(n,e){let t=0;for(let{from:i,to:s}of n.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/n.total}function Mg(n,e){for(let t of n)if(e(t))return t}const ac={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class za{constructor(e,t,i){let s=0,o=0,a=0;this.viewports=i.map(({from:l,to:c})=>{let h=t.lineAt(l,we.ByPos,e,0,0).top,f=t.lineAt(c,we.ByPos,e,0,0).bottom;return s+=f-h,{from:l,to:c,top:h,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let l of this.viewports)l.domTop=a+(l.top-o)*this.scale,a=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return s+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,s=o.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-s)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,s=o.domBottom}}eq(e){return e instanceof za?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function Fi(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new Wt(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(s=>Fi(s,e)):n._content)}const Ds=ne.define({combine:n=>n.join(" ")}),aa=ne.define({combine:n=>n.indexOf(!0)>-1}),la=Sn.newName(),zf=Sn.newName(),Kf=Sn.newName(),$f={"&light":"."+zf,"&dark":"."+Kf};function ca(n,e,t){return new Sn(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+i}})}const Fg=ca("."+la,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},$f),Ug={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ro=te.ie&&te.ie_version<=11;class Bg{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Om,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(te.ie&&te.ie_version<=11||te.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(te.chrome&&te.chrome_version<126)&&(this.editContext=new Wg(e),e.state.facet(en)&&(e.contentDOM.editContext=this.editContext.editContext)),ro&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(en)?i.root.activeElement!=this.dom:!Ks(this.dom,s))return;let o=s.anchorNode&&i.docView.nearest(s.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(te.ie&&te.ie_version<=11||te.android&&te.chrome)&&!i.state.selection.main.empty&&s.focusNode&&Gi(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=zi(e.root);if(!t)return!1;let i=te.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Hg(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let s=Ks(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&bm(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Ug),ro&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ro&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let s=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&ii(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:i}=a:(t=Math.min(a.from,t),i=Math.max(a.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Ks(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new sg(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,s=Uf(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=lc(t,e.previousSibling||e.target.previousSibling,-1),s=lc(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(en)!=e.state.facet(en)&&(e.view.contentDOM.editContext=e.state.facet(en)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function lc(n,e,t){for(;e;){let i=ye.get(e);if(i&&i.parent==n)return i;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function cc(n,e){let t=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return Gi(a.node,a.offset,s,o)&&([t,i,s,o]=[s,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:o}}function Hg(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return cc(n,s)}let t=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?cc(n,t):null}class Wg{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:s}=e.state.selection.main,o=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:o,drifted:!1});let l={from:o,to:a,insert:Re.of(i.text.split(`
`))};if(l.from==this.from&&s<this.from?l.from=s:l.to==this.to&&s>this.to&&(l.to=s),!(l.from==l.to&&!l.insert.length)){if(this.pendingContextChange=l,!e.state.readOnly){let c=this.to-this.from+(l.to-l.from+l.insert.length);ja(e,l,B.single(this.toEditorPos(i.selectionStart,c),this.toEditorPos(i.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))}},this.handlers.characterboundsupdate=i=>{let s=[],o=null;for(let a=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);a<l;a++){let c=e.coordsForChar(a);o=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||o||new DOMRect,s.push(o)}t.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let o of i.getTextFormats()){let a=o.underlineStyle,l=o.underlineThickness;if(a!="None"&&l!="None"){let c=this.toEditorPos(o.rangeStart),h=this.toEditorPos(o.rangeEnd);if(c<h){let f=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;s.push(ae.mark({attributes:{style:f}}).range(c,h))}}}e.dispatch({effects:xf.of(ae.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=zi(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((o,a,l,c,h)=>{if(i)return;let f=h.length-(a-o);if(s&&a>=s.to)if(s.from==o&&s.to==a&&s.insert.eq(h)){s=this.pendingContextChange=null,t+=f,this.to+=f;return}else s=null,this.revertPending(e.state);if(o+=t,a+=t,a<=this.from)this.from+=f,this.to+=f;else if(o<this.to){if(o<this.from||a>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(a),h.toString()),this.to+=f}t+=f}),s&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Q{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(o=>i(o,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Nm(e.parent)||document,this.viewState=new oc(e.state||Te.create(e)),e.scrollTo&&e.scrollTo.is(Cs)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ki).map(s=>new to(s));for(let s of this.plugins)s.update(this);this.observer=new Bg(this),this.inputState=new cg(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Wl(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ve?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,s,o=this.state;for(let m of e){if(m.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=m.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,l=0,c=null;e.some(m=>m.annotation(qf))?(this.inputState.notifiedFocused=a,l=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,c=Yf(o,a),c||(l=1));let h=this.observer.delayedAndroidKey,f=null;if(h?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(f=null)):this.observer.clear(),o.facet(Te.phrases)!=this.state.facet(Te.phrases))return this.setState(o);s=hr.create(this,o,e),s.flags|=l;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(u&&(u=u.map(m.changes)),m.scrollIntoView){let{main:T}=m.state.selection;u=new si(T.empty?T:B.cursor(T.head,T.head>T.anchor?-1:1))}for(let T of m.effects)T.is(Cs)&&(u=T.value.clip(this.state))}this.viewState.update(s,u),this.bidiCache=ur.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Pi)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Ds)!=s.state.facet(Ds)&&(this.viewState.mustMeasureContent=!0),(t||i||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let m of this.state.facet(ia))try{m(s)}catch(T){dt(this.state,T,"update listener")}(c||f)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),f&&!Uf(this,f)&&h.force&&ii(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new oc(e),this.plugins=e.facet(ki).map(i=>new to(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Wl(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ki),i=e.state.facet(ki);if(t!=i){let s=[];for(let o of i){let a=t.indexOf(o);if(a<0)s.push(new to(o));else{let l=this.plugins[a];l.mustUpdate=e,s.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){dt(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(a<0)if(rf(i))o=-1,a=this.viewState.heightMap.height;else{let T=this.viewState.scrollAnchorAt(s);o=T.from,a=T.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];c&4||([this.measureRequests,h]=[h,this.measureRequests]);let f=h.map(T=>{try{return T.read(this)}catch(N){return dt(this.state,N),hc}}),u=hr.create(this,this.state,[]),m=!1;u.flags|=c,t?t.flags|=c:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),m=this.docView.update(u),m&&this.docViewUpdate());for(let T=0;T<h.length;T++)if(f[T]!=hc)try{let N=h[T];N.write&&N.write(f[T],this)}catch(N){dt(this.state,N)}if(m&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let N=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-a;if(N>1||N<-1){s=s+N,i.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(ia))l(t)}get themeClasses(){return la+" "+(this.state.facet(aa)?Kf:zf)+" "+this.state.facet(Ds)}updateAttrs(){let e=fc(this,vf,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(en)?"true":"false",class:"cm-content",style:`${te.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),fc(this,Va,t);let i=this.observer.ignore(()=>{let s=Qo(this.contentDOM,this.contentAttrs,t),o=Qo(this.dom,this.editorAttrs,e);return s||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(Q.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Pi);let e=this.state.facet(Q.cspNonce);Sn.mount(this.root,this.styleModules.concat(Fg).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return io(this,e,jl(this,e,t,i))}moveByGroup(e,t){return io(this,e,jl(this,e,t,i=>eg(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return B.cursor(o.side(t,s)+e.from,o.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,i=!0){return Zm(this,e,t,i)}moveVertically(e,t,i){return io(this,e,tg(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Ff(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),o=this.bidiSpans(s),a=o[gn.find(o,e-s.from,-1,t)];return as(i,a.dir==xe.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Lf)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Gg)return Af(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||Sf(o.isolates,i=Hl(this,e))))return o.order;i||(i=Hl(this,e));let s=Fm(e.text,t,i);return this.bidiCache.push(new ur(e.from,e.to,t,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||te.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{nf(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Cs.of(new si(typeof e=="number"?B.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Cs.of(new si(B.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Fe.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Fe.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Sn.newName(),s=[Ds.of(i),Pi.of(ca(`.${i}`,e))];return t&&t.dark&&s.push(aa.of(!0)),s}static baseTheme(e){return qn.lowest(Pi.of(ca("."+la,e,$f)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&ye.get(i)||ye.get(e);return((t=s?.rootView)===null||t===void 0?void 0:t.view)||null}}Q.styleModule=Pi;Q.inputHandler=yf;Q.clipboardInputFilter=Wa;Q.clipboardOutputFilter=Ga;Q.scrollHandler=wf;Q.focusChangeEffect=Cf;Q.perLineTextDirection=Lf;Q.exceptionSink=bf;Q.updateListener=ia;Q.editable=en;Q.mouseSelectionStyle=Nf;Q.dragMovesSelection=Of;Q.clickAddsSelectionRange=_f;Q.decorations=Ki;Q.outerDecorations=Df;Q.atomicRanges=qa;Q.bidiIsolatedRanges=kf;Q.scrollMargins=Pf;Q.darkTheme=aa;Q.cspNonce=ne.define({combine:n=>n.length?n[0]:""});Q.contentAttributes=Va;Q.editorAttributes=vf;Q.lineWrapping=Q.contentAttributes.of({class:"cm-lineWrapping"});Q.announce=me.define();const Gg=4096,hc={};class ur{constructor(e,t,i,s,o,a){this.from=e,this.to=t,this.dir=i,this.isolates=s,this.fresh=o,this.order=a}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:xe.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==s&&!t.touchesRange(a.from,a.to)&&i.push(new ur(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i}}function fc(n,e,t){for(let i=n.state.facet(e),s=i.length-1;s>=0;s--){let o=i[s],a=typeof o=="function"?o(n):o;a&&Jo(a,t)}return t}const Vg=te.mac?"mac":te.windows?"win":te.linux?"linux":"key";function qg(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,o,a,l;for(let c=0;c<t.length-1;++c){const h=t[c];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))s=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))a=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return s&&(i="Alt-"+i),o&&(i="Ctrl-"+i),l&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function ks(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const Yg=qn.default(Q.domEventHandlers({keydown(n,e){return Qf(Jf(e.state),n,e,"editor")}})),hs=ne.define({enables:Yg}),uc=new WeakMap;function Jf(n){let e=n.facet(hs),t=uc.get(e);return t||uc.set(e,t=zg(e.reduce((i,s)=>i.concat(s),[]))),t}function jg(n,e,t){return Qf(Jf(n.state),e,n,t)}let dn=null;const Xg=4e3;function zg(n,e=Vg){let t=Object.create(null),i=Object.create(null),s=(a,l)=>{let c=i[a];if(c==null)i[a]=l;else if(c!=l)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,l,c,h,f)=>{var u,m;let T=t[a]||(t[a]=Object.create(null)),N=l.split(/ (?!$)/).map(L=>qg(L,e));for(let L=1;L<N.length;L++){let D=N.slice(0,L).join(" ");s(D,!0),T[D]||(T[D]={preventDefault:!0,stopPropagation:!1,run:[G=>{let q=dn={view:G,prefix:D,scope:a};return setTimeout(()=>{dn==q&&(dn=null)},Xg),!0}]})}let y=N.join(" ");s(y,!1);let p=T[y]||(T[y]={preventDefault:!1,stopPropagation:!1,run:((m=(u=T._any)===null||u===void 0?void 0:u.run)===null||m===void 0?void 0:m.slice())||[]});c&&p.run.push(c),h&&(p.preventDefault=!0),f&&(p.stopPropagation=!0)};for(let a of n){let l=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let h of l){let f=t[h]||(t[h]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=a;for(let m in f)f[m].run.push(T=>u(T,ha))}let c=a[e]||a.key;if(c)for(let h of l)o(h,c,a.run,a.preventDefault,a.stopPropagation),a.shift&&o(h,"Shift-"+c,a.shift,a.preventDefault,a.stopPropagation)}return t}let ha=null;function Qf(n,e,t,i){ha=e;let s=Sm(e),o=ht(s,0),a=Ht(o)==s.length&&s!=" ",l="",c=!1,h=!1,f=!1;dn&&dn.view==t&&dn.scope==i&&(l=dn.prefix+" ",Hf.indexOf(e.keyCode)<0&&(h=!0,dn=null));let u=new Set,m=p=>{if(p){for(let L of p.run)if(!u.has(L)&&(u.add(L),L(t)))return p.stopPropagation&&(f=!0),!0;p.preventDefault&&(p.stopPropagation&&(f=!0),h=!0)}return!1},T=n[i],N,y;return T&&(m(T[l+ks(s,e,!a)])?c=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(te.windows&&e.ctrlKey&&e.altKey)&&(N=An[e.keyCode])&&N!=s?(m(T[l+ks(N,e,!0)])||e.shiftKey&&(y=Xi[e.keyCode])!=s&&y!=N&&m(T[l+ks(y,e,!1)]))&&(c=!0):a&&e.shiftKey&&m(T[l+ks(s,e,!0)])&&(c=!0),!c&&m(T._any)&&(c=!0)),h&&(c=!0),c&&f&&e.stopPropagation(),ha=null,c}class fs{constructor(e,t,i,s,o){this.className=e,this.left=t,this.top=i,this.width=s,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let o=Zf(e);return[new fs(t,s.left-o.left,s.top-o.top,null,s.bottom-s.top)]}else return Kg(e,t,i)}}function Zf(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==xe.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function dc(n,e,t,i){let s=n.coordsAtPos(e,t*2);if(!s)return i;let o=n.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,l=n.posAtCoords({x:o.left+1,y:a}),c=n.posAtCoords({x:o.right-1,y:a});return l==null||c==null?i:{from:Math.max(i.from,Math.min(l,c)),to:Math.min(i.to,Math.max(l,c))}}function Kg(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),o=n.textDirection==xe.LTR,a=n.contentDOM,l=a.getBoundingClientRect(),c=Zf(n),h=a.querySelector(".cm-line"),f=h&&window.getComputedStyle(h),u=l.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),m=l.right-(f?parseInt(f.paddingRight):0),T=ra(n,i),N=ra(n,s),y=T.type==rt.Text?T:null,p=N.type==rt.Text?N:null;if(y&&(n.lineWrapping||T.widgetLineBreaks)&&(y=dc(n,i,1,y)),p&&(n.lineWrapping||N.widgetLineBreaks)&&(p=dc(n,s,-1,p)),y&&p&&y.from==p.from&&y.to==p.to)return D(G(t.from,t.to,y));{let H=y?G(t.from,null,y):q(T,!1),M=p?G(null,t.to,p):q(N,!0),V=[];return(y||T).to<(p||N).from-(y&&p?1:0)||T.widgetLineBreaks>1&&H.bottom+n.defaultLineHeight/2<M.top?V.push(L(u,H.bottom,m,M.top)):H.bottom<M.top&&n.elementAtHeight((H.bottom+M.top)/2).type==rt.Text&&(H.bottom=M.top=(H.bottom+M.top)/2),D(H).concat(V).concat(D(M))}function L(H,M,V,ie){return new fs(e,H-c.left,M-c.top,V-H,ie-M)}function D({top:H,bottom:M,horizontal:V}){let ie=[];for(let z=0;z<V.length;z+=2)ie.push(L(V[z],H,V[z+1],M));return ie}function G(H,M,V){let ie=1e9,z=-1e9,Y=[];function ee(ue,Ee,Ce,Oe,ke){let _e=n.coordsAtPos(ue,ue==V.to?-2:2),We=n.coordsAtPos(Ce,Ce==V.from?2:-2);!_e||!We||(ie=Math.min(_e.top,We.top,ie),z=Math.max(_e.bottom,We.bottom,z),ke==xe.LTR?Y.push(o&&Ee?u:_e.left,o&&Oe?m:We.right):Y.push(!o&&Oe?u:We.left,!o&&Ee?m:_e.right))}let K=H??V.from,he=M??V.to;for(let ue of n.visibleRanges)if(ue.to>K&&ue.from<he)for(let Ee=Math.max(ue.from,K),Ce=Math.min(ue.to,he);;){let Oe=n.state.doc.lineAt(Ee);for(let ke of n.bidiSpans(Oe)){let _e=ke.from+Oe.from,We=ke.to+Oe.from;if(_e>=Ce)break;We>Ee&&ee(Math.max(_e,Ee),H==null&&_e<=K,Math.min(We,Ce),M==null&&We>=he,ke.dir)}if(Ee=Oe.to+1,Ee>=Ce)break}return Y.length==0&&ee(K,H==null,he,M==null,n.textDirection),{top:ie,bottom:z,horizontal:Y}}function q(H,M){let V=l.top+(M?H.top:H.bottom);return{top:V,bottom:V,horizontal:[]}}}function $g(n,e){return n.constructor==e.constructor&&n.eq(e)}class Jg{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Zs)!=e.state.facet(Zs)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(Zs);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!$g(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[i].constructor&&s.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Zs=ne.define();function eu(n){return[Fe.define(e=>new Jg(e,n)),Zs.of(n)]}const tu=!(te.ios&&te.webkit&&te.webkit_version<534),$i=ne.define({combine(n){return Xt(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Qg(n={}){return[$i.of(n),Zg,eE,tE,If.of(!0)]}function nu(n){return n.startState.facet($i)!=n.state.facet($i)}const Zg=eu({above:!0,markers(n){let{state:e}=n,t=e.facet($i),i=[];for(let s of e.selection.ranges){let o=s==e.selection.main;if(s.empty?!o||tu:t.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=s.empty?s:B.cursor(s.head,s.head>s.anchor?-1:1);for(let c of fs.forRange(n,a,l))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=nu(n);return t&&pc(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){pc(e.state,n)},class:"cm-cursorLayer"});function pc(n,e){e.style.animationDuration=n.facet($i).cursorBlinkRate+"ms"}const eE=eu({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:fs.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||nu(n)},class:"cm-selectionLayer"}),fa={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};tu&&(fa[".cm-line"].caretColor=fa[".cm-content"].caretColor="transparent !important");const tE=qn.highest(Q.theme(fa)),iu=me.define({map(n,e){return n==null?null:e.mapPos(n)}}),Ui=Ze.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(iu)?i.value:t,n)}}),nE=Fe.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Ui);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Ui)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Ui),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Ui)!=n&&this.view.dispatch({effects:iu.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function iE(){return[Ui,nE]}function mc(n,e,t,i,s){e.lastIndex=0;for(let o=n.iterRange(t,i),a=t,l;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)s(a+l.index,l)}function sE(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:s,to:o}of t)s=Math.max(n.state.doc.lineAt(s).from,s-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=o:i.push({from:s,to:o});return i}class rE{constructor(e){const{regexp:t,decoration:i,decorate:s,boundary:o,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(l,c,h,f)=>s(f,h,h+l[0].length,l,c);else if(typeof i=="function")this.addMatch=(l,c,h,f)=>{let u=i(l,c,h);u&&f(h,h+l[0].length,u)};else if(i)this.addMatch=(l,c,h,f)=>f(h,h+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=a}createDeco(e){let t=new nn,i=t.add.bind(t);for(let{from:s,to:o}of sE(e,this.maxLength))mc(e.state.doc,this.regexp,s,o,(a,l)=>this.addMatch(l,e,a,i));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((o,a,l,c)=>{c>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),s=Math.max(c,s))}),e.viewportMoved||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let o of e.visibleRanges){let a=Math.max(o.from,i),l=Math.min(o.to,s);if(l>a){let c=e.state.doc.lineAt(a),h=c.to<l?e.state.doc.lineAt(l):c,f=Math.max(o.from,c.from),u=Math.min(o.to,h.to);if(this.boundary){for(;a>c.from;a--)if(this.boundary.test(c.text[a-1-c.from])){f=a;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){u=l;break}}let m=[],T,N=(y,p,L)=>m.push(L.range(y,p));if(c==h)for(this.regexp.lastIndex=f-c.from;(T=this.regexp.exec(c.text))&&T.index<u-c.from;)this.addMatch(T,e,T.index+c.from,N);else mc(e.state.doc,this.regexp,f,u,(y,p)=>this.addMatch(p,e,y,N));t=t.update({filterFrom:f,filterTo:u,filter:(y,p)=>y<f||p>u,add:m})}}return t}}const ua=/x/.unicode!=null?"gu":"g",oE=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,ua),aE={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let oo=null;function lE(){var n;if(oo==null&&typeof document<"u"&&document.body){let e=document.body.style;oo=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return oo||!1}const er=ne.define({combine(n){let e=Xt(n,{render:null,specialChars:oE,addSpecialChars:null});return(e.replaceTabs=!lE())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,ua)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ua)),e}});function cE(n={}){return[er.of(n),hE()]}let gc=null;function hE(){return gc||(gc=Fe.fromClass(class{constructor(n){this.view=n,this.decorations=ae.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(er)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new rE({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,o=ht(e[0],0);if(o==9){let a=s.lineAt(i),l=t.state.tabSize,c=gi(a.text,l,i-a.from);return ae.replace({widget:new pE((l-c%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=ae.replace({widget:new dE(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(er);n.startState.facet(er)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const fE="•";function uE(n){return n>=32?fE:n==10?"␤":String.fromCharCode(9216+n)}class dE extends on{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=uE(this.code),i=e.state.phrase("Control character")+" "+(aE[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class pE extends on{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function mE(){return EE}const gE=ae.line({class:"cm-activeLine"}),EE=Fe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let s=n.lineBlockAt(i.head);s.from>e&&(t.push(gE.range(s.from)),e=s.from)}return ae.set(t)}},{decorations:n=>n.decorations});class TE extends on{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?ci(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),s=as(t[0],i.direction!="rtl"),o=parseInt(i.lineHeight);return s.bottom-s.top>o*1.5?{left:s.left,right:s.right,top:s.top,bottom:s.top+o}:s}ignoreEvent(){return!1}}function SE(n){return Fe.fromClass(class{constructor(e){this.view=e,this.placeholder=n?ae.set([ae.widget({widget:new TE(n),side:1}).range(0)]):ae.none}get decorations(){return this.view.state.doc.length?ae.none:this.placeholder}},{decorations:e=>e.decorations})}const da=2e3;function AE(n,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),o=[];if(e.off>da||t.off>da||e.col<0||t.col<0){let a=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let c=i;c<=s;c++){let h=n.doc.line(c);h.length<=l&&o.push(B.range(h.from+a,h.to+l))}}else{let a=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let c=i;c<=s;c++){let h=n.doc.line(c),f=qo(h.text,a,n.tabSize,!0);if(f<0)o.push(B.cursor(h.to));else{let u=qo(h.text,l,n.tabSize);o.push(B.range(h.from+f,h.from+u))}}}return o}function RE(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function Ec(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),s=t-i.from,o=s>da?-1:s==i.length?RE(n,e.clientX):gi(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:s}}function _E(n,e){let t=Ec(n,e),i=n.state.selection;return t?{update(s){if(s.docChanged){let o=s.changes.mapPos(s.startState.doc.line(t.line).from),a=s.state.doc.lineAt(o);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},i=i.map(s.changes)}},get(s,o,a){let l=Ec(n,s);if(!l)return i;let c=AE(n.state,t,l);return c.length?a?B.create(c.concat(i.ranges)):B.create(c):i}}:null}function OE(n){let e=t=>t.altKey&&t.button==0;return Q.mouseSelectionStyle.of((t,i)=>e(i)?_E(t,i):null)}const NE={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},bE={style:"cursor: crosshair"};function yE(n={}){let[e,t]=NE[n.key||"Alt"],i=Fe.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[i,Q.contentAttributes.of(s=>{var o;return!((o=s.plugin(i))===null||o===void 0)&&o.isDown?bE:null})]}const Ci="-10000px";class su{constructor(e,t,i,s){this.facet=t,this.createTooltipView=i,this.removeTooltipView=s,this.input=e.state.facet(t),this.tooltips=this.input.filter(a=>a);let o=null;this.tooltipViews=this.tooltips.map(a=>o=i(a,o))}update(e,t){var i;let s=e.state.facet(this.facet),o=s.filter(c=>c);if(s===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let a=[],l=t?[]:null;for(let c=0;c<o.length;c++){let h=o[c],f=-1;if(h){for(let u=0;u<this.tooltips.length;u++){let m=this.tooltips[u];m&&m.create==h.create&&(f=u)}if(f<0)a[c]=this.createTooltipView(h,c?a[c-1]:null),l&&(l[c]=!!h.above);else{let u=a[c]=this.tooltipViews[f];l&&(l[c]=t[f]),u.update&&u.update(e)}}}for(let c of this.tooltipViews)a.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return t&&(l.forEach((c,h)=>t[h]=c),t.length=l.length),this.input=s,this.tooltips=o,this.tooltipViews=a,!0}}function CE(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const ao=ne.define({combine:n=>{var e,t,i;return{position:te.ios?"absolute":((e=n.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||CE}}}),Tc=new WeakMap,Ka=Fe.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(ao);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new su(n,$a,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(ao);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",t.dom.appendChild(s)}return t.dom.style.position=this.position,t.dom.style.top=Ci,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(te.gecko)t=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==Ci&&o.style.left=="0px"){let a=o.getBoundingClientRect();t=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),s=Ya(this.view);return{visible:{left:i.left+s.left,top:i.top+s.top,right:i.right-s.right,bottom:i.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,a)=>{let l=this.manager.tooltipViews[a];return l.getCoords?l.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(ao).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:i,scaleX:s,scaleY:o}=n,a=[];for(let l=0;l<this.manager.tooltips.length;l++){let c=this.manager.tooltips[l],h=this.manager.tooltipViews[l],{dom:f}=h,u=n.pos[l],m=n.size[l];if(!u||c.clip!==!1&&(u.bottom<=Math.max(t.top,i.top)||u.top>=Math.min(t.bottom,i.bottom)||u.right<Math.max(t.left,i.left)-.1||u.left>Math.min(t.right,i.right)+.1)){f.style.top=Ci;continue}let T=c.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,N=T?7:0,y=m.right-m.left,p=(e=Tc.get(h))!==null&&e!==void 0?e:m.bottom-m.top,L=h.offset||IE,D=this.view.textDirection==xe.LTR,G=m.width>i.right-i.left?D?i.left:i.right-m.width:D?Math.max(i.left,Math.min(u.left-(T?14:0)+L.x,i.right-y)):Math.min(Math.max(i.left,u.left-y+(T?14:0)-L.x),i.right-y),q=this.above[l];!c.strictSide&&(q?u.top-p-N-L.y<i.top:u.bottom+p+N+L.y>i.bottom)&&q==i.bottom-u.bottom>u.top-i.top&&(q=this.above[l]=!q);let H=(q?u.top-i.top:i.bottom-u.bottom)-N;if(H<p&&h.resize!==!1){if(H<this.view.defaultLineHeight){f.style.top=Ci;continue}Tc.set(h,p),f.style.height=(p=H)/o+"px"}else f.style.height&&(f.style.height="");let M=q?u.top-p-N-L.y:u.bottom+N+L.y,V=G+y;if(h.overlap!==!0)for(let ie of a)ie.left<V&&ie.right>G&&ie.top<M+p&&ie.bottom>M&&(M=q?ie.top-p-2-N:ie.bottom+N+2);if(this.position=="absolute"?(f.style.top=(M-n.parent.top)/o+"px",Sc(f,(G-n.parent.left)/s)):(f.style.top=M/o+"px",Sc(f,G/s)),T){let ie=u.left+(D?L.x:-L.x)-(G+14-7);T.style.left=ie/s+"px"}h.overlap!==!0&&a.push({left:G,top:M,right:V,bottom:M+p}),f.classList.toggle("cm-tooltip-above",q),f.classList.toggle("cm-tooltip-below",!q),h.positioned&&h.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Ci}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Sc(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const LE=Q.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),IE={x:0,y:0},$a=ne.define({enables:[Ka,LE]}),dr=ne.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class Ur{static create(e){return new Ur(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new su(e,dr,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(t===void 0)t=s;else if(t!==s)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const wE=$a.compute([dr],n=>{let e=n.facet(dr);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:Ur.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class xE{constructor(e,t,i,s,o){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let s,o=1;if(i instanceof mn)s=i.posAtStart;else{if(s=e.posAtCoords(t),s==null)return;let l=e.coordsAtPos(s);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(s)).find(f=>f.from<=s&&f.to>=s),h=c&&c.dir==xe.RTL?-1:1;o=t.x<l.left?-h:h}let a=this.source(e,s,o);if(a?.then){let l=this.pending={pos:s};a.then(c=>{this.pending==l&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>dt(e.state,c,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(Ka),t=e?e.manager.tooltips.findIndex(i=>i.create==Ur.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:o}=this;if(s.length&&o&&!vE(o.dom,e)||this.pending){let{pos:a}=s[0]||this.pending,l=(i=(t=s[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:a;(a==l?this.view.posAtCoords(this.lastMove)!=a:!DE(this.view,a,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Ps=4;function vE(n,e){let{left:t,right:i,top:s,bottom:o}=n.getBoundingClientRect(),a;if(a=n.querySelector(".cm-tooltip-arrow")){let l=a.getBoundingClientRect();s=Math.min(l.top,s),o=Math.max(l.bottom,o)}return e.clientX>=t-Ps&&e.clientX<=i+Ps&&e.clientY>=s-Ps&&e.clientY<=o+Ps}function DE(n,e,t,i,s,o){let a=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(a.left>i||a.right<i||a.top>s||Math.min(a.bottom,l)<s)return!1;let c=n.posAtCoords({x:i,y:s},!1);return c>=e&&c<=t}function kE(n,e={}){let t=me.define(),i=Ze.define({create(){return[]},update(s,o){if(s.length&&(e.hideOnChange&&(o.docChanged||o.selection)?s=[]:e.hideOn&&(s=s.filter(a=>!e.hideOn(o,a))),o.docChanged)){let a=[];for(let l of s){let c=o.changes.mapPos(l.pos,-1,st.TrackDel);if(c!=null){let h=Object.assign(Object.create(null),l);h.pos=c,h.end!=null&&(h.end=o.changes.mapPos(h.end)),a.push(h)}}s=a}for(let a of o.effects)a.is(t)&&(s=a.value),a.is(PE)&&(s=[]);return s},provide:s=>dr.from(s)});return{active:i,extension:[i,Fe.define(s=>new xE(s,n,i,t,e.hoverTime||300)),wE]}}function ru(n,e){let t=n.plugin(Ka);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const PE=me.define(),Ac=ne.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Ji(n,e){let t=n.plugin(ou),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const ou=Fe.fromClass(class{constructor(n){this.input=n.state.facet(Qi),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(Ac);this.top=new Ms(n,!0,e.topContainer),this.bottom=new Ms(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(Ac);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ms(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ms(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Qi);if(t!=this.input){let i=t.filter(c=>c),s=[],o=[],a=[],l=[];for(let c of i){let h=this.specs.indexOf(c),f;h<0?(f=c(n.view),l.push(f)):(f=this.panels[h],f.update&&f.update(n)),s.push(f),(f.top?o:a).push(f)}this.specs=i,this.panels=s,this.top.sync(o),this.bottom.sync(a);for(let c of l)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Q.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Ms{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Rc(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Rc(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Rc(n){let e=n.nextSibling;return n.remove(),e}const Qi=ne.define({enables:ou});class rn extends Bn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}rn.prototype.elementClass="";rn.prototype.toDOM=void 0;rn.prototype.mapMode=st.TrackBefore;rn.prototype.startSide=rn.prototype.endSide=-1;rn.prototype.point=!0;const tr=ne.define(),ME=ne.define(),FE={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ae.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},qi=ne.define();function UE(n){return[au(),qi.of(Object.assign(Object.assign({},FE),n))]}const _c=ne.define({combine:n=>n.some(e=>e)});function au(n){return[BE]}const BE=Fe.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(qi).map(e=>new Nc(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(_c),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(_c)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Ae.iter(this.view.state.facet(tr),this.view.viewport.from),i=[],s=this.gutters.map(o=>new HE(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let a=!0;for(let l of o.type)if(l.type==rt.Text&&a){pa(t,i,l.from);for(let c of s)c.line(this.view,l,i);a=!1}else if(l.widget)for(let c of s)c.widget(this.view,l)}else if(o.type==rt.Text){pa(t,i,o.from);for(let a of s)a.line(this.view,o,i)}else if(o.widget)for(let a of s)a.widget(this.view,o);for(let o of s)o.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(qi),t=n.state.facet(qi),i=n.docChanged||n.heightChanged||n.viewportChanged||!Ae.eq(n.startState.facet(tr),n.state.facet(tr),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(i=!0);else{i=!0;let s=[];for(let o of t){let a=e.indexOf(o);a<0?s.push(new Nc(this.view,o)):(this.gutters[a].update(n),s.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),s.indexOf(o)<0&&o.destroy();for(let o of s)this.dom.appendChild(o.dom);this.gutters=s}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>Q.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==xe.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function Oc(n){return Array.isArray(n)?n:[n]}function pa(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class HE{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Ae.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:s}=this,o=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let l=new lu(e,a,o,i);s.elements.push(l),s.dom.appendChild(l.dom)}else s.elements[this.i].update(e,a,o,i);this.height=t.bottom,this.i++}line(e,t,i){let s=[];pa(this.cursor,s,t.from),i.length&&(s=s.concat(i));let o=this.gutter.config.lineMarker(e,t,s);o&&s.unshift(o);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),s=i?[i]:null;for(let o of e.state.facet(ME)){let a=o(e,t.widget,t);a&&(s||(s=[])).push(a)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Nc{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let o=s.target,a;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let c=o.getBoundingClientRect();a=(c.top+c.bottom)/2}else a=s.clientY;let l=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[i](e,l,s)&&s.preventDefault()});this.markers=Oc(t.markers(e)),t.initialSpacer&&(this.spacer=new lu(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Oc(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!Ae.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class lu{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),WE(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let o=0,a=0;;){let l=a,c=o<t.length?t[o++]:null,h=!1;if(c){let f=c.elementClass;f&&(i+=" "+f);for(let u=a;u<this.markers.length;u++)if(this.markers[u].compare(c)){l=u,h=!0;break}}else l=this.markers.length;for(;a<l;){let f=this.markers[a++];if(f.toDOM){f.destroy(s);let u=s.nextSibling;s.remove(),s=u}}if(!c)break;c.toDOM&&(h?s=s.nextSibling:this.dom.insertBefore(c.toDOM(e),s)),h&&a++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function WE(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const GE=ne.define(),VE=ne.define(),Zn=ne.define({combine(n){return Xt(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let o=i[s],a=t[s];i[s]=o?(l,c,h)=>o(l,c,h)||a(l,c,h):a}return i}})}});class lo extends rn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function co(n,e){return n.state.facet(Zn).formatNumber(e,n.state)}const qE=qi.compute([Zn],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(GE)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new lo(co(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let s of e.state.facet(VE)){let o=s(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Zn)!=e.state.facet(Zn),initialSpacer(e){return new lo(co(e,bc(e.state.doc.lines)))},updateSpacer(e,t){let i=co(t.view,bc(t.view.state.doc.lines));return i==e.number?e:new lo(i)},domEventHandlers:n.facet(Zn).domEventHandlers}));function YE(n={}){return[Zn.of(n),au(),qE]}function bc(n){let e=9;for(;e<n;)e=e*10+9;return e}const jE=new class extends rn{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},XE=tr.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.head).from;s>t&&(t=s,e.push(jE.range(s)))}return Ae.of(e)});function zE(){return XE}const cu=1024;let KE=0;class ho{constructor(e,t){this.from=e,this.to=t}}class ge{constructor(e={}){this.id=KE++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=mt.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ge.closedBy=new ge({deserialize:n=>n.split(" ")});ge.openedBy=new ge({deserialize:n=>n.split(" ")});ge.group=new ge({deserialize:n=>n.split(" ")});ge.isolate=new ge({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});ge.contextHash=new ge({perNode:!0});ge.lookAhead=new ge({perNode:!0});ge.mounted=new ge({perNode:!0});class pr{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[ge.mounted.id]}}const $E=Object.create(null);class mt{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):$E,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new mt(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(s)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ge.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(ge.group),o=-1;o<(s?s.length:0);o++){let a=t[o<0?i.name:s[o]];if(a)return a}}}}mt.none=new mt("",Object.create(null),0,8);class Ja{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let o of e){let a=o(i);a&&(s||(s=Object.assign({},i.props)),s[a[0].id]=a[1])}t.push(s?new mt(i.name,s,i.id,i.flags):i)}return new Ja(t)}}const Fs=new WeakMap,yc=new WeakMap;var Ye;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Ye||(Ye={}));class He{constructor(e,t,i,s,o){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,l]of o)this.props[typeof a=="number"?a:a.id]=l}}toString(){let e=pr.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new ga(this.topNode,e)}cursorAt(e,t=0,i=0){let s=Fs.get(this)||this.topNode,o=new ga(s);return o.moveTo(e,t),Fs.set(this,o._tree),o}get topNode(){return new Ct(this,0,0,null)}resolve(e,t=0){let i=Zi(Fs.get(this)||this.topNode,e,t,!1);return Fs.set(this,i),i}resolveInner(e,t=0){let i=Zi(yc.get(this)||this.topNode,e,t,!0);return yc.set(this,i),i}resolveStack(e,t=0){return ZE(this,e,t)}iterate(e){let{enter:t,leave:i,from:s=0,to:o=this.length}=e,a=e.mode||0,l=(a&Ye.IncludeAnonymous)>0;for(let c=this.cursor(a|Ye.IncludeAnonymous);;){let h=!1;if(c.from<=o&&c.to>=s&&(!l&&c.type.isAnonymous||t(c)!==!1)){if(c.firstChild())continue;h=!0}for(;h&&i&&(l||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:el(mt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new He(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new He(mt.none,t,i,s)))}static build(e){return eT(e)}}He.empty=new He(mt.none,[],[],0);class Qa{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Qa(this.buffer,this.index)}}class _n{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return mt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],o=s.name;if(/\W/.test(o)&&!s.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,t,i,s,o){let{buffer:a}=this,l=-1;for(let c=e;c!=t&&!(hu(o,s,a[c+1],a[c+2])&&(l=c,i>0));c=a[c+3]);return l}slice(e,t,i){let s=this.buffer,o=new Uint16Array(t-e),a=0;for(let l=e,c=0;l<t;){o[c++]=s[l++],o[c++]=s[l++]-i;let h=o[c++]=s[l++]-i;o[c++]=s[l++]-e,a=Math.max(a,h)}return new _n(o,a,this.set)}}function hu(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Zi(n,e,t,i){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!i&&n instanceof Ct&&n.index<0?null:n.parent;if(!a)return n;n=a}let o=i?0:Ye.IgnoreOverlays;if(i)for(let a=n,l=a.parent;l;a=l,l=a.parent)a instanceof Ct&&a.index<0&&((s=l.enter(e,t,o))===null||s===void 0?void 0:s.from)!=a.from&&(n=l);for(;;){let a=n.enter(e,t,o);if(!a)return n;n=a}}class fu{cursor(e=0){return new ga(this,e)}getChild(e,t=null,i=null){let s=Cc(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return Cc(this,e,t,i)}resolve(e,t=0){return Zi(this,e,t,!1)}resolveInner(e,t=0){return Zi(this,e,t,!0)}matchContext(e){return ma(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(i=t,t=s.prevSibling):t=s}return i}get node(){return this}get next(){return this.parent}}class Ct extends fu{constructor(e,t,i,s){super(),this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,o=0){for(let a=this;;){for(let{children:l,positions:c}=a._tree,h=t>0?l.length:-1;e!=h;e+=t){let f=l[e],u=c[e]+a.from;if(hu(s,i,u,u+f.length)){if(f instanceof _n){if(o&Ye.ExcludeBuffers)continue;let m=f.findChild(0,f.buffer.length,t,i-u,s);if(m>-1)return new En(new JE(a,f,e,u),null,m)}else if(o&Ye.IncludeAnonymous||!f.type.isAnonymous||Za(f)){let m;if(!(o&Ye.IgnoreMounts)&&(m=pr.get(f))&&!m.overlay)return new Ct(m.tree,u,e,a);let T=new Ct(f,u,e,a);return o&Ye.IncludeAnonymous||!T.type.isAnonymous?T:T.nextChild(t<0?f.children.length-1:0,t,i,s)}}}if(o&Ye.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&Ye.IgnoreOverlays)&&(s=pr.get(this._tree))&&s.overlay){let o=e-this.from;for(let{from:a,to:l}of s.overlay)if((t>0?a<=o:a<o)&&(t<0?l>=o:l>o))return new Ct(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Cc(n,e,t,i){let s=n.cursor(),o=[];if(!s.firstChild())return o;if(t!=null){for(let a=!1;!a;)if(a=s.type.is(t),!s.nextSibling())return o}for(;;){if(i!=null&&s.type.is(i))return o;if(s.type.is(e)&&o.push(s.node),!s.nextSibling())return i==null?o:[]}}function ma(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class JE{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class En extends fu{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new En(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Ye.ExcludeBuffers)return null;let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new En(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new En(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new En(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,o=i.buffer[this.index+3];if(o>s){let a=i.buffer[this.index+1];e.push(i.slice(s,o,a)),t.push(0)}return new He(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function uu(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let a=n[o];(a.from>t.from||a.to<t.to)&&(t=a,e=o)}let i=t instanceof Ct&&t.index<0?null:t.parent,s=n.slice();return i?s[e]=i:s.splice(e,1),new QE(s,t)}class QE{constructor(e,t){this.heads=e,this.node=t}get next(){return uu(this.heads)}}function ZE(n,e,t){let i=n.resolveInner(e,t),s=null;for(let o=i instanceof Ct?i:i.context.parent;o;o=o.parent)if(o.index<0){let a=o.parent;(s||(s=[i])).push(a.resolve(e,t)),o=a}else{let a=pr.get(o.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let l=new Ct(a.tree,a.overlay[0].from+o.from,-1,o);(s||(s=[i])).push(Zi(l,e,t,!1))}}return s?uu(s):i}class ga{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ct)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof Ct?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,o=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Ye.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ye.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ye.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(s.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,a=e<0?-1:i._tree.children.length;o!=a;o+=e){let l=i._tree.children[o];if(this.mode&Ye.IncludeAnonymous||l instanceof _n||!l.type.isAnonymous||Za(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,i=o+1;break e}s=this.stack[--o]}for(let s=i;s<this.stack.length;s++)t=new En(this.buffer,t,this.stack[s]);return this.bufferNode=new En(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return ma(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,o=this.stack.length-1;s>=0;o--){if(o<0)return ma(this._tree,e,s);let a=i[t.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function Za(n){return n.children.some(e=>e instanceof _n||!e.type.isAnonymous||Za(e))}function eT(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=cu,reused:o=[],minRepeatType:a=i.types.length}=n,l=Array.isArray(t)?new Qa(t,t.length):t,c=i.types,h=0,f=0;function u(H,M,V,ie,z,Y){let{id:ee,start:K,end:he,size:ue}=l,Ee=f,Ce=h;for(;ue<0;)if(l.next(),ue==-1){let at=o[ee];V.push(at),ie.push(K-H);return}else if(ue==-3){h=ee;return}else if(ue==-4){f=ee;return}else throw new RangeError(`Unrecognized record size: ${ue}`);let Oe=c[ee],ke,_e,We=K-H;if(he-K<=s&&(_e=p(l.pos-M,z))){let at=new Uint16Array(_e.size-_e.skip),ze=l.pos-_e.size,Rt=at.length;for(;l.pos>ze;)Rt=L(_e.start,at,Rt);ke=new _n(at,he-_e.start,i),We=_e.start-H}else{let at=l.pos-ue;l.next();let ze=[],Rt=[],Kt=ee>=a?ee:-1,an=0,Yn=he;for(;l.pos>at;)Kt>=0&&l.id==Kt&&l.size>=0?(l.end<=Yn-s&&(N(ze,Rt,K,an,l.end,Yn,Kt,Ee,Ce),an=ze.length,Yn=l.end),l.next()):Y>2500?m(K,at,ze,Rt):u(K,at,ze,Rt,Kt,Y+1);if(Kt>=0&&an>0&&an<ze.length&&N(ze,Rt,K,an,K,Yn,Kt,Ee,Ce),ze.reverse(),Rt.reverse(),Kt>-1&&an>0){let ms=T(Oe,Ce);ke=el(Oe,ze,Rt,0,ze.length,0,he-K,ms,ms)}else ke=y(Oe,ze,Rt,he-K,Ee-he,Ce)}V.push(ke),ie.push(We)}function m(H,M,V,ie){let z=[],Y=0,ee=-1;for(;l.pos>M;){let{id:K,start:he,end:ue,size:Ee}=l;if(Ee>4)l.next();else{if(ee>-1&&he<ee)break;ee<0&&(ee=ue-s),z.push(K,he,ue),Y++,l.next()}}if(Y){let K=new Uint16Array(Y*4),he=z[z.length-2];for(let ue=z.length-3,Ee=0;ue>=0;ue-=3)K[Ee++]=z[ue],K[Ee++]=z[ue+1]-he,K[Ee++]=z[ue+2]-he,K[Ee++]=Ee;V.push(new _n(K,z[2]-he,i)),ie.push(he-H)}}function T(H,M){return(V,ie,z)=>{let Y=0,ee=V.length-1,K,he;if(ee>=0&&(K=V[ee])instanceof He){if(!ee&&K.type==H&&K.length==z)return K;(he=K.prop(ge.lookAhead))&&(Y=ie[ee]+K.length+he)}return y(H,V,ie,z,Y,M)}}function N(H,M,V,ie,z,Y,ee,K,he){let ue=[],Ee=[];for(;H.length>ie;)ue.push(H.pop()),Ee.push(M.pop()+V-z);H.push(y(i.types[ee],ue,Ee,Y-z,K-Y,he)),M.push(z-V)}function y(H,M,V,ie,z,Y,ee){if(Y){let K=[ge.contextHash,Y];ee=ee?[K].concat(ee):[K]}if(z>25){let K=[ge.lookAhead,z];ee=ee?[K].concat(ee):[K]}return new He(H,M,V,ie,ee)}function p(H,M){let V=l.fork(),ie=0,z=0,Y=0,ee=V.end-s,K={size:0,start:0,skip:0};e:for(let he=V.pos-H;V.pos>he;){let ue=V.size;if(V.id==M&&ue>=0){K.size=ie,K.start=z,K.skip=Y,Y+=4,ie+=4,V.next();continue}let Ee=V.pos-ue;if(ue<0||Ee<he||V.start<ee)break;let Ce=V.id>=a?4:0,Oe=V.start;for(V.next();V.pos>Ee;){if(V.size<0)if(V.size==-3)Ce+=4;else break e;else V.id>=a&&(Ce+=4);V.next()}z=Oe,ie+=ue,Y+=Ce}return(M<0||ie==H)&&(K.size=ie,K.start=z,K.skip=Y),K.size>4?K:void 0}function L(H,M,V){let{id:ie,start:z,end:Y,size:ee}=l;if(l.next(),ee>=0&&ie<a){let K=V;if(ee>4){let he=l.pos-(ee-4);for(;l.pos>he;)V=L(H,M,V)}M[--V]=K,M[--V]=Y-H,M[--V]=z-H,M[--V]=ie}else ee==-3?h=ie:ee==-4&&(f=ie);return V}let D=[],G=[];for(;l.pos>0;)u(n.start||0,n.bufferStart||0,D,G,-1,0);let q=(e=n.length)!==null&&e!==void 0?e:D.length?G[0]+D[0].length:0;return new He(c[n.topID],D.reverse(),G.reverse(),q)}const Lc=new WeakMap;function nr(n,e){if(!n.isAnonymous||e instanceof _n||e.type!=n)return 1;let t=Lc.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof He)){t=1;break}t+=nr(n,i)}Lc.set(e,t)}return t}function el(n,e,t,i,s,o,a,l,c){let h=0;for(let N=i;N<s;N++)h+=nr(n,e[N]);let f=Math.ceil(h*1.5/8),u=[],m=[];function T(N,y,p,L,D){for(let G=p;G<L;){let q=G,H=y[G],M=nr(n,N[G]);for(G++;G<L;G++){let V=nr(n,N[G]);if(M+V>=f)break;M+=V}if(G==q+1){if(M>f){let V=N[q];T(V.children,V.positions,0,V.children.length,y[q]+D);continue}u.push(N[q])}else{let V=y[G-1]+N[G-1].length-H;u.push(el(n,N,y,q,G,H,V,null,c))}m.push(H+D-o)}}return T(e,t,i,s,0),(l||c)(u,m,a)}class Fn{constructor(e,t,i,s,o=!1,a=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new Fn(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&s.push(o);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],o=1,a=e.length?e[0]:null;for(let l=0,c=0,h=0;;l++){let f=l<t.length?t[l]:null,u=f?f.fromA:1e9;if(u-c>=i)for(;a&&a.from<u;){let m=a;if(c>=m.from||u<=m.to||h){let T=Math.max(m.from,c)-h,N=Math.min(m.to,u)-h;m=T>=N?null:new Fn(T,N,m.tree,m.offset+h,l>0,!!f)}if(m&&s.push(m),a.to>u)break;a=o<e.length?e[o++]:null}if(!f)break;c=f.toA,h=f.toA-f.toB}return s}}class du{startParse(e,t,i){return typeof e=="string"&&(e=new tT(e)),i=i?i.length?i.map(s=>new ho(s.from,s.to)):[new ho(0,0)]:[new ho(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let o=s.advance();if(o)return o}}}class tT{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ge({perNode:!0});let nT=0;class Ot{constructor(e,t,i,s){this.name=e,this.set=t,this.base=i,this.modified=s,this.id=nT++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof Ot&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let s=new Ot(i,[],null,[]);if(s.set.push(s),t)for(let o of t.set)s.set.push(o);return s}static defineModifier(e){let t=new mr(e);return i=>i.modified.indexOf(t)>-1?i:mr.get(i.base||i,i.modified.concat(t).sort((s,o)=>s.id-o.id))}}let iT=0;class mr{constructor(e){this.name=e,this.instances=[],this.id=iT++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&sT(t,l.modified));if(i)return i;let s=[],o=new Ot(e.name,s,e,t);for(let l of t)l.instances.push(o);let a=rT(t);for(let l of e.set)if(!l.modified.length)for(let c of a)s.push(mr.get(l,c));return o}}function sT(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function rT(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function pu(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let o=[],a=2,l=s;for(let u=0;;){if(l=="..."&&u>0&&u+3==s.length){a=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!m)throw new RangeError("Invalid path: "+s);if(o.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),u+=m[0].length,u==s.length)break;let T=s[u++];if(u==s.length&&T=="!"){a=0;break}if(T!="/")throw new RangeError("Invalid path: "+s);l=s.slice(u)}let c=o.length-1,h=o[c];if(!h)throw new RangeError("Invalid path: "+s);let f=new gr(i,a,c>0?o.slice(0,c):null);e[h]=f.sort(e[h])}}return mu.add(e)}const mu=new ge;class gr{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}gr.empty=new gr([],2,null);function gu(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let a of o.tag)t[a.id]=o.class;let{scope:i,all:s=null}=e||{};return{style:o=>{let a=s;for(let l of o)for(let c of l.set){let h=t[c.id];if(h){a=a?a+" "+h:h;break}}return a},scope:i}}function oT(n,e){let t=null;for(let i of n){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function aT(n,e,t,i=0,s=n.length){let o=new lT(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,s,"",o.highlighters),o.flush(s)}class lT{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,o){let{type:a,from:l,to:c}=e;if(l>=i||c<=t)return;a.isTop&&(o=this.highlighters.filter(T=>!T.scope||T.scope(a)));let h=s,f=cT(e)||gr.empty,u=oT(o,f.tags);if(u&&(h&&(h+=" "),h+=u,f.mode==1&&(s+=(s?" ":"")+u)),this.startSpan(Math.max(t,l),h),f.opaque)return;let m=e.tree&&e.tree.prop(ge.mounted);if(m&&m.overlay){let T=e.node.enter(m.overlay[0].from+l,1),N=this.highlighters.filter(p=>!p.scope||p.scope(m.tree.type)),y=e.firstChild();for(let p=0,L=l;;p++){let D=p<m.overlay.length?m.overlay[p]:null,G=D?D.from+l:c,q=Math.max(t,L),H=Math.min(i,G);if(q<H&&y)for(;e.from<H&&(this.highlightRange(e,q,H,s,o),this.startSpan(Math.min(H,e.to),h),!(e.to>=G||!e.nextSibling())););if(!D||G>i)break;L=D.to+l,L>t&&(this.highlightRange(T.cursor(),Math.max(t,D.from+l),Math.min(i,L),"",N),this.startSpan(Math.min(i,L),h))}y&&e.parent()}else if(e.firstChild()){m&&(s="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,o),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function cT(n){let e=n.type.prop(mu);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const $=Ot.define,Us=$(),hn=$(),Ic=$(hn),wc=$(hn),fn=$(),Bs=$(fn),fo=$(fn),Ut=$(),yn=$(Ut),Mt=$(),Ft=$(),Ea=$(),Li=$(Ea),Hs=$(),w={comment:Us,lineComment:$(Us),blockComment:$(Us),docComment:$(Us),name:hn,variableName:$(hn),typeName:Ic,tagName:$(Ic),propertyName:wc,attributeName:$(wc),className:$(hn),labelName:$(hn),namespace:$(hn),macroName:$(hn),literal:fn,string:Bs,docString:$(Bs),character:$(Bs),attributeValue:$(Bs),number:fo,integer:$(fo),float:$(fo),bool:$(fn),regexp:$(fn),escape:$(fn),color:$(fn),url:$(fn),keyword:Mt,self:$(Mt),null:$(Mt),atom:$(Mt),unit:$(Mt),modifier:$(Mt),operatorKeyword:$(Mt),controlKeyword:$(Mt),definitionKeyword:$(Mt),moduleKeyword:$(Mt),operator:Ft,derefOperator:$(Ft),arithmeticOperator:$(Ft),logicOperator:$(Ft),bitwiseOperator:$(Ft),compareOperator:$(Ft),updateOperator:$(Ft),definitionOperator:$(Ft),typeOperator:$(Ft),controlOperator:$(Ft),punctuation:Ea,separator:$(Ea),bracket:Li,angleBracket:$(Li),squareBracket:$(Li),paren:$(Li),brace:$(Li),content:Ut,heading:yn,heading1:$(yn),heading2:$(yn),heading3:$(yn),heading4:$(yn),heading5:$(yn),heading6:$(yn),contentSeparator:$(Ut),list:$(Ut),quote:$(Ut),emphasis:$(Ut),strong:$(Ut),link:$(Ut),monospace:$(Ut),strikethrough:$(Ut),inserted:$(),deleted:$(),changed:$(),invalid:$(),meta:Hs,documentMeta:$(Hs),annotation:$(Hs),processingInstruction:$(Hs),definition:Ot.defineModifier("definition"),constant:Ot.defineModifier("constant"),function:Ot.defineModifier("function"),standard:Ot.defineModifier("standard"),local:Ot.defineModifier("local"),special:Ot.defineModifier("special")};for(let n in w){let e=w[n];e instanceof Ot&&(e.name=n)}gu([{tag:w.link,class:"tok-link"},{tag:w.heading,class:"tok-heading"},{tag:w.emphasis,class:"tok-emphasis"},{tag:w.strong,class:"tok-strong"},{tag:w.keyword,class:"tok-keyword"},{tag:w.atom,class:"tok-atom"},{tag:w.bool,class:"tok-bool"},{tag:w.url,class:"tok-url"},{tag:w.labelName,class:"tok-labelName"},{tag:w.inserted,class:"tok-inserted"},{tag:w.deleted,class:"tok-deleted"},{tag:w.literal,class:"tok-literal"},{tag:w.string,class:"tok-string"},{tag:w.number,class:"tok-number"},{tag:[w.regexp,w.escape,w.special(w.string)],class:"tok-string2"},{tag:w.variableName,class:"tok-variableName"},{tag:w.local(w.variableName),class:"tok-variableName tok-local"},{tag:w.definition(w.variableName),class:"tok-variableName tok-definition"},{tag:w.special(w.variableName),class:"tok-variableName2"},{tag:w.definition(w.propertyName),class:"tok-propertyName tok-definition"},{tag:w.typeName,class:"tok-typeName"},{tag:w.namespace,class:"tok-namespace"},{tag:w.className,class:"tok-className"},{tag:w.macroName,class:"tok-macroName"},{tag:w.propertyName,class:"tok-propertyName"},{tag:w.operator,class:"tok-operator"},{tag:w.comment,class:"tok-comment"},{tag:w.meta,class:"tok-meta"},{tag:w.invalid,class:"tok-invalid"},{tag:w.punctuation,class:"tok-punctuation"}]);var uo;const ei=new ge;function hT(n){return ne.define({combine:n?e=>e.concat(n):void 0})}const fT=new ge;class wt{constructor(e,t,i=[],s=""){this.data=e,this.name=s,Te.prototype.hasOwnProperty("tree")||Object.defineProperty(Te.prototype,"tree",{get(){return Xe(this)}}),this.parser=t,this.extension=[On.of(this),Te.languageData.of((o,a,l)=>{let c=xc(o,a,l),h=c.type.prop(ei);if(!h)return[];let f=o.facet(h),u=c.type.prop(fT);if(u){let m=c.resolve(a-c.from,l);for(let T of u)if(T.test(m,o)){let N=o.facet(T.facet);return T.type=="replace"?N:N.concat(f)}}return f})].concat(i)}isActiveAt(e,t,i=-1){return xc(e,t,i).type.prop(ei)==this.data}findRegions(e){let t=e.facet(On);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(o,a)=>{if(o.prop(ei)==this.data){i.push({from:a,to:a+o.length});return}let l=o.prop(ge.mounted);if(l){if(l.tree.prop(ei)==this.data){if(l.overlay)for(let c of l.overlay)i.push({from:c.from+a,to:c.to+a});else i.push({from:a,to:a+o.length});return}else if(l.overlay){let c=i.length;if(s(l.tree,l.overlay[0].from+a),i.length>c)return}}for(let c=0;c<o.children.length;c++){let h=o.children[c];h instanceof He&&s(h,o.positions[c]+a)}};return s(Xe(e),0),i}get allowsNesting(){return!0}}wt.setState=me.define();function xc(n,e,t){let i=n.facet(On),s=Xe(n).topNode;if(!i||i.allowsNesting)for(let o=s;o;o=o.enter(e,t,Ye.ExcludeBuffers))o.type.isTop&&(s=o);return s}class Er extends wt{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=hT(e.languageData);return new Er(t,e.parser.configure({props:[ei.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Er(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Xe(n){let e=n.field(wt.state,!1);return e?e.tree:He.empty}class uT{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Ii=null;class Tr{constructor(e,t,i=[],s,o,a,l,c){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=o,this.viewport=a,this.skipped=l,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Tr(e,t,[],He.empty,0,i,[],null)}startParse(){return this.parser.startParse(new uT(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=He.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Fn.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Fn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Ii;Ii=this;try{return e()}finally{Ii=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=vc(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:o,viewport:a,skipped:l}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((h,f,u,m)=>c.push({fromA:h,toA:f,fromB:u,toB:m})),i=Fn.applyChanges(i,c),s=He.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let f=e.mapPos(h.from,1),u=e.mapPos(h.to,-1);f<u&&l.push({from:f,to:u})}}}return new Tr(this.parser,t,i,s,o,a,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:o}=this.skipped[i];s<e.to&&o>e.from&&(this.fragments=vc(this.fragments,s,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends du{createParse(t,i,s){let o=s[0].from,a=s[s.length-1].to;return{parsedPos:o,advance(){let c=Ii;if(c){for(let h of s)c.tempSkipped.push(h);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=a,new He(mt.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Ii}}function vc(n,e,t){return Fn.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class di{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new di(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Tr.create(e.facet(On).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new di(i)}}wt.state=Ze.define({create:di.init,update(n,e){for(let t of e.effects)if(t.is(wt.setState))return t.value;return e.startState.facet(On)!=e.state.facet(On)?di.init(e.state):n.apply(e)}});let Eu=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Eu=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const po=typeof navigator<"u"&&(!((uo=navigator.scheduling)===null||uo===void 0)&&uo.isInputPending)?()=>navigator.scheduling.isInputPending():null,dT=Fe.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(wt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(wt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Eu(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,o=i.field(wt.state);if(o.tree==o.context.tree&&o.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!po?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<s&&i.doc.length>s+1e3,c=o.context.work(()=>po&&po()||Date.now()>a,s+(l?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:wt.setState.of(new di(o.context))})),this.chunkBudget>0&&!(c&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>dt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),On=ne.define({combine(n){return n.length?n[0]:null},enables:n=>[wt.state,dT,Q.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class pT{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const mT=ne.define(),Br=ne.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Sr(n){let e=n.facet(Br);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function es(n,e){let t="",i=n.tabSize,s=n.facet(Br)[0];if(s=="	"){for(;e>=i;)t+="	",e-=i;s=" "}for(let o=0;o<e;o++)t+=s;return t}function tl(n,e){n instanceof Te&&(n=new Hr(n));for(let i of n.state.facet(mT)){let s=i(n,e);if(s!==void 0)return s}let t=Xe(n.state);return t.length>=e?gT(n,t,e):null}class Hr{constructor(e,t={}){this.state=e,this.options=t,this.unit=Sr(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:o}=this.options;return s!=null&&s>=i.from&&s<=i.to?o&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),o=this.countColumn(i,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(o+=a-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return gi(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let a=o(s);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Tu=new ge;function gT(n,e,t){let i=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=i.node){let o=[];for(let a=s;a&&!(a.from==i.node.from&&a.type==i.node.type);a=a.parent)o.push(a);for(let a=o.length-1;a>=0;a--)i={node:o[a],next:i}}return Su(i,n,t)}function Su(n,e,t){for(let i=n;i;i=i.next){let s=TT(i.node);if(s)return s(nl.create(e,t,i))}return 0}function ET(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function TT(n){let e=n.type.prop(Tu);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(ge.closedBy))){let s=n.lastChild,o=s&&i.indexOf(s.name)>-1;return a=>_T(a,!0,1,void 0,o&&!ET(a)?s.from:void 0)}return n.parent==null?ST:null}function ST(){return 0}class nl extends Hr{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new nl(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(AT(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Su(this.context.next,this.base,this.pos)}}function AT(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function RT(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),a=s==null||s<=o.from?o.to:Math.min(o.to,s);for(let l=t.to;;){let c=e.childAfter(l);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=a)return null;let h=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+h}}l=c.to}}function _T(n,e,t,i,s){let o=n.textAfter,a=o.match(/^\s*/)[0].length,l=i&&o.slice(a,a+i.length)==i||s==n.pos+a,c=RT(n);return c?l?n.column(c.from):n.column(c.to):n.baseIndent+(l?0:n.unit*t)}function OT({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const NT=200;function bT(){return Te.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,s=t.lineAt(i);if(i>s.from+NT)return n;let o=t.sliceString(s.from,i);if(!e.some(h=>h.test(o)))return n;let{state:a}=n,l=-1,c=[];for(let{head:h}of a.selection.ranges){let f=a.doc.lineAt(h);if(f.from==l)continue;l=f.from;let u=tl(a,f.from);if(u==null)continue;let m=/^\s*/.exec(f.text)[0],T=es(a,u);m!=T&&c.push({from:f.from,to:f.from+m.length,insert:T})}return c.length?[n,{changes:c,sequential:!0}]:n})}const yT=ne.define(),Au=new ge;function CT(n,e,t){let i=Xe(n);if(i.length<t)return null;let s=i.resolveStack(t,1),o=null;for(let a=s;a;a=a.next){let l=a.node;if(l.to<=t||l.from>t)continue;if(o&&l.from<e)break;let c=l.type.prop(Au);if(c&&(l.to<i.length-50||i.length==n.doc.length||!LT(l))){let h=c(l,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(o=h)}}return o}function LT(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Ar(n,e,t){for(let i of n.facet(yT)){let s=i(n,e,t);if(s)return s}return CT(n,e,t)}function Ru(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const Wr=me.define({map:Ru}),us=me.define({map:Ru});function _u(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Vn=Ze.define({create(){return ae.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(Wr)&&!IT(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(bu),s=i?ae.replace({widget:new MT(i(e.state,t.value))}):Dc;n=n.update({add:[s.range(t.value.from,t.value.to)]})}else t.is(us)&&(n=n.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(s,o)=>{s<i&&o>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(s,o)=>o<=i||s>=i}))}return n},provide:n=>Q.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,s)=>{t.push(i,s)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],s=n[t++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(Dc.range(i,s))}return ae.set(e,!0)}});function Rr(n,e,t){var i;let s=null;return(i=n.field(Vn,!1))===null||i===void 0||i.between(e,t,(o,a)=>{(!s||s.from>o)&&(s={from:o,to:a})}),s}function IT(n,e,t){let i=!1;return n.between(e,e,(s,o)=>{s==e&&o==t&&(i=!0)}),i}function Ou(n,e){return n.field(Vn,!1)?e:e.concat(me.appendConfig.of(yu()))}const wT=n=>{for(let e of _u(n)){let t=Ar(n.state,e.from,e.to);if(t)return n.dispatch({effects:Ou(n.state,[Wr.of(t),Nu(n,t)])}),!0}return!1},xT=n=>{if(!n.state.field(Vn,!1))return!1;let e=[];for(let t of _u(n)){let i=Rr(n.state,t.from,t.to);i&&e.push(us.of(i),Nu(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Nu(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,s=n.state.doc.lineAt(e.to).number;return Q.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${s}.`)}const vT=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let s=n.lineBlockAt(i),o=Ar(e,s.from,s.to);o&&t.push(Wr.of(o)),i=(o?n.lineBlockAt(o.to):s).to+1}return t.length&&n.dispatch({effects:Ou(n.state,t)}),!!t.length},DT=n=>{let e=n.state.field(Vn,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,s)=>{t.push(us.of({from:i,to:s}))}),n.dispatch({effects:t}),!0},kT=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:wT},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:xT},{key:"Ctrl-Alt-[",run:vT},{key:"Ctrl-Alt-]",run:DT}],PT={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},bu=ne.define({combine(n){return Xt(n,PT)}});function yu(n){return[Vn,BT]}function Cu(n,e){let{state:t}=n,i=t.facet(bu),s=a=>{let l=n.lineBlockAt(n.posAtDOM(a.target)),c=Rr(n.state,l.from,l.to);c&&n.dispatch({effects:us.of(c)}),a.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,s,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=s,o}const Dc=ae.replace({widget:new class extends on{toDOM(n){return Cu(n,null)}}});class MT extends on{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Cu(e,this.value)}}const FT={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class mo extends rn{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function UT(n={}){let e=Object.assign(Object.assign({},FT),n),t=new mo(e,!0),i=new mo(e,!1),s=Fe.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(On)!=a.state.facet(On)||a.startState.field(Vn,!1)!=a.state.field(Vn,!1)||Xe(a.startState)!=Xe(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let l=new nn;for(let c of a.viewportLineBlocks){let h=Rr(a.state,c.from,c.to)?i:Ar(a.state,c.from,c.to)?t:null;h&&l.add(c.from,c.from,h)}return l.finish()}}),{domEventHandlers:o}=e;return[s,UE({class:"cm-foldGutter",markers(a){var l;return((l=a.plugin(s))===null||l===void 0?void 0:l.markers)||Ae.empty},initialSpacer(){return new mo(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(a,l,c)=>{if(o.click&&o.click(a,l,c))return!0;let h=Rr(a.state,l.from,l.to);if(h)return a.dispatch({effects:us.of(h)}),!0;let f=Ar(a.state,l.from,l.to);return f?(a.dispatch({effects:Wr.of(f)}),!0):!1}})}),yu()]}const BT=Q.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ei{constructor(e,t){this.specs=e;let i;function s(l){let c=Sn.newName();return(i||(i=Object.create(null)))["."+c]=l,c}const o=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof wt?l=>l.prop(ei)==a.data:a?l=>l==a:void 0,this.style=gu(e.map(l=>({tag:l.tag,class:l.class||s(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=i?new Sn(i):null,this.themeType=t.themeType}static define(e,t){return new Ei(e,t||{})}}const Ta=ne.define(),Lu=ne.define({combine(n){return n.length?[n[0]]:null}});function go(n){let e=n.facet(Ta);return e.length?e:n.facet(Lu)}function il(n,e){let t=[WT],i;return n instanceof Ei&&(n.module&&t.push(Q.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(Lu.of(n)):i?t.push(Ta.computeN([Q.darkTheme],s=>s.facet(Q.darkTheme)==(i=="dark")?[n]:[])):t.push(Ta.of(n)),t}class HT{constructor(e){this.markCache=Object.create(null),this.tree=Xe(e.state),this.decorations=this.buildDeco(e,go(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Xe(e.state),i=go(e.state),s=i!=go(e.startState),{viewport:o}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!s&&t.type==this.tree.type&&a>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return ae.none;let i=new nn;for(let{from:s,to:o}of e.visibleRanges)aT(this.tree,t,(a,l,c)=>{i.add(a,l,this.markCache[c]||(this.markCache[c]=ae.mark({class:c})))},s,o);return i.finish()}}const WT=qn.high(Fe.fromClass(HT,{decorations:n=>n.decorations})),GT=Ei.define([{tag:w.meta,color:"#404740"},{tag:w.link,textDecoration:"underline"},{tag:w.heading,textDecoration:"underline",fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strong,fontWeight:"bold"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.keyword,color:"#708"},{tag:[w.atom,w.bool,w.url,w.contentSeparator,w.labelName],color:"#219"},{tag:[w.literal,w.inserted],color:"#164"},{tag:[w.string,w.deleted],color:"#a11"},{tag:[w.regexp,w.escape,w.special(w.string)],color:"#e40"},{tag:w.definition(w.variableName),color:"#00f"},{tag:w.local(w.variableName),color:"#30a"},{tag:[w.typeName,w.namespace],color:"#085"},{tag:w.className,color:"#167"},{tag:[w.special(w.variableName),w.macroName],color:"#256"},{tag:w.definition(w.propertyName),color:"#00c"},{tag:w.comment,color:"#940"},{tag:w.invalid,color:"#f00"}]),VT=Q.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Iu=1e4,wu="()[]{}",xu=ne.define({combine(n){return Xt(n,{afterCursor:!0,brackets:wu,maxScanDistance:Iu,renderMatch:jT})}}),qT=ae.mark({class:"cm-matchingBracket"}),YT=ae.mark({class:"cm-nonmatchingBracket"});function jT(n){let e=[],t=n.matched?qT:YT;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const XT=Ze.define({create(){return ae.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(xu);for(let s of e.state.selection.ranges){if(!s.empty)continue;let o=Gt(e.state,s.head,-1,i)||s.head>0&&Gt(e.state,s.head-1,1,i)||i.afterCursor&&(Gt(e.state,s.head,1,i)||s.head<e.state.doc.length&&Gt(e.state,s.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return ae.set(t,!0)},provide:n=>Q.decorations.from(n)}),zT=[XT,VT];function KT(n={}){return[xu.of(n),zT]}const $T=new ge;function Sa(n,e,t){let i=n.prop(e<0?ge.openedBy:ge.closedBy);if(i)return i;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function Aa(n){let e=n.type.prop($T);return e?e(n.node):n}function Gt(n,e,t,i={}){let s=i.maxScanDistance||Iu,o=i.brackets||wu,a=Xe(n),l=a.resolveInner(e,t);for(let c=l;c;c=c.parent){let h=Sa(c.type,t,o);if(h&&c.from<c.to){let f=Aa(c);if(f&&(t>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return JT(n,e,t,c,f,h,o)}}return QT(n,e,t,a,l.type,s,o)}function JT(n,e,t,i,s,o,a){let l=i.parent,c={from:s.from,to:s.to},h=0,f=l?.cursor();if(f&&(t<0?f.childBefore(i.from):f.childAfter(i.to)))do if(t<0?f.to<=i.from:f.from>=i.to){if(h==0&&o.indexOf(f.type.name)>-1&&f.from<f.to){let u=Aa(f);return{start:c,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(Sa(f.type,t,a))h++;else if(Sa(f.type,-t,a)){if(h==0){let u=Aa(f);return{start:c,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}h--}}while(t<0?f.prevSibling():f.nextSibling());return{start:c,matched:!1}}function QT(n,e,t,i,s,o,a){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=a.indexOf(l);if(c<0||c%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},f=n.doc.iterRange(e,t>0?n.doc.length:0),u=0;for(let m=0;!f.next().done&&m<=o;){let T=f.value;t<0&&(m+=T.length);let N=e+m*t;for(let y=t>0?0:T.length-1,p=t>0?T.length:-1;y!=p;y+=t){let L=a.indexOf(T[y]);if(!(L<0||i.resolveInner(N+y,1).type!=s))if(L%2==0==t>0)u++;else{if(u==1)return{start:h,end:{from:N+y,to:N+y+1},matched:L>>1==c>>1};u--}}t>0&&(m+=T.length)}return f.done?{start:h,matched:!1}:null}const ZT=Object.create(null),kc=[mt.none],Pc=[],Mc=Object.create(null),eS=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])eS[n]=tS(ZT,e);function Eo(n,e){Pc.indexOf(n)>-1||(Pc.push(n),console.warn(e))}function tS(n,e){let t=[];for(let l of e.split(" ")){let c=[];for(let h of l.split(".")){let f=n[h]||w[h];f?typeof f=="function"?c.length?c=c.map(f):Eo(h,`Modifier ${h} used at start of tag`):c.length?Eo(h,`Tag ${h} used as modifier`):c=Array.isArray(f)?f:[f]:Eo(h,`Unknown highlighting tag ${h}`)}for(let h of c)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+t.map(l=>l.id),o=Mc[s];if(o)return o.id;let a=Mc[s]=mt.define({id:kc.length,name:i,props:[pu({[i]:t})]});return kc.push(a),a.id}xe.RTL,xe.LTR;const nS=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=rl(n.state,t.from);return i.line?iS(n):i.block?rS(n):!1};function sl(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(i(t.update(s)),!0):!1}}const iS=sl(lS,0),sS=sl(vu,0),rS=sl((n,e)=>vu(n,e,aS(e)),0);function rl(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const wi=50;function oS(n,{open:e,close:t},i,s){let o=n.sliceDoc(i-wi,i),a=n.sliceDoc(s,s+wi),l=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(a)[0].length,h=o.length-l;if(o.slice(h-e.length,h)==e&&a.slice(c,c+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:s+c,margin:c&&1}};let f,u;s-i<=2*wi?f=u=n.sliceDoc(i,s):(f=n.sliceDoc(i,i+wi),u=n.sliceDoc(s-wi,s));let m=/^\s*/.exec(f)[0].length,T=/\s*$/.exec(u)[0].length,N=u.length-T-t.length;return f.slice(m,m+e.length)==e&&u.slice(N,N+t.length)==t?{open:{pos:i+m+e.length,margin:/\s/.test(f.charAt(m+e.length))?1:0},close:{pos:s-T-t.length,margin:/\s/.test(u.charAt(N-1))?1:0}}:null}function aS(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),s=t.to<=i.to?i:n.doc.lineAt(t.to);s.from>i.from&&s.from==t.to&&(s=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function vu(n,e,t=e.selection.ranges){let i=t.map(o=>rl(e,o.from).block);if(!i.every(o=>o))return null;let s=t.map((o,a)=>oS(e,i[a],o.from,o.to));if(n!=2&&!s.every(o=>o))return{changes:e.changes(t.map((o,a)=>s[a]?[]:[{from:o.from,insert:i[a].open+" "},{from:o.to,insert:" "+i[a].close}]))};if(n!=1&&s.some(o=>o)){let o=[];for(let a=0,l;a<s.length;a++)if(l=s[a]){let c=i[a],{open:h,close:f}=l;o.push({from:h.pos-c.open.length,to:h.pos+h.margin},{from:f.pos-f.margin,to:f.pos+c.close.length})}return{changes:o}}return null}function lS(n,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:o,to:a}of t){let l=i.length,c=1e9,h=rl(e,o).line;if(h){for(let f=o;f<=a;){let u=e.doc.lineAt(f);if(u.from>s&&(o==a||a>u.from)){s=u.from;let m=/^\s*/.exec(u.text)[0].length,T=m==u.length,N=u.text.slice(m,m+h.length)==h?m:-1;m<u.text.length&&m<c&&(c=m),i.push({line:u,comment:N,token:h,indent:m,empty:T,single:!1})}f=u.to+1}if(c<1e9)for(let f=l;f<i.length;f++)i[f].indent<i[f].line.text.length&&(i[f].indent=c);i.length==l+1&&(i[l].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:c,indent:h,empty:f,single:u}of i)(u||!f)&&o.push({from:l.from+h,insert:c+" "});let a=e.changes(o);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:l,token:c}of i)if(l>=0){let h=a.from+l,f=h+c.length;a.text[f-a.from]==" "&&f++,o.push({from:h,to:f})}return{changes:o}}return null}const Ra=jt.define(),cS=jt.define(),hS=ne.define(),Du=ne.define({combine(n){return Xt(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,s)=>e(i,s)||t(i,s)})}}),ku=Ze.define({create(){return Vt.empty},update(n,e){let t=e.state.facet(Du),i=e.annotation(Ra);if(i){let c=pt.fromTransaction(e,i.selection),h=i.side,f=h==0?n.undone:n.done;return c?f=_r(f,f.length,t.minDepth,c):f=Fu(f,e.startState.selection),new Vt(h==0?i.rest:f,h==0?f:i.rest)}let s=e.annotation(cS);if((s=="full"||s=="before")&&(n=n.isolate()),e.annotation(Ve.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=pt.fromTransaction(e),a=e.annotation(Ve.time),l=e.annotation(Ve.userEvent);return o?n=n.addChanges(o,a,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,a,l,t.newGroupDelay)),(s=="full"||s=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Vt(n.done.map(pt.fromJSON),n.undone.map(pt.fromJSON))}});function fS(n={}){return[ku,Du.of(n),Q.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Pu:e.inputType=="historyRedo"?_a:null;return i?(e.preventDefault(),i(t)):!1}})]}function Gr(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(ku,!1);if(!s)return!1;let o=s.pop(n,t,e);return o?(i(o),!0):!1}}const Pu=Gr(0,!1),_a=Gr(1,!1),uS=Gr(0,!0),dS=Gr(1,!0);class pt{constructor(e,t,i,s,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=o}setSelAfter(e){return new pt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new pt(e.changes&&Ge.fromJSON(e.changes),[],e.mapped&&qt.fromJSON(e.mapped),e.startSelection&&B.fromJSON(e.startSelection),e.selectionsAfter.map(B.fromJSON))}static fromTransaction(e,t){let i=Nt;for(let s of e.startState.facet(hS)){let o=s(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new pt(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Nt)}static selection(e){return new pt(void 0,Nt,void 0,void 0,e)}}function _r(n,e,t,i){let s=e+1>t+20?e-t-1:0,o=n.slice(s,e);return o.push(i),o}function pS(n,e){let t=[],i=!1;return n.iterChangedRanges((s,o)=>t.push(s,o)),e.iterChangedRanges((s,o,a,l)=>{for(let c=0;c<t.length;){let h=t[c++],f=t[c++];l>=h&&a<=f&&(i=!0)}}),i}function mS(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function Mu(n,e){return n.length?e.length?n.concat(e):n:e}const Nt=[],gS=200;function Fu(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-gS));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),_r(n,n.length-1,1e9,t.setSelAfter(i)))}else return[pt.selection([e])]}function ES(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function To(n,e){if(!n.length)return n;let t=n.length,i=Nt;for(;t;){let s=TS(n[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let o=n.slice(0,t);return o[t-1]=s,o}else e=s.mapped,t--,i=s.selectionsAfter}return i.length?[pt.selection(i)]:Nt}function TS(n,e,t){let i=Mu(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):Nt,t);if(!n.changes)return pt.selection(i);let s=n.changes.map(e),o=e.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(o):o;return new pt(s,me.mapEffects(n.effects,e),a,n.startSelection.map(o),i)}const SS=/^(input\.type|delete)($|\.)/;class Vt{constructor(e,t,i=0,s=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new Vt(this.done,this.undone):this}addChanges(e,t,i,s,o){let a=this.done,l=a[a.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||SS.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(o,pS(l.changes,e.changes))||i=="input.type.compose")?a=_r(a,a.length-1,s.minDepth,new pt(e.changes.compose(l.changes),Mu(me.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Nt)):a=_r(a,a.length,s.minDepth,e),new Vt(a,Nt,t,i)}addSelection(e,t,i,s){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Nt;return o.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&mS(o[o.length-1],e)?this:new Vt(Fu(this.done,e),this.undone,t,i)}addMapping(e){return new Vt(To(this.done,e),To(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let o=s[s.length-1],a=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Ra.of({side:e,rest:ES(s),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=s.length==1?Nt:s.slice(0,s.length-1);return o.mapped&&(l=To(l,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Ra.of({side:e,rest:l,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Vt.empty=new Vt(Nt,Nt);const AS=[{key:"Mod-z",run:Pu,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:_a,preventDefault:!0},{linux:"Ctrl-Shift-z",run:_a,preventDefault:!0},{key:"Mod-u",run:uS,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:dS,preventDefault:!0}];function Ti(n,e){return B.create(n.ranges.map(e),n.mainIndex)}function zt(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Dt({state:n,dispatch:e},t){let i=Ti(n.selection,t);return i.eq(n.selection,!0)?!1:(e(zt(n,i)),!0)}function Vr(n,e){return B.cursor(e?n.to:n.from)}function Uu(n,e){return Dt(n,t=>t.empty?n.moveByChar(t,e):Vr(t,e))}function it(n){return n.textDirectionAt(n.state.selection.main.head)==xe.LTR}const Bu=n=>Uu(n,!it(n)),Hu=n=>Uu(n,it(n));function Wu(n,e){return Dt(n,t=>t.empty?n.moveByGroup(t,e):Vr(t,e))}const RS=n=>Wu(n,!it(n)),_S=n=>Wu(n,it(n));function OS(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function qr(n,e,t){let i=Xe(n).resolveInner(e.head),s=t?ge.closedBy:ge.openedBy;for(let c=e.head;;){let h=t?i.childAfter(c):i.childBefore(c);if(!h)break;OS(n,h,s)?i=h:c=t?h.to:h.from}let o=i.type.prop(s),a,l;return o&&(a=t?Gt(n,i.from,1):Gt(n,i.to,-1))&&a.matched?l=t?a.end.to:a.end.from:l=t?i.to:i.from,B.cursor(l,t?-1:1)}const NS=n=>Dt(n,e=>qr(n.state,e,!it(n))),bS=n=>Dt(n,e=>qr(n.state,e,it(n)));function Gu(n,e){return Dt(n,t=>{if(!t.empty)return Vr(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const Vu=n=>Gu(n,!1),qu=n=>Gu(n,!0);function Yu(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,s;if(e){for(let o of n.state.facet(Q.scrollMargins)){let a=o(n);a?.top&&(t=Math.max(a?.top,t)),a?.bottom&&(i=Math.max(a?.bottom,i))}s=n.scrollDOM.clientHeight-t-i}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function ju(n,e){let t=Yu(n),{state:i}=n,s=Ti(i.selection,a=>a.empty?n.moveVertically(a,e,t.height):Vr(a,e));if(s.eq(i.selection))return!1;let o;if(t.selfScroll){let a=n.coordsAtPos(i.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),c=l.top+t.marginTop,h=l.bottom-t.marginBottom;a&&a.top>c&&a.bottom<h&&(o=Q.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-c}))}return n.dispatch(zt(i,s),{effects:o}),!0}const Fc=n=>ju(n,!1),Oa=n=>ju(n,!0);function Nn(n,e,t){let i=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(s=B.cursor(i.from+o))}return s}const yS=n=>Dt(n,e=>Nn(n,e,!0)),CS=n=>Dt(n,e=>Nn(n,e,!1)),LS=n=>Dt(n,e=>Nn(n,e,!it(n))),IS=n=>Dt(n,e=>Nn(n,e,it(n))),wS=n=>Dt(n,e=>B.cursor(n.lineBlockAt(e.head).from,1)),xS=n=>Dt(n,e=>B.cursor(n.lineBlockAt(e.head).to,-1));function vS(n,e,t){let i=!1,s=Ti(n.selection,o=>{let a=Gt(n,o.head,-1)||Gt(n,o.head,1)||o.head>0&&Gt(n,o.head-1,1)||o.head<n.doc.length&&Gt(n,o.head+1,-1);if(!a||!a.end)return o;i=!0;let l=a.start.from==o.head?a.end.to:a.end.from;return B.cursor(l)});return i?(e(zt(n,s)),!0):!1}const DS=({state:n,dispatch:e})=>vS(n,e);function It(n,e){let t=Ti(n.state.selection,i=>{let s=e(i);return B.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(zt(n.state,t)),!0)}function Xu(n,e){return It(n,t=>n.moveByChar(t,e))}const zu=n=>Xu(n,!it(n)),Ku=n=>Xu(n,it(n));function $u(n,e){return It(n,t=>n.moveByGroup(t,e))}const kS=n=>$u(n,!it(n)),PS=n=>$u(n,it(n)),MS=n=>It(n,e=>qr(n.state,e,!it(n))),FS=n=>It(n,e=>qr(n.state,e,it(n)));function Ju(n,e){return It(n,t=>n.moveVertically(t,e))}const Qu=n=>Ju(n,!1),Zu=n=>Ju(n,!0);function ed(n,e){return It(n,t=>n.moveVertically(t,e,Yu(n).height))}const Uc=n=>ed(n,!1),Bc=n=>ed(n,!0),US=n=>It(n,e=>Nn(n,e,!0)),BS=n=>It(n,e=>Nn(n,e,!1)),HS=n=>It(n,e=>Nn(n,e,!it(n))),WS=n=>It(n,e=>Nn(n,e,it(n))),GS=n=>It(n,e=>B.cursor(n.lineBlockAt(e.head).from)),VS=n=>It(n,e=>B.cursor(n.lineBlockAt(e.head).to)),Hc=({state:n,dispatch:e})=>(e(zt(n,{anchor:0})),!0),Wc=({state:n,dispatch:e})=>(e(zt(n,{anchor:n.doc.length})),!0),Gc=({state:n,dispatch:e})=>(e(zt(n,{anchor:n.selection.main.anchor,head:0})),!0),Vc=({state:n,dispatch:e})=>(e(zt(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),qS=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),YS=({state:n,dispatch:e})=>{let t=Yr(n).map(({from:i,to:s})=>B.range(i,Math.min(s+1,n.doc.length)));return e(n.update({selection:B.create(t),userEvent:"select"})),!0},jS=({state:n,dispatch:e})=>{let t=Ti(n.selection,i=>{let s=Xe(n),o=s.resolveStack(i.from,1);if(i.empty){let a=s.resolveStack(i.from,-1);a.node.from>=o.node.from&&a.node.to<=o.node.to&&(o=a)}for(let a=o;a;a=a.next){let{node:l}=a;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&a.next)return B.range(l.to,l.from)}return i});return t.eq(n.selection)?!1:(e(zt(n,t)),!0)},XS=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=B.create([t.main]):t.main.empty||(i=B.create([B.cursor(t.main.head)])),i?(e(zt(n,i)),!0):!1};function ds(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,s=i.changeByRange(o=>{let{from:a,to:l}=o;if(a==l){let c=e(o);c<a?(t="delete.backward",c=Ws(n,c,!1)):c>a&&(t="delete.forward",c=Ws(n,c,!0)),a=Math.min(a,c),l=Math.max(l,c)}else a=Ws(n,a,!1),l=Ws(n,l,!0);return a==l?{range:o}:{changes:{from:a,to:l},range:B.cursor(a,a<o.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(i.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Q.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Ws(n,e,t){if(n instanceof Q)for(let i of n.state.facet(Q.atomicRanges).map(s=>s(n)))i.between(e,e,(s,o)=>{s<e&&o>e&&(e=t?o:s)});return e}const td=(n,e,t)=>ds(n,i=>{let s=i.from,{state:o}=n,a=o.doc.lineAt(s),l,c;if(t&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(l=a.text.slice(0,s-a.from))){if(l[l.length-1]=="	")return s-1;let h=gi(l,o.tabSize),f=h%Sr(o)||Sr(o);for(let u=0;u<f&&l[l.length-1-u]==" ";u++)s--;c=s}else c=Qe(a.text,s-a.from,e,e)+a.from,c==s&&a.number!=(e?o.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(c-a.from,s-a.from))&&(c=Qe(a.text,c-a.from,!1,!1)+a.from);return c}),Na=n=>td(n,!1,!0),nd=n=>td(n,!0,!1),id=(n,e)=>ds(n,t=>{let i=t.head,{state:s}=n,o=s.doc.lineAt(i),a=s.charCategorizer(i);for(let l=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let c=Qe(o.text,i-o.from,e)+o.from,h=o.text.slice(Math.min(i,c)-o.from,Math.max(i,c)-o.from),f=a(h);if(l!=null&&f!=l)break;(h!=" "||i!=t.head)&&(l=f),i=c}return i}),sd=n=>id(n,!1),zS=n=>id(n,!0),KS=n=>ds(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),$S=n=>ds(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),JS=n=>ds(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),QS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Re.of(["",""])},range:B.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},ZS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let s=i.from,o=n.doc.lineAt(s),a=s==o.from?s-1:Qe(o.text,s-o.from,!1)+o.from,l=s==o.to?s+1:Qe(o.text,s-o.from,!0)+o.from;return{changes:{from:a,to:l,insert:n.doc.slice(s,l).append(n.doc.slice(a,s))},range:B.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Yr(n){let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=s.number){let a=e[e.length-1];a.to=o.to,a.ranges.push(i)}else e.push({from:s.from,to:o.to,ranges:[i]});t=o.number+1}return e}function rd(n,e,t){if(n.readOnly)return!1;let i=[],s=[];for(let o of Yr(n)){if(t?o.to==n.doc.length:o.from==0)continue;let a=n.doc.lineAt(t?o.to+1:o.from-1),l=a.length+1;if(t){i.push({from:o.to,to:a.to},{from:o.from,insert:a.text+n.lineBreak});for(let c of o.ranges)s.push(B.range(Math.min(n.doc.length,c.anchor+l),Math.min(n.doc.length,c.head+l)))}else{i.push({from:a.from,to:o.from},{from:o.to,insert:n.lineBreak+a.text});for(let c of o.ranges)s.push(B.range(c.anchor-l,c.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:B.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const eA=({state:n,dispatch:e})=>rd(n,e,!1),tA=({state:n,dispatch:e})=>rd(n,e,!0);function od(n,e,t){if(n.readOnly)return!1;let i=[];for(let s of Yr(n))t?i.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):i.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const nA=({state:n,dispatch:e})=>od(n,e,!1),iA=({state:n,dispatch:e})=>od(n,e,!0),sA=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Yr(e).map(({from:s,to:o})=>(s>0?s--:o<e.doc.length&&o++,{from:s,to:o}))),i=Ti(e.selection,s=>{let o;if(n.lineWrapping){let a=n.lineBlockAt(s.head),l=n.coordsAtPos(s.head,s.assoc||1);l&&(o=a.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function rA(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Xe(n).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),o;return i&&s&&i.to<=e&&s.from>=e&&(o=i.type.prop(ge.closedBy))&&o.indexOf(s.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const qc=ad(!1),oA=ad(!0);function ad(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:o,to:a}=s,l=e.doc.lineAt(o),c=!n&&o==a&&rA(e,o);n&&(o=a=(a<=l.to?l:e.doc.lineAt(a)).to);let h=new Hr(e,{simulateBreak:o,simulateDoubleBreak:!!c}),f=tl(h,o);for(f==null&&(f=gi(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));a<l.to&&/\s/.test(l.text[a-l.from]);)a++;c?{from:o,to:a}=c:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let u=["",es(e,f)];return c&&u.push(es(e,h.lineIndent(l.from,-1))),{changes:{from:o,to:a,insert:Re.of(u)},range:B.cursor(o+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function ol(n,e){let t=-1;return n.changeByRange(i=>{let s=[];for(let a=i.from;a<=i.to;){let l=n.doc.lineAt(a);l.number>t&&(i.empty||i.to>l.from)&&(e(l,s,i),t=l.number),a=l.to+1}let o=n.changes(s);return{changes:s,range:B.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const aA=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new Hr(n,{overrideIndentation:o=>{let a=t[o];return a??-1}}),s=ol(n,(o,a,l)=>{let c=tl(i,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let h=/^\s*/.exec(o.text)[0],f=es(n,c);(h!=f||l.from<o.from+h.length)&&(t[o.from]=c,a.push({from:o.from,to:o.from+h.length,insert:f}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},ld=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(ol(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Br)})}),{userEvent:"input.indent"})),!0),cd=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(ol(n,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let o=gi(s,n.tabSize),a=0,l=es(n,Math.max(0,o-Sr(n)));for(;a<s.length&&a<l.length&&s.charCodeAt(a)==l.charCodeAt(a);)a++;i.push({from:t.from+a,to:t.from+s.length,insert:l.slice(a)})}),{userEvent:"delete.dedent"})),!0),lA=n=>(n.setTabFocusMode(),!0),cA=[{key:"Ctrl-b",run:Bu,shift:zu,preventDefault:!0},{key:"Ctrl-f",run:Hu,shift:Ku},{key:"Ctrl-p",run:Vu,shift:Qu},{key:"Ctrl-n",run:qu,shift:Zu},{key:"Ctrl-a",run:wS,shift:GS},{key:"Ctrl-e",run:xS,shift:VS},{key:"Ctrl-d",run:nd},{key:"Ctrl-h",run:Na},{key:"Ctrl-k",run:KS},{key:"Ctrl-Alt-h",run:sd},{key:"Ctrl-o",run:QS},{key:"Ctrl-t",run:ZS},{key:"Ctrl-v",run:Oa}],hA=[{key:"ArrowLeft",run:Bu,shift:zu,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:RS,shift:kS,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:LS,shift:HS,preventDefault:!0},{key:"ArrowRight",run:Hu,shift:Ku,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:_S,shift:PS,preventDefault:!0},{mac:"Cmd-ArrowRight",run:IS,shift:WS,preventDefault:!0},{key:"ArrowUp",run:Vu,shift:Qu,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Hc,shift:Gc},{mac:"Ctrl-ArrowUp",run:Fc,shift:Uc},{key:"ArrowDown",run:qu,shift:Zu,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Wc,shift:Vc},{mac:"Ctrl-ArrowDown",run:Oa,shift:Bc},{key:"PageUp",run:Fc,shift:Uc},{key:"PageDown",run:Oa,shift:Bc},{key:"Home",run:CS,shift:BS,preventDefault:!0},{key:"Mod-Home",run:Hc,shift:Gc},{key:"End",run:yS,shift:US,preventDefault:!0},{key:"Mod-End",run:Wc,shift:Vc},{key:"Enter",run:qc,shift:qc},{key:"Mod-a",run:qS},{key:"Backspace",run:Na,shift:Na},{key:"Delete",run:nd},{key:"Mod-Backspace",mac:"Alt-Backspace",run:sd},{key:"Mod-Delete",mac:"Alt-Delete",run:zS},{mac:"Mod-Backspace",run:$S},{mac:"Mod-Delete",run:JS}].concat(cA.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),hd=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:NS,shift:MS},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:bS,shift:FS},{key:"Alt-ArrowUp",run:eA},{key:"Shift-Alt-ArrowUp",run:nA},{key:"Alt-ArrowDown",run:tA},{key:"Shift-Alt-ArrowDown",run:iA},{key:"Escape",run:XS},{key:"Mod-Enter",run:oA},{key:"Alt-l",mac:"Ctrl-l",run:YS},{key:"Mod-i",run:jS,preventDefault:!0},{key:"Mod-[",run:cd},{key:"Mod-]",run:ld},{key:"Mod-Alt-\\",run:aA},{key:"Shift-Mod-k",run:sA},{key:"Shift-Mod-\\",run:DS},{key:"Mod-/",run:nS},{key:"Alt-A",run:sS},{key:"Ctrl-m",mac:"Shift-Alt-m",run:lA}].concat(hA),fA={key:"Tab",run:ld,shift:cd};function Ie(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];typeof s=="string"?n.setAttribute(i,s):s!=null&&(n[i]=s)}e++}for(;e<arguments.length;e++)fd(n,arguments[e]);return n}function fd(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)fd(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const Yc=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class pi{constructor(e,t,i=0,s=e.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=o?l=>o(Yc(l)):Yc,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ht(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Pa(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Ht(e);let s=this.normalize(t);if(s.length)for(let o=0,a=i;;o++){let l=s.charCodeAt(o),c=this.match(l,a,this.bufferPos+this.bufferStart);if(o==s.length-1){if(c)return this.value=c,this;break}a==i&&o<t.length&&t.charCodeAt(o)==l&&a++}}}match(e,t,i){let s=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],l=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?s={from:this.matches[o+1],to:i}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:t,to:i}:this.matches.push(1,t)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(pi.prototype[Symbol.iterator]=function(){return this});const ud={from:-1,to:-1,match:/.*/.exec("")},al="gm"+(/x/.unicode==null?"":"u");class dd{constructor(e,t,i,s=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=ud,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new pd(e,t,i,s,o);this.re=new RegExp(t,al+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let a=e.lineAt(s);this.curLineStart=a.from,this.matchPos=Or(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=Or(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const So=new WeakMap;class ri{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=So.get(e);if(!s||s.from>=i||s.to<=t){let l=new ri(t,e.sliceString(t,i));return So.set(e,l),l}if(s.from==t&&s.to==i)return s;let{text:o,from:a}=s;return a>t&&(o=e.sliceString(t,a)+o,a=t),s.to<i&&(o+=e.sliceString(s.to,i)),So.set(e,new ri(a,o)),new ri(t,o.slice(t-a,i-a))}}class pd{constructor(e,t,i,s,o){this.text=e,this.to=o,this.done=!1,this.value=ud,this.matchPos=Or(e,s),this.re=new RegExp(t,al+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=ri.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,s=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this.matchPos=Or(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ri.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(dd.prototype[Symbol.iterator]=pd.prototype[Symbol.iterator]=function(){return this});function uA(n){try{return new RegExp(n,al),!0}catch{return!1}}function Or(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function ba(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=Ie("input",{class:"cm-textfield",name:"line",value:e}),i=Ie("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:Nr.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),s())},onsubmit:o=>{o.preventDefault(),s()}},Ie("label",n.state.phrase("Go to line"),": ",t)," ",Ie("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function s(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:a}=n,l=a.doc.lineAt(a.selection.main.head),[,c,h,f,u]=o,m=f?+f.slice(1):0,T=h?+h:l.number;if(h&&u){let p=T/100;c&&(p=p*(c=="-"?-1:1)+l.number/a.doc.lines),T=Math.round(a.doc.lines*p)}else h&&c&&(T=T*(c=="-"?-1:1)+l.number);let N=a.doc.line(Math.max(1,Math.min(a.doc.lines,T))),y=B.cursor(N.from+Math.max(0,Math.min(m,N.length)));n.dispatch({effects:[Nr.of(!1),Q.scrollIntoView(y.from,{y:"center"})],selection:y}),n.focus()}return{dom:i}}const Nr=me.define(),jc=Ze.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Nr)&&(n=t.value);return n},provide:n=>Qi.from(n,e=>e?ba:null)}),dA=n=>{let e=Ji(n,ba);if(!e){let t=[Nr.of(!0)];n.state.field(jc,!1)==null&&t.push(me.appendConfig.of([jc,pA])),n.dispatch({effects:t}),e=Ji(n,ba)}return e&&e.dom.querySelector("input").select(),!0},pA=Q.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),mA={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},gA=ne.define({combine(n){return Xt(n,mA,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function EA(n){return[_A,RA]}const TA=ae.mark({class:"cm-selectionMatch"}),SA=ae.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Xc(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=De.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=De.Word)}function AA(n,e,t,i){return n(e.sliceDoc(t,t+1))==De.Word&&n(e.sliceDoc(i-1,i))==De.Word}const RA=Fe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(gA),{state:t}=n,i=t.selection;if(i.ranges.length>1)return ae.none;let s=i.main,o,a=null;if(s.empty){if(!e.highlightWordAroundCursor)return ae.none;let c=t.wordAt(s.head);if(!c)return ae.none;a=t.charCategorizer(s.head),o=t.sliceDoc(c.from,c.to)}else{let c=s.to-s.from;if(c<e.minSelectionLength||c>200)return ae.none;if(e.wholeWords){if(o=t.sliceDoc(s.from,s.to),a=t.charCategorizer(s.head),!(Xc(a,t,s.from,s.to)&&AA(a,t,s.from,s.to)))return ae.none}else if(o=t.sliceDoc(s.from,s.to),!o)return ae.none}let l=[];for(let c of n.visibleRanges){let h=new pi(t.doc,o,c.from,c.to);for(;!h.next().done;){let{from:f,to:u}=h.value;if((!a||Xc(a,t,f,u))&&(s.empty&&f<=s.from&&u>=s.to?l.push(SA.range(f,u)):(f>=s.to||u<=s.from)&&l.push(TA.range(f,u)),l.length>e.maxMatches))return ae.none}}return ae.set(l)}},{decorations:n=>n.decorations}),_A=Q.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),OA=({state:n,dispatch:e})=>{let{selection:t}=n,i=B.create(t.ranges.map(s=>n.wordAt(s.head)||B.cursor(s.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function NA(n,e){let{main:t,ranges:i}=n.selection,s=n.wordAt(t.head),o=s&&s.from==t.from&&s.to==t.to;for(let a=!1,l=new pi(n.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(a)return null;l=new pi(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(c=>c.from==l.value.from))continue;if(o){let c=n.wordAt(l.value.from);if(!c||c.from!=l.value.from||c.to!=l.value.to)continue}return l.value}}const bA=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return OA({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let s=NA(n,i);return s?(e(n.update({selection:n.selection.addRange(B.range(s.from,s.to),!1),effects:Q.scrollIntoView(s.to)})),!0):!1},Si=ne.define({combine(n){return Xt(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new FA(e),scrollToMatch:e=>Q.scrollIntoView(e)})}});class md{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||uA(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new IA(this):new CA(this)}getCursor(e,t=0,i){let s=e.doc?e:Te.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?Jn(this,s,t,i):$n(this,s,t,i)}}class gd{constructor(e){this.spec=e}}function $n(n,e,t,i){return new pi(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:s=>s.toLowerCase(),n.wholeWord?yA(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function yA(n,e){return(t,i,s,o)=>((o>t||o+s.length<i)&&(o=Math.max(0,t-2),s=n.sliceString(o,Math.min(n.length,i+2))),(e(br(s,t-o))!=De.Word||e(yr(s,t-o))!=De.Word)&&(e(yr(s,i-o))!=De.Word||e(br(s,i-o))!=De.Word))}class CA extends gd{constructor(e){super(e)}nextMatch(e,t,i){let s=$n(this.spec,e,i,e.doc.length).nextOverlapping();if(s.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);s=$n(this.spec,e,0,o).nextOverlapping()}return s.done||s.value.from==t&&s.value.to==i?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let o=Math.max(t,s-1e4-this.spec.unquoted.length),a=$n(this.spec,e,o,s),l=null;for(;!a.nextOverlapping().done;)l=a.value;if(l)return l;if(o==t)return null;s-=1e4}}prevMatch(e,t,i){let s=this.prevMatchInRange(e,0,t);return s||(s=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=t||s.to!=i)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=$n(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let o=$n(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}function Jn(n,e,t,i){return new dd(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?LA(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function br(n,e){return n.slice(Qe(n,e,!1),e)}function yr(n,e){return n.slice(e,Qe(n,e))}function LA(n){return(e,t,i)=>!i[0].length||(n(br(i.input,i.index))!=De.Word||n(yr(i.input,i.index))!=De.Word)&&(n(yr(i.input,i.index+i[0].length))!=De.Word||n(br(i.input,i.index+i[0].length))!=De.Word)}class IA extends gd{nextMatch(e,t,i){let s=Jn(this.spec,e,i,e.doc.length).next();return s.done&&(s=Jn(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let o=Math.max(t,i-s*1e4),a=Jn(this.spec,e,o,i),l=null;for(;!a.next().done;)l=a.value;if(l&&(o==t||l.from>o+10))return l;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=Jn(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let o=Jn(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}const ts=me.define(),ll=me.define(),Tn=Ze.define({create(n){return new Ao(ya(n).create(),null)},update(n,e){for(let t of e.effects)t.is(ts)?n=new Ao(t.value.create(),n.panel):t.is(ll)&&(n=new Ao(n.query,t.value?cl:null));return n},provide:n=>Qi.from(n,e=>e.panel)});class Ao{constructor(e,t){this.query=e,this.panel=t}}const wA=ae.mark({class:"cm-searchMatch"}),xA=ae.mark({class:"cm-searchMatch cm-searchMatch-selected"}),vA=Fe.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Tn))}update(n){let e=n.state.field(Tn);(e!=n.startState.field(Tn)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return ae.none;let{view:t}=this,i=new nn;for(let s=0,o=t.visibleRanges,a=o.length;s<a;s++){let{from:l,to:c}=o[s];for(;s<a-1&&c>o[s+1].from-2*250;)c=o[++s].to;n.highlight(t.state,l,c,(h,f)=>{let u=t.state.selection.ranges.some(m=>m.from==h&&m.to==f);i.add(h,f,u?xA:wA)})}return i.finish()}},{decorations:n=>n.decorations});function ps(n){return e=>{let t=e.state.field(Tn,!1);return t&&t.query.spec.valid?n(e,t):Sd(e)}}const Cr=ps((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let s=B.single(i.from,i.to),o=n.state.facet(Si);return n.dispatch({selection:s,effects:[hl(n,i),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),Td(n),!0}),Lr=ps((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,s=e.prevMatch(t,i,i);if(!s)return!1;let o=B.single(s.from,s.to),a=n.state.facet(Si);return n.dispatch({selection:o,effects:[hl(n,s),a.scrollToMatch(o.main,n)],userEvent:"select.search"}),Td(n),!0}),DA=ps((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:B.create(t.map(i=>B.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),kA=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,o=[],a=0;for(let l=new pi(n.doc,n.sliceDoc(i,s));!l.next().done;){if(o.length>1e3)return!1;l.value.from==i&&(a=o.length),o.push(B.range(l.value.from,l.value.to))}return e(n.update({selection:B.create(o,a),userEvent:"select.search.matches"})),!0},zc=ps((n,{query:e})=>{let{state:t}=n,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let a=o,l=[],c,h,f=[];if(a.from==i&&a.to==s&&(h=t.toText(e.getReplacement(a)),l.push({from:a.from,to:a.to,insert:h}),a=e.nextMatch(t,a.from,a.to),f.push(Q.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),a){let u=l.length==0||l[0].from>=o.to?0:o.to-o.from-h.length;c=B.single(a.from-u,a.to-u),f.push(hl(n,a)),f.push(t.facet(Si).scrollToMatch(c.main,n))}return n.dispatch({changes:l,selection:c,effects:f,userEvent:"input.replace"}),!0}),PA=ps((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(s=>{let{from:o,to:a}=s;return{from:o,to:a,insert:e.getReplacement(s)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Q.announce.of(i),userEvent:"input.replace.all"}),!0});function cl(n){return n.state.facet(Si).createPanel(n)}function ya(n,e){var t,i,s,o,a;let l=n.selection.main,c=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!c)return e;let h=n.facet(Si);return new md({search:((t=e?.literal)!==null&&t!==void 0?t:h.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(s=e?.literal)!==null&&s!==void 0?s:h.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:h.regexp,wholeWord:(a=e?.wholeWord)!==null&&a!==void 0?a:h.wholeWord})}function Ed(n){let e=Ji(n,cl);return e&&e.dom.querySelector("[main-field]")}function Td(n){let e=Ed(n);e&&e==n.root.activeElement&&e.select()}const Sd=n=>{let e=n.state.field(Tn,!1);if(e&&e.panel){let t=Ed(n);if(t&&t!=n.root.activeElement){let i=ya(n.state,e.query.spec);i.valid&&n.dispatch({effects:ts.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[ll.of(!0),e?ts.of(ya(n.state,e.query.spec)):me.appendConfig.of(BA)]});return!0},Ad=n=>{let e=n.state.field(Tn,!1);if(!e||!e.panel)return!1;let t=Ji(n,cl);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:ll.of(!1)}),!0},MA=[{key:"Mod-f",run:Sd,scope:"editor search-panel"},{key:"F3",run:Cr,shift:Lr,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Cr,shift:Lr,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ad,scope:"editor search-panel"},{key:"Mod-Shift-l",run:kA},{key:"Mod-Alt-g",run:dA},{key:"Mod-d",run:bA,preventDefault:!0}];class FA{constructor(e){this.view=e;let t=this.query=e.state.field(Tn).query.spec;this.commit=this.commit.bind(this),this.searchField=Ie("input",{value:t.search,placeholder:Et(e,"Find"),"aria-label":Et(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ie("input",{value:t.replace,placeholder:Et(e,"Replace"),"aria-label":Et(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ie("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ie("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ie("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(s,o,a){return Ie("button",{class:"cm-button",name:s,onclick:o,type:"button"},a)}this.dom=Ie("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>Cr(e),[Et(e,"next")]),i("prev",()=>Lr(e),[Et(e,"previous")]),i("select",()=>DA(e),[Et(e,"all")]),Ie("label",null,[this.caseField,Et(e,"match case")]),Ie("label",null,[this.reField,Et(e,"regexp")]),Ie("label",null,[this.wordField,Et(e,"by word")]),...e.state.readOnly?[]:[Ie("br"),this.replaceField,i("replace",()=>zc(e),[Et(e,"replace")]),i("replaceAll",()=>PA(e),[Et(e,"replace all")])],Ie("button",{name:"close",onclick:()=>Ad(e),"aria-label":Et(e,"close"),type:"button"},["×"])])}commit(){let e=new md({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:ts.of(e)}))}keydown(e){jg(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Lr:Cr)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),zc(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(ts)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Si).top}}function Et(n,e){return n.state.phrase(e)}const Gs=30,Vs=/[\s\.,:;?!]/;function hl(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),s=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-Gs),a=Math.min(s,t+Gs),l=n.state.sliceDoc(o,a);if(o!=i.from){for(let c=0;c<Gs;c++)if(!Vs.test(l[c+1])&&Vs.test(l[c])){l=l.slice(c);break}}if(a!=s){for(let c=l.length-1;c>l.length-Gs;c--)if(!Vs.test(l[c-1])&&Vs.test(l[c])){l=l.slice(0,c);break}}return Q.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${i.number}.`)}const UA=Q.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),BA=[Tn,qn.low(vA),UA];class Rd{constructor(e,t,i,s){this.state=e,this.pos=t,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Xe(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),o=s.search(Od(e,!1));return o<0?null:{from:i+o,to:this.pos,text:s.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Kc(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function HA(n){let e=Object.create(null),t=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let o=1;o<s.length;o++)t[s[o]]=!0}let i=Kc(e)+Kc(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function _d(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:HA(e);return s=>{let o=s.matchBefore(i);return o||s.explicit?{from:o?o.from:s.pos,options:e,validFor:t}:null}}function WA(n,e){return t=>{for(let i=Xe(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(n.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class $c{constructor(e,t,i,s){this.completion=e,this.source=t,this.match=i,this.score=s}}function Un(n){return n.selection.main.from}function Od(n,e){var t;let{source:i}=n,s=e&&i[0]!="^",o=i[i.length-1]!="$";return!s&&!o?n:new RegExp(`${s?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const Nd=jt.define();function GA(n,e,t,i){let{main:s}=n.selection,o=t-s.from,a=i-s.from;return Object.assign(Object.assign({},n.changeByRange(l=>{if(l!=s&&t!=i&&n.sliceDoc(l.from+o,l.from+a)!=n.sliceDoc(t,i))return{range:l};let c=n.toText(e);return{changes:{from:l.from+o,to:i==s.from?l.to:l.from+a,insert:c},range:B.cursor(l.from+o+c.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const Jc=new WeakMap;function VA(n){if(!Array.isArray(n))return n;let e=Jc.get(n);return e||Jc.set(n,e=_d(n)),e}const Ir=me.define(),ns=me.define();class qA{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=ht(e,t),s=Ht(i);this.chars.push(i);let o=e.slice(t,t+s),a=o.toUpperCase();this.folded.push(ht(a==o?o.toLowerCase():a,0)),t+=s}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:o,byWord:a}=this;if(t.length==1){let D=ht(e,0),G=Ht(D),q=G==e.length?0:-100;if(D!=t[0])if(D==i[0])q+=-200;else return null;return this.ret(q,[0,G])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=t.length,h=0;if(l<0){for(let D=0,G=Math.min(e.length,200);D<G&&h<c;){let q=ht(e,D);(q==t[h]||q==i[h])&&(s[h++]=D),D+=Ht(q)}if(h<c)return null}let f=0,u=0,m=!1,T=0,N=-1,y=-1,p=/[a-z]/.test(e),L=!0;for(let D=0,G=Math.min(e.length,200),q=0;D<G&&u<c;){let H=ht(e,D);l<0&&(f<c&&H==t[f]&&(o[f++]=D),T<c&&(H==t[T]||H==i[T]?(T==0&&(N=D),y=D+1,T++):T=0));let M,V=H<255?H>=48&&H<=57||H>=97&&H<=122?2:H>=65&&H<=90?1:0:(M=Pa(H))!=M.toLowerCase()?1:M!=M.toUpperCase()?2:0;(!D||V==1&&p||q==0&&V!=0)&&(t[u]==H||i[u]==H&&(m=!0)?a[u++]=D:a.length&&(L=!1)),q=V,D+=Ht(H)}return u==c&&a[0]==0&&L?this.result(-100+(m?-200:0),a,e):T==c&&N==0?this.ret(-200-e.length+(y==e.length?0:-100),[0,y]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):T==c?this.ret(-900-e.length,[N,y]):u==c?this.result(-100+(m?-200:0)+-700+(L?0:-1100),a,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,i){let s=[],o=0;for(let a of t){let l=a+(this.astral?Ht(ht(i,a)):1);o&&s[o-1]==a?s[o-1]=l:(s[o++]=a,s[o++]=l)}return this.ret(e-i.length,s)}}class YA{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const je=ne.define({combine(n){return Xt(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:jA,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Qc(e(i),t(i)),optionClass:(e,t)=>i=>Qc(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Qc(n,e){return n?e?n+" "+e:n:e}function jA(n,e,t,i,s,o){let a=n.textDirection==xe.RTL,l=a,c=!1,h="top",f,u,m=e.left-s.left,T=s.right-e.right,N=i.right-i.left,y=i.bottom-i.top;if(l&&m<Math.min(N,T)?l=!1:!l&&T<Math.min(N,m)&&(l=!0),N<=(l?m:T))f=Math.max(s.top,Math.min(t.top,s.bottom-y))-e.top,u=Math.min(400,l?m:T);else{c=!0,u=Math.min(400,(a?e.right:s.right-e.left)-30);let D=s.bottom-e.bottom;D>=y||D>e.top?f=t.bottom-e.top:(h="bottom",f=e.bottom-t.top)}let p=(e.bottom-e.top)/o.offsetHeight,L=(e.right-e.left)/o.offsetWidth;return{style:`${h}: ${f/p}px; max-width: ${u/L}px`,class:"cm-completionInfo-"+(c?a?"left-narrow":"right-narrow":l?"left":"right")}}function XA(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s,o){let a=document.createElement("span");a.className="cm-completionLabel";let l=t.displayLabel||t.label,c=0;for(let h=0;h<o.length;){let f=o[h++],u=o[h++];f>c&&a.appendChild(document.createTextNode(l.slice(c,f)));let m=a.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(l.slice(f,u))),m.className="cm-completionMatchedText",c=u}return c<l.length&&a.appendChild(document.createTextNode(l.slice(c))),a},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function Ro(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class zA{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let s=e.state.field(t),{options:o,selected:a}=s.open,l=e.state.facet(je);this.optionContent=XA(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Ro(o.length,a,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:h}=e.state.field(t).open;for(let f=c.target,u;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(u=/-(\d+)$/.exec(f.id))&&+u[1]<h.length){this.applyCompletion(e,h[+u[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(je).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:ns.of(null)})}),this.showOptions(o,s.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:o,selected:a,disabled:l}=i.open;(!s.open||s.open.options!=o)&&(this.range=Ro(o.length,a,e.state.facet(je).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),l!=((t=s.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Ro(t.options.length,t.selected,this.view.state.facet(je).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>dt(this.view.state,a,"completion info")):this.addInfoPane(o,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:o}=e;i.appendChild(s),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&$A(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),o=this.space;if(!o){let a=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:a.innerWidth,bottom:a.innerHeight}}return s.top>Math.min(o.bottom,t.bottom)-10||s.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(je).positionInfo(this.view,t,s,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let a=i.from;a<i.to;a++){let{completion:l,match:c}=e[a],{section:h}=l;if(h){let m=typeof h=="string"?h:h.name;if(m!=o&&(a>i.from||i.from==0))if(o=m,typeof h!="string"&&h.header)s.appendChild(h.header(h));else{let T=s.appendChild(document.createElement("completion-section"));T.textContent=m}}const f=s.appendChild(document.createElement("li"));f.id=t+"-"+a,f.setAttribute("role","option");let u=this.optionClass(l);u&&(f.className=u);for(let m of this.optionContent){let T=m(l,this.view.state,this.view,c);T&&f.appendChild(T)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function KA(n,e){return t=>new zA(t,n,e)}function $A(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),s=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/s:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/s)}function Zc(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function JA(n,e){let t=[],i=null,s=h=>{t.push(h);let{section:f}=h.completion;if(f){i||(i=[]);let u=typeof f=="string"?f:f.name;i.some(m=>m.name==u)||i.push(typeof f=="string"?{name:u}:f)}},o=e.facet(je);for(let h of n)if(h.hasResult()){let f=h.result.getMatch;if(h.result.filter===!1)for(let u of h.result.options)s(new $c(u,h.source,f?f(u):[],1e9-t.length));else{let u=e.sliceDoc(h.from,h.to),m,T=o.filterStrict?new YA(u):new qA(u);for(let N of h.result.options)if(m=T.match(N.label)){let y=N.displayLabel?f?f(N,m.matched):[]:m.matched;s(new $c(N,h.source,y,m.score+(N.boost||0)))}}}if(i){let h=Object.create(null),f=0,u=(m,T)=>{var N,y;return((N=m.rank)!==null&&N!==void 0?N:1e9)-((y=T.rank)!==null&&y!==void 0?y:1e9)||(m.name<T.name?-1:1)};for(let m of i.sort(u))f-=1e5,h[m.name]=f;for(let m of t){let{section:T}=m.completion;T&&(m.score+=h[typeof T=="string"?T:T.name])}}let a=[],l=null,c=o.compareCompletions;for(let h of t.sort((f,u)=>u.score-f.score||c(f.completion,u.completion))){let f=h.completion;!l||l.label!=f.label||l.detail!=f.detail||l.type!=null&&f.type!=null&&l.type!=f.type||l.apply!=f.apply||l.boost!=f.boost?a.push(h):Zc(h.completion)>Zc(l)&&(a[a.length-1]=h),l=h.completion}return a}class ti{constructor(e,t,i,s,o,a){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=o,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ti(this.options,eh(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,s,o,a){if(s&&!a&&e.some(h=>h.isPending))return s.setDisabled();let l=JA(e,t);if(!l.length)return s&&e.some(h=>h.isPending)?s.setDisabled():null;let c=t.facet(je).selectOnOpen?0:-1;if(s&&s.selected!=c&&s.selected!=-1){let h=s.options[s.selected].completion;for(let f=0;f<l.length;f++)if(l[f].completion==h){c=f;break}}return new ti(l,eh(i,c),{pos:e.reduce((h,f)=>f.hasResult()?Math.min(h,f.from):h,1e8),create:iR,above:o.aboveCursor},s?s.timestamp:Date.now(),c,!1)}map(e){return new ti(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new ti(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class wr{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new wr(tR,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(je),o=(i.override||t.languageDataAt("autocomplete",Un(t)).map(VA)).map(c=>(this.active.find(f=>f.source==c)||new bt(c,this.active.some(f=>f.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((c,h)=>c==this.active[h])&&(o=this.active);let a=this.open,l=e.effects.some(c=>c.is(fl));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!QA(o,this.active)||l?a=ti.build(o,t,this.id,a,i,l):a&&a.disabled&&!o.some(c=>c.isPending)&&(a=null),!a&&o.every(c=>!c.isPending)&&o.some(c=>c.hasResult())&&(o=o.map(c=>c.hasResult()?new bt(c.source,0):c));for(let c of e.effects)c.is(yd)&&(a=a&&a.setSelected(c.value,this.id));return o==this.active&&a==this.open?this:new wr(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?ZA:eR}}function QA(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let s=t==n.length,o=i==e.length;if(s||o)return s==o;if(n[t++].result!=e[i++].result)return!1}}const ZA={"aria-autocomplete":"list"},eR={};function eh(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const tR=[];function bd(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(Nd);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class bt{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=bd(e,t),s=this;(i&8||i&16&&this.touches(e))&&(s=new bt(s.source,0)),i&4&&s.state==0&&(s=new bt(this.source,1)),s=s.updateFor(e,i);for(let o of e.effects)if(o.is(Ir))s=new bt(s.source,1,o.value);else if(o.is(ns))s=new bt(s.source,0);else if(o.is(fl))for(let a of o.value)a.source==s.source&&(s=a);return s}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Un(e.state))}}class oi extends bt{constructor(e,t,i,s,o,a){super(e,3,t),this.limit=i,this.result=s,this.from=o,this.to=a}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),l=Un(e.state);if(l>a||!s||t&2&&(Un(e.startState)==this.from||l<this.limit))return new bt(this.source,t&4?1:0);let c=e.changes.mapPos(this.limit);return nR(s.validFor,e.state,o,a)?new oi(this.source,this.explicit,c,s,o,a):s.update&&(s=s.update(s,o,a,new Rd(e.state,l,!1)))?new oi(this.source,this.explicit,c,s,s.from,(i=s.to)!==null&&i!==void 0?i:Un(e.state)):new bt(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new oi(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new bt(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function nR(n,e,t,i){if(!n)return!1;let s=e.sliceDoc(t,i);return typeof n=="function"?n(s,t,i,e):Od(n,!0).test(s)}const fl=me.define({map(n,e){return n.map(t=>t.map(e))}}),yd=me.define(),ut=Ze.define({create(){return wr.start()},update(n,e){return n.update(e)},provide:n=>[$a.from(n,e=>e.tooltip),Q.contentAttributes.from(n,e=>e.attrs)]});function ul(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(ut).active.find(s=>s.source==e.source);return i instanceof oi?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},GA(n.state,t,i.from,i.to)),{annotations:Nd.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}const iR=KA(ut,ul);function qs(n,e="option"){return t=>{let i=t.state.field(ut,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(je).interactionDelay)return!1;let s=1,o;e=="page"&&(o=ru(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,l=i.open.selected>-1?i.open.selected+s*(n?1:-1):n?0:a-1;return l<0?l=e=="page"?0:a-1:l>=a&&(l=e=="page"?a-1:0),t.dispatch({effects:yd.of(l)}),!0}}const sR=n=>{let e=n.state.field(ut,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(je).interactionDelay?!1:ul(n,e.open.options[e.open.selected])},th=n=>n.state.field(ut,!1)?(n.dispatch({effects:Ir.of(!0)}),!0):!1,rR=n=>{let e=n.state.field(ut,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:ns.of(null)}),!0)};class oR{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const aR=50,lR=1e3,cR=Fe.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(ut).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(ut),t=n.state.facet(je);if(!n.selectionSet&&!n.docChanged&&n.startState.field(ut)==e)return;let i=n.transactions.some(o=>{let a=bd(o,t);return a&8||(o.selection||o.docChanged)&&!(a&3)});for(let o=0;o<this.running.length;o++){let a=this.running[o];if(i||a.context.abortOnDocChange&&n.docChanged||a.updates.length+n.transactions.length>aR&&Date.now()-a.time>lR){for(let l of a.context.abortListeners)try{l()}catch(c){dt(this.view.state,c)}a.context.abortListeners=null,this.running.splice(o--,1)}else a.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(a=>a.is(Ir)))&&(this.pendingStart=!0);let s=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(a=>a.active.source==o.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(ut);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(je).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Un(e),i=new Rd(e,t,n.explicit,this.view),s=new oR(n,i);this.running.push(s),Promise.resolve(n.source(i)).then(o=>{s.context.aborted||(s.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:ns.of(null)}),dt(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(je).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(je),i=this.view.state.field(ut);for(let s=0;s<this.running.length;s++){let o=this.running[s];if(o.done===void 0)continue;if(this.running.splice(s--,1),o.done){let l=Un(o.updates.length?o.updates[0].startState:this.view.state),c=Math.min(l,o.done.from+(o.active.explicit?0:1)),h=new oi(o.active.source,o.active.explicit,c,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:l);for(let f of o.updates)h=h.update(f,t);if(h.hasResult()){e.push(h);continue}}let a=i.active.find(l=>l.source==o.active.source);if(a&&a.isPending)if(o.done==null){let l=new bt(o.active.source,0);for(let c of o.updates)l=l.update(c,t);l.isPending||e.push(l)}else this.startQuery(a)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:fl.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(ut,!1);if(e&&e.tooltip&&this.view.state.facet(je).closeOnBlur){let t=e.open&&ru(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:ns.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ir.of(!1)}),20),this.composing=0}}}),hR=typeof navigator=="object"&&/Win/.test(navigator.platform),fR=qn.highest(Q.domEventHandlers({keydown(n,e){let t=e.state.field(ut,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(hR&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],s=t.active.find(a=>a.source==i.source),o=i.completion.commitCharacters||s.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&ul(e,i),!1}})),uR=Q.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),is={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Mn=me.define({map(n,e){let t=e.mapPos(n,-1,st.TrackAfter);return t??void 0}}),dl=new class extends Bn{};dl.startSide=1;dl.endSide=-1;const Cd=Ze.define({create(){return Ae.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Mn)&&(n=n.update({add:[dl.range(t.value,t.value+1)]}));return n}});function dR(){return[mR,Cd]}const _o="()[]{}<>";function Ld(n){for(let e=0;e<_o.length;e+=2)if(_o.charCodeAt(e)==n)return _o.charAt(e+1);return Pa(n<128?n:n+1)}function Id(n,e){return n.languageDataAt("closeBrackets",e)[0]||is}const pR=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),mR=Q.inputHandler.of((n,e,t,i)=>{if((pR?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let s=n.state.selection.main;if(i.length>2||i.length==2&&Ht(ht(i,0))==1||e!=s.from||t!=s.to)return!1;let o=TR(n.state,i);return o?(n.dispatch(o),!0):!1}),gR=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=Id(n,n.selection.main.head).brackets||is.brackets,s=null,o=n.changeByRange(a=>{if(a.empty){let l=SR(n.doc,a.head);for(let c of i)if(c==l&&jr(n.doc,a.head)==Ld(ht(c,0)))return{changes:{from:a.head-c.length,to:a.head+c.length},range:B.cursor(a.head-c.length)}}return{range:s=a}});return s||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},ER=[{key:"Backspace",run:gR}];function TR(n,e){let t=Id(n,n.selection.main.head),i=t.brackets||is.brackets;for(let s of i){let o=Ld(ht(s,0));if(e==s)return o==s?_R(n,s,i.indexOf(s+s+s)>-1,t):AR(n,s,o,t.before||is.before);if(e==o&&wd(n,n.selection.main.from))return RR(n,s,o)}return null}function wd(n,e){let t=!1;return n.field(Cd).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function jr(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Ht(ht(t,0)))}function SR(n,e){let t=n.sliceString(e-2,e);return Ht(ht(t,0))==t.length?t:t.slice(1)}function AR(n,e,t,i){let s=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:Mn.of(a.to+e.length),range:B.range(a.anchor+e.length,a.head+e.length)};let l=jr(n.doc,a.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:a.head},effects:Mn.of(a.head+e.length),range:B.cursor(a.head+e.length)}:{range:s=a}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function RR(n,e,t){let i=null,s=n.changeByRange(o=>o.empty&&jr(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:B.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function _R(n,e,t,i){let s=i.stringPrefixes||is.stringPrefixes,o=null,a=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Mn.of(l.to+e.length),range:B.range(l.anchor+e.length,l.head+e.length)};let c=l.head,h=jr(n.doc,c),f;if(h==e){if(nh(n,c))return{changes:{insert:e+e,from:c},effects:Mn.of(c+e.length),range:B.cursor(c+e.length)};if(wd(n,c)){let m=t&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+m.length,insert:m},range:B.cursor(c+m.length)}}}else{if(t&&n.sliceDoc(c-2*e.length,c)==e+e&&(f=ih(n,c-2*e.length,s))>-1&&nh(n,f))return{changes:{insert:e+e+e+e,from:c},effects:Mn.of(c+e.length),range:B.cursor(c+e.length)};if(n.charCategorizer(c)(h)!=De.Word&&ih(n,c,s)>-1&&!OR(n,c,e,s))return{changes:{insert:e+e,from:c},effects:Mn.of(c+e.length),range:B.cursor(c+e.length)}}return{range:o=l}});return o?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function nh(n,e){let t=Xe(n).resolveInner(e+1);return t.parent&&t.from==e}function OR(n,e,t,i){let s=Xe(n).resolveInner(e,-1),o=i.reduce((a,l)=>Math.max(a,l.length),0);for(let a=0;a<5;a++){let l=n.sliceDoc(s.from,Math.min(s.to,s.from+t.length+o)),c=l.indexOf(t);if(!c||c>-1&&i.indexOf(l.slice(0,c))>-1){let f=s.firstChild;for(;f&&f.from==s.from&&f.to-f.from>t.length+c;){if(n.sliceDoc(f.to-t.length,f.to)==t)return!1;f=f.firstChild}return!0}let h=s.to==e&&s.parent;if(!h)break;s=h}return!1}function ih(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=De.Word)return e;for(let s of t){let o=e-s.length;if(n.sliceDoc(o,e)==s&&i(n.sliceDoc(o-1,o))!=De.Word)return o}return-1}function NR(n={}){return[fR,ut,je.of(n),cR,bR,uR]}const xd=[{key:"Ctrl-Space",run:th},{mac:"Alt-`",run:th},{key:"Escape",run:rR},{key:"ArrowDown",run:qs(!0)},{key:"ArrowUp",run:qs(!1)},{key:"PageDown",run:qs(!0,"page")},{key:"PageUp",run:qs(!1,"page")},{key:"Enter",run:sR}],bR=qn.highest(hs.computeN([je],n=>n.facet(je).defaultKeymap?[xd]:[]));class sh{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class kn{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=e,o=i.facet(ss).markerFilter;o&&(s=o(s,i));let a=e.slice().sort((u,m)=>u.from-m.from||u.to-m.to),l=new nn,c=[],h=0;for(let u=0;;){let m=u==a.length?null:a[u];if(!m&&!c.length)break;let T,N;for(c.length?(T=h,N=c.reduce((p,L)=>Math.min(p,L.to),m&&m.from>T?m.from:1e8)):(T=m.from,N=m.to,c.push(m),u++);u<a.length;){let p=a[u];if(p.from==T&&(p.to>p.from||p.to==T))c.push(p),u++,N=Math.min(p.to,N);else{N=Math.min(p.from,N);break}}let y=UR(c);if(c.some(p=>p.from==p.to||p.from==p.to-1&&i.doc.lineAt(p.from).to==p.from))l.add(T,T,ae.widget({widget:new kR(y),diagnostics:c.slice()}));else{let p=c.reduce((L,D)=>D.markClass?L+" "+D.markClass:L,"");l.add(T,N,ae.mark({class:"cm-lintRange cm-lintRange-"+y+p,diagnostics:c.slice(),inclusiveEnd:c.some(L=>L.to>N)}))}h=N;for(let p=0;p<c.length;p++)c[p].to<=h&&c.splice(p--,1)}let f=l.finish();return new kn(f,t,mi(f))}}function mi(n,e=null,t=0){let i=null;return n.between(t,1e9,(s,o,{spec:a})=>{if(!(e&&a.diagnostics.indexOf(e)<0))if(!i)i=new sh(s,o,e||a.diagnostics[0]);else{if(a.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new sh(i.from,o,i.diagnostic)}}),i}function yR(n,e){let t=e.pos,i=e.end||t,s=n.state.facet(ss).hideOn(n,t,i);if(s!=null)return s;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(a=>a.is(vd))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function CR(n,e){return n.field(At,!1)?e:e.concat(me.appendConfig.of(BR))}const vd=me.define(),pl=me.define(),Dd=me.define(),At=Ze.define({create(){return new kn(ae.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,s=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=mi(t,n.selected.diagnostic,o)||mi(t,null,o)}!t.size&&s&&e.state.facet(ss).autoPanel&&(s=null),n=new kn(t,s,i)}for(let t of e.effects)if(t.is(vd)){let i=e.state.facet(ss).autoPanel?t.value.length?rs.open:null:n.panel;n=kn.init(t.value,i,e.state)}else t.is(pl)?n=new kn(n.diagnostics,t.value?rs.open:null,n.selected):t.is(Dd)&&(n=new kn(n.diagnostics,n.panel,t.value));return n},provide:n=>[Qi.from(n,e=>e.panel),Q.decorations.from(n,e=>e.diagnostics)]}),LR=ae.mark({class:"cm-lintRange cm-lintRange-active"});function IR(n,e,t){let{diagnostics:i}=n.state.field(At),s,o=-1,a=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(c,h,{spec:f})=>{if(e>=c&&e<=h&&(c==h||(e>c||t>0)&&(e<h||t<0)))return s=f.diagnostics,o=c,a=h,!1});let l=n.state.facet(ss).tooltipFilter;return s&&l&&(s=l(s,n.state)),s?{pos:o,end:a,above:n.state.doc.lineAt(o).to<a,create(){return{dom:wR(n,s)}}}:null}function wR(n,e){return Ie("ul",{class:"cm-tooltip-lint"},e.map(t=>Pd(n,t,!1)))}const xR=n=>{let e=n.state.field(At,!1);(!e||!e.panel)&&n.dispatch({effects:CR(n.state,[pl.of(!0)])});let t=Ji(n,rs.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},rh=n=>{let e=n.state.field(At,!1);return!e||!e.panel?!1:(n.dispatch({effects:pl.of(!1)}),!0)},vR=n=>{let e=n.state.field(At,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},DR=[{key:"Mod-Shift-m",run:xR,preventDefault:!0},{key:"F8",run:vR}],ss=ne.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},Xt(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function kd(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(o=>o.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function Pd(n,e,t){var i;let s=t?kd(e.actions):[];return Ie("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ie("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,a)=>{let l=!1,c=m=>{if(m.preventDefault(),l)return;l=!0;let T=mi(n.state.field(At).diagnostics,e);T&&o.apply(n,T.from,T.to)},{name:h}=o,f=s[a]?h.indexOf(s[a]):-1,u=f<0?h:[h.slice(0,f),Ie("u",h.slice(f,f+1)),h.slice(f+1)];return Ie("button",{type:"button",class:"cm-diagnosticAction",onclick:c,onmousedown:c,"aria-label":` Action: ${h}${f<0?"":` (access key "${s[a]})"`}.`},u)}),e.source&&Ie("div",{class:"cm-diagnosticSource"},e.source))}class kR extends on{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Ie("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class oh{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Pd(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class rs{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)rh(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],a=kd(o.actions);for(let l=0;l<a.length;l++)if(a[l].toUpperCase().charCodeAt(0)==s.keyCode){let c=mi(this.view.state.field(At).diagnostics,o);c&&o.actions[l].apply(e,c.from,c.to)}}else return;s.preventDefault()},i=s=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(s.target)&&this.moveSelection(o)};this.list=Ie("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Ie("div",{class:"cm-panel-lint"},this.list,Ie("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>rh(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(At).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(At),i=0,s=!1,o=null,a=new Set;for(e.between(0,this.view.state.doc.length,(l,c,{spec:h})=>{for(let f of h.diagnostics){if(a.has(f))continue;a.add(f);let u=-1,m;for(let T=i;T<this.items.length;T++)if(this.items[T].diagnostic==f){u=T;break}u<0?(m=new oh(this.view,f),this.items.splice(i,0,m),s=!0):(m=this.items[u],u>i&&(this.items.splice(i,u-i),s=!0)),t&&m.diagnostic==t.diagnostic?m.dom.hasAttribute("aria-selected")||(m.dom.setAttribute("aria-selected","true"),o=m):m.dom.hasAttribute("aria-selected")&&m.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new oh(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:c})=>{let h=c.height/this.list.offsetHeight;l.top<c.top?this.list.scrollTop-=(c.top-l.top)/h:l.bottom>c.bottom&&(this.list.scrollTop+=(l.bottom-c.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(At),i=mi(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Dd.of(i)})}static open(e){return new rs(e)}}function PR(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Ys(n){return PR(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const MR=Q.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ys("#d11")},".cm-lintRange-warning":{backgroundImage:Ys("orange")},".cm-lintRange-info":{backgroundImage:Ys("#999")},".cm-lintRange-hint":{backgroundImage:Ys("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function FR(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function UR(n){let e="hint",t=1;for(let i of n){let s=FR(i.severity);s>t&&(t=s,e=i.severity)}return e}const BR=[At,Q.decorations.compute([At],n=>{let{selected:e,panel:t}=n.field(At);return!e||!t||e.from==e.to?ae.none:ae.set([LR.range(e.from,e.to)])}),kE(IR,{hideOn:yR}),MR];var ah=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,i=[];e.closeBracketsKeymap!==!1&&(i=i.concat(ER)),e.defaultKeymap!==!1&&(i=i.concat(hd)),e.searchKeymap!==!1&&(i=i.concat(MA)),e.historyKeymap!==!1&&(i=i.concat(AS)),e.foldKeymap!==!1&&(i=i.concat(kT)),e.completionKeymap!==!1&&(i=i.concat(xd)),e.lintKeymap!==!1&&(i=i.concat(DR));var s=[];return e.lineNumbers!==!1&&s.push(YE()),e.highlightActiveLineGutter!==!1&&s.push(zE()),e.highlightSpecialChars!==!1&&s.push(cE()),e.history!==!1&&s.push(fS()),e.foldGutter!==!1&&s.push(UT()),e.drawSelection!==!1&&s.push(Qg()),e.dropCursor!==!1&&s.push(iE()),e.allowMultipleSelections!==!1&&s.push(Te.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&s.push(bT()),e.syntaxHighlighting!==!1&&s.push(il(GT,{fallback:!0})),e.bracketMatching!==!1&&s.push(KT()),e.closeBrackets!==!1&&s.push(dR()),e.autocompletion!==!1&&s.push(NR()),e.rectangularSelection!==!1&&s.push(OE()),t!==!1&&s.push(yE()),e.highlightActiveLine!==!1&&s.push(mE()),e.highlightSelectionMatches!==!1&&s.push(EA()),e.tabSize&&typeof e.tabSize=="number"&&s.push(Br.of(" ".repeat(e.tabSize))),s.concat([hs.of(i.flat())]).filter(Boolean)};const HR="#e5c07b",lh="#e06c75",WR="#56b6c2",GR="#ffffff",ir="#abb2bf",Ca="#7d8799",VR="#61afef",qR="#98c379",ch="#d19a66",YR="#c678dd",jR="#21252b",hh="#2c313a",fh="#282c34",Oo="#353a42",XR="#3E4451",uh="#528bff",zR=Q.theme({"&":{color:ir,backgroundColor:fh},".cm-content":{caretColor:uh},".cm-cursor, .cm-dropCursor":{borderLeftColor:uh},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:XR},".cm-panels":{backgroundColor:jR,color:ir},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:fh,color:Ca,border:"none"},".cm-activeLineGutter":{backgroundColor:hh},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Oo},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Oo,borderBottomColor:Oo},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:hh,color:ir}}},{dark:!0}),KR=Ei.define([{tag:w.keyword,color:YR},{tag:[w.name,w.deleted,w.character,w.propertyName,w.macroName],color:lh},{tag:[w.function(w.variableName),w.labelName],color:VR},{tag:[w.color,w.constant(w.name),w.standard(w.name)],color:ch},{tag:[w.definition(w.name),w.separator],color:ir},{tag:[w.typeName,w.className,w.number,w.changed,w.annotation,w.modifier,w.self,w.namespace],color:HR},{tag:[w.operator,w.operatorKeyword,w.url,w.escape,w.regexp,w.link,w.special(w.string)],color:WR},{tag:[w.meta,w.comment],color:Ca},{tag:w.strong,fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.link,color:Ca,textDecoration:"underline"},{tag:w.heading,fontWeight:"bold",color:lh},{tag:[w.atom,w.bool,w.special(w.variableName)],color:ch},{tag:[w.processingInstruction,w.string,w.inserted],color:qR},{tag:w.invalid,color:GR}]),$R=[zR,il(KR)];var JR=Q.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),QR=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:i=!0,readOnly:s=!1,theme:o="light",placeholder:a="",basicSetup:l=!0}=e,c=[];switch(t&&c.unshift(hs.of([fA])),l&&(typeof l=="boolean"?c.unshift(ah()):c.unshift(ah(l))),a&&c.unshift(SE(a)),o){case"light":c.push(JR);break;case"dark":c.push($R);break;case"none":break;default:c.push(o);break}return i===!1&&c.push(Q.editable.of(!1)),s&&c.push(Te.readOnly.of(!0)),[...c]},ZR=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),dh=jt.define(),e0=[];function t0(n){var{value:e,selection:t,onChange:i,onStatistics:s,onCreateEditor:o,onUpdate:a,extensions:l=e0,autoFocus:c,theme:h="light",height:f=null,minHeight:u=null,maxHeight:m=null,width:T=null,minWidth:N=null,maxWidth:y=null,placeholder:p="",editable:L=!0,readOnly:D=!1,indentWithTab:G=!0,basicSetup:q=!0,root:H,initialState:M}=n,[V,ie]=Ne.useState(),[z,Y]=Ne.useState(),[ee,K]=Ne.useState(),he=Q.theme({"&":{height:f,minHeight:u,maxHeight:m,width:T,minWidth:N,maxWidth:y},"& .cm-scroller":{height:"100% !important"}}),ue=Q.updateListener.of(Oe=>{if(Oe.docChanged&&typeof i=="function"&&!Oe.transactions.some(We=>We.annotation(dh))){var ke=Oe.state.doc,_e=ke.toString();i(_e,Oe)}s&&s(ZR(Oe))}),Ee=QR({theme:h,editable:L,readOnly:D,placeholder:p,indentWithTab:G,basicSetup:q}),Ce=[ue,he,...Ee];return a&&typeof a=="function"&&Ce.push(Q.updateListener.of(a)),Ce=Ce.concat(l),Ne.useEffect(()=>{if(V&&!ee){var Oe={doc:e,selection:t,extensions:Ce},ke=M?Te.fromJSON(M.json,Oe,M.fields):Te.create(Oe);if(K(ke),!z){var _e=new Q({state:ke,parent:V,root:H});Y(_e),o&&o(_e,ke)}}return()=>{z&&(K(void 0),Y(void 0))}},[V,ee]),Ne.useEffect(()=>ie(n.container),[n.container]),Ne.useEffect(()=>()=>{z&&(z.destroy(),Y(void 0))},[z]),Ne.useEffect(()=>{c&&z&&z.focus()},[c,z]),Ne.useEffect(()=>{z&&z.dispatch({effects:me.reconfigure.of(Ce)})},[h,l,f,u,m,T,N,y,p,L,D,G,q,i,a]),Ne.useEffect(()=>{if(e!==void 0){var Oe=z?z.state.doc.toString():"";z&&e!==Oe&&z.dispatch({changes:{from:0,to:Oe.length,insert:e||""},annotations:[dh.of(!0)]})}},[e,z]),{state:ee,setState:K,view:z,setView:Y,container:V,setContainer:ie}}var n0=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Md=Ne.forwardRef((n,e)=>{var{className:t,value:i="",selection:s,extensions:o=[],onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:h,autoFocus:f,theme:u="light",height:m,minHeight:T,maxHeight:N,width:y,minWidth:p,maxWidth:L,basicSetup:D,placeholder:G,indentWithTab:q,editable:H,readOnly:M,root:V,initialState:ie}=n,z=$p(n,n0),Y=Ne.useRef(null),{state:ee,view:K,container:he}=t0({container:Y.current,root:V,value:i,autoFocus:f,theme:u,height:m,minHeight:T,maxHeight:N,width:y,minWidth:p,maxWidth:L,basicSetup:D,placeholder:G,indentWithTab:q,editable:H,readOnly:M,selection:s,onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:h,extensions:o,initialState:ie});if(Ne.useImperativeHandle(e,()=>({editor:Y.current,state:ee,view:K}),[Y,he,ee,K]),typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var ue=typeof u=="string"?"cm-theme-"+u:"cm-theme";return pe.jsx("div",ka({ref:Y,className:""+ue+(t?" "+t:"")},z))});Md.displayName="CodeMirror";var ph={};class xr{constructor(e,t,i,s,o,a,l,c,h,f=0,u){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=o,this.score=a,this.buffer=l,this.bufferBase=c,this.curContext=h,this.lookAhead=f,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new xr(e,[],t,i,i,0,[],0,s?new mh(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:o}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let l=o.dynamicPrecedence(s);if(l&&(this.score+=l),i==0){this.pushState(o.getGoto(this.state,s,!0),this.reducePos),s<o.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),h=c?this.stack[c-2]:this.p.ranges[0].from,f=this.reducePos-h;f>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=f));let u=c?this.stack[c-1]:0,m=this.bufferBase+this.buffer.length-u;if(s<o.minRepeatTerm||e&131072){let T=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,h,T,m+4,!0)}if(e&262144)this.state=this.stack[c];else{let T=this.stack[c-3];this.state=o.getGoto(T,s,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(s,h)}storeNode(e,t,i,s=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,l=this.buffer.length;if(l==0&&a.parent&&(l=a.bufferBase-a.parent.bufferBase,a=a.parent),l>0&&a.buffer[l-4]==0&&a.buffer[l-1]>-1){if(t==i)return;if(a.buffer[l-2]>=t){a.buffer[l-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,s);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0){let l=!1;for(let c=a;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){l=!0;break}if(l)for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=i,this.buffer[a+3]=s}}shift(e,t,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=s,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,s,4);else{let o=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(o,1)||(this.reducePos=s)),this.pushState(o,i),this.shiftContext(t,i),t<=a.maxNode&&this.buffer.push(t,i,s,4)}}apply(e,t,i,s){e&65536?this.reduce(e):this.shift(e,t,i,s)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new xr(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new i0(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let o=0,a;o<t.length;o+=2)(a=t[o+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[o],a);if(this.stack.length<120)for(let o=0;s.length<8&&o<t.length;o+=2){let a=t[o+1];s.some((l,c)=>c&1&&l==a)||s.push(t[o],a)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let o=t[s+1];if(o==this.state)continue;let a=this.split();a.pushState(o,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,i.push(a)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,s=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(s,o)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let l=(a>>19)-o;if(l>1){let c=a&65535,h=this.stack.length-l*3;if(h>=0&&e.getGoto(this.stack[h],c,!1)>=0)return l<<19|65536|c}}else{let l=i(a,o+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new mh(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class mh{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class i0{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class vr{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new vr(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new vr(this.stack,this.pos,this.index)}}function js(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,s=0;i<n.length;){let o=0;for(;;){let a=n.charCodeAt(i++),l=!1;if(a==126){o=65535;break}a>=92&&a--,a>=34&&a--;let c=a-32;if(c>=46&&(c-=46,l=!0),o+=c,l)break;o*=46}t?t[s++]=o:t=new e(o)}return t}class sr{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const gh=new sr;class s0{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=gh,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!s)return null;let a=this.ranges[--s];o-=i.from-a.to,i=a}for(;t<0?o>i.to:o>=i.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];o+=a.from-i.to,i=a}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let a=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=gh,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class ai{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;o0(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}ai.prototype.contextual=ai.prototype.fallback=ai.prototype.extend=!1;ai.prototype.fallback=ai.prototype.extend=!1;class r0{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function o0(n,e,t,i,s,o){let a=0,l=1<<i,{dialect:c}=t.p.parser;e:for(;l&n[a];){let h=n[a+1];for(let T=a+3;T<h;T+=2)if((n[T+1]&l)>0){let N=n[T];if(c.allows(N)&&(e.token.value==-1||e.token.value==N||a0(N,e.token.value,s,o))){e.acceptToken(N);break}}let f=e.next,u=0,m=n[a+2];if(e.next<0&&m>u&&n[h+m*3-3]==65535){a=n[h+m*3-1];continue e}for(;u<m;){let T=u+m>>1,N=h+T+(T<<1),y=n[N],p=n[N+1]||65536;if(f<y)m=T;else if(f>=p)u=T+1;else{a=n[N+2],e.advance();continue e}}break}}function Eh(n,e,t){for(let i=e,s;(s=n[i])!=65535;i++)if(s==t)return i-e;return-1}function a0(n,e,t,i){let s=Eh(t,i,e);return s<0||Eh(t,i,n)<s}const Tt=typeof process<"u"&&ph&&/\bparse\b/.test(ph.LOG);let No=null;function Th(n,e,t){let i=n.cursor(Ye.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class l0{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Th(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Th(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[s],a=this.start[t]+i.positions[s];if(a>e)return this.nextStart=a,null;if(o instanceof He){if(a==e){if(a<this.safeFrom)return null;let l=a+o.length;if(l<=this.safeTo){let c=o.prop(ge.lookAhead);if(!c||l+c<this.fragment.to)return o}}this.index[t]++,a+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+o.length}}}class c0{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new sr)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:o}=s,a=s.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,c=0;for(let h=0;h<o.length;h++){if(!(1<<h&a))continue;let f=o[h],u=this.tokens[h];if(!(i&&!f.fallback)&&((f.contextual||u.start!=e.pos||u.mask!=a||u.context!=l)&&(this.updateCachedToken(u,f,e),u.mask=a,u.context=l),u.lookAhead>u.end+25&&(c=Math.max(u.lookAhead,c)),u.value!=0)){let m=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!f.extend&&(i=u,t>m))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new sr,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new sr,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:o}=i.p;for(let a=0;a<o.specialized.length;a++)if(o.specialized[a]==e.value){let l=o.specializers[a](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let o=0;o<s;o+=3)if(this.actions[o]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:o}=e,{parser:a}=e.p,{data:l}=a;for(let c=0;c<2;c++)for(let h=a.stateSlot(o,c?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=Zt(l,h+2);else{s==0&&l[h+1]==2&&(s=this.putAction(Zt(l,h+2),t,i,s));break}l[h]==t&&(s=this.putAction(Zt(l,h+1),t,i,s))}return s}}class h0{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new s0(t,s),this.tokens=new c0(e,this.stream),this.topTerm=e.top[1];let{from:o}=s[0];this.stacks=[xr.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new l0(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,o;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let l=e[a];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{s||(s=[],o=[]),s.push(l);let c=this.tokens.getMainToken(l);o.push(c.value,c.end)}}break}}if(!i.length){let a=s&&u0(s);if(a)return Tt&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw Tt&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,o,i);if(a)return Tt&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(i.length>a)for(i.sort((l,c)=>c.score-l.score);i.length>a;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let a=0;a<i.length-1;a++){let l=i[a];for(let c=a+1;c<i.length;c++){let h=i[c];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)i.splice(c--,1);else{i.splice(a--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let a=1;a<i.length;a++)i[a].pos<this.minStackPos&&(this.minStackPos=i[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:o}=this,a=Tt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,f=h?e.curContext.hash:0;for(let u=this.fragments.nodeAt(s);u;){let m=this.parser.nodeSet.types[u.type.id]==u.type?o.getGoto(e.state,u.type.id):-1;if(m>-1&&u.length&&(!h||(u.prop(ge.contextHash)||0)==f))return e.useNode(u,m),Tt&&console.log(a+this.stackID(e)+` (via reuse of ${o.getName(u.type.id)})`),!0;if(!(u instanceof He)||u.children.length==0||u.positions[0]>0)break;let T=u.children[0];if(T instanceof He&&u.positions[0]==0)u=T;else break}}let l=o.stateSlot(e.state,4);if(l>0)return e.reduce(l),Tt&&console.log(a+this.stackID(e)+` (via always-reduce ${o.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let h=0;h<c.length;){let f=c[h++],u=c[h++],m=c[h++],T=h==c.length||!i,N=T?e:e.split(),y=this.tokens.mainToken;if(N.apply(f,u,y?y.start:N.pos,m),Tt&&console.log(a+this.stackID(N)+` (via ${f&65536?`reduce of ${o.getName(f&65535)}`:"shift"} for ${o.getName(u)} @ ${s}${N==e?"":", split"})`),T)return!0;N.pos>s?t.push(N):i.push(N)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Sh(e,t),!0}}runRecovery(e,t,i){let s=null,o=!1;for(let a=0;a<e.length;a++){let l=e[a],c=t[a<<1],h=t[(a<<1)+1],f=Tt?this.stackID(l)+" -> ":"";if(l.deadEnd&&(o||(o=!0,l.restart(),Tt&&console.log(f+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let u=l.split(),m=f;for(let T=0;u.forceReduce()&&T<10&&(Tt&&console.log(m+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));T++)Tt&&(m=this.stackID(u)+" -> ");for(let T of l.recoverByInsert(c))Tt&&console.log(f+this.stackID(T)+" (via recover-insert)"),this.advanceFully(T,i);this.stream.end>l.pos?(h==l.pos&&(h++,c=0),l.recoverByDelete(c,h),Tt&&console.log(f+this.stackID(l)+` (via recover-delete ${this.parser.getName(c)})`),Sh(l,i)):(!s||s.score<l.score)&&(s=l)}return s}stackToTree(e){return e.close(),He.build({buffer:vr.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(No||(No=new WeakMap)).get(e);return t||No.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Sh(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class f0{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class Dr extends du{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),s=[];for(let l=0;l<t.length;l++)s.push([]);function o(l,c,h){s[l].push([c,c.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let c=l[0];typeof c=="string"&&(c=ge[c]);for(let h=1;h<l.length;){let f=l[h++];if(f>=0)o(f,c,l[h++]);else{let u=l[h+-f];for(let m=-f;m>0;m--)o(l[h++],c,u);h++}}}this.nodeSet=new Ja(t.map((l,c)=>mt.define({name:c>=this.minRepeatTerm?void 0:l,id:c,props:s[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=cu;let a=js(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(Ah),this.states=js(e.states,Uint32Array),this.data=js(e.stateData),this.goto=js(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new ai(a,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new h0(this,e,t,i);for(let o of this.wrappers)s=o(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let o=s[t+1];;){let a=s[o++],l=a&1,c=s[o++];if(l&&i)return c;for(let h=o+(a>>1);o<h;o++)if(s[o]==e)return c;if(l)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let o=this.stateSlot(e,s?2:1),a;;o+=3){if((a=i[o])==65535)if(i[o+1]==1)a=i[o=Zt(i,o+2)];else{if(i[o+1]==2)return Zt(i,o+2);break}if(a==t||a==0)return Zt(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),s=i?t(i):void 0;for(let o=this.stateSlot(e,1);s==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=Zt(this.data,o+2);else break;s=t(Zt(this.data,o+1))}return s}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Zt(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];t.some((o,a)=>a&1&&o==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(Dr.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(o=>o.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let o=e.specializers.find(l=>l.from==i.external);if(!o)return i;let a=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[s]=Ah(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let a=t.indexOf(o);a>=0&&(i[a]=!0)}let s=null;for(let o=0;o<t.length;o++)if(!i[o])for(let a=this.dialects[t[o]],l;(l=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[l]=1;return new f0(e,i,s)}static deserialize(e){return new Dr(e)}}function Zt(n,e){return n[e]|n[e+1]<<16}function u0(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Ah(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const d0=36,Rh=1,p0=2,Xn=3,bo=4,m0=5,g0=6,E0=7,T0=8,S0=9,A0=10,R0=11,_0=12,O0=13,N0=14,b0=15,y0=16,C0=17,_h=18,L0=19,Fd=20,Ud=21,Oh=22,I0=23,w0=24;function La(n){return n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57}function x0(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function vn(n,e,t){for(let i=!1;;){if(n.next<0)return;if(n.next==e&&!i){n.advance();return}i=t&&!i&&n.next==92,n.advance()}}function v0(n,e){e:for(;;){if(n.next<0)return;if(n.next==36){n.advance();for(let t=0;t<e.length;t++){if(n.next!=e.charCodeAt(t))continue e;n.advance()}if(n.next==36){n.advance();return}}else n.advance()}}function D0(n,e){let t="[{<(".indexOf(String.fromCharCode(e)),i=t<0?e:"]}>)".charCodeAt(t);for(;;){if(n.next<0)return;if(n.next==i&&n.peek(1)==39){n.advance(2);return}n.advance()}}function Ia(n,e){for(;!(n.next!=95&&!La(n.next));)e!=null&&(e+=String.fromCharCode(n.next)),n.advance();return e}function k0(n){if(n.next==39||n.next==34||n.next==96){let e=n.next;n.advance(),vn(n,e,!1)}else Ia(n)}function Nh(n,e){for(;n.next==48||n.next==49;)n.advance();e&&n.next==e&&n.advance()}function bh(n,e){for(;;){if(n.next==46){if(e)break;e=!0}else if(n.next<48||n.next>57)break;n.advance()}if(n.next==69||n.next==101)for(n.advance(),(n.next==43||n.next==45)&&n.advance();n.next>=48&&n.next<=57;)n.advance()}function yh(n){for(;!(n.next<0||n.next==10);)n.advance()}function Cn(n,e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)==n)return!0;return!1}const yo=` 	\r
`;function Bd(n,e,t){let i=Object.create(null);i.true=i.false=m0,i.null=i.unknown=g0;for(let s of n.split(" "))s&&(i[s]=Fd);for(let s of e.split(" "))s&&(i[s]=Ud);for(let s of(t||"").split(" "))s&&(i[s]=w0);return i}const Hd="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",Wd="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",wa={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:Bd(Wd,Hd)};function P0(n,e,t,i){let s={};for(let o in wa)s[o]=(n.hasOwnProperty(o)?n:wa)[o];return e&&(s.words=Bd(e,t||"",i)),s}function Gd(n){return new r0(e=>{var t;let{next:i}=e;if(e.advance(),Cn(i,yo)){for(;Cn(e.next,yo);)e.advance();e.acceptToken(d0)}else if(i==36&&n.doubleDollarQuotedStrings){let s=Ia(e,"");e.next==36&&(e.advance(),v0(e,s),e.acceptToken(Xn))}else if(i==39||i==34&&n.doubleQuotedStrings)vn(e,i,n.backslashEscapes),e.acceptToken(Xn);else if(i==35&&n.hashComments||i==47&&e.next==47&&n.slashComments)yh(e),e.acceptToken(Rh);else if(i==45&&e.next==45&&(!n.spaceAfterDashes||e.peek(1)==32))yh(e),e.acceptToken(Rh);else if(i==47&&e.next==42){e.advance();for(let s=1;;){let o=e.next;if(e.next<0)break;if(e.advance(),o==42&&e.next==47){if(s--,e.advance(),!s)break}else o==47&&e.next==42&&(s++,e.advance())}e.acceptToken(p0)}else if((i==101||i==69)&&e.next==39)e.advance(),vn(e,39,!0),e.acceptToken(Xn);else if((i==110||i==78)&&e.next==39&&n.charSetCasts)e.advance(),vn(e,39,n.backslashEscapes),e.acceptToken(Xn);else if(i==95&&n.charSetCasts)for(let s=0;;s++){if(e.next==39&&s>1){e.advance(),vn(e,39,n.backslashEscapes),e.acceptToken(Xn);break}if(!La(e.next))break;e.advance()}else if(n.plsqlQuotingMechanism&&(i==113||i==81)&&e.next==39&&e.peek(1)>0&&!Cn(e.peek(1),yo)){let s=e.peek(1);e.advance(2),D0(e,s),e.acceptToken(Xn)}else if(i==40)e.acceptToken(E0);else if(i==41)e.acceptToken(T0);else if(i==123)e.acceptToken(S0);else if(i==125)e.acceptToken(A0);else if(i==91)e.acceptToken(R0);else if(i==93)e.acceptToken(_0);else if(i==59)e.acceptToken(O0);else if(n.unquotedBitLiterals&&i==48&&e.next==98)e.advance(),Nh(e),e.acceptToken(Oh);else if((i==98||i==66)&&(e.next==39||e.next==34)){const s=e.next;e.advance(),n.treatBitsAsBytes?(vn(e,s,n.backslashEscapes),e.acceptToken(I0)):(Nh(e,s),e.acceptToken(Oh))}else if(i==48&&(e.next==120||e.next==88)||(i==120||i==88)&&e.next==39){let s=e.next==39;for(e.advance();x0(e.next);)e.advance();s&&e.next==39&&e.advance(),e.acceptToken(bo)}else if(i==46&&e.next>=48&&e.next<=57)bh(e,!0),e.acceptToken(bo);else if(i==46)e.acceptToken(N0);else if(i>=48&&i<=57)bh(e,!1),e.acceptToken(bo);else if(Cn(i,n.operatorChars)){for(;Cn(e.next,n.operatorChars);)e.advance();e.acceptToken(b0)}else if(Cn(i,n.specialVar))e.next==i&&e.advance(),k0(e),e.acceptToken(C0);else if(Cn(i,n.identifierQuotes))vn(e,i,!1),e.acceptToken(L0);else if(i==58||i==44)e.acceptToken(y0);else if(La(i)){let s=Ia(e,String.fromCharCode(i));e.acceptToken(e.next==46||e.peek(-s.length-1)==46?_h:(t=n.words[s.toLowerCase()])!==null&&t!==void 0?t:_h)}})}const Vd=Gd(wa),M0=Dr.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:"⚠ LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,Vd],topRules:{Script:[0,25]},tokenPrec:0});function xa(n){let e=n.cursor().moveTo(n.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function os(n,e){let t=n.sliceString(e.from,e.to),i=/^([`'"])(.*)\1$/.exec(t);return i?i[2]:t}function kr(n){return n&&(n.name=="Identifier"||n.name=="QuotedIdentifier")}function F0(n,e){if(e.name=="CompositeIdentifier"){let t=[];for(let i=e.firstChild;i;i=i.nextSibling)kr(i)&&t.push(os(n,i));return t}return[os(n,e)]}function Ch(n,e){for(let t=[];;){if(!e||e.name!=".")return t;let i=xa(e);if(!kr(i))return t;t.unshift(os(n,i)),e=xa(i)}}function U0(n,e){let t=Xe(n).resolveInner(e,-1),i=H0(n.doc,t);return t.name=="Identifier"||t.name=="QuotedIdentifier"||t.name=="Keyword"?{from:t.from,quoted:t.name=="QuotedIdentifier"?n.doc.sliceString(t.from,t.from+1):null,parents:Ch(n.doc,xa(t)),aliases:i}:t.name=="."?{from:e,quoted:null,parents:Ch(n.doc,t),aliases:i}:{from:e,quoted:null,parents:[],empty:!0,aliases:i}}const B0=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function H0(n,e){let t;for(let s=e;!t;s=s.parent){if(!s)return null;s.name=="Statement"&&(t=s)}let i=null;for(let s=t.firstChild,o=!1,a=null;s;s=s.nextSibling){let l=s.name=="Keyword"?n.sliceString(s.from,s.to).toLowerCase():null,c=null;if(!o)o=l=="from";else if(l=="as"&&a&&kr(s.nextSibling))c=os(n,s.nextSibling);else{if(l&&B0.has(l))break;a&&kr(s)&&(c=os(n,s))}c&&(i||(i=Object.create(null)),i[c]=F0(n,a)),a=/Identifier$/.test(s.name)?s:null}return i}function W0(n,e){return n?e.map(t=>Object.assign(Object.assign({},t),{label:t.label[0]==n?t.label:n+t.label+n,apply:void 0})):e}const G0=/^\w*$/,V0=/^[`'"]?\w*[`'"]?$/;function Lh(n){return n.self&&typeof n.self.label=="string"}class ml{constructor(e,t){this.idQuote=e,this.idCaseInsensitive=t,this.list=[],this.children=void 0}child(e){let t=this.children||(this.children=Object.create(null)),i=t[e];return i||(e&&!this.list.some(s=>s.label==e)&&this.list.push(Ih(e,"type",this.idQuote,this.idCaseInsensitive)),t[e]=new ml(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let t=this.list.findIndex(i=>i.label==e.label);t>-1?this.list[t]=e:this.list.push(e)}addCompletions(e){for(let t of e)this.addCompletion(typeof t=="string"?Ih(t,"property",this.idQuote,this.idCaseInsensitive):t)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):Lh(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let t of Object.keys(e)){let i=e[t],s=null,o=t.replace(/\\?\./g,l=>l=="."?"\0":l).split("\0"),a=this;Lh(i)&&(s=i.self,i=i.children);for(let l=0;l<o.length;l++)s&&l==o.length-1&&a.addCompletion(s),a=a.child(o[l].replace(/\\\./g,"."));a.addNamespace(i)}}}function Ih(n,e,t,i){return new RegExp("^[a-z_][a-z_\\d]*$",i?"i":"").test(n)?{label:n,type:e}:{label:n,type:e,apply:t+n+t}}function q0(n,e,t,i,s,o){var a;let l=((a=o?.spec.identifierQuotes)===null||a===void 0?void 0:a[0])||'"',c=new ml(l,!!o?.spec.caseInsensitiveIdentifiers),h=s?c.child(s):null;return c.addNamespace(n),e&&(h||c).addCompletions(e),t&&c.addCompletions(t),h&&c.addCompletions(h.list),i&&c.addCompletions((h||c).child(i).list),f=>{let{parents:u,from:m,quoted:T,empty:N,aliases:y}=U0(f.state,f.pos);if(N&&!f.explicit)return null;y&&u.length==1&&(u=y[u[0]]||u);let p=c;for(let G of u){for(;!p.children||!p.children[G];)if(p==c&&h)p=h;else if(p==h&&i)p=p.child(i);else return null;let q=p.maybeChild(G);if(!q)return null;p=q}let L=T&&f.state.sliceDoc(f.pos,f.pos+1)==T,D=p.list;return p==c&&y&&(D=D.concat(Object.keys(y).map(G=>({label:G,type:"constant"})))),{from:m,to:L?f.pos+1:void 0,options:W0(T,D),validFor:T?V0:G0}}}function Y0(n){return n==Ud?"type":n==Fd?"keyword":"variable"}function j0(n,e,t){let i=Object.keys(n).map(s=>t(e?s.toUpperCase():s,Y0(n[s])));return WA(["QuotedIdentifier","SpecialVar","String","LineComment","BlockComment","."],_d(i))}let X0=M0.configure({props:[Tu.add({Statement:OT()}),Au.add({Statement(n,e){return{from:Math.min(n.from+100,e.doc.lineAt(n.from).to),to:n.to}},BlockComment(n){return{from:n.from+2,to:n.to-2}}}),pu({Keyword:w.keyword,Type:w.typeName,Builtin:w.standard(w.name),Bits:w.number,Bytes:w.string,Bool:w.bool,Null:w.null,Number:w.number,String:w.string,Identifier:w.name,QuotedIdentifier:w.special(w.string),SpecialVar:w.special(w.name),LineComment:w.lineComment,BlockComment:w.blockComment,Operator:w.operator,"Semi Punctuation":w.punctuation,"( )":w.paren,"{ }":w.brace,"[ ]":w.squareBracket})]});class Xr{constructor(e,t,i){this.dialect=e,this.language=t,this.spec=i}get extension(){return this.language.extension}static define(e){let t=P0(e,e.keywords,e.types,e.builtin),i=Er.define({name:"sql",parser:X0.configure({tokenizers:[{from:Vd,to:Gd(t)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new Xr(t,i,e)}}function z0(n,e){return{label:n,type:e,boost:-1}}function K0(n,e=!1,t){return j0(n.dialect.words,e,z0)}function $0(n){return n.schema?q0(n.schema,n.tables,n.schemas,n.defaultTable,n.defaultSchema,n.dialect||J0):()=>null}const J0=Xr.define({}),qd=Xr.define({charSetCasts:!0,doubleDollarQuotedStrings:!0,operatorChars:"+-*/<>=~!@#%^&|`?",specialVar:"",keywords:Wd+"abort abs absent access according ada admin aggregate alias also always analyse analyze array_agg array_max_cardinality asensitive assert assignment asymmetric atomic attach attribute attributes avg backward base64 begin_frame begin_partition bernoulli bit_length blocked bom cache called cardinality catalog_name ceil ceiling chain char_length character_length character_set_catalog character_set_name character_set_schema characteristics characters checkpoint class class_origin cluster coalesce cobol collation_catalog collation_name collation_schema collect column_name columns command_function command_function_code comment comments committed concurrently condition_number configuration conflict connection_name constant constraint_catalog constraint_name constraint_schema contains content control conversion convert copy corr cost covar_pop covar_samp csv cume_dist current_catalog current_row current_schema cursor_name database datalink datatype datetime_interval_code datetime_interval_precision db debug defaults defined definer degree delimiter delimiters dense_rank depends derived detach detail dictionary disable discard dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue document dump dynamic_function dynamic_function_code element elsif empty enable encoding encrypted end_frame end_partition endexec enforced enum errcode error event every exclude excluding exclusive exp explain expression extension extract family file filter final first_value flag floor following force foreach fortran forward frame_row freeze fs functions fusion generated granted greatest groups handler header hex hierarchy hint id ignore ilike immediately immutable implementation implicit import include including increment indent index indexes info inherit inherits inline insensitive instance instantiable instead integrity intersection invoker isnull key_member key_type label lag last_value lead leakproof least length library like_regex link listen ln load location lock locked log logged lower mapping matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text min minvalue mod mode more move multiset mumps name namespace nfc nfd nfkc nfkd nil normalize normalized nothing notice notify notnull nowait nth_value ntile nullable nullif nulls number occurrences_regex octet_length octets off offset oids operator options ordering others over overlay overriding owned owner parallel parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partition pascal passing passthrough password percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding prepared print_strict_params procedural procedures program publication query quote raise range rank reassign recheck recovery refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex rename repeatable replace replica requiring reset respect restart restore result_oid returned_cardinality returned_length returned_octet_length returned_sqlstate returning reverse routine_catalog routine_name routine_schema routines row_count row_number rowtype rule scale schema_name schemas scope scope_catalog scope_name scope_schema security selective self sensitive sequence sequences serializable server server_name setof share show simple skip slice snapshot source specific_name sqlcode sqlerror sqrt stable stacked standalone statement statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time table_name tables tablesample tablespace temp template ties token top_level_count transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex trigger_catalog trigger_name trigger_schema trim trim_array truncate trusted type types uescape unbounded uncommitted unencrypted unlink unlisten unlogged unnamed untyped upper uri use_column use_variable user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema vacuum valid validate validator value_of var_pop var_samp varbinary variable_conflict variadic verbose version versioning views volatile warning whitespace width_bucket window within wrapper xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate yes",types:Hd+"bigint int8 bigserial serial8 varbit bool box bytea cidr circle precision float8 inet int4 json jsonb line lseg macaddr macaddr8 money numeric pg_lsn point polygon float4 int2 smallserial serial2 serial serial4 text timetz timestamptz tsquery tsvector txid_snapshot uuid xml"}),Q0="E",Z0="b",e_="i",t_="a",n_="e",i_="r",s_="S",r_="f",o_="T",a_="n",l_="a",c_="d",h_="s",$t="r",Ln="i",f_="S",xi="t",vi="v",_t="m",Co="c",Jt="f",ct="p",Qt="I";function u_(n,e,t,i,s=!1,o=null,a=1,l=c=>`https://www.postgresql.org/docs/current/${c}.html`){let c=!1;function h(){c=!0,i=()=>{}}function f(){if(c)throw new Error("cancelled")}async function u(){const m=n.match(/^\\([?hdzsl]\S*)(.*)/);if(!m)return i(`unsupported command: ${n}`),!1;let[,T,N]=m;if(T=T.replace(/^lo_list/,"dl"),T=T.replace(/^z/,"dp"),T==="?")return i(T_),!1;if(T==="h"){const O=(N??"").trim().toUpperCase().replace(/\s+/g," ");if(O==="")return i(`Available help:
`+Di.map(R=>R[0]).join(`
`)),!1;{let R=O==="*"?Di:Di.filter(E=>E[0]===O);if(R.length===0&&(R=Di.filter(E=>E[0].startsWith(O))),R.length===0){const E=O.split(" ");for(let g=E.length;g>0;g--){const A=E.slice(0,g).join(" ");if(R=Di.filter(d=>d[0].startsWith(A)),R.length>0)break}}if(R.length===0)return i(`No help available for "${N.trim()}".
Try \\h with no arguments to see available help.`),!1;for(const E of R){const g={};Z(g),E[3](g),i(`Command:     ${E[0]}
Description: ${E[1]}
Syntax:
${g.data}

URL: ${l(E[2])}

`)}return!1}}const y=async(O,R=!1)=>{f(),s&&!R&&i(`/******** QUERY *********/
${O}
/************************/`);const E=await t(O);return f(),E};let p;try{if(!o){const g=await y("SHOW server_version_num",!0);o=parseInt(g.rows[0][0],10)}p={sversion:o,db:{dbName:e,sversion:o,std_strings:a,status:0,encoding:6},popt:{topt:{default_footer:!0},nullPrint:""}};const O=[N,0];await(T[0]==="d"?at(O,!0,T):T[0]==="s"?T[1]==="f"||T[1]==="v"?he(O,!0,T,T[1]==="f"):0:T[0]==="l"?We(O,!0,T):0)===0&&i(`invalid command \\${T}`);let R,E=[];for(;R=xn(O,0,null,!0);)E.push(et('\\%s: extra argument "%s" ignored',T,R));E.length>0&&i(E.join(`
`))}catch(O){return i("ERROR:  "+O.message),c?null:!1}function L(O,...R){i(et(O,...R))}function D(O,R,E,g,A,d,C,F,P,I){let X={},j={},W;if(Z(X),W=G(p.db,O,R,E,g,A,d,C,F,X,j),j=j.value,P&&(P.value=W),j>=I)return L("improper qualified name (too many dotted names): %s",R),!1;if(I>1&&j==I-1){if(Dh(p.db)==null)return L("You are currently not connected to a database."),!1;if(se(Dh(p.db),X.data)!=0)return L("cross-database references are not implemented: %s",R),!1}return!0}function G(O,R,E,g,A,d,C,F,P,I,X){let j={},W={},le=!1;return X||(X={}),X.value=0,E==null?(P&&(b(R,g?"  AND ":"WHERE "),g=!0,le=!0,_(R,`%s
`,P)),le):(Z(j),Z(W),q(Yd(O),d?I:null,d?j:null,W,E,A,!0,X),C&&W.len>2&&se(W.data,"^(.*)$")!=0&&(b(R,g?"  AND ":"WHERE "),g=!0,le=!0,F?(_(R,"(%s OPERATOR(pg_catalog.~) ",C),Kn(R,W.data,O),Bi(O)>=12e4&&b(R," COLLATE pg_catalog.default"),_(R,`
        OR %s OPERATOR(pg_catalog.~) `,F),Kn(R,W.data,O),Bi(O)>=12e4&&b(R," COLLATE pg_catalog.default"),b(R,`)
`)):(_(R,"%s OPERATOR(pg_catalog.~) ",C),Kn(R,W.data,O),Bi(O)>=12e4&&b(R," COLLATE pg_catalog.default"),Le(R,`
`))),d&&j.len>2?se(j.data,"^(.*)$")!=0&&d&&(b(R,g?"  AND ":"WHERE "),g=!0,le=!0,_(R,"%s OPERATOR(pg_catalog.~) ",d),Kn(R,j.data,O),Bi(O)>=12e4&&b(R," COLLATE pg_catalog.default"),Le(R,`
`)):P&&(b(R,g?"  AND ":"WHERE "),g=!0,le=!0,_(R,`%s
`,P)),le)}function q(O,R,E,g,A,d,C,F){let P=[{},{},{}],I=0,X={},j={},W={},le,re,kt;zn(A),zn(g),zn(!R||E),zn(F),F.value=0,le=!1,kt=A,R?W=2:E?W=1:W=0,j=P[I],re=!0,Z(X),Z(j),b(j,"^(");let qe=0,ce;for(;(ce=kt[qe])!=null;)ce=='"'?(le&&kt[qe+1]=='"'?(Le(j,'"'),re&&Le(X,'"'),qe++):le=!le,qe++):!le&&m_(ce)?(Le(j,va(ce)),re&&Le(X,va(ce)),qe++):!le&&ce=="*"?(b(j,".*"),re&&Le(X,"*"),qe++):!le&&ce=="?"?(Le(j,"."),re&&Le(X,"?"),qe++):!le&&ce=="."?(re=!1,F.value++,I<W?(b(j,")$"),j=P[++I],Z(j),b(j,"^("),qe++):(Le(j,ce),qe++)):ce=="$"?(b(j,"\\$"),re&&Le(X,"$"),qe++):(((le||d)&&Pe("|*+?()[]{}.^$\\",ce)!=null||ce=="["&&kt[qe+1]=="]")&&Le(j,"\\"),re&&Le(X,ce),Le(j,ce),qe++);b(j,")$"),b(g,j.data),j=P[--I],E&&I>=0&&(b(E,j.data),j=P[--I]),R&&I>=0&&b(R,X.data)}function H(O){let R;switch(O){case 21:case 23:case 20:case 700:case 701:case 1700:case 26:case 28:case 5069:case 29:case 790:R="r";break;default:R="l";break}return R}function M(O,R,E,g,A){let d={},C,F,P;for(V(d,R.topt,R.title,jd(O),de(O)),zn(R.translate_columns==null||R.translate_columns==null||R.n_translate_columns>=d.ncolumns),C=0;C<d.ncolumns;C++)ie(d,Xd(O,C),R.translate_header,H(E_(O,C)));for(F=0;F<d.nrows;F++)for(P=0;P<d.ncolumns;P++){let I,X;Ke(O,F,P)?I=R.nullPrint?R.nullPrint:"":(I=v(O,F,P),d.aligns[P]=="r"&&R.topt.numericLocale&&(I=format_numeric_locale(I))),X=R.translate_columns&&R.translate_columns[P],z(d,I,X)}if(R.footers)for(let I of R.footers)Y(d,I);K(d)}function V(O,R,E,g,A){O.opt=R,O.title=E,O.ncolumns=g,O.nrows=A,O.headers=[],O.cells=[],O.footers=null,O.aligns=[]}function ie(O,R,E,g){E&&(R=r(R)),O.headers.push(R),O.header=R,O.aligns.push(g),O.align=g}function z(O,R,E,g){E&&(R=r(R)),O.cells.push(R),O.cell=R}function Y(O,R){O.footers==null&&(O.footers=[]),O.footers.push(R),O.footer=R}function ee(O,R){O.footers&&O.footers.pop(),Y(O,R)}function K(O,R,E,g){i({...O})}async function he(O,R,E,g){let A=2,d=Pe(E,"+")!=null,C={},F,P={value:0},I=g?0:1;return Z(C),F=xn(O,4),F?await Ee(I,F,P)&&await Ce(I,P.value,C)?d?ue(C.data,g):i(C.data):A=5:(L(g?"function name is required":"view name is required"),A=5),A}function ue(O,R){let E=R,g=0,A="";O=O.trimEnd().split(`
`);for(let d of O)E&&(Qn(d,"AS ",3)==0||Qn(d,"BEGIN ",6)==0||Qn(d,"RETURN ",7)==0)&&(E=!1),E||g++,E?A+=et(`        %s
`,d):A+=et(`%-7d %s
`,g,d);i(A)}async function Ee(O,R,E){let g=!0,A={};Z(A);let d;switch(O){case 0:b(A,"SELECT "),Kn(A,R,p.db),_(A,"::pg_catalog.%s::pg_catalog.oid",Pe(R,"(")!==null?"regprocedure":"regproc");break;case 1:b(A,"SELECT "),Kn(A,R,p.db),b(A,"::pg_catalog.regclass::pg_catalog.oid");break}try{d=await y(A.data),d&&de(d)==1?E.value=Lo(v(d,0,0)):(L("Error when querying"),g=!1)}catch(C){L("ERROR:  "+C.message),g=!1}return g}async function Ce(O,R,E){let g=!0,A={};Z(A);let d;switch(O){case 0:k(A,"SELECT pg_catalog.pg_get_functiondef(%u)",R);break;case 1:p.sversion>=90400?k(A,"SELECT nspname, relname, relkind, pg_catalog.pg_get_viewdef(c.oid, true), pg_catalog.array_remove(pg_catalog.array_remove(c.reloptions,'check_option=local'),'check_option=cascaded') AS reloptions, CASE WHEN 'check_option=local' = ANY (c.reloptions) THEN 'LOCAL'::text WHEN 'check_option=cascaded' = ANY (c.reloptions) THEN 'CASCADED'::text ELSE NULL END AS checkoption FROM pg_catalog.pg_class c LEFT JOIN pg_catalog.pg_namespace n ON c.relnamespace = n.oid WHERE c.oid = %u",R):k(A,"SELECT nspname, relname, relkind, pg_catalog.pg_get_viewdef(c.oid, true), c.reloptions AS reloptions, NULL AS checkoption FROM pg_catalog.pg_class c LEFT JOIN pg_catalog.pg_namespace n ON c.relnamespace = n.oid WHERE c.oid = %u",R);break}if(d=await y(A.data),d&&de(d)==1){switch(Io(E),O){case 0:b(E,v(d,0,0));break;case 1:let C=v(d,0,0),F=v(d,0,1),P=v(d,0,2),I=v(d,0,3),X=v(d,0,4),j=v(d,0,5);switch(P[0]){case vi:b(E,"CREATE OR REPLACE VIEW ");break;default:L('"%s.%s" is not a view',C,F),g=!1;break}_(E,"%s.",_e(C)),b(E,_e(F)),X!=null&&un(X)>2&&(b(E,`
 WITH (`),Oe(E,X,"",p.encoding,p.db.standard_strings)||(L("could not parse reloptions array"),g=!1),Le(E,")")),_(E,` AS
%s`,I),E.len>0&&E.data[E.len-1]==";"&&(E.data=E.data.slice(0,E.len-1)),j&&j[0]!=null&&_(E,`
 WITH %s CHECK OPTION`,j);break}E.len>0&&E.data[E.len-1]!=`
`&&Le(E,`
`)}else L("Error when querying"),g=!1;return g}function Oe(O,R,E,g,A){let d=[],C={},F;if(!ke(R,d,C))return!1;for(C=C.value,F=0;F<C;F++){let P=d[F],[I,X]=P.split("=");X??(X=""),F>0&&b(O,", "),_(O,"%s%s=",E,_e(I)),se(_e(X),X)==0?b(O,X):Da(O,X,g,A)}return!0}function ke(O,R,E){let g,A,d;if(g=un(O),E.value=0,g<2||O[0]!="{"||O[g-1]!="}")return!1;let C=0;for(C++,d=0;O[C]!="}";){if(O[C]==null)return!1;for(A="";O[C]!="}"&&O[C]!=",";){if(O[C]==null)return!1;if(O[C]!='"')A+=O[C++];else{for(C++;O[C]!='"';){if(O[C]==null||O[C]=="\\"&&(C++,O[C]==null))return!1;A+=O[C++]}C++}}R[d]=A,O[C]==","&&C++,d++}return O[C+1]&&O[C+1]!=null?!1:(E.value=d,!0)}function _e(O){let R={};Z(R);let E=!1;return O[0]>="a"&&O[0]<="z"||O[0]=="_"?/[^a-z0-9_]/.test(O)&&(E=!0):E=!0,E||new Set(["all","analyse","analyze","and","any","array","as","asc","asymmetric","authorization","between","bigint","binary","bit","boolean","both","case","cast","char","character","check","coalesce","collate","collation","column","concurrently","constraint","create","cross","current_catalog","current_date","current_role","current_schema","current_time","current_timestamp","current_user","dec","decimal","default","deferrable","desc","distinct","do","else","end","except","exists","extract","false","fetch","float","for","foreign","freeze","from","full","grant","greatest","group","grouping","having","ilike","in","initially","inner","inout","int","integer","intersect","interval","into","is","isnull","join","json","json_array","json_arrayagg","json_object","json_objectagg","json_scalar","json_serialize","lateral","leading","least","left","like","limit","localtime","localtimestamp","national","natural","nchar","none","normalize","not","notnull","null","nullif","numeric","offset","on","only","or","order","out","outer","overlaps","overlay","placing","position","precision","primary","real","references","returning","right","row","select","session_user","setof","similar","smallint","some","substring","symmetric","system_user","table","tablesample","then","time","timestamp","to","trailing","treat","trim","true","union","unique","user","using","values","varchar","variadic","verbose","when","where","window","with","xmlattributes","xmlconcat","xmlelement","xmlexists","xmlforest","xmlnamespaces","xmlparse","xmlpi","xmlroot","xmlserialize","xmltable"]).has(O)&&(E=!0),E?(Le(R,'"'),Le(R,O.replace(/"/g,'""')),Le(R,'"')):b(R,O),R.data}async function We(O,R,E){let g,A,d;return A=xn(O,0),d=Pe(E,"+")!=null,g=await Rt(A,d),g?2:5}async function at(O,R,E){let g=2,A=!0,d,C,F;switch(d=xn(O,0),C=Pe(E,"+")!=null,F=Pe(E,"S")!=null,E[1]){case void 0:case"+":case"S":d?A=await tp(d,C,F):A=await Tl("tvmsE",null,C,F);break;case"A":{let P=null;switch(d&&E[2]!=null&&E[2]!="+"&&(P=xn(O,0)),E[2]){case void 0:case"+":A=await an(d,C);break;case"c":A=await Dp(d,P,C);break;case"f":A=await kp(d,P,C);break;case"o":A=await Pp(d,P,C);break;case"p":A=await Mp(d,P,C);break;default:g=0;break}}break;case"a":A=await Kt(d,C,F);break;case"b":A=await Yn(d,C);break;case"c":Qn(E,"dconfig",7)==0?A=await cp(d,C):A=await lp(d,C,F);break;case"C":A=await up(d,C);break;case"d":Qn(E,"ddp",3)==0?A=await Zd(d):A=await ep(d,F);break;case"D":A=await ap(d,C,F);break;case"f":switch(E[2]){case void 0:case"+":case"S":case"a":case"n":case"p":case"t":case"w":A=await ze(O,E,d,C,F);break;default:g=0;break}break;case"g":A=await El(d,C,F);break;case"l":A=await Fp(C);break;case"L":A=await op(d,C,F);break;case"n":A=await pp(d,C,F);break;case"o":A=await ze(O,E,d,C,F);break;case"O":A=await dp(d,C,F);break;case"p":A=await Qd(d,F);break;case"P":switch(E[2]){case void 0:case"+":case"t":case"i":case"n":A=await rp(E.slice(2),d,C);break;default:g=0;break}break;case"T":A=await $d(d,C,F);break;case"t":case"v":case"m":case"i":case"s":case"E":A=await Tl(E[1],d,C,F);break;case"r":if(E[2]=="d"&&E[3]=="s"){let P=null;d&&(P=xn(O,0)),A=await ip(d,P)}else E[2]=="g"?A=await sp(d,F):g=0;break;case"R":switch(E[2]){case"p":C?A=await xp(d):A=await wp(d);break;case"s":A=await vp(d,C);break;default:g=0}break;case"u":A=await El(d,C,F);break;case"F":switch(E[2]){case void 0:case"+":A=await Ap(d,C);break;case"p":A=await mp(d,C);break;case"d":A=await Tp(d,C);break;case"t":A=await Sp(d,C);break;default:g=0;break}break;case"e":switch(E[2]){case"s":A=await Np(d,C);break;case"u":A=await bp(d,C);break;case"w":A=await Op(d,C);break;case"t":A=await yp(d,C);break;default:g=0;break}break;case"x":C?A=await Lp(d):A=await Cp(d);break;case"X":A=await fp(d);break;case"y":A=await hp(d,C);break;default:g=0}return A||(g=5),g}async function ze(O,R,E,g,A){let d,C=[],F=0;if(E){let P;for(;(P=xn(O,0))!=null&&(C[F++]=P,!(F>=100)););}return R[1]=="f"?d=await ms(R.slice(2),E,C,F,g,A):d=await Jd(E,C,F,g,A),d}async function Rt(O,R){let E,g={},A=p.popt;return Z(g),k(g,`SELECT
  d.datname as "%s",
  pg_catalog.pg_get_userbyid(d.datdba) as "%s",
  pg_catalog.pg_encoding_to_char(d.encoding) as "%s",
`,S("Name"),S("Owner"),S("Encoding")),p.sversion>=15e4?_(g,`  CASE d.datlocprovider WHEN 'b' THEN 'builtin' WHEN 'c' THEN 'libc' WHEN 'i' THEN 'icu' END AS "%s",
`,S("Locale Provider")):_(g,`  'libc' AS "%s",
`,S("Locale Provider")),_(g,`  d.datcollate as "%s",
  d.datctype as "%s",
`,S("Collate"),S("Ctype")),p.sversion>=17e4?_(g,`  d.datlocale as "%s",
`,S("Locale")):p.sversion>=15e4?_(g,`  d.daticulocale as "%s",
`,S("Locale")):_(g,`  NULL as "%s",
`,S("Locale")),p.sversion>=16e4?_(g,`  d.daticurules as "%s",
`,S("ICU Rules")):_(g,`  NULL as "%s",
`,S("ICU Rules")),b(g,"  "),gt(g,"d.datacl"),R&&_(g,`,
  CASE WHEN pg_catalog.has_database_privilege(d.datname, 'CONNECT')
       THEN pg_catalog.pg_size_pretty(pg_catalog.pg_database_size(d.datname))
       ELSE 'No Access'
  END as "%s",
  t.spcname as "%s",
  pg_catalog.shobj_description(d.oid, 'pg_database') as "%s"`,S("Size"),S("Tablespace"),S("Description")),b(g,`
FROM pg_catalog.pg_database d
`),R&&b(g,`  JOIN pg_catalog.pg_tablespace t on d.dattablespace = t.oid
`),O&&!D(g,O,!1,!1,null,"d.datname",null,null,null,1)||(b(g,"ORDER BY 1;"),E=await y(g.data),!E)?!1:(A.nullPrint=null,A.title=r("List of databases"),A.translate_header=!0,M(E,A,p.queryFout,!1,p.logfile),!0)}async function Kt(O,R,E){let g={},A,d=p.popt;return Z(g),k(g,`SELECT n.nspname as "%s",
  p.proname AS "%s",
  pg_catalog.format_type(p.prorettype, NULL) AS "%s",
  CASE WHEN p.pronargs = 0
    THEN CAST('*' AS pg_catalog.text)
    ELSE pg_catalog.pg_get_function_arguments(p.oid)
  END AS "%s",
`,S("Schema"),S("Name"),S("Result data type"),S("Argument data types")),p.sversion>=11e4?_(g,`  pg_catalog.obj_description(p.oid, 'pg_proc') as "%s"
FROM pg_catalog.pg_proc p
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.pronamespace
WHERE p.prokind = 'a'
`,S("Description")):_(g,`  pg_catalog.obj_description(p.oid, 'pg_proc') as "%s"
FROM pg_catalog.pg_proc p
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.pronamespace
WHERE p.proisagg
`,S("Description")),!E&&!O&&b(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(g,O,!0,!1,"n.nspname","p.proname",null,"pg_catalog.pg_function_is_visible(p.oid)",null,3)||(b(g,"ORDER BY 1, 2, 4;"),A=await y(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of aggregate functions"),d.translate_header=!0,M(A,d,p.queryFout,!1,p.logfile),!0)}async function an(O,R){let E={},g,A=p.popt,d=[!1,!0,!1,!1];return p.sversion<90600?(L("The server (version %s) does not support access methods.",cn(p.sversion,!1,void 0)),!0):(Z(E),k(E,`SELECT amname AS "%s",
  CASE amtype WHEN 'i' THEN '%s' WHEN 't' THEN '%s' END AS "%s"`,S("Name"),S("Index"),S("Table"),S("Type")),R&&_(E,`,
  amhandler AS "%s",
  pg_catalog.obj_description(oid, 'pg_am') AS "%s"`,S("Handler"),S("Description")),b(E,`
FROM pg_catalog.pg_am
`),!D(E,O,!1,!1,null,"amname",null,null,null,1)||(b(E,"ORDER BY 1;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of access methods"),A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Ue(d),M(g,A,p.queryFout,!1,p.logfile),!0))}async function Yn(O,R){let E={},g,A=p.popt;return Z(E),k(E,`SELECT spcname AS "%s",
  pg_catalog.pg_get_userbyid(spcowner) AS "%s",
  pg_catalog.pg_tablespace_location(oid) AS "%s"`,S("Name"),S("Owner"),S("Location")),R&&(b(E,`,
  `),gt(E,"spcacl"),_(E,`,
  spcoptions AS "%s",
  pg_catalog.pg_size_pretty(pg_catalog.pg_tablespace_size(oid)) AS "%s",
  pg_catalog.shobj_description(oid, 'pg_tablespace') AS "%s"`,S("Options"),S("Size"),S("Description"))),b(E,`
FROM pg_catalog.pg_tablespace
`),!D(E,O,!1,!1,null,"spcname",null,null,null,1)||(b(E,"ORDER BY 1;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of tablespaces"),A.translate_header=!0,M(g,A,p.queryFout,!1,p.logfile),!0)}async function ms(O,R,E,g,A,d){let C=Pe(O,"a")!=null,F=Pe(O,"n")!=null,P=Pe(O,"p")!=null,I=Pe(O,"t")!=null,X=Pe(O,"w")!=null,j,W={},le,re=p.popt,kt=[!1,!1,!1,!1,!0,!0,!0,!1,!0,!1,!1,!1,!1],qe=[!1,!1,!1,!1,!0,!0,!1,!0,!1,!1,!1,!1];if(un(O)!=d_(O,"anptwS+"))return L("\\df only takes [anptwS+] as options"),!0;if(P&&p.sversion<11e4)return L('\\df does not take a "%c" option with server version %s',"p",cn(p.sversion,!1,void 0)),!0;!C&&!F&&!P&&!I&&!X&&(C=F=I=X=!0,p.sversion>=11e4&&(P=!0)),Z(W),k(W,`SELECT n.nspname as "%s",
  p.proname as "%s",
`,S("Schema"),S("Name")),p.sversion>=11e4?_(W,`  pg_catalog.pg_get_function_result(p.oid) as "%s",
  pg_catalog.pg_get_function_arguments(p.oid) as "%s",
 CASE p.prokind
  WHEN 'a' THEN '%s'
  WHEN 'w' THEN '%s'
  WHEN 'p' THEN '%s'
  ELSE '%s'
 END as "%s"`,S("Result data type"),S("Argument data types"),S("agg"),S("window"),S("proc"),S("func"),S("Type")):_(W,`  pg_catalog.pg_get_function_result(p.oid) as "%s",
  pg_catalog.pg_get_function_arguments(p.oid) as "%s",
 CASE
  WHEN p.proisagg THEN '%s'
  WHEN p.proiswindow THEN '%s'
  WHEN p.prorettype = 'pg_catalog.trigger'::pg_catalog.regtype THEN '%s'
  ELSE '%s'
 END as "%s"`,S("Result data type"),S("Argument data types"),S("agg"),S("window"),S("trigger"),S("func"),S("Type")),A&&(_(W,`,
 CASE
  WHEN p.provolatile = 'i' THEN '%s'
  WHEN p.provolatile = 's' THEN '%s'
  WHEN p.provolatile = 'v' THEN '%s'
 END as "%s"`,S("immutable"),S("stable"),S("volatile"),S("Volatility")),p.sversion>=90600&&_(W,`,
 CASE
  WHEN p.proparallel = 'r' THEN '%s'
  WHEN p.proparallel = 's' THEN '%s'
  WHEN p.proparallel = 'u' THEN '%s'
 END as "%s"`,S("restricted"),S("safe"),S("unsafe"),S("Parallel")),_(W,`,
 pg_catalog.pg_get_userbyid(p.proowner) as "%s",
 CASE WHEN prosecdef THEN '%s' ELSE '%s' END AS "%s"`,S("Owner"),S("definer"),S("invoker"),S("Security")),b(W,`,
 `),gt(W,"p.proacl"),_(W,`,
 l.lanname as "%s"`,S("Language")),_(W,`,
 CASE WHEN l.lanname IN ('internal', 'c') THEN p.prosrc END as "%s"`,S("Internal name")),_(W,`,
 pg_catalog.obj_description(p.oid, 'pg_proc') as "%s"`,S("Description"))),b(W,`
FROM pg_catalog.pg_proc p
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.pronamespace
`);for(let ce=0;ce<g;ce++)_(W,`     LEFT JOIN pg_catalog.pg_type t%d ON t%d.oid = p.proargtypes[%d]
     LEFT JOIN pg_catalog.pg_namespace nt%d ON nt%d.oid = t%d.typnamespace
`,ce,ce,ce,ce,ce,ce);if(A&&b(W,`     LEFT JOIN pg_catalog.pg_language l ON l.oid = p.prolang
`),j=!1,!(F&&C&&P&&I&&X))if(F)C||(j?b(W,"      AND "):(b(W,"WHERE "),j=!0),p.sversion>=11e4?b(W,`p.prokind <> 'a'
`):b(W,`NOT p.proisagg
`)),!P&&p.sversion>=11e4&&(j?b(W,"      AND "):(b(W,"WHERE "),j=!0),b(W,`p.prokind <> 'p'
`)),I||(j?b(W,"      AND "):(b(W,"WHERE "),j=!0),b(W,`p.prorettype <> 'pg_catalog.trigger'::pg_catalog.regtype
`)),X||(j?b(W,"      AND "):(b(W,"WHERE "),j=!0),p.sversion>=11e4?b(W,`p.prokind <> 'w'
`):b(W,`NOT p.proiswindow
`));else{let ce=!1;b(W,`WHERE (
       `),j=!0,C&&(p.sversion>=11e4?b(W,`p.prokind = 'a'
`):b(W,`p.proisagg
`),ce=!0),I&&(ce&&b(W,"       OR "),b(W,`p.prorettype = 'pg_catalog.trigger'::pg_catalog.regtype
`),ce=!0),P&&(ce&&b(W,"       OR "),b(W,`p.prokind = 'p'
`),ce=!0),X&&(ce&&b(W,"       OR "),p.sversion>=11e4?b(W,`p.prokind = 'w'
`):b(W,`p.proiswindow
`)),b(W,`      )
`)}if(!D(W,R,j,!1,"n.nspname","p.proname",null,"pg_catalog.pg_function_is_visible(p.oid)",null,3))return!1;for(let ce=0;ce<g;ce++)if(se(E[ce],"-")!=0){let Ai,Ri,_i,Oi;if(Ai=et("nt%d.nspname",ce),Ri=et("t%d.typname",ce),_i=et("pg_catalog.format_type(t%d.oid, NULL)",ce),Oi=et("pg_catalog.pg_type_is_visible(t%d.oid)",ce),!D(W,zr(E[ce]),!0,!1,Ai,Ri,_i,Oi,null,3))return!1}else _(W,`  AND t%d.typname IS NULL
`,ce);return!d&&!R&&b(W,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),b(W,"ORDER BY 1, 2, 4;"),le=await y(W.data),le?(re.nullPrint=null,re.title=r("List of functions"),re.translate_header=!0,p.sversion>=90600?(re.translate_columns=kt,re.n_translate_columns=Ue(kt)):(re.translate_columns=qe,re.n_translate_columns=Ue(qe)),M(le,re,p.queryFout,!1,p.logfile),!0):!1}async function $d(O,R,E){let g={},A,d=p.popt;return Z(g),k(g,`SELECT n.nspname as "%s",
  pg_catalog.format_type(t.oid, NULL) AS "%s",
`,S("Schema"),S("Name")),R&&(_(g,`  t.typname AS "%s",
  CASE WHEN t.typrelid != 0
      THEN CAST('tuple' AS pg_catalog.text)
    WHEN t.typlen < 0
      THEN CAST('var' AS pg_catalog.text)
    ELSE CAST(t.typlen AS pg_catalog.text)
  END AS "%s",
  pg_catalog.array_to_string(
      ARRAY(
          SELECT e.enumlabel
          FROM pg_catalog.pg_enum e
          WHERE e.enumtypid = t.oid
          ORDER BY e.enumsortorder
      ),
      E'\\n'
  ) AS "%s",
  pg_catalog.pg_get_userbyid(t.typowner) AS "%s",
`,S("Internal name"),S("Size"),S("Elements"),S("Owner")),gt(g,"t.typacl"),b(g,`,
  `)),_(g,`  pg_catalog.obj_description(t.oid, 'pg_type') as "%s"
`,S("Description")),b(g,`FROM pg_catalog.pg_type t
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace
`),b(g,"WHERE (t.typrelid = 0 "),b(g,`OR (SELECT c.relkind = 'c' FROM pg_catalog.pg_class c WHERE c.oid = t.typrelid))
`),(O==null||rr(O,"[]")==null)&&b(g,`  AND NOT EXISTS(SELECT 1 FROM pg_catalog.pg_type el WHERE el.oid = t.typelem AND el.typarray = t.oid)
`),!E&&!O&&b(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(g,zr(O),!0,!1,"n.nspname","t.typname","pg_catalog.format_type(t.oid, NULL)","pg_catalog.pg_type_is_visible(t.oid)",null,3)||(b(g,"ORDER BY 1, 2;"),A=await y(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of data types"),d.translate_header=!0,M(A,d,p.queryFout,!1,p.logfile),!0)}function zr(O){let R=["decimal","numeric","float","double precision","int","integer","bool[]","boolean[]","decimal[]","numeric[]","float[]","double precision[]","float4[]","real[]","float8[]","double precision[]","int[]","integer[]","int2[]","smallint[]","int4[]","integer[]","int8[]","bigint[]","time[]","time without time zone[]","timetz[]","time with time zone[]","timestamp[]","timestamp without time zone[]","timestamptz[]","timestamp with time zone[]","varbit[]","bit varying[]","varchar[]","character varying[]",null];if(O==null)return null;for(let E=0;R[E]!=null;E+=2)if(g_(O,R[E])==0)return R[E+1];return O}async function Jd(O,R,E,g,A){let d={},C,F=p.popt;if(Z(d),k(d,`SELECT n.nspname as "%s",
  o.oprname AS "%s",
  CASE WHEN o.oprkind='l' THEN NULL ELSE pg_catalog.format_type(o.oprleft, NULL) END AS "%s",
  CASE WHEN o.oprkind='r' THEN NULL ELSE pg_catalog.format_type(o.oprright, NULL) END AS "%s",
  pg_catalog.format_type(o.oprresult, NULL) AS "%s",
`,S("Schema"),S("Name"),S("Left arg type"),S("Right arg type"),S("Result type")),g&&_(d,`  o.oprcode AS "%s",
`,S("Function")),_(d,`  coalesce(pg_catalog.obj_description(o.oid, 'pg_operator'),
           pg_catalog.obj_description(o.oprcode, 'pg_proc')) AS "%s"
FROM pg_catalog.pg_operator o
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = o.oprnamespace
`,S("Description")),E>=2?(E=2,b(d,`     LEFT JOIN pg_catalog.pg_type t0 ON t0.oid = o.oprleft
     LEFT JOIN pg_catalog.pg_namespace nt0 ON nt0.oid = t0.typnamespace
     LEFT JOIN pg_catalog.pg_type t1 ON t1.oid = o.oprright
     LEFT JOIN pg_catalog.pg_namespace nt1 ON nt1.oid = t1.typnamespace
`)):E==1&&b(d,`     LEFT JOIN pg_catalog.pg_type t0 ON t0.oid = o.oprright
     LEFT JOIN pg_catalog.pg_namespace nt0 ON nt0.oid = t0.typnamespace
`),!A&&!O&&b(d,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(d,O,!A&&!O,!0,"n.nspname","o.oprname",null,"pg_catalog.pg_operator_is_visible(o.oid)",null,3))return!1;E==1&&b(d,`  AND o.oprleft = 0
`);for(let P=0;P<E;P++)if(se(R[P],"-")!=0){let I,X,j,W;if(I=et("nt%d.nspname",P),X=et("t%d.typname",P),j=et("pg_catalog.format_type(t%d.oid, NULL)",P),W=et("pg_catalog.pg_type_is_visible(t%d.oid)",P),!D(d,zr(R[P]),!0,!1,I,X,j,W,null,3))return!1}else _(d,`  AND t%d.typname IS NULL
`,P);return b(d,"ORDER BY 1, 2, 3, 4;"),C=await y(d.data),C?(F.nullPrint=null,F.title=r("List of operators"),F.translate_header=!0,M(C,F,p.queryFout,!1,p.logfile),!0):!1}async function Qd(O,R){let E={},g,A=p.popt,d=[!1,!1,!0,!1,!1,!1];return Z(E),k(E,`SELECT n.nspname as "%s",
  c.relname as "%s",
  CASE c.relkind WHEN 'r' THEN '%s' WHEN 'v' THEN '%s' WHEN 'm' THEN '%s' WHEN 'S' THEN '%s' WHEN 'f' THEN '%s' WHEN 'p' THEN '%s' END as "%s",
  `,S("Schema"),S("Name"),S("table"),S("view"),S("materialized view"),S("sequence"),S("foreign table"),S("partitioned table"),S("Type")),gt(E,"c.relacl"),_(E,`,
  pg_catalog.array_to_string(ARRAY(
    SELECT attname || E':\\n  ' || pg_catalog.array_to_string(attacl, E'\\n  ')
    FROM pg_catalog.pg_attribute a
    WHERE attrelid = c.oid AND NOT attisdropped AND attacl IS NOT NULL
  ), E'\\n') AS "%s"`,S("Column privileges")),p.sversion>=90500&&p.sversion<1e5&&_(E,`,
  pg_catalog.array_to_string(ARRAY(
    SELECT polname
    || CASE WHEN polcmd != '*' THEN
           E' (' || polcmd::pg_catalog.text || E'):'
       ELSE E':'
       END
    || CASE WHEN polqual IS NOT NULL THEN
           E'\\n  (u): ' || pg_catalog.pg_get_expr(polqual, polrelid)
       ELSE E''
       END
    || CASE WHEN polwithcheck IS NOT NULL THEN
           E'\\n  (c): ' || pg_catalog.pg_get_expr(polwithcheck, polrelid)
       ELSE E''
       END    || CASE WHEN polroles <> '{0}' THEN
           E'\\n  to: ' || pg_catalog.array_to_string(
               ARRAY(
                   SELECT rolname
                   FROM pg_catalog.pg_roles
                   WHERE oid = ANY (polroles)
                   ORDER BY 1
               ), E', ')
       ELSE E''
       END
    FROM pg_catalog.pg_policy pol
    WHERE polrelid = c.oid), E'\\n')
    AS "%s"`,S("Policies")),p.sversion>=1e5&&_(E,`,
  pg_catalog.array_to_string(ARRAY(
    SELECT polname
    || CASE WHEN NOT polpermissive THEN
       E' (RESTRICTIVE)'
       ELSE '' END
    || CASE WHEN polcmd != '*' THEN
           E' (' || polcmd::pg_catalog.text || E'):'
       ELSE E':'
       END
    || CASE WHEN polqual IS NOT NULL THEN
           E'\\n  (u): ' || pg_catalog.pg_get_expr(polqual, polrelid)
       ELSE E''
       END
    || CASE WHEN polwithcheck IS NOT NULL THEN
           E'\\n  (c): ' || pg_catalog.pg_get_expr(polwithcheck, polrelid)
       ELSE E''
       END    || CASE WHEN polroles <> '{0}' THEN
           E'\\n  to: ' || pg_catalog.array_to_string(
               ARRAY(
                   SELECT rolname
                   FROM pg_catalog.pg_roles
                   WHERE oid = ANY (polroles)
                   ORDER BY 1
               ), E', ')
       ELSE E''
       END
    FROM pg_catalog.pg_policy pol
    WHERE polrelid = c.oid), E'\\n')
    AS "%s"`,S("Policies")),b(E,`
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
WHERE c.relkind IN ('r','v','m','S','f','p')
`),!R&&!O&&b(E,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(E,O,!0,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(b(E,"ORDER BY 1, 2;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,k(E,r("Access privileges")),A.title=E.data,A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Ue(d),M(g,A,p.queryFout,!1,p.logfile),!0)}async function Zd(O){let R={},E,g=p.popt,A=[!1,!1,!0,!1];return Z(R),k(R,`SELECT pg_catalog.pg_get_userbyid(d.defaclrole) AS "%s",
  n.nspname AS "%s",
  CASE d.defaclobjtype WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' END AS "%s",
  `,S("Owner"),S("Schema"),i_,S("table"),s_,S("sequence"),r_,S("function"),o_,S("type"),a_,S("schema"),S("Type")),gt(R,"d.defaclacl"),b(R,`
FROM pg_catalog.pg_default_acl d
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = d.defaclnamespace
`),!D(R,O,!1,!1,null,"n.nspname","pg_catalog.pg_get_userbyid(d.defaclrole)",null,null,3)||(b(R,"ORDER BY 1, 2, 3;"),E=await y(R.data),!E)?!1:(g.nullPrint=null,k(R,r("Default access privileges")),g.title=R.data,g.translate_header=!0,g.translate_columns=A,g.n_translate_columns=Ue(A),M(E,g,p.queryFout,!1,p.logfile),!0)}async function ep(O,R){let E={},g,A=p.popt,d=[!1,!1,!0,!1];return Z(E),_(E,`SELECT DISTINCT tt.nspname AS "%s", tt.name AS "%s", tt.object AS "%s", d.description AS "%s"
FROM (
`,S("Schema"),S("Name"),S("Object"),S("Description")),_(E,`  SELECT pgc.oid as oid, pgc.tableoid AS tableoid,
  n.nspname as nspname,
  CAST(pgc.conname AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_constraint pgc
    JOIN pg_catalog.pg_class c ON c.oid = pgc.conrelid
    LEFT JOIN pg_catalog.pg_namespace n     ON n.oid = c.relnamespace
`,S("table constraint")),!R&&!O&&b(E,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(E,O,!R&&!O,!1,"n.nspname","pgc.conname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(_(E,`UNION ALL
  SELECT pgc.oid as oid, pgc.tableoid AS tableoid,
  n.nspname as nspname,
  CAST(pgc.conname AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_constraint pgc
    JOIN pg_catalog.pg_type t ON t.oid = pgc.contypid
    LEFT JOIN pg_catalog.pg_namespace n     ON n.oid = t.typnamespace
`,S("domain constraint")),!R&&!O&&b(E,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(E,O,!R&&!O,!1,"n.nspname","pgc.conname",null,"pg_catalog.pg_type_is_visible(t.oid)",null,3))||(_(E,`UNION ALL
  SELECT o.oid as oid, o.tableoid as tableoid,
  n.nspname as nspname,
  CAST(o.opcname AS pg_catalog.text) as name,
  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_opclass o
    JOIN pg_catalog.pg_am am ON o.opcmethod = am.oid
    JOIN pg_catalog.pg_namespace n ON n.oid = o.opcnamespace
`,S("operator class")),!R&&!O&&b(E,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(E,O,!0,!1,"n.nspname","o.opcname",null,"pg_catalog.pg_opclass_is_visible(o.oid)",null,3))||(_(E,`UNION ALL
  SELECT opf.oid as oid, opf.tableoid as tableoid,
  n.nspname as nspname,
  CAST(opf.opfname AS pg_catalog.text) AS name,
  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_opfamily opf
    JOIN pg_catalog.pg_am am ON opf.opfmethod = am.oid
    JOIN pg_catalog.pg_namespace n ON opf.opfnamespace = n.oid
`,S("operator family")),!R&&!O&&b(E,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(E,O,!0,!1,"n.nspname","opf.opfname",null,"pg_catalog.pg_opfamily_is_visible(opf.oid)",null,3))||(_(E,`UNION ALL
  SELECT r.oid as oid, r.tableoid as tableoid,
  n.nspname as nspname,
  CAST(r.rulename AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_rewrite r
       JOIN pg_catalog.pg_class c ON c.oid = r.ev_class
       LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
  WHERE r.rulename != '_RETURN'
`,S("rule")),!R&&!O&&b(E,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(E,O,!0,!1,"n.nspname","r.rulename",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3))||(_(E,`UNION ALL
  SELECT t.oid as oid, t.tableoid as tableoid,
  n.nspname as nspname,
  CAST(t.tgname AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_trigger t
       JOIN pg_catalog.pg_class c ON c.oid = t.tgrelid
       LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
`,S("trigger")),!R&&!O&&b(E,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(E,O,!R&&!O,!1,"n.nspname","t.tgname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3))||(b(E,`) AS tt
  JOIN pg_catalog.pg_description d ON (tt.oid = d.objoid AND tt.tableoid = d.classoid AND d.objsubid = 0)
`),b(E,"ORDER BY 1, 2, 3;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("Object descriptions"),A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Ue(d),M(g,A,p.queryFout,!1,p.logfile),!0)}async function tp(O,R,E){let g={},A,d;if(Z(g),k(g,`SELECT c.oid,
  n.nspname,
  c.relname
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
`),!E&&!O&&b(g,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(g,O,!E&&!O,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(b(g,"ORDER BY 2, 3;"),A=await y(g.data),!A))return!1;if(de(A)==0)return p.quiet||(O?L('Did not find any relation named "%s".',O):L("Did not find any relations.")),!1;for(d=0;d<de(A);d++){let C,F,P;if(C=v(A,d,0),F=v(A,d,1),P=v(A,d,2),!await np(F,P,C,R)||c)return!1}return!0}async function np(O,R,E,g){let A=!1,d={},C=null,F=p.popt.topt,P={},I,X=null,j=[],W={},le={},re,kt=-1,qe=-1,ce=-1,Ai=-1,Ri=-1,_i=-1,Oi=-1,gs=-1,Es=-1,Ts=-1,Ss=-1,As=-1,Rs=-1,_s=-1,$r,U={},Os=!1;if(F.default_footer=!1,F.expanded=!1,Z(d),Z(W),Z(le),p.sversion>=12e4?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, c.relrowsecurity, c.relforcerowsecurity, false AS relhasoids, c.relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident, am.amname
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
LEFT JOIN pg_catalog.pg_am am ON (c.relam = am.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",E):p.sversion>=1e5?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, c.relrowsecurity, c.relforcerowsecurity, c.relhasoids, c.relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",E):p.sversion>=90500?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, c.relrowsecurity, c.relforcerowsecurity, c.relhasoids, false as relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",E):p.sversion>=90400?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, false, false, c.relhasoids, false as relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",E):k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, false, false, c.relhasoids, false as relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",E),C=await y(d.data),!C)return A;if(de(C)==0)return p.quiet||L("Did not find any relation with OID %s.",E),A;if(U.checks=wh(v(C,0,0)),U.relkind=v(C,0,1),U.hasindex=se(v(C,0,2),"t")==0,U.hasrules=se(v(C,0,3),"t")==0,U.hastriggers=se(v(C,0,4),"t")==0,U.rowsecurity=se(v(C,0,5),"t")==0,U.forcerowsecurity=se(v(C,0,6),"t")==0,U.hasoids=se(v(C,0,7),"t")==0,U.ispartition=se(v(C,0,8),"t")==0,U.reloptions=In(v(C,0,9)),U.tablespace=Lo(v(C,0,10)),U.reloftype=se(v(C,0,11),"")!=0?In(v(C,0,11)):null,U.relpersistence=v(C,0,12),U.relreplident=p.sversion>=90400?v(C,0,13):"d",p.sversion>=12e4?U.relam=Ke(C,0,14)?null:In(v(C,0,14)):U.relam=null,C=null,U.relkind==f_){let x=null,J=p.popt,oe=[null,null];if(p.sversion>=1e5?(k(d,`SELECT pg_catalog.format_type(seqtypid, NULL) AS "%s",
       seqstart AS "%s",
       seqmin AS "%s",
       seqmax AS "%s",
       seqincrement AS "%s",
       CASE WHEN seqcycle THEN '%s' ELSE '%s' END AS "%s",
       seqcache AS "%s"
`,S("Type"),S("Start"),S("Minimum"),S("Maximum"),S("Increment"),S("yes"),S("no"),S("Cycles?"),S("Cache")),_(d,`FROM pg_catalog.pg_sequence
WHERE seqrelid = '%s';`,E)):(k(d,`SELECT 'bigint' AS "%s",
       start_value AS "%s",
       min_value AS "%s",
       max_value AS "%s",
       increment_by AS "%s",
       CASE WHEN is_cycled THEN '%s' ELSE '%s' END AS "%s",
       cache_value AS "%s"
`,S("Type"),S("Start"),S("Minimum"),S("Maximum"),S("Increment"),S("yes"),S("no"),S("Cycles?"),S("Cache")),_(d,"FROM %s",_e(O)),_(d,".%s;",_e(R))),C=await y(d.data),!C)return A;if(k(d,`SELECT pg_catalog.quote_ident(nspname) || '.' ||
   pg_catalog.quote_ident(relname) || '.' ||
   pg_catalog.quote_ident(attname),
   d.deptype
FROM pg_catalog.pg_class c
INNER JOIN pg_catalog.pg_depend d ON c.oid=d.refobjid
INNER JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
INNER JOIN pg_catalog.pg_attribute a ON (
 a.attrelid=c.oid AND
 a.attnum=d.refobjsubid)
WHERE d.classid='pg_catalog.pg_class'::pg_catalog.regclass
 AND d.refclassid='pg_catalog.pg_class'::pg_catalog.regclass
 AND d.objid='%s'
 AND d.deptype IN ('a', 'i')`,E),x=await y(d.data),x){if(de(x)==1)switch(v(x,0,1)[0]){case"a":oe[0]=wo(r("Owned by: %s"),v(x,0,0));break;case"i":oe[0]=wo(r("Sequence for identity column: %s"),v(x,0,0));break}}else return A;return U.relpersistence=="u"?k(W,r('Unlogged sequence "%s.%s"'),O,R):k(W,r('Sequence "%s.%s"'),O,R),J.footers=oe,J.topt.default_footer=!1,J.title=W.data,J.translate_header=!0,M(C,J,p.queryFout,!1,p.logfile),A=!0,A}if((U.relkind==$t||U.relkind==vi||U.relkind==_t||U.relkind==Jt||U.relkind==Co||U.relkind==ct)&&(Os=!0),re=0,k(d,"SELECT a.attname"),kt=re++,b(d,`,
  pg_catalog.format_type(a.atttypid, a.atttypmod)`),qe=re++,Os&&(b(d,`,
  (SELECT pg_catalog.pg_get_expr(d.adbin, d.adrelid, true)
   FROM pg_catalog.pg_attrdef d
   WHERE d.adrelid = a.attrelid AND d.adnum = a.attnum AND a.atthasdef),
  a.attnotnull`),ce=re++,Ai=re++,b(d,`,
  (SELECT c.collname FROM pg_catalog.pg_collation c, pg_catalog.pg_type t
   WHERE c.oid = a.attcollation AND t.oid = a.atttypid AND a.attcollation <> t.typcollation) AS attcollation`),Ri=re++,p.sversion>=1e5?b(d,`,
  a.attidentity`):b(d,`,
  ''::pg_catalog.char AS attidentity`),_i=re++,p.sversion>=12e4?b(d,`,
  a.attgenerated`):b(d,`,
  ''::pg_catalog.char AS attgenerated`),Oi=re++),(U.relkind==Ln||U.relkind==Qt)&&(p.sversion>=11e4&&(_(d,`,
  CASE WHEN a.attnum <= (SELECT i.indnkeyatts FROM pg_catalog.pg_index i WHERE i.indexrelid = '%s') THEN '%s' ELSE '%s' END AS is_key`,E,S("yes"),S("no")),gs=re++),b(d,`,
  pg_catalog.pg_get_indexdef(a.attrelid, a.attnum, TRUE) AS indexdef`),Es=re++),U.relkind==Jt&&(b(d,`,
  CASE WHEN attfdwoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT pg_catalog.quote_ident(option_name) || ' ' || pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(attfdwoptions)), ', ') || ')' END AS attfdwoptions`),Ts=re++),g&&(b(d,`,
  a.attstorage`),Ss=re++,p.sversion>=14e4&&!p.hide_compression&&(U.relkind==$t||U.relkind==ct||U.relkind==_t)&&(b(d,`,
  a.attcompression AS attcompression`),As=re++),(U.relkind==$t||U.relkind==Ln||U.relkind==Qt||U.relkind==_t||U.relkind==Jt||U.relkind==ct)&&(b(d,`,
  CASE WHEN a.attstattarget=-1 THEN NULL ELSE a.attstattarget END AS attstattarget`),Rs=re++),(U.relkind==$t||U.relkind==vi||U.relkind==_t||U.relkind==Jt||U.relkind==Co||U.relkind==ct)&&(b(d,`,
  pg_catalog.col_description(a.attrelid, a.attnum)`),_s=re++)),b(d,`
FROM pg_catalog.pg_attribute a`),_(d,`
WHERE a.attrelid = '%s' AND a.attnum > 0 AND NOT a.attisdropped`,E),b(d,`
ORDER BY a.attnum;`),C=await y(d.data),!C)return A;switch($r=de(C),U.relkind){case $t:U.relpersistence=="u"?k(W,r('Unlogged table "%s.%s"'),O,R):k(W,r('Table "%s.%s"'),O,R);break;case vi:k(W,r('View "%s.%s"'),O,R);break;case _t:U.relpersistence=="u"?k(W,r('Unlogged materialized view "%s.%s"'),O,R):k(W,r('Materialized view "%s.%s"'),O,R);break;case Ln:U.relpersistence=="u"?k(W,r('Unlogged index "%s.%s"'),O,R):k(W,r('Index "%s.%s"'),O,R);break;case Qt:U.relpersistence=="u"?k(W,r('Unlogged partitioned index "%s.%s"'),O,R):k(W,r('Partitioned index "%s.%s"'),O,R);break;case xi:k(W,r('TOAST table "%s.%s"'),O,R);break;case Co:k(W,r('Composite type "%s.%s"'),O,R);break;case Jt:k(W,r('Foreign table "%s.%s"'),O,R);break;case ct:U.relpersistence=="u"?k(W,r('Unlogged partitioned table "%s.%s"'),O,R):k(W,r('Partitioned table "%s.%s"'),O,R);break;default:k(W,'?%c? "%s.%s"',U.relkind,O,R);break}for(re=0,j[re++]=S("Column"),j[re++]=S("Type"),Os&&(j[re++]=S("Collation"),j[re++]=S("Nullable"),j[re++]=S("Default")),gs>=0&&(j[re++]=S("Key?")),Es>=0&&(j[re++]=S("Definition")),Ts>=0&&(j[re++]=S("FDW options")),Ss>=0&&(j[re++]=S("Storage")),As>=0&&(j[re++]=S("Compression")),Rs>=0&&(j[re++]=S("Stats target")),_s>=0&&(j[re++]=S("Description")),zn(re<=Ue(j)),V(P,F,W.data,re,$r),I=0;I<re;I++)ie(P,j[I],!0,"l");for(I=0;I<$r;I++){if(z(P,v(C,I,kt),!1),z(P,v(C,I,qe),!1),Os){let x,J,oe;z(P,v(C,I,Ri),!1),z(P,se(v(C,I,Ai),"t")==0?"not null":"",!1),x=v(C,I,_i),J=v(C,I,Oi),x[0]==l_?oe="generated always as identity":x[0]==c_?oe="generated by default as identity":J[0]==h_?oe=wo("generated always as (%s) stored",v(C,I,ce)):oe=v(C,I,ce),z(P,oe,!1)}if(gs>=0&&z(P,v(C,I,gs),!0),Es>=0&&z(P,v(C,I,Es),!1),Ts>=0&&z(P,v(C,I,Ts),!1),Ss>=0){let x=v(C,I,Ss);z(P,x[0]=="p"?"plain":x[0]=="m"?"main":x[0]=="x"?"extended":x[0]=="e"?"external":"???",!1)}if(As>=0){let x=v(C,I,As);z(P,x[0]=="p"?"pglz":x[0]=="l"?"lz4":x[0]==null?"":"???",!1)}Rs>=0&&z(P,v(C,I,Rs),!1),_s>=0&&z(P,v(C,I,_s),!1)}if(U.ispartition){let x;if(k(d,`SELECT inhparent::pg_catalog.regclass,
  pg_catalog.pg_get_expr(c.relpartbound, c.oid),
  `),b(d,p.sversion>=14e4?"inhdetachpending":"false as inhdetachpending"),g&&b(d,`,
  pg_catalog.pg_get_partition_constraintdef(c.oid)`),_(d,`
FROM pg_catalog.pg_class c JOIN pg_catalog.pg_inherits i ON c.oid = inhrelid
WHERE c.oid = '%s';`,E),x=await y(d.data),!x)return A;if(de(x)>0){let J=v(x,0,0),oe=v(x,0,1),fe=v(x,0,2);if(k(le,r("Partition of: %s %s%s"),J,oe,se(fe,"t")==0?" DETACH PENDING":""),Y(P,le.data),g){let Se=null;Ke(x,0,3)||(Se=v(x,0,3)),Se==null||Se[0]==null?k(le,r("No partition constraint")):k(le,r("Partition constraint: %s"),Se),Y(P,le.data)}}}if(U.relkind==ct){let x;if(k(d,"SELECT pg_catalog.pg_get_partkeydef('%s'::pg_catalog.oid);",E),x=await y(d.data),!x)return A;if(de(x)==1){let J=v(x,0,0);k(le,r("Partition key: %s"),J),Y(P,le.data)}}if(U.relkind==xi){let x;if(k(d,`SELECT n.nspname, c.relname
FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
WHERE reltoastrelid = '%s';`,E),x=await y(d.data),!x)return A;if(de(x)==1){let J=v(x,0,0),oe=v(x,0,1);k(le,r('Owning table: "%s.%s"'),J,oe),Y(P,le.data)}}if(U.relkind==Ln||U.relkind==Qt){let x;if(k(d,`SELECT i.indisunique, i.indisprimary, i.indisclustered, i.indisvalid,
  (NOT i.indimmediate) AND EXISTS (SELECT 1 FROM pg_catalog.pg_constraint WHERE conrelid = i.indrelid AND conindid = i.indexrelid AND contype IN ('p','u','x') AND condeferrable) AS condeferrable,
  (NOT i.indimmediate) AND EXISTS (SELECT 1 FROM pg_catalog.pg_constraint WHERE conrelid = i.indrelid AND conindid = i.indexrelid AND contype IN ('p','u','x') AND condeferred) AS condeferred,
`),p.sversion>=90400?b(d,`i.indisreplident,
`):b(d,`false AS indisreplident,
`),p.sversion>=15e4?b(d,`i.indnullsnotdistinct,
`):b(d,`false AS indnullsnotdistinct,
`),_(d,`  a.amname, c2.relname, pg_catalog.pg_get_expr(i.indpred, i.indrelid, true)
FROM pg_catalog.pg_index i, pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_am a
WHERE i.indexrelid = c.oid AND c.oid = '%s' AND c.relam = a.oid
AND i.indrelid = c2.oid;`,E),x=await y(d.data),x){if(de(x)!=1)return A;{let J=v(x,0,0),oe=v(x,0,1),fe=v(x,0,2),Se=v(x,0,3),ve=v(x,0,4),ln=v(x,0,5),lt=v(x,0,6),Ni=v(x,0,7),Up=v(x,0,8),Bp=v(x,0,9),Al=v(x,0,10);se(oe,"t")==0?k(le,r("primary key, ")):se(J,"t")==0?(k(le,r("unique")),se(Ni,"t")==0&&b(le,r(" nulls not distinct")),b(le,r(", "))):Io(le),_(le,"%s, ",Up),_(le,r('for table "%s.%s"'),O,Bp),un(Al)&&_(le,r(", predicate (%s)"),Al),se(fe,"t")==0&&b(le,r(", clustered")),se(Se,"t")!=0&&b(le,r(", invalid")),se(ve,"t")==0&&b(le,r(", deferrable")),se(ln,"t")==0&&b(le,r(", initially deferred")),se(lt,"t")==0&&b(le,r(", replica identity")),Y(P,le.data),U.relkind==Ln&&await Kr(P,U.relkind,U.tablespace,!0)}}else return A}else if(U.relkind==$t||U.relkind==_t||U.relkind==Jt||U.relkind==ct||U.relkind==Qt||U.relkind==xi){let x=null,J=0;if(U.hasindex){if(k(d,`SELECT c2.relname, i.indisprimary, i.indisunique, i.indisclustered, i.indisvalid, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true),
  pg_catalog.pg_get_constraintdef(con.oid, true), contype, condeferrable, condeferred`),p.sversion>=90400?b(d,", i.indisreplident"):b(d,", false AS indisreplident"),b(d,", c2.reltablespace"),_(d,`
FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
  LEFT JOIN pg_catalog.pg_constraint con ON (conrelid = i.indrelid AND conindid = i.indexrelid AND contype IN ('p','u','x'))
WHERE c.oid = '%s' AND c.oid = i.indrelid AND i.indexrelid = c2.oid
ORDER BY i.indisprimary DESC, c2.relname;`,E),x=await y(d.data),x)J=de(x);else return A;if(J>0)for(Y(P,r("Indexes:")),I=0;I<J;I++){if(k(d,'    "%s"',v(x,I,0)),se(v(x,I,7),"x")==0)_(d," %s",v(x,I,6));else{let oe,fe;se(v(x,I,1),"t")==0?b(d," PRIMARY KEY,"):se(v(x,I,2),"t")==0&&(se(v(x,I,7),"u")==0?b(d," UNIQUE CONSTRAINT,"):b(d," UNIQUE,")),oe=v(x,I,5),fe=rr(oe," USING "),fe!=null&&(oe=oe.slice(fe+7)),_(d," %s",oe),se(v(x,I,8),"t")==0&&b(d," DEFERRABLE"),se(v(x,I,9),"t")==0&&b(d," INITIALLY DEFERRED")}se(v(x,I,3),"t")==0&&b(d," CLUSTER"),se(v(x,I,4),"t")!=0&&b(d," INVALID"),se(v(x,I,10),"t")==0&&b(d," REPLICA IDENTITY"),Y(P,d.data),await Kr(P,Ln,Lo(v(x,I,11)),!1)}}if(U.checks){if(k(d,`SELECT r.conname, pg_catalog.pg_get_constraintdef(r.oid, true)
FROM pg_catalog.pg_constraint r
WHERE r.conrelid = '%s' AND r.contype = 'c'
ORDER BY 1;`,E),x=await y(d.data),x)J=de(x);else return A;if(J>0)for(Y(P,r("Check constraints:")),I=0;I<J;I++)k(d,'    "%s" %s',v(x,I,0),v(x,I,1)),Y(P,d.data)}if(U.hastriggers||U.relkind==ct){if(p.sversion>=12e4&&(U.ispartition||U.relkind==ct)?k(d,`SELECT conrelid = '%s'::pg_catalog.regclass AS sametable,
       conname,
       pg_catalog.pg_get_constraintdef(oid, true) AS condef,
       conrelid::pg_catalog.regclass AS ontable
  FROM pg_catalog.pg_constraint,
       pg_catalog.pg_partition_ancestors('%s')
 WHERE conrelid = relid AND contype = 'f' AND conparentid = 0
ORDER BY sametable DESC, conname;`,E,E):(k(d,`SELECT true as sametable, conname,
  pg_catalog.pg_get_constraintdef(r.oid, true) as condef,
  conrelid::pg_catalog.regclass AS ontable
FROM pg_catalog.pg_constraint r
WHERE r.conrelid = '%s' AND r.contype = 'f'
`,E),p.sversion>=12e4&&b(d,`     AND conparentid = 0
`),b(d,"ORDER BY conname")),x=await y(d.data),x)J=de(x);else return A;if(J>0){let oe=wn(x,"sametable"),fe=wn(x,"conname"),Se=wn(x,"condef"),ve=wn(x,"ontable");for(Y(P,r("Foreign-key constraints:")),I=0;I<J;I++)se(v(x,I,oe),"f")==0?k(d,'    TABLE "%s" CONSTRAINT "%s" %s',v(x,I,ve),v(x,I,fe),v(x,I,Se)):k(d,'    "%s" %s',v(x,I,fe),v(x,I,Se)),Y(P,d.data)}}if(U.hastriggers||U.relkind==ct){if(p.sversion>=12e4?k(d,`SELECT conname, conrelid::pg_catalog.regclass AS ontable,
       pg_catalog.pg_get_constraintdef(oid, true) AS condef
  FROM pg_catalog.pg_constraint c
 WHERE confrelid IN (SELECT pg_catalog.pg_partition_ancestors('%s')
                     UNION ALL VALUES ('%s'::pg_catalog.regclass))
       AND contype = 'f' AND conparentid = 0
ORDER BY conname;`,E,E):k(d,`SELECT conname, conrelid::pg_catalog.regclass AS ontable,
       pg_catalog.pg_get_constraintdef(oid, true) AS condef
  FROM pg_catalog.pg_constraint
 WHERE confrelid = %s AND contype = 'f'
ORDER BY conname;`,E),x=await y(d.data),x)J=de(x);else return A;if(J>0){let oe=wn(x,"conname"),fe=wn(x,"ontable"),Se=wn(x,"condef");for(Y(P,r("Referenced by:")),I=0;I<J;I++)k(d,'    TABLE "%s" CONSTRAINT "%s" %s',v(x,I,fe),v(x,I,oe),v(x,I,Se)),Y(P,d.data)}}if(p.sversion>=90500){if(k(d,"SELECT pol.polname,"),p.sversion>=1e5?b(d,` pol.polpermissive,
`):b(d,` 't' as polpermissive,
`),_(d,`  CASE WHEN pol.polroles = '{0}' THEN NULL ELSE pg_catalog.array_to_string(array(select rolname from pg_catalog.pg_roles where oid = any (pol.polroles) order by 1),',') END,
  pg_catalog.pg_get_expr(pol.polqual, pol.polrelid),
  pg_catalog.pg_get_expr(pol.polwithcheck, pol.polrelid),
  CASE pol.polcmd
    WHEN 'r' THEN 'SELECT'
    WHEN 'a' THEN 'INSERT'
    WHEN 'w' THEN 'UPDATE'
    WHEN 'd' THEN 'DELETE'
    END AS cmd
FROM pg_catalog.pg_policy pol
WHERE pol.polrelid = '%s' ORDER BY 1;`,E),x=await y(d.data),x)J=de(x);else return A;for(U.rowsecurity&&!U.forcerowsecurity&&J>0&&Y(P,r("Policies:")),U.rowsecurity&&U.forcerowsecurity&&J>0&&Y(P,r("Policies (forced row security enabled):")),U.rowsecurity&&!U.forcerowsecurity&&J==0&&Y(P,r("Policies (row security enabled): (none)")),U.rowsecurity&&U.forcerowsecurity&&J==0&&Y(P,r("Policies (forced row security enabled): (none)")),!U.rowsecurity&&J>0&&Y(P,r("Policies (row security disabled):")),I=0;I<J;I++)k(d,'    POLICY "%s"',v(x,I,0)),v(x,I,1)=="f"&&b(d," AS RESTRICTIVE"),Ke(x,I,5)||_(d," FOR %s",v(x,I,5)),Ke(x,I,2)||_(d,`
      TO %s`,v(x,I,2)),Ke(x,I,3)||_(d,`
      USING (%s)`,v(x,I,3)),Ke(x,I,4)||_(d,`
      WITH CHECK (%s)`,v(x,I,4)),Y(P,d.data)}if(p.sversion>=14e4){if(k(d,`SELECT oid, stxrelid::pg_catalog.regclass, stxnamespace::pg_catalog.regnamespace::pg_catalog.text AS nsp, stxname,
pg_catalog.pg_get_statisticsobjdef_columns(oid) AS columns,
  'd' = any(stxkind) AS ndist_enabled,
  'f' = any(stxkind) AS deps_enabled,
  'm' = any(stxkind) AS mcv_enabled,
stxstattarget
FROM pg_catalog.pg_statistic_ext
WHERE stxrelid = '%s'
ORDER BY nsp, stxname;`,E),x=await y(d.data),x)J=de(x);else return A;if(J>0)for(Y(P,r("Statistics objects:")),I=0;I<J;I++){let oe=!1,fe,Se,ve,ln,lt;fe=se(v(x,I,5),"t")==0,Se=se(v(x,I,6),"t")==0,ve=se(v(x,I,7),"t")==0,k(d,"    "),_(d,'"%s.%s"',v(x,I,2),v(x,I,3)),ln=fe&&Se&&ve,lt=fe||Se||ve,lt&&!ln&&(b(d," ("),fe&&(b(d,"ndistinct"),oe=!0),Se&&(_(d,"%sdependencies",oe?", ":""),oe=!0),ve&&_(d,"%smcv",oe?", ":""),Le(d,")")),_(d," ON %s FROM %s",v(x,I,4),v(x,I,1)),!Ke(x,I,8)&&se(v(x,I,8),"-1")!=0&&_(d,"; STATISTICS %s",v(x,I,8)),Y(P,d.data)}}else if(p.sversion>=1e5){if(k(d,`SELECT oid, stxrelid::pg_catalog.regclass, stxnamespace::pg_catalog.regnamespace AS nsp, stxname,
  (SELECT pg_catalog.string_agg(pg_catalog.quote_ident(attname),', ')
   FROM pg_catalog.unnest(stxkeys) s(attnum)
   JOIN pg_catalog.pg_attribute a ON (stxrelid = a.attrelid AND
        a.attnum = s.attnum AND NOT attisdropped)) AS columns,
  'd' = any(stxkind) AS ndist_enabled,
  'f' = any(stxkind) AS deps_enabled,
  'm' = any(stxkind) AS mcv_enabled,
`),p.sversion>=13e4?b(d,`  stxstattarget
`):b(d,`  -1 AS stxstattarget
`),_(d,`FROM pg_catalog.pg_statistic_ext
WHERE stxrelid = '%s'
ORDER BY 1;`,E),x=await y(d.data),x)J=de(x);else return A;if(J>0)for(Y(P,r("Statistics objects:")),I=0;I<J;I++){let oe=!1;k(d,"    "),_(d,'"%s.%s" (',v(x,I,2),v(x,I,3)),se(v(x,I,5),"t")==0&&(b(d,"ndistinct"),oe=!0),se(v(x,I,6),"t")==0&&(_(d,"%sdependencies",oe?", ":""),oe=!0),se(v(x,I,7),"t")==0&&_(d,"%smcv",oe?", ":""),_(d,") ON %s FROM %s",v(x,I,4),v(x,I,1)),se(v(x,I,8),"-1")!=0&&_(d,"; STATISTICS %s",v(x,I,8)),Y(P,d.data)}}if(U.hasrules&&U.relkind!=_t){if(k(d,`SELECT r.rulename, trim(trailing ';' from pg_catalog.pg_get_ruledef(r.oid, true)), ev_enabled
FROM pg_catalog.pg_rewrite r
WHERE r.ev_class = '%s' ORDER BY 1;`,E),x=await y(d.data),x)J=de(x);else return A;if(J>0){let oe,fe;for(fe=0;fe<4;fe++)for(oe=!1,I=0;I<J;I++){let Se,ve=!1;switch(fe){case 0:v(x,I,2)=="O"&&(ve=!0);break;case 1:v(x,I,2)=="D"&&(ve=!0);break;case 2:v(x,I,2)=="A"&&(ve=!0);break;case 3:v(x,I,2)=="R"&&(ve=!0);break}if(ve){if(!oe){switch(fe){case 0:k(d,r("Rules:"));break;case 1:k(d,r("Disabled rules:"));break;case 2:k(d,r("Rules firing always:"));break;case 3:k(d,r("Rules firing on replica only:"));break}Y(P,d.data),oe=!0}Se=v(x,I,1),Se=Se.slice(12),k(d,"    %s",Se),Y(P,d.data)}}}}if(p.sversion>=1e5){if(p.sversion>=15e4?k(d,`SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
     JOIN pg_catalog.pg_publication_namespace pn ON p.oid = pn.pnpubid
     JOIN pg_catalog.pg_class pc ON pc.relnamespace = pn.pnnspid
WHERE pc.oid ='%s' and pg_catalog.pg_relation_is_publishable('%s')
UNION
SELECT pubname
     , pg_get_expr(pr.prqual, c.oid)
     , (CASE WHEN pr.prattrs IS NOT NULL THEN
         (SELECT string_agg(attname, ', ')
           FROM pg_catalog.generate_series(0, pg_catalog.array_upper(pr.prattrs::pg_catalog.int2[], 1)) s,
                pg_catalog.pg_attribute
          WHERE attrelid = pr.prrelid AND attnum = prattrs[s])
        ELSE NULL END) FROM pg_catalog.pg_publication p
     JOIN pg_catalog.pg_publication_rel pr ON p.oid = pr.prpubid
     JOIN pg_catalog.pg_class c ON c.oid = pr.prrelid
WHERE pr.prrelid = '%s'
UNION
SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
WHERE p.puballtables AND pg_catalog.pg_relation_is_publishable('%s')
ORDER BY 1;`,E,E,E,E):k(d,`SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
JOIN pg_catalog.pg_publication_rel pr ON p.oid = pr.prpubid
WHERE pr.prrelid = '%s'
UNION ALL
SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
WHERE p.puballtables AND pg_catalog.pg_relation_is_publishable('%s')
ORDER BY 1;`,E,E),x=await y(d.data),x)J=de(x);else return A;for(J>0&&Y(P,r("Publications:")),I=0;I<J;I++)k(d,'    "%s"',v(x,I,0)),Ke(x,I,2)||_(d," (%s)",v(x,I,2)),Ke(x,I,1)||_(d," WHERE %s",v(x,I,1)),Y(P,d.data)}}if((U.relkind==vi||U.relkind==_t)&&g){let x;if(k(d,"SELECT pg_catalog.pg_get_viewdef('%s'::pg_catalog.oid, true);",E),x=await y(d.data),!x)return A;de(x)>0&&(X=In(v(x,0,0)))}if(X){let x=null;if(Y(P,r("View definition:")),Y(P,X),U.hasrules){if(k(d,`SELECT r.rulename, trim(trailing ';' from pg_catalog.pg_get_ruledef(r.oid, true))
FROM pg_catalog.pg_rewrite r
WHERE r.ev_class = '%s' AND r.rulename != '_RETURN' ORDER BY 1;`,E),x=await y(d.data),!x)return A;if(de(x)>0)for(Y(P,r("Rules:")),I=0;I<de(x);I++){let J;J=v(x,I,1),J=J.slice(12),k(d," %s",J),Y(P,d.data)}}}if(U.hastriggers){let x,J;if(k(d,`SELECT t.tgname, pg_catalog.pg_get_triggerdef(t.oid, true), t.tgenabled, t.tgisinternal,
`),p.sversion>=13e4?b(d,`  CASE WHEN t.tgparentid != 0 THEN
    (SELECT u.tgrelid::pg_catalog.regclass
     FROM pg_catalog.pg_trigger AS u,
          pg_catalog.pg_partition_ancestors(t.tgrelid) WITH ORDINALITY AS a(relid, depth)
     WHERE u.tgname = t.tgname AND u.tgrelid = a.relid
           AND u.tgparentid = 0
     ORDER BY a.depth LIMIT 1)
  END AS parent
`):b(d,`  NULL AS parent
`),_(d,`FROM pg_catalog.pg_trigger t
WHERE t.tgrelid = '%s' AND `,E),p.sversion>=11e4&&p.sversion<15e4?b(d,`(NOT t.tgisinternal OR (t.tgisinternal AND t.tgenabled = 'D') 
    OR EXISTS (SELECT 1 FROM pg_catalog.pg_depend WHERE objid = t.oid 
        AND refclassid = 'pg_catalog.pg_trigger'::pg_catalog.regclass))`):b(d,"(NOT t.tgisinternal OR (t.tgisinternal AND t.tgenabled = 'D'))"),b(d,`
ORDER BY 1;`),x=await y(d.data),x)J=de(x);else return A;if(J>0){let oe,fe;for(fe=0;fe<=4;fe++)for(oe=!1,I=0;I<J;I++){let Se,ve,ln,lt,Ni;switch(lt=v(x,I,2),Ni=v(x,I,3),Se=!1,fe){case 0:(lt=="O"||lt=="t")&&(Se=!0);break;case 1:(lt=="D"||lt=="f")&&Ni=="f"&&(Se=!0);break;case 2:(lt=="D"||lt=="f")&&Ni=="t"&&(Se=!0);break;case 3:lt=="A"&&(Se=!0);break;case 4:lt=="R"&&(Se=!0);break}if(Se!=!1){if(oe==!1){switch(fe){case 0:k(d,r("Triggers:"));break;case 1:k(d,r("Disabled user triggers:"));break;case 2:k(d,r("Disabled internal triggers:"));break;case 3:k(d,r("Triggers firing always:"));break;case 4:k(d,r("Triggers firing on replica only:"));break}Y(P,d.data),oe=!0}ve=v(x,I,1),ln=rr(ve," TRIGGER "),ln!=null&&(ve=ve.slice(ln+9)),k(d,"    %s",ve),Ke(x,I,4)||_(d,", ON TABLE %s",v(x,I,4)),Y(P,d.data)}}}}if(U.relkind==$t||U.relkind==_t||U.relkind==Jt||U.relkind==ct||U.relkind==Qt||U.relkind==xi){let x,J,oe;if(x=U.relkind==ct||U.relkind==Qt,U.relkind==Jt){let fe;if(k(d,`SELECT s.srvname,
  pg_catalog.array_to_string(ARRAY(
    SELECT pg_catalog.quote_ident(option_name) || ' ' || pg_catalog.quote_literal(option_value)
    FROM pg_catalog.pg_options_to_table(ftoptions)),  ', ')
FROM pg_catalog.pg_foreign_table f,
     pg_catalog.pg_foreign_server s
WHERE f.ftrelid = '%s' AND s.oid = f.ftserver;`,E),J=await y(d.data),J){if(de(J)!=1)return A}else return A;k(d,r("Server: %s"),v(J,0,0)),Y(P,d.data),fe=v(J,0,1),fe&&fe[0]!=null&&(k(d,r("FDW options: (%s)"),fe),Y(P,d.data))}if(k(d,`SELECT c.oid::pg_catalog.regclass
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhparent AND i.inhrelid = '%s'
  AND c.relkind != 'p' AND c.relkind != 'I'
ORDER BY inhseqno;`,E),J=await y(d.data),J){let fe=r("Inherits"),Se=vh(fe,un(fe),p.encoding);for(oe=de(J),I=0;I<oe;I++)I==0?k(d,"%s: %s",fe,v(J,I,0)):k(d,"%*s  %s",Se,"",v(J,I,0)),I<oe-1&&Le(d,","),Y(P,d.data)}else return A;if(p.sversion>=14e4?k(d,`SELECT c.oid::pg_catalog.regclass, c.relkind, inhdetachpending, pg_catalog.pg_get_expr(c.relpartbound, c.oid)
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhrelid AND i.inhparent = '%s'
ORDER BY pg_catalog.pg_get_expr(c.relpartbound, c.oid) = 'DEFAULT', c.oid::pg_catalog.regclass::pg_catalog.text;`,E):p.sversion>=1e5?k(d,`SELECT c.oid::pg_catalog.regclass, c.relkind, false AS inhdetachpending, pg_catalog.pg_get_expr(c.relpartbound, c.oid)
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhrelid AND i.inhparent = '%s'
ORDER BY pg_catalog.pg_get_expr(c.relpartbound, c.oid) = 'DEFAULT', c.oid::pg_catalog.regclass::pg_catalog.text;`,E):k(d,`SELECT c.oid::pg_catalog.regclass, c.relkind, false AS inhdetachpending, NULL
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhrelid AND i.inhparent = '%s'
ORDER BY c.oid::pg_catalog.regclass::pg_catalog.text;`,E),J=await y(d.data),!J)return A;if(oe=de(J),x&&oe==0)k(d,r("Number of partitions: %d"),oe),Y(P,d.data);else if(!g)oe>0&&(x?k(d,r("Number of partitions: %d (Use \\d+ to list them.)"),oe):k(d,r("Number of child tables: %d (Use \\d+ to list them.)"),oe),Y(P,d.data));else{let fe=r(x?"Partitions":"Child tables"),Se=vh(fe,un(fe),p.encoding);for(I=0;I<oe;I++){let ve=v(J,I,1);I==0?k(d,"%s: %s",fe,v(J,I,0)):k(d,"%*s  %s",Se,"",v(J,I,0)),Ke(J,I,3)||_(d," %s",v(J,I,3)),ve==ct||ve==Qt?b(d,", PARTITIONED"):ve==Jt&&b(d,", FOREIGN"),se(v(J,I,2),"t")==0&&b(d," (DETACH PENDING)"),I<oe-1&&Le(d,","),Y(P,d.data)}}if(U.reloftype&&(k(d,r("Typed table of type: %s"),U.reloftype),Y(P,d.data)),g&&(U.relkind==$t||U.relkind==_t)&&U.relreplident!="i"&&(se(O,"pg_catalog")!=0&&U.relreplident!="d"||se(O,"pg_catalog")==0&&U.relreplident!="n")){let fe=r("Replica Identity");k(d,"%s: %s",fe,U.relreplident=="f"?"FULL":U.relreplident=="n"?"NOTHING":"???"),Y(P,d.data)}g&&U.relkind!=_t&&U.hasoids&&Y(P,r("Has OIDs: yes")),await Kr(P,U.relkind,U.tablespace,!0),g&&U.relam!=null&&!p.hide_tableam&&(k(d,r("Access method: %s"),U.relam),Y(P,d.data))}if(g&&U.reloptions&&U.reloptions[0]!=null){let x=r("Options");k(d,"%s: %s",x,U.reloptions),Y(P,d.data)}return K(P,p.queryFout,!1,p.logfile),A=!0,A}async function Kr(O,R,E,g){if((R==$t||R==_t||R==Ln||R==ct||R==Qt||R==xi)&&E!=0){let A=null,d={};if(Z(d),k(d,`SELECT spcname FROM pg_catalog.pg_tablespace
WHERE oid = '%u';`,E),A=await y(d.data),!A)return;de(A)>0&&(g?(k(d,r('Tablespace: "%s"'),v(A,0,0)),Y(O,d.data)):(k(d,"%s",O.footer),_(d,r(', tablespace "%s"'),v(A,0,0)),ee(O,d.data)))}}async function El(O,R,E){let g={},A,d={},C=p.popt.topt,F=2,P=0,I,X,j="l",W;if(C.default_footer=!1,Z(g),k(g,`SELECT r.rolname, r.rolsuper, r.rolinherit,
  r.rolcreaterole, r.rolcreatedb, r.rolcanlogin,
  r.rolconnlimit, r.rolvaliduntil`),R&&(b(g,`
, pg_catalog.shobj_description(r.oid, 'pg_authid') AS description`),F++),b(g,`
, r.rolreplication`),p.sversion>=90500&&b(g,`
, r.rolbypassrls`),b(g,`
FROM pg_catalog.pg_roles r
`),!E&&!O&&b(g,`WHERE r.rolname !~ '^pg_'
`),!D(g,O,!1,!1,null,"r.rolname",null,null,null,1)||(b(g,"ORDER BY 1;"),A=await y(g.data),!A))return!1;for(P=de(A),W=[],V(d,C,r("List of roles"),F,P),ie(d,S("Role name"),!0,j),ie(d,S("Attributes"),!0,j),R&&ie(d,S("Description"),!0,j),I=0;I<P;I++)z(d,v(A,I,0),!1),Io(g),se(v(A,I,1),"t")==0&&bn(g,r("Superuser")),se(v(A,I,2),"t")!=0&&bn(g,r("No inheritance")),se(v(A,I,3),"t")==0&&bn(g,r("Create role")),se(v(A,I,4),"t")==0&&bn(g,r("Create DB")),se(v(A,I,5),"t")!=0&&bn(g,r("Cannot login")),se(v(A,I,R?9:8),"t")==0&&bn(g,r("Replication")),p.sversion>=90500&&se(v(A,I,R?10:9),"t")==0&&bn(g,r("Bypass RLS")),X=wh(v(A,I,6)),X>=0&&(g.len>0&&Le(g,`
`),X==0?b(g,r("No connections")):_(g,ngettext("%d connection","%d connections",X),X)),se(v(A,I,7),"")!=0&&(g.len>0&&Le(g,`
`),b(g,r("Password valid until ")),b(g,v(A,I,7))),W[I]=In(g.data),z(d,W[I],!1),R&&z(d,v(A,I,8),!1);return K(d,p.queryFout,!1,p.logfile),!0}function bn(O,R){O.len>0&&b(O,", "),b(O,R)}async function ip(O,R){let E={},g,A=p.popt,d={};return Z(E),k(E,`SELECT rolname AS "%s", datname AS "%s",
pg_catalog.array_to_string(setconfig, E'\\n') AS "%s"
FROM pg_catalog.pg_db_role_setting s
LEFT JOIN pg_catalog.pg_database d ON d.oid = setdatabase
LEFT JOIN pg_catalog.pg_roles r ON r.oid = setrole
`,S("Role"),S("Database"),S("Settings")),!D(E,O,!1,!1,null,"r.rolname",null,null,d,1)||!D(E,R,d.value,!1,null,"d.datname",null,null,null,1)||(b(E,"ORDER BY 1, 2;"),g=await y(E.data),!g)?!1:(de(g)==0&&!p.quiet?O&&R?L('Did not find any settings for role "%s" and database "%s".',O,R):O?L('Did not find any settings for role "%s".',O):L("Did not find any settings."):(A.nullPrint=null,A.title=r("List of settings"),A.translate_header=!0,M(g,A,p.queryFout,!1,p.logfile)),!0)}async function sp(O,R){let E={},g,A=p.popt;return Z(E),k(E,`SELECT m.rolname AS "%s", r.rolname AS "%s",
  pg_catalog.concat_ws(', ',
`,S("Role name"),S("Member of")),p.sversion>=16e4?b(E,`    CASE WHEN pam.admin_option THEN 'ADMIN' END,
    CASE WHEN pam.inherit_option THEN 'INHERIT' END,
    CASE WHEN pam.set_option THEN 'SET' END
`):b(E,`    CASE WHEN pam.admin_option THEN 'ADMIN' END,
    CASE WHEN m.rolinherit THEN 'INHERIT' END,
    'SET'
`),_(E,`  ) AS "%s",
  g.rolname AS "%s"
`,S("Options"),S("Grantor")),b(E,`FROM pg_catalog.pg_roles m
     JOIN pg_catalog.pg_auth_members pam ON (pam.member = m.oid)
     LEFT JOIN pg_catalog.pg_roles r ON (pam.roleid = r.oid)
     LEFT JOIN pg_catalog.pg_roles g ON (pam.grantor = g.oid)
`),!R&&!O&&b(E,`WHERE m.rolname !~ '^pg_'
`),!D(E,O,!1,!1,null,"m.rolname",null,null,null,1)||(b(E,`ORDER BY 1, 2, 4;
`),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of role grants"),A.translate_header=!0,M(g,A,p.queryFout,!1,p.logfile),!0)}async function Tl(O,R,E,g){let A=Pe(O,"t")!=null,d=Pe(O,"i")!=null,C=Pe(O,"v")!=null,F=Pe(O,"m")!=null,P=Pe(O,"s")!=null,I=Pe(O,"E")!=null,X={},j,W=p.popt,le,re=[!1,!1,!0,!1,!1,!1,!1,!1,!1];return A||d||C||F||P||I||(A=C=F=P=I=!0),Z(X),k(X,`SELECT n.nspname as "%s",
  c.relname as "%s",
  CASE c.relkind WHEN 'r' THEN '%s' WHEN 'v' THEN '%s' WHEN 'm' THEN '%s' WHEN 'i' THEN '%s' WHEN 'S' THEN '%s' WHEN 't' THEN '%s' WHEN 'f' THEN '%s' WHEN 'p' THEN '%s' WHEN 'I' THEN '%s' END as "%s",
  pg_catalog.pg_get_userbyid(c.relowner) as "%s"`,S("Schema"),S("Name"),S("table"),S("view"),S("materialized view"),S("index"),S("sequence"),S("TOAST table"),S("foreign table"),S("partitioned table"),S("partitioned index"),S("Type"),S("Owner")),le=4,d&&(_(X,`,
  c2.relname as "%s"`,S("Table")),le++),E&&(_(X,`,
  CASE c.relpersistence WHEN 'p' THEN '%s' WHEN 't' THEN '%s' WHEN 'u' THEN '%s' END as "%s"`,S("permanent"),S("temporary"),S("unlogged"),S("Persistence")),re[le]=!0,p.sversion>=12e4&&!p.hide_tableam&&(A||F||d)&&_(X,`,
  am.amname as "%s"`,S("Access method")),_(X,`,
  pg_catalog.pg_size_pretty(pg_catalog.pg_table_size(c.oid)) as "%s",
  pg_catalog.obj_description(c.oid, 'pg_class') as "%s"`,S("Size"),S("Description"))),b(X,`
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace`),p.sversion>=12e4&&!p.hide_tableam&&(A||F||d)&&b(X,`
     LEFT JOIN pg_catalog.pg_am am ON am.oid = c.relam`),d&&b(X,`
     LEFT JOIN pg_catalog.pg_index i ON i.indexrelid = c.oid
     LEFT JOIN pg_catalog.pg_class c2 ON i.indrelid = c2.oid`),b(X,`
WHERE c.relkind IN (`),A&&(b(X,"'r','p',"),(g||R)&&b(X,"'t',")),C&&b(X,"'v',"),F&&b(X,"'m',"),d&&b(X,"'i','I',"),P&&b(X,"'S',"),(g||R)&&b(X,"'s',"),I&&b(X,"'f',"),b(X,"''"),b(X,`)
`),!g&&!R&&b(X,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname !~ '^pg_toast'
      AND n.nspname <> 'information_schema'
`),!D(X,R,!0,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(b(X,"ORDER BY 1,2;"),j=await y(X.data),!j)?!1:(de(j)==0&&!p.quiet?R?L('Did not find any relation named "%s".',R):L("Did not find any relations."):(W.nullPrint=null,W.title=r("List of relations"),W.translate_header=!0,W.translate_columns=re,W.n_translate_columns=Ue(re),M(j,W,p.queryFout,!1,p.logfile)),!0)}async function rp(O,R,E){let g=Pe(O,"t")!=null,A=Pe(O,"i")!=null,d=Pe(O,"n")!=null,C={},F={},P,I=p.popt,X=[!1,!1,!1,!1,!1,!1,!1,!1,!1],j,W=!1;return p.sversion<1e5?(L("The server (version %s) does not support declarative table partitioning.",cn(p.sversion,!1,void 0)),!0):(!g&&!A&&(g=A=!0),A&&!g?j=r("List of partitioned indexes"):g&&!A?j=r("List of partitioned tables"):(j=r("List of partitioned relations"),W=!0),Z(C),k(C,`SELECT n.nspname as "%s",
  c.relname as "%s",
  pg_catalog.pg_get_userbyid(c.relowner) as "%s"`,S("Schema"),S("Name"),S("Owner")),W&&(_(C,`,
  CASE c.relkind WHEN 'p' THEN '%s' WHEN 'I' THEN '%s' END as "%s"`,S("partitioned table"),S("partitioned index"),S("Type")),X[3]=!0),(d||R)&&_(C,`,
  inh.inhparent::pg_catalog.regclass as "%s"`,S("Parent name")),A&&_(C,`,
 c2.oid::pg_catalog.regclass as "%s"`,S("Table")),E&&(d&&_(C,`,
  s.dps as "%s"`,S("Leaf partition size")),_(C,`,
  s.tps as "%s"`,S("Total size")),_(C,`,
  pg_catalog.obj_description(c.oid, 'pg_class') as "%s"`,S("Description"))),b(C,`
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace`),A&&b(C,`
     LEFT JOIN pg_catalog.pg_index i ON i.indexrelid = c.oid
     LEFT JOIN pg_catalog.pg_class c2 ON i.indrelid = c2.oid`),(d||R)&&b(C,`
     LEFT JOIN pg_catalog.pg_inherits inh ON c.oid = inh.inhrelid`),E&&(p.sversion<12e4?b(C,`,
     LATERAL (WITH RECURSIVE d
                AS (SELECT inhrelid AS oid, 1 AS level
                      FROM pg_catalog.pg_inherits
                     WHERE inhparent = c.oid
                    UNION ALL
                    SELECT inhrelid, level + 1
                      FROM pg_catalog.pg_inherits i
                           JOIN d ON i.inhparent = d.oid)
                SELECT pg_catalog.pg_size_pretty(sum(pg_catalog.pg_table_size(d.oid))) AS tps,
                       pg_catalog.pg_size_pretty(sum(
             CASE WHEN d.level = 1 THEN pg_catalog.pg_table_size(d.oid) ELSE 0 END)) AS dps
               FROM d) s`):b(C,`,
     LATERAL (SELECT pg_catalog.pg_size_pretty(sum(
                 CASE WHEN ppt.isleaf AND ppt.level = 1
                      THEN pg_catalog.pg_table_size(ppt.relid) ELSE 0 END)) AS dps,
                     pg_catalog.pg_size_pretty(sum(pg_catalog.pg_table_size(ppt.relid))) AS tps
              FROM pg_catalog.pg_partition_tree(c.oid) ppt) s`)),b(C,`
WHERE c.relkind IN (`),g&&b(C,"'p',"),A&&b(C,"'I',"),b(C,"''"),b(C,`)
`),b(C,!d&&!R?` AND NOT c.relispartition
`:""),R||b(C,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname !~ '^pg_toast'
      AND n.nspname <> 'information_schema'
`),!D(C,R,!0,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(_(C,'ORDER BY "Schema", %s%s"Name";',W?'"Type" DESC, ':"",d||R?'"Parent name" NULLS FIRST, ':""),P=await y(C.data),!P)?!1:(Z(F),b(F,j),I.nullPrint=null,I.title=F.data,I.translate_header=!0,I.translate_columns=X,I.n_translate_columns=Ue(X),M(P,I,p.queryFout,!1,p.logfile),!0))}async function op(O,R,E){let g={},A,d=p.popt;return Z(g),k(g,`SELECT l.lanname AS "%s",
       pg_catalog.pg_get_userbyid(l.lanowner) as "%s",
       l.lanpltrusted AS "%s"`,S("Name"),S("Owner"),S("Trusted")),R&&(_(g,`,
       NOT l.lanispl AS "%s",
       l.lanplcallfoid::pg_catalog.regprocedure AS "%s",
       l.lanvalidator::pg_catalog.regprocedure AS "%s",
       l.laninline::pg_catalog.regprocedure AS "%s",
       `,S("Internal language"),S("Call handler"),S("Validator"),S("Inline handler")),gt(g,"l.lanacl")),_(g,`,
       d.description AS "%s"
FROM pg_catalog.pg_language l
LEFT JOIN pg_catalog.pg_description d
  ON d.classoid = l.tableoid AND d.objoid = l.oid
  AND d.objsubid = 0
`,S("Description")),O&&!D(g,O,!1,!1,null,"l.lanname",null,null,null,2)||(!E&&!O&&b(g,`WHERE l.lanplcallfoid != 0
`),b(g,"ORDER BY 1;"),A=await y(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of languages"),d.translate_header=!0,M(A,d,p.queryFout,!1,p.logfile),!0)}async function ap(O,R,E){let g={},A,d=p.popt;return Z(g),k(g,`SELECT n.nspname as "%s",
       t.typname as "%s",
       pg_catalog.format_type(t.typbasetype, t.typtypmod) as "%s",
       (SELECT c.collname FROM pg_catalog.pg_collation c, pg_catalog.pg_type bt
        WHERE c.oid = t.typcollation AND bt.oid = t.typbasetype AND t.typcollation <> bt.typcollation) as "%s",
       CASE WHEN t.typnotnull THEN 'not null' END as "%s",
       t.typdefault as "%s",
       pg_catalog.array_to_string(ARRAY(
         SELECT pg_catalog.pg_get_constraintdef(r.oid, true) FROM pg_catalog.pg_constraint r WHERE t.oid = r.contypid AND r.contype = 'c' ORDER BY r.conname
       ), ' ') as "%s"`,S("Schema"),S("Name"),S("Type"),S("Collation"),S("Nullable"),S("Default"),S("Check")),R&&(b(g,`,
  `),gt(g,"t.typacl"),_(g,`,
       d.description as "%s"`,S("Description"))),b(g,`
FROM pg_catalog.pg_type t
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace
`),R&&b(g,`     LEFT JOIN pg_catalog.pg_description d ON d.classoid = t.tableoid AND d.objoid = t.oid AND d.objsubid = 0
`),b(g,`WHERE t.typtype = 'd'
`),!E&&!O&&b(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(g,O,!0,!1,"n.nspname","t.typname",null,"pg_catalog.pg_type_is_visible(t.oid)",null,3)||(b(g,"ORDER BY 1, 2;"),A=await y(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of domains"),d.translate_header=!0,M(A,d,p.queryFout,!1,p.logfile),!0)}async function lp(O,R,E){let g={},A,d=p.popt,C=[!1,!1,!1,!1,!0,!1];return Z(g),k(g,`SELECT n.nspname AS "%s",
       c.conname AS "%s",
       pg_catalog.pg_encoding_to_char(c.conforencoding) AS "%s",
       pg_catalog.pg_encoding_to_char(c.contoencoding) AS "%s",
       CASE WHEN c.condefault THEN '%s'
       ELSE '%s' END AS "%s"`,S("Schema"),S("Name"),S("Source"),S("Destination"),S("yes"),S("no"),S("Default?")),R&&_(g,`,
       d.description AS "%s"`,S("Description")),b(g,`
FROM pg_catalog.pg_conversion c
     JOIN pg_catalog.pg_namespace n ON n.oid = c.connamespace
`),R&&b(g,`LEFT JOIN pg_catalog.pg_description d ON d.classoid = c.tableoid
          AND d.objoid = c.oid AND d.objsubid = 0
`),b(g,`WHERE true
`),!E&&!O&&b(g,`  AND n.nspname <> 'pg_catalog'
  AND n.nspname <> 'information_schema'
`),!D(g,O,!0,!1,"n.nspname","c.conname",null,"pg_catalog.pg_conversion_is_visible(c.oid)",null,3)||(b(g,"ORDER BY 1, 2;"),A=await y(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of conversions"),d.translate_header=!0,d.translate_columns=C,d.n_translate_columns=Ue(C),M(A,d,p.queryFout,!1,p.logfile),!0)}async function cp(O,R,E){let g={},A,d=p.popt;return Z(g),k(g,'SELECT s.name AS "%s", pg_catalog.current_setting(s.name) AS "%s"',S("Parameter"),S("Value")),R&&(_(g,', s.vartype AS "%s", s.context AS "%s", ',S("Type"),S("Context")),p.sversion>=15e4?gt(g,"p.paracl"):_(g,'NULL AS "%s"',S("Access privileges"))),b(g,`
FROM pg_catalog.pg_settings s
`),R&&p.sversion>=15e4&&b(g,`  LEFT JOIN pg_catalog.pg_parameter_acl p
  ON pg_catalog.lower(s.name) = p.parname
`),O?G(p.db,g,O,!1,!1,null,"pg_catalog.lower(s.name)",null,null,null,null):b(g,`WHERE s.source <> 'default' AND
      s.setting IS DISTINCT FROM s.boot_val
`),b(g,"ORDER BY 1;"),A=await y(g.data),A?(d.nullPrint=null,O?d.title=r("List of configuration parameters"):d.title=r("List of non-default configuration parameters"),d.translate_header=!0,M(A,d,p.queryFout,!1,p.logfile),!0):!1}async function hp(O,R){let E={},g,A=p.popt,d=[!1,!1,!1,!0,!1,!1,!1];return p.sversion<90300?(L("The server (version %s) does not support event triggers.",cn(p.sversion,!1,void 0)),!0):(Z(E),k(E,`SELECT evtname as "%s", evtevent as "%s", pg_catalog.pg_get_userbyid(e.evtowner) as "%s",
 case evtenabled when 'O' then '%s'  when 'R' then '%s'  when 'A' then '%s'  when 'D' then '%s' end as "%s",
 e.evtfoid::pg_catalog.regproc as "%s", pg_catalog.array_to_string(array(select x from pg_catalog.unnest(evttags) as t(x)), ', ') as "%s"`,S("Name"),S("Event"),S("Owner"),S("enabled"),S("replica"),S("always"),S("disabled"),S("Enabled"),S("Function"),S("Tags")),R&&_(E,`,
pg_catalog.obj_description(e.oid, 'pg_event_trigger') as "%s"`,S("Description")),b(E,`
FROM pg_catalog.pg_event_trigger e `),!D(E,O,!1,!1,null,"evtname",null,null,null,1)||(b(E,"ORDER BY 1"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of event triggers"),A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Ue(d),M(g,A,p.queryFout,!1,p.logfile),!0))}async function fp(O){let R={},E,g=p.popt;return p.sversion<1e5?(L("The server (version %s) does not support extended statistics.",cn(p.sversion,!1,void 0)),!0):(Z(R),k(R,`SELECT 
es.stxnamespace::pg_catalog.regnamespace::pg_catalog.text AS "%s", 
es.stxname AS "%s", 
`,S("Schema"),S("Name")),p.sversion>=14e4?_(R,`pg_catalog.format('%%s FROM %%s', 
  pg_catalog.pg_get_statisticsobjdef_columns(es.oid), 
  es.stxrelid::pg_catalog.regclass) AS "%s"`,S("Definition")):_(R,`pg_catalog.format('%%s FROM %%s', 
  (SELECT pg_catalog.string_agg(pg_catalog.quote_ident(a.attname),', ') 
   FROM pg_catalog.unnest(es.stxkeys) s(attnum) 
   JOIN pg_catalog.pg_attribute a 
   ON (es.stxrelid = a.attrelid 
   AND a.attnum = s.attnum 
   AND NOT a.attisdropped)), 
es.stxrelid::pg_catalog.regclass) AS "%s"`,S("Definition")),_(R,`,
CASE WHEN 'd' = any(es.stxkind) THEN 'defined' 
END AS "%s", 
CASE WHEN 'f' = any(es.stxkind) THEN 'defined' 
END AS "%s"`,S("Ndistinct"),S("Dependencies")),p.sversion>=12e4&&_(R,`,
CASE WHEN 'm' = any(es.stxkind) THEN 'defined' 
END AS "%s" `,S("MCV")),b(R,` 
FROM pg_catalog.pg_statistic_ext es 
`),!D(R,O,!1,!1,"es.stxnamespace::pg_catalog.regnamespace::pg_catalog.text","es.stxname",null,"pg_catalog.pg_statistics_obj_is_visible(es.oid)",null,3)||(b(R,"ORDER BY 1, 2;"),E=await y(R.data),!E)?!1:(g.nullPrint=null,g.title=r("List of extended statistics"),g.translate_header=!0,M(E,g,p.queryFout,!1,p.logfile),!0))}async function up(O,R){let E={},g,A=p.popt,d=[!1,!1,!1,!0,!1];return Z(E),k(E,`SELECT pg_catalog.format_type(castsource, NULL) AS "%s",
       pg_catalog.format_type(casttarget, NULL) AS "%s",
`,S("Source type"),S("Target type")),_(E,`       CASE WHEN c.castmethod = '%c' THEN '(binary coercible)'
            WHEN c.castmethod = '%c' THEN '(with inout)'
            ELSE p.proname
       END AS "%s",
`,Z0,e_,S("Function")),_(E,`       CASE WHEN c.castcontext = '%c' THEN '%s'
            WHEN c.castcontext = '%c' THEN '%s'
            ELSE '%s'
       END AS "%s"`,n_,S("no"),t_,S("in assignment"),S("yes"),S("Implicit?")),R&&_(E,`,
       d.description AS "%s"`,S("Description")),b(E,`
FROM pg_catalog.pg_cast c LEFT JOIN pg_catalog.pg_proc p
     ON c.castfunc = p.oid
     LEFT JOIN pg_catalog.pg_type ts
     ON c.castsource = ts.oid
     LEFT JOIN pg_catalog.pg_namespace ns
     ON ns.oid = ts.typnamespace
     LEFT JOIN pg_catalog.pg_type tt
     ON c.casttarget = tt.oid
     LEFT JOIN pg_catalog.pg_namespace nt
     ON nt.oid = tt.typnamespace
`),R&&b(E,`     LEFT JOIN pg_catalog.pg_description d
     ON d.classoid = c.tableoid AND d.objoid = c.oid AND d.objsubid = 0
`),b(E,"WHERE ( (true"),!D(E,O,!0,!1,"ns.nspname","ts.typname","pg_catalog.format_type(ts.oid, NULL)","pg_catalog.pg_type_is_visible(ts.oid)",null,3)||(b(E,") OR (true"),!D(E,O,!0,!1,"nt.nspname","tt.typname","pg_catalog.format_type(tt.oid, NULL)","pg_catalog.pg_type_is_visible(tt.oid)",null,3))||(b(E,`) )
ORDER BY 1, 2;`),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of casts"),A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Ue(d),M(g,A,p.queryFout,!1,p.logfile),!0)}async function dp(O,R,E){let g={},A,d=p.popt,C=[!1,!1,!1,!1,!1,!1,!1,!0,!1];return Z(g),k(g,`SELECT
  n.nspname AS "%s",
  c.collname AS "%s",
`,S("Schema"),S("Name")),p.sversion>=1e5?_(g,`  CASE c.collprovider WHEN 'd' THEN 'default' WHEN 'b' THEN 'builtin' WHEN 'c' THEN 'libc' WHEN 'i' THEN 'icu' END AS "%s",
`,S("Provider")):_(g,`  'libc' AS "%s",
`,S("Provider")),_(g,`  c.collcollate AS "%s",
  c.collctype AS "%s",
`,S("Collate"),S("Ctype")),p.sversion>=17e4?_(g,`  c.colllocale AS "%s",
`,S("Locale")):p.sversion>=15e4?_(g,`  c.colliculocale AS "%s",
`,S("Locale")):_(g,`  c.collcollate AS "%s",
`,S("Locale")),p.sversion>=16e4?_(g,`  c.collicurules AS "%s",
`,S("ICU Rules")):_(g,`  NULL AS "%s",
`,S("ICU Rules")),p.sversion>=12e4?_(g,`  CASE WHEN c.collisdeterministic THEN '%s' ELSE '%s' END AS "%s"`,S("yes"),S("no"),S("Deterministic?")):_(g,`  '%s' AS "%s"`,S("yes"),S("Deterministic?")),R&&_(g,`,
  pg_catalog.obj_description(c.oid, 'pg_collation') AS "%s"`,S("Description")),b(g,`
FROM pg_catalog.pg_collation c, pg_catalog.pg_namespace n
WHERE n.oid = c.collnamespace
`),!E&&!O&&b(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),b(g,`      AND c.collencoding IN (-1, pg_catalog.pg_char_to_encoding(pg_catalog.getdatabaseencoding()))
`),!D(g,O,!0,!1,"n.nspname","c.collname",null,"pg_catalog.pg_collation_is_visible(c.oid)",null,3)||(b(g,"ORDER BY 1, 2;"),A=await y(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of collations"),d.translate_header=!0,d.translate_columns=C,d.n_translate_columns=Ue(C),M(A,d,p.queryFout,!1,p.logfile),!0)}async function pp(O,R,E){let g={},A,d=p.popt,C=0,F=null;if(Z(g),k(g,`SELECT n.nspname AS "%s",
  pg_catalog.pg_get_userbyid(n.nspowner) AS "%s"`,S("Name"),S("Owner")),R&&(b(g,`,
  `),gt(g,"n.nspacl"),_(g,`,
  pg_catalog.obj_description(n.oid, 'pg_namespace') AS "%s"`,S("Description"))),b(g,`
FROM pg_catalog.pg_namespace n
`),!E&&!O&&b(g,`WHERE n.nspname !~ '^pg_' AND n.nspname <> 'information_schema'
`),!D(g,O,!E&&!O,!1,null,"n.nspname",null,null,null,2)||(b(g,"ORDER BY 1;"),A=await y(g.data),!A))return!1;if(d.nullPrint=null,d.title=r("List of schemas"),d.translate_header=!0,O&&p.sversion>=15e4){let P,I;if(k(g,`SELECT pubname 
FROM pg_catalog.pg_publication p
     JOIN pg_catalog.pg_publication_namespace pn ON p.oid = pn.pnpubid
     JOIN pg_catalog.pg_namespace n ON n.oid = pn.pnnspid 
WHERE n.nspname = '%s'
ORDER BY 1`,O),P=await y(g.data),P)C=de(P);else return!1;if(C>0){for(F=[],F[0]=In(r("Publications:")),I=0;I<C;I++)k(g,'    "%s"',v(P,I,0)),F[I+1]=In(g.data);F[I+1]=null,d.footers=F}}return M(A,d,p.queryFout,!1,p.logfile),!0}async function mp(O,R){let E={},g,A=p.popt;return R?await gp(O):(Z(E),k(E,`SELECT
  n.nspname as "%s",
  p.prsname as "%s",
  pg_catalog.obj_description(p.oid, 'pg_ts_parser') as "%s"
FROM pg_catalog.pg_ts_parser p
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.prsnamespace
`,S("Schema"),S("Name"),S("Description")),!D(E,O,!1,!1,"n.nspname","p.prsname",null,"pg_catalog.pg_ts_parser_is_visible(p.oid)",null,3)||(b(E,"ORDER BY 1, 2;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of text search parsers"),A.translate_header=!0,M(g,A,p.queryFout,!1,p.logfile),!0))}async function gp(O){let R={},E,g;if(Z(R),k(R,`SELECT p.oid,
  n.nspname,
  p.prsname
FROM pg_catalog.pg_ts_parser p
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.prsnamespace
`),!D(R,O,!1,!1,"n.nspname","p.prsname",null,"pg_catalog.pg_ts_parser_is_visible(p.oid)",null,3)||(b(R,"ORDER BY 1, 2;"),E=await y(R.data),!E))return!1;if(de(E)==0)return p.quiet||(O?L('Did not find any text search parser named "%s".',O):L("Did not find any text search parsers.")),!1;for(g=0;g<de(E);g++){let A,d=null,C;if(A=v(E,g,0),Ke(E,g,1)||(d=v(E,g,1)),C=v(E,g,2),!await Ep(A,d,C)||c)return!1}return!0}async function Ep(O,R,E){let g={},A,d={},C=p.popt,F=[!0,!1,!1];return Z(g),k(g,`SELECT '%s' AS "%s",
   p.prsstart::pg_catalog.regproc AS "%s",
   pg_catalog.obj_description(p.prsstart, 'pg_proc') as "%s"
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prstoken::pg_catalog.regproc,
   pg_catalog.obj_description(p.prstoken, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prsend::pg_catalog.regproc,
   pg_catalog.obj_description(p.prsend, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prsheadline::pg_catalog.regproc,
   pg_catalog.obj_description(p.prsheadline, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prslextype::pg_catalog.regproc,
   pg_catalog.obj_description(p.prslextype, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s';`,S("Start parse"),S("Method"),S("Function"),S("Description"),O,S("Get next token"),O,S("End parse"),O,S("Get headline"),O,S("Get token types"),O),A=await y(g.data),!A||(C.nullPrint=null,Z(d),R?k(d,r('Text search parser "%s.%s"'),R,E):k(d,r('Text search parser "%s"'),E),C.title=d.data,C.footers=null,C.topt.default_footer=!1,C.translate_header=!0,C.translate_columns=F,C.n_translate_columns=Ue(F),M(A,C,p.queryFout,!1,p.logfile),Z(g),k(g,`SELECT t.alias as "%s",
  t.description as "%s"
FROM pg_catalog.ts_token_type( '%s'::pg_catalog.oid ) as t
ORDER BY 1;`,S("Token name"),S("Description"),O),A=await y(g.data),!A)?!1:(C.nullPrint=null,R?k(d,r('Token types for parser "%s.%s"'),R,E):k(d,r('Token types for parser "%s"'),E),C.title=d.data,C.footers=null,C.topt.default_footer=!0,C.translate_header=!0,C.translate_columns=null,C.n_translate_columns=0,M(A,C,p.queryFout,!1,p.logfile),!0)}async function Tp(O,R){let E={},g,A=p.popt;return Z(E),k(E,`SELECT
  n.nspname as "%s",
  d.dictname as "%s",
`,S("Schema"),S("Name")),R&&_(E,`  ( SELECT COALESCE(nt.nspname, '(null)')::pg_catalog.text || '.' || t.tmplname FROM
    pg_catalog.pg_ts_template t
    LEFT JOIN pg_catalog.pg_namespace nt ON nt.oid = t.tmplnamespace
    WHERE d.dicttemplate = t.oid ) AS  "%s",
  d.dictinitoption as "%s",
`,S("Template"),S("Init options")),_(E,`  pg_catalog.obj_description(d.oid, 'pg_ts_dict') as "%s"
`,S("Description")),b(E,`FROM pg_catalog.pg_ts_dict d
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = d.dictnamespace
`),!D(E,O,!1,!1,"n.nspname","d.dictname",null,"pg_catalog.pg_ts_dict_is_visible(d.oid)",null,3)||(b(E,"ORDER BY 1, 2;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of text search dictionaries"),A.translate_header=!0,M(g,A,p.queryFout,!1,p.logfile),!0)}async function Sp(O,R){let E={},g,A=p.popt;return Z(E),R?k(E,`SELECT
  n.nspname AS "%s",
  t.tmplname AS "%s",
  t.tmplinit::pg_catalog.regproc AS "%s",
  t.tmpllexize::pg_catalog.regproc AS "%s",
  pg_catalog.obj_description(t.oid, 'pg_ts_template') AS "%s"
`,S("Schema"),S("Name"),S("Init"),S("Lexize"),S("Description")):k(E,`SELECT
  n.nspname AS "%s",
  t.tmplname AS "%s",
  pg_catalog.obj_description(t.oid, 'pg_ts_template') AS "%s"
`,S("Schema"),S("Name"),S("Description")),b(E,`FROM pg_catalog.pg_ts_template t
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = t.tmplnamespace
`),!D(E,O,!1,!1,"n.nspname","t.tmplname",null,"pg_catalog.pg_ts_template_is_visible(t.oid)",null,3)||(b(E,"ORDER BY 1, 2;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of text search templates"),A.translate_header=!0,M(g,A,p.queryFout,!1,p.logfile),!0)}async function Ap(O,R){let E={},g,A=p.popt;return R?await Rp(O):(Z(E),k(E,`SELECT
   n.nspname as "%s",
   c.cfgname as "%s",
   pg_catalog.obj_description(c.oid, 'pg_ts_config') as "%s"
FROM pg_catalog.pg_ts_config c
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.cfgnamespace
`,S("Schema"),S("Name"),S("Description")),!D(E,O,!1,!1,"n.nspname","c.cfgname",null,"pg_catalog.pg_ts_config_is_visible(c.oid)",null,3)||(b(E,"ORDER BY 1, 2;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of text search configurations"),A.translate_header=!0,M(g,A,p.queryFout,!1,p.logfile),!0))}async function Rp(O){let R={},E,g;if(Z(R),k(R,`SELECT c.oid, c.cfgname,
   n.nspname,
   p.prsname,
   np.nspname as pnspname
FROM pg_catalog.pg_ts_config c
   LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.cfgnamespace,
 pg_catalog.pg_ts_parser p
   LEFT JOIN pg_catalog.pg_namespace np ON np.oid = p.prsnamespace
WHERE  p.oid = c.cfgparser
`),!D(R,O,!0,!1,"n.nspname","c.cfgname",null,"pg_catalog.pg_ts_config_is_visible(c.oid)",null,3)||(b(R,"ORDER BY 3, 2;"),E=await y(R.data),!E))return!1;if(de(E)==0)return p.quiet||(O?L('Did not find any text search configuration named "%s".',O):L("Did not find any text search configurations.")),!1;for(g=0;g<de(E);g++){let A,d,C=null,F,P=null;if(A=v(E,g,0),d=v(E,g,1),Ke(E,g,2)||(C=v(E,g,2)),F=v(E,g,3),Ke(E,g,4)||(P=v(E,g,4)),!await _p(A,C,d,P,F)||c)return!1}return!0}async function _p(O,R,E,g,A){let d={},C={},F,P=p.popt;return Z(d),k(d,`SELECT
  ( SELECT t.alias FROM
    pg_catalog.ts_token_type(c.cfgparser) AS t
    WHERE t.tokid = m.maptokentype ) AS "%s",
  pg_catalog.btrim(
    ARRAY( SELECT mm.mapdict::pg_catalog.regdictionary
           FROM pg_catalog.pg_ts_config_map AS mm
           WHERE mm.mapcfg = m.mapcfg AND mm.maptokentype = m.maptokentype
           ORDER BY mapcfg, maptokentype, mapseqno
    ) :: pg_catalog.text,
  '{}') AS "%s"
FROM pg_catalog.pg_ts_config AS c, pg_catalog.pg_ts_config_map AS m
WHERE c.oid = '%s' AND m.mapcfg = c.oid
GROUP BY m.mapcfg, m.maptokentype, c.cfgparser
ORDER BY 1;`,S("Token"),S("Dictionaries"),O),F=await y(d.data),F?(Z(C),R?_(C,r('Text search configuration "%s.%s"'),R,E):_(C,r('Text search configuration "%s"'),E),g?_(C,r(`
Parser: "%s.%s"`),g,A):_(C,r(`
Parser: "%s"`),A),P.nullPrint=null,P.title=C.data,P.footers=null,P.topt.default_footer=!1,P.translate_header=!0,M(F,P,p.queryFout,!1,p.logfile),!0):!1}async function Op(O,R){let E={},g,A=p.popt;return Z(E),k(E,`SELECT fdw.fdwname AS "%s",
  pg_catalog.pg_get_userbyid(fdw.fdwowner) AS "%s",
  fdw.fdwhandler::pg_catalog.regproc AS "%s",
  fdw.fdwvalidator::pg_catalog.regproc AS "%s"`,S("Name"),S("Owner"),S("Handler"),S("Validator")),R&&(b(E,`,
  `),gt(E,"fdwacl"),_(E,`,
 CASE WHEN fdwoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(fdwoptions)),  ', ') || ')'   END AS "%s",
  d.description AS "%s" `,S("FDW options"),S("Description"))),b(E,`
FROM pg_catalog.pg_foreign_data_wrapper fdw
`),R&&b(E,`LEFT JOIN pg_catalog.pg_description d
       ON d.classoid = fdw.tableoid AND d.objoid = fdw.oid AND d.objsubid = 0
`),!D(E,O,!1,!1,null,"fdwname",null,null,null,1)||(b(E,"ORDER BY 1;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of foreign-data wrappers"),A.translate_header=!0,M(g,A,p.queryFout,!1,p.logfile),!0)}async function Np(O,R){let E={},g,A=p.popt;return Z(E),k(E,`SELECT s.srvname AS "%s",
  pg_catalog.pg_get_userbyid(s.srvowner) AS "%s",
  f.fdwname AS "%s"`,S("Name"),S("Owner"),S("Foreign-data wrapper")),R&&(b(E,`,
  `),gt(E,"s.srvacl"),_(E,`,
  s.srvtype AS "%s",
  s.srvversion AS "%s",
  CASE WHEN srvoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(srvoptions)),  ', ') || ')'   END AS "%s",
  d.description AS "%s"`,S("Type"),S("Version"),S("FDW options"),S("Description"))),b(E,`
FROM pg_catalog.pg_foreign_server s
     JOIN pg_catalog.pg_foreign_data_wrapper f ON f.oid=s.srvfdw
`),R&&b(E,`LEFT JOIN pg_catalog.pg_description d
       ON d.classoid = s.tableoid AND d.objoid = s.oid AND d.objsubid = 0
`),!D(E,O,!1,!1,null,"s.srvname",null,null,null,1)||(b(E,"ORDER BY 1;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of foreign servers"),A.translate_header=!0,M(g,A,p.queryFout,!1,p.logfile),!0)}async function bp(O,R){let E={},g,A=p.popt;return Z(E),k(E,`SELECT um.srvname AS "%s",
  um.usename AS "%s"`,S("Server"),S("User name")),R&&_(E,`,
 CASE WHEN umoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(umoptions)),  ', ') || ')'   END AS "%s"`,S("FDW options")),b(E,`
FROM pg_catalog.pg_user_mappings um
`),!D(E,O,!1,!1,null,"um.srvname","um.usename",null,null,1)||(b(E,"ORDER BY 1, 2;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of user mappings"),A.translate_header=!0,M(g,A,p.queryFout,!1,p.logfile),!0)}async function yp(O,R){let E={},g,A=p.popt;return Z(E),k(E,`SELECT n.nspname AS "%s",
  c.relname AS "%s",
  s.srvname AS "%s"`,S("Schema"),S("Table"),S("Server")),R&&_(E,`,
 CASE WHEN ftoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(ftoptions)),  ', ') || ')'   END AS "%s",
  d.description AS "%s"`,S("FDW options"),S("Description")),b(E,`
FROM pg_catalog.pg_foreign_table ft
  INNER JOIN pg_catalog.pg_class c ON c.oid = ft.ftrelid
  INNER JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
  INNER JOIN pg_catalog.pg_foreign_server s ON s.oid = ft.ftserver
`),R&&b(E,`   LEFT JOIN pg_catalog.pg_description d
          ON d.classoid = c.tableoid AND d.objoid = c.oid AND d.objsubid = 0
`),!D(E,O,!1,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(b(E,"ORDER BY 1, 2;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of foreign tables"),A.translate_header=!0,M(g,A,p.queryFout,!1,p.logfile),!0)}async function Cp(O){let R={},E,g=p.popt;return Z(R),k(R,`SELECT e.extname AS "%s", e.extversion AS "%s", n.nspname AS "%s", c.description AS "%s"
FROM pg_catalog.pg_extension e LEFT JOIN pg_catalog.pg_namespace n ON n.oid = e.extnamespace LEFT JOIN pg_catalog.pg_description c ON c.objoid = e.oid AND c.classoid = 'pg_catalog.pg_extension'::pg_catalog.regclass
`,S("Name"),S("Version"),S("Schema"),S("Description")),!D(R,O,!1,!1,null,"e.extname",null,null,null,1)||(b(R,"ORDER BY 1;"),E=await y(R.data),!E)?!1:(g.nullPrint=null,g.title=r("List of installed extensions"),g.translate_header=!0,M(E,g,p.queryFout,!1,p.logfile),!0)}async function Lp(O){let R={},E,g;if(Z(R),k(R,`SELECT e.extname, e.oid
FROM pg_catalog.pg_extension e
`),!D(R,O,!1,!1,null,"e.extname",null,null,null,1)||(b(R,"ORDER BY 1;"),E=await y(R.data),!E))return!1;if(de(E)==0)return p.quiet||(O?L('Did not find any extension named "%s".',O):L("Did not find any extensions.")),!1;for(g=0;g<de(E);g++){let A,d;if(A=v(E,g,0),d=v(E,g,1),!await Ip(A,d)||c)return!1}return!0}async function Ip(O,R){let E={},g,A={},d=p.popt;return Z(E),k(E,`SELECT pg_catalog.pg_describe_object(classid, objid, 0) AS "%s"
FROM pg_catalog.pg_depend
WHERE refclassid = 'pg_catalog.pg_extension'::pg_catalog.regclass AND refobjid = '%s' AND deptype = 'e'
ORDER BY 1;`,S("Object description"),R),g=await y(E.data),g?(d.nullPrint=null,Z(A),k(A,r('Objects in extension "%s"'),O),d.title=A.data,d.translate_header=!0,M(g,d,p.queryFout,!1,p.logfile),!0):!1}async function wp(O){let R={},E,g=p.popt,A=[!1,!1,!1,!1,!1,!1,!1,!1];return p.sversion<1e5?(L("The server (version %s) does not support publications.",cn(p.sversion,!1,void 0)),!0):(Z(R),k(R,`SELECT pubname AS "%s",
  pg_catalog.pg_get_userbyid(pubowner) AS "%s",
  puballtables AS "%s",
  pubinsert AS "%s",
  pubupdate AS "%s",
  pubdelete AS "%s"`,S("Name"),S("Owner"),S("All tables"),S("Inserts"),S("Updates"),S("Deletes")),p.sversion>=11e4&&_(R,`,
  pubtruncate AS "%s"`,S("Truncates")),p.sversion>=13e4&&_(R,`,
  pubviaroot AS "%s"`,S("Via root")),b(R,`
FROM pg_catalog.pg_publication
`),!D(R,O,!1,!1,null,"pubname",null,null,null,1)||(b(R,"ORDER BY 1;"),E=await y(R.data),!E)?!1:(g.nullPrint=null,g.title=r("List of publications"),g.translate_header=!0,g.translate_columns=A,g.n_translate_columns=Ue(A),M(E,g,p.queryFout,!1,p.logfile),!0))}async function Sl(O,R,E,g){let A,d=0,C=0;if(A=await y(O.data),A)d=de(A);else return!1;for(d>0&&Y(g,R),C=0;C<d;C++)E?k(O,'    "%s"',v(A,C,0)):(k(O,'    "%s.%s"',v(A,C,0),v(A,C,1)),Ke(A,C,3)||_(O," (%s)",v(A,C,3)),Ke(A,C,2)||_(O," WHERE %s",v(A,C,2))),Y(g,O.data);return!0}async function xp(O){let R={},E,g,A,d,C={},F={};if(p.sversion<1e5)return L("The server (version %s) does not support publications.",cn(p.sversion,!1,void 0)),!0;if(A=p.sversion>=11e4,d=p.sversion>=13e4,Z(R),k(R,`SELECT oid, pubname,
  pg_catalog.pg_get_userbyid(pubowner) AS owner,
  puballtables, pubinsert, pubupdate, pubdelete`),A&&b(R,", pubtruncate"),d&&b(R,", pubviaroot"),b(R,`
FROM pg_catalog.pg_publication
`),!D(R,O,!1,!1,null,"pubname",null,null,null,1)||(b(R,"ORDER BY 2;"),g=await y(R.data),!g))return!1;if(de(g)==0)return p.quiet||(O?L('Did not find any publication named "%s".',O):L("Did not find any publications.")),!1;for(E=0;E<de(g);E++){let P="l",I=5,X=1,j=v(g,E,0),W=v(g,E,1),le=se(v(g,E,3),"t")==0,re=p.popt.topt;if(A&&I++,d&&I++,Z(C),k(C,r("Publication %s"),W),V(F,re,C.data,I,X),ie(F,S("Owner"),!0,P),ie(F,S("All tables"),!0,P),ie(F,S("Inserts"),!0,P),ie(F,S("Updates"),!0,P),ie(F,S("Deletes"),!0,P),A&&ie(F,S("Truncates"),!0,P),d&&ie(F,S("Via root"),!0,P),z(F,v(g,E,2),!1),z(F,v(g,E,3),!1),z(F,v(g,E,4),!1),z(F,v(g,E,5),!1),z(F,v(g,E,6),!1),A&&z(F,v(g,E,7),!1),d&&z(F,v(g,E,8),!1),!le&&(k(R,"SELECT n.nspname, c.relname"),p.sversion>=15e4?(b(R,", pg_get_expr(pr.prqual, c.oid)"),b(R,`, (CASE WHEN pr.prattrs IS NOT NULL THEN
     pg_catalog.array_to_string(      ARRAY(SELECT attname
              FROM
                pg_catalog.generate_series(0, pg_catalog.array_upper(pr.prattrs::pg_catalog.int2[], 1)) s,
                pg_catalog.pg_attribute
        WHERE attrelid = c.oid AND attnum = prattrs[s]), ', ')
       ELSE NULL END)`)):b(R,", NULL, NULL"),_(R,`
FROM pg_catalog.pg_class c,
     pg_catalog.pg_namespace n,
     pg_catalog.pg_publication_rel pr
WHERE c.relnamespace = n.oid
  AND c.oid = pr.prrelid
  AND pr.prpubid = '%s'
ORDER BY 1,2`,j),!await Sl(R,r("Tables:"),!1,F)||p.sversion>=15e4&&(k(R,`SELECT n.nspname
FROM pg_catalog.pg_namespace n
     JOIN pg_catalog.pg_publication_namespace pn ON n.oid = pn.pnnspid
WHERE pn.pnpubid = '%s'
ORDER BY 1`,j),!await Sl(R,r("Tables from schemas:"),!0,F))))return!1;K(F,p.queryFout,!1,p.logfile)}return!0}async function vp(O,R){let E={},g,A=p.popt,d=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];return p.sversion<1e5?(L("The server (version %s) does not support subscriptions.",cn(p.sversion,!1,void 0)),!0):(Z(E),k(E,`SELECT subname AS "%s"
,  pg_catalog.pg_get_userbyid(subowner) AS "%s"
,  subenabled AS "%s"
,  subpublications AS "%s"
`,S("Name"),S("Owner"),S("Enabled"),S("Publication")),R&&(p.sversion>=14e4&&(_(E,`, subbinary AS "%s"
`,S("Binary")),p.sversion>=16e4?_(E,`, (CASE substream
    WHEN 'f' THEN 'off'
    WHEN 't' THEN 'on'
    WHEN 'p' THEN 'parallel'
   END) AS "%s"
`,S("Streaming")):_(E,`, substream AS "%s"
`,S("Streaming"))),p.sversion>=15e4&&_(E,`, subtwophasestate AS "%s"
, subdisableonerr AS "%s"
`,S("Two-phase commit"),S("Disable on error")),p.sversion>=16e4&&_(E,`, suborigin AS "%s"
, subpasswordrequired AS "%s"
, subrunasowner AS "%s"
`,S("Origin"),S("Password required"),S("Run as owner?")),p.sversion>=17e4&&_(E,`, subfailover AS "%s"
`,S("Failover")),_(E,`,  subsynccommit AS "%s"
,  subconninfo AS "%s"
`,S("Synchronous commit"),S("Conninfo")),p.sversion>=15e4&&_(E,`, subskiplsn AS "%s"
`,S("Skip LSN"))),b(E,`FROM pg_catalog.pg_subscription
WHERE subdbid = (SELECT oid
                 FROM pg_catalog.pg_database
                 WHERE datname = pg_catalog.current_database())`),!D(E,O,!0,!1,null,"subname",null,null,null,1)||(b(E,"ORDER BY 1;"),g=await y(E.data),!g)?!1:(A.nullPrint=null,A.title=r("List of subscriptions"),A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Ue(d),M(g,A,p.queryFout,!1,p.logfile),!0))}function gt(O,R){_(O,`CASE WHEN pg_catalog.cardinality(%s) = 0 THEN '%s' ELSE pg_catalog.array_to_string(%s, E'\\n') END AS "%s"`,R,S("(none)"),R,S("Access privileges"))}async function Dp(O,R,E){let g={},A,d=p.popt,C=!1,F=[!1,!1,!1,!1,!1,!1,!1];if(Z(g),k(g,`SELECT
  am.amname AS "%s",
  pg_catalog.format_type(c.opcintype, NULL) AS "%s",
  CASE
    WHEN c.opckeytype <> 0 AND c.opckeytype <> c.opcintype
    THEN pg_catalog.format_type(c.opckeytype, NULL)
    ELSE NULL
  END AS "%s",
  CASE
    WHEN pg_catalog.pg_opclass_is_visible(c.oid)
    THEN pg_catalog.format('%%I', c.opcname)
    ELSE pg_catalog.format('%%I.%%I', n.nspname, c.opcname)
  END AS "%s",
  (CASE WHEN c.opcdefault
    THEN '%s'
    ELSE '%s'
  END) AS "%s"`,S("AM"),S("Input type"),S("Storage type"),S("Operator class"),S("yes"),S("no"),S("Default?")),E&&_(g,`,
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(of.oid)
    THEN pg_catalog.format('%%I', of.opfname)
    ELSE pg_catalog.format('%%I.%%I', ofn.nspname, of.opfname)
  END AS "%s",
 pg_catalog.pg_get_userbyid(c.opcowner) AS "%s"
`,S("Operator family"),S("Owner")),b(g,`
FROM pg_catalog.pg_opclass c
  LEFT JOIN pg_catalog.pg_am am on am.oid = c.opcmethod
  LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.opcnamespace
  LEFT JOIN pg_catalog.pg_type t ON t.oid = c.opcintype
  LEFT JOIN pg_catalog.pg_namespace tn ON tn.oid = t.typnamespace
`),E&&b(g,`  LEFT JOIN pg_catalog.pg_opfamily of ON of.oid = c.opcfamily
  LEFT JOIN pg_catalog.pg_namespace ofn ON ofn.oid = of.opfnamespace
`),O){if(C={value:C},!D(g,O,!1,!1,null,"am.amname",null,null,C,1))return!1;C=C.value}return R&&!D(g,R,C,!1,"tn.nspname","t.typname","pg_catalog.format_type(t.oid, NULL)","pg_catalog.pg_type_is_visible(t.oid)",null,3)||(b(g,"ORDER BY 1, 2, 4;"),A=await y(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of operator classes"),d.translate_header=!0,d.translate_columns=F,d.n_translate_columns=Ue(F),M(A,d,p.queryFout,!1,p.logfile),!0)}async function kp(O,R,E){let g={},A,d=p.popt,C=!1,F=[!1,!1,!1,!1];if(Z(g),k(g,`SELECT
  am.amname AS "%s",
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(f.oid)
    THEN pg_catalog.format('%%I', f.opfname)
    ELSE pg_catalog.format('%%I.%%I', n.nspname, f.opfname)
  END AS "%s",
  (SELECT
     pg_catalog.string_agg(pg_catalog.format_type(oc.opcintype, NULL), ', ')
   FROM pg_catalog.pg_opclass oc
   WHERE oc.opcfamily = f.oid) "%s"`,S("AM"),S("Operator family"),S("Applicable types")),E&&_(g,`,
  pg_catalog.pg_get_userbyid(f.opfowner) AS "%s"
`,S("Owner")),b(g,`
FROM pg_catalog.pg_opfamily f
  LEFT JOIN pg_catalog.pg_am am on am.oid = f.opfmethod
  LEFT JOIN pg_catalog.pg_namespace n ON n.oid = f.opfnamespace
`),O){if(C={value:C},!D(g,O,!1,!1,null,"am.amname",null,null,C,1))return!1;C=C.value}if(R){if(_(g,`  %s EXISTS (
    SELECT 1
    FROM pg_catalog.pg_type t
    JOIN pg_catalog.pg_opclass oc ON oc.opcintype = t.oid
    LEFT JOIN pg_catalog.pg_namespace tn ON tn.oid = t.typnamespace
    WHERE oc.opcfamily = f.oid
`,C?"AND":"WHERE"),!D(g,R,!0,!1,"tn.nspname","t.typname","pg_catalog.format_type(t.oid, NULL)","pg_catalog.pg_type_is_visible(t.oid)",null,3))return!1;b(g,`  )
`)}return b(g,"ORDER BY 1, 2;"),A=await y(g.data),A?(d.nullPrint=null,d.title=r("List of operator families"),d.translate_header=!0,d.translate_columns=F,d.n_translate_columns=Ue(F),M(A,d,p.queryFout,!1,p.logfile),!0):!1}async function Pp(O,R,E){let g={},A,d=p.popt,C=!1,F=[!1,!1,!1,!1,!1,!1];if(Z(g),k(g,`SELECT
  am.amname AS "%s",
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(of.oid)
    THEN pg_catalog.format('%%I', of.opfname)
    ELSE pg_catalog.format('%%I.%%I', nsf.nspname, of.opfname)
  END AS "%s",
  o.amopopr::pg_catalog.regoperator AS "%s"
,  o.amopstrategy AS "%s",
  CASE o.amoppurpose
    WHEN 'o' THEN '%s'
    WHEN 's' THEN '%s'
  END AS "%s"
`,S("AM"),S("Operator family"),S("Operator"),S("Strategy"),S("ordering"),S("search"),S("Purpose")),E&&_(g,`, ofs.opfname AS "%s"
`,S("Sort opfamily")),b(g,`FROM pg_catalog.pg_amop o
  LEFT JOIN pg_catalog.pg_opfamily of ON of.oid = o.amopfamily
  LEFT JOIN pg_catalog.pg_am am ON am.oid = of.opfmethod AND am.oid = o.amopmethod
  LEFT JOIN pg_catalog.pg_namespace nsf ON of.opfnamespace = nsf.oid
`),E&&b(g,`  LEFT JOIN pg_catalog.pg_opfamily ofs ON ofs.oid = o.amopsortfamily
`),O){if(C={value:C},!D(g,O,!1,!1,null,"am.amname",null,null,C,1))return!1;C=C.value}return R&&!D(g,R,C,!1,"nsf.nspname","of.opfname",null,null,null,3)||(b(g,`ORDER BY 1, 2,
  o.amoplefttype = o.amoprighttype DESC,
  pg_catalog.format_type(o.amoplefttype, NULL),
  pg_catalog.format_type(o.amoprighttype, NULL),
  o.amopstrategy;`),A=await y(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of operators of operator families"),d.translate_header=!0,d.translate_columns=F,d.n_translate_columns=Ue(F),M(A,d,p.queryFout,!1,p.logfile),!0)}async function Mp(O,R,E){let g={},A,d=p.popt,C=!1,F=[!1,!1,!1,!1,!1,!1];if(Z(g),k(g,`SELECT
  am.amname AS "%s",
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(of.oid)
    THEN pg_catalog.format('%%I', of.opfname)
    ELSE pg_catalog.format('%%I.%%I', ns.nspname, of.opfname)
  END AS "%s",
  pg_catalog.format_type(ap.amproclefttype, NULL) AS "%s",
  pg_catalog.format_type(ap.amprocrighttype, NULL) AS "%s",
  ap.amprocnum AS "%s"
`,S("AM"),S("Operator family"),S("Registered left type"),S("Registered right type"),S("Number")),E?_(g,`, ap.amproc::pg_catalog.regprocedure AS "%s"
`,S("Function")):_(g,`, p.proname AS "%s"
`,S("Function")),b(g,`FROM pg_catalog.pg_amproc ap
  LEFT JOIN pg_catalog.pg_opfamily of ON of.oid = ap.amprocfamily
  LEFT JOIN pg_catalog.pg_am am ON am.oid = of.opfmethod
  LEFT JOIN pg_catalog.pg_namespace ns ON of.opfnamespace = ns.oid
  LEFT JOIN pg_catalog.pg_proc p ON ap.amproc = p.oid
`),O){if(C={value:C},!D(g,O,!1,!1,null,"am.amname",null,null,C,1))return!1;C=C.value}return R&&!D(g,R,C,!1,"ns.nspname","of.opfname",null,null,null,3)||(b(g,`ORDER BY 1, 2,
  ap.amproclefttype = ap.amprocrighttype DESC,
  3, 4, 5;`),A=await y(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of support functions of operator families"),d.translate_header=!0,d.translate_columns=F,d.n_translate_columns=Ue(F),M(A,d,p.queryFout,!1,p.logfile),!0)}async function Fp(O){let R={},E,g=p.popt;if(Z(R),k(R,`SELECT oid as "%s",
  pg_catalog.pg_get_userbyid(lomowner) as "%s",
  `,S("ID"),S("Owner")),O&&(gt(R,"lomacl"),b(R,`,
  `)),_(R,`pg_catalog.obj_description(oid, 'pg_largeobject') as "%s"
FROM pg_catalog.pg_largeobject_metadata
ORDER BY oid`,S("Description")),E=await y(R.data),!E)return!1;g.nullPrint=null,g.title=r("Large objects"),g.translate_header=!0,M(E,g,p.queryFout,!1,p.logfile)}return!0}return{promise:u(),cancel:h}}function zn(n){if(!n)throw new Error(`Assertion failed (value: ${n})`)}const S=gl,In=gl,r=gl;function rr(n,e){const t=n.indexOf(e);return t===-1?null:t}const Pe=rr;function un(n){return n.length}function Qn(n,e,t){if(typeof n!="string"||typeof e!="string")throw new Error("Not a string");return n.length>t&&(n=n.slice(0,t)),e.length>t&&(e=e.slice(0,t)),n<e?-1:n>e?1:0}function se(n,e){return Qn(n,e,1/0)}function d_(n,e){const t=un(n);for(let i=0;i<t;i++)if(e.indexOf(n[i])===-1)return i;return t}function wh(n){return parseInt(n,10)}function Lo(n){return parseInt(n,10)}function xh(n){return n===" "||n==="	"||n===`
`||n==="\r"}function p_(n){return n==='"'||n==="'"}function m_(n){const e=n.charCodeAt(0);return e>=65&&e<=90}function Ue(n){return n.length}function va(n){return n.toLowerCase()}function g_(n,e){return se(n.toLowerCase(),e.toLowerCase())}function vh(n,e,t){return e}function Z(n){n.data="",n.len=0}const Io=Z;function b(n,e){n.data+=e,n.len=n.data.length}const Le=b;function _(n,e,...t){const i=et(e,...t);b(n,i)}function k(n,e,...t){Z(n),_(n,e,...t)}function Da(n,e,t,i){const s="'"+e.replace(i?/[']/g:/['\\]/g,"\\$&")+"'";b(n,s)}function Kn(n,e,t){if(Pe(e,"\\")!=null&&Bi(t)>=80100){n.len>0&&n.data[n.len-1]!=" "&&Le(n," "),Le(n,Q0),Da(n,e,Yd(t),!1);return}Da(n,e,t.encoding,t.std_strings)}function et(n,...e){let t="",i=0,s=0,o;for(;(o=n.indexOf("%",s))!==-1;){let a=0,l=!1;t+=n.slice(s,o),s=o+1;let c=n[s++];if(c==="%"&&(t+="%"),c==="*"&&(a=parseInt(e[i++],10),c=n[s++]),c==="-"&&(l=!0,c=n[s++]),c>="0"&&c<="9"&&(a=parseInt(c,10),c=n[s++]),c==="s"||c==="c"||c==="d"||c==="u"){const h=String(e[i++]),f=a-h.length;l===!1&&f>0&&(t+=" ".repeat(f)),t+=h,l===!0&&f>0&&(t+=" ".repeat(f))}}return t+=n.slice(s),t}const wo=et;function Dh(n){return n?n.dbName:null}function Bi(n){return!n||n.status===1?0:n.sversion}function Yd(n){return!n||n.status!=0?-1:n.client_encoding}function de(n){return n.rowCount}function jd(n){return n.fields.length}function Xd(n,e){return n.fields[e].name}function E_(n,e){return n.fields[e].dataTypeID}function Ke(n,e,t){return n.rows[e][t]===null?1:0}function v(n,e,t){const i=n.rows[e][t];return String(i===null?"":i)}function wn(n,e){let t,i,s,o,a;if(!n||e==null||e[0]==null)return-1;for(t=!1,s="",i=0,a=un(e);i<a;i++){let l=e[i];t?l=='"'?e[i+1]=='"'?(s+='"',i++):t=!1:s+=l:l=='"'?t=!0:(l=va(l),s+=l)}for(o=0,a=jd(n);o<a;o++)if(se(s,Xd(n,o))==0)return o;return-1}function cn(n,e,t,i){return n>=1e5?t=et("%d",n/1e4):t=et("%d.%d",Math.floor(n/1e4),Math.floor(n/100)%100),t}function xn(n,e,t,i){if(e!==0&&e!==4)throw new Error(`scan type ${e} not implemented`);const s=[],o=/^(.*);*$/;let a;for(;;){if(a=n[0][n[1]],a==null)return null;if(!xh(a))break;n[1]++}if(e===4)return n[0].slice(n[1],n[1]=n[0].length);let l="";for(;;){if(a=n[0][n[1]++],a==null)return s.length>0?null:l.match(o)[1];if(p_(a))a===s[s.length-1]?s.pop():s.push(a),a==='"'&&(l+=a);else{if(s.length===0&&xh(a))return l.match(o)[1];l+=a}}}function gl(n){return n}const T_=`Help
  \\? [commands]          show help on backslash commands
  \\h [NAME]              help on syntax of SQL commands, * for all commands

Informational
  (options: S = show system objects, + = additional detail)
  \\d[S+]                 list tables, views, and sequences
  \\d[S+]  NAME           describe table, view, sequence, or index
  \\da[S]  [PATTERN]      list aggregates
  \\dA[+]  [PATTERN]      list access methods
  \\dAc[+] [AMPTRN [TYPEPTRN]]  list operator classes
  \\dAf[+] [AMPTRN [TYPEPTRN]]  list operator families
  \\dAo[+] [AMPTRN [OPFPTRN]]   list operators of operator families
  \\dAp[+] [AMPTRN [OPFPTRN]]   list support functions of operator families
  \\db[+]  [PATTERN]      list tablespaces
  \\dc[S+] [PATTERN]      list conversions
  \\dconfig[+] [PATTERN]  list configuration parameters
  \\dC[+]  [PATTERN]      list casts
  \\dd[S]  [PATTERN]      show object descriptions not displayed elsewhere
  \\dD[S+] [PATTERN]      list domains
  \\ddp    [PATTERN]      list default privileges
  \\dE[S+] [PATTERN]      list foreign tables
  \\des[+] [PATTERN]      list foreign servers
  \\det[+] [PATTERN]      list foreign tables
  \\deu[+] [PATTERN]      list user mappings
  \\dew[+] [PATTERN]      list foreign-data wrappers
  \\df[anptw][S+] [FUNCPTRN [TYPEPTRN ...]]
                         list [only agg/normal/procedure/trigger/window] functions
  \\dF[+]  [PATTERN]      list text search configurations
  \\dFd[+] [PATTERN]      list text search dictionaries
  \\dFp[+] [PATTERN]      list text search parsers
  \\dFt[+] [PATTERN]      list text search templates
  \\dg[S+] [PATTERN]      list roles
  \\di[S+] [PATTERN]      list indexes
  \\dl[+]                 list large objects, same as \\lo_list
  \\dL[S+] [PATTERN]      list procedural languages
  \\dm[S+] [PATTERN]      list materialized views
  \\dn[S+] [PATTERN]      list schemas
  \\do[S+] [OPPTRN [TYPEPTRN [TYPEPTRN]]]
                         list operators
  \\dO[S+] [PATTERN]      list collations
  \\dp[S]  [PATTERN]      list table, view, and sequence access privileges
  \\dP[itn+] [PATTERN]    list [only index/table] partitioned relations [n=nested]
  \\drds [ROLEPTRN [DBPTRN]] list per-database role settings
  \\drg[S] [PATTERN]      list role grants
  \\dRp[+] [PATTERN]      list replication publications
  \\dRs[+] [PATTERN]      list replication subscriptions
  \\ds[S+] [PATTERN]      list sequences
  \\dt[S+] [PATTERN]      list tables
  \\dT[S+] [PATTERN]      list data types
  \\du[S+] [PATTERN]      list roles
  \\dv[S+] [PATTERN]      list views
  \\dx[+]  [PATTERN]      list extensions
  \\dX     [PATTERN]      list extended statistics
  \\dy[+]  [PATTERN]      list event triggers
  \\l[+]   [PATTERN]      list databases
  \\lo_list[+]            list large objects
  \\sf[+]  FUNCNAME       show a function's definition
  \\sv[+]  VIEWNAME       show a view's definition
  \\z[S]   [PATTERN]      same as \\dp
`,Di=[["ABORT","abort the current transaction","sql-abort",S_],["ALTER AGGREGATE","change the definition of an aggregate function","sql-alteraggregate",A_],["ALTER COLLATION","change the definition of a collation","sql-altercollation",R_],["ALTER CONVERSION","change the definition of a conversion","sql-alterconversion",__],["ALTER DATABASE","change a database","sql-alterdatabase",O_],["ALTER DEFAULT PRIVILEGES","define default access privileges","sql-alterdefaultprivileges",N_],["ALTER DOMAIN","change the definition of a domain","sql-alterdomain",b_],["ALTER EVENT TRIGGER","change the definition of an event trigger","sql-altereventtrigger",y_],["ALTER EXTENSION","change the definition of an extension","sql-alterextension",C_],["ALTER FOREIGN DATA WRAPPER","change the definition of a foreign-data wrapper","sql-alterforeigndatawrapper",L_],["ALTER FOREIGN TABLE","change the definition of a foreign table","sql-alterforeigntable",I_],["ALTER FUNCTION","change the definition of a function","sql-alterfunction",w_],["ALTER GROUP","change role name or membership","sql-altergroup",x_],["ALTER INDEX","change the definition of an index","sql-alterindex",v_],["ALTER LANGUAGE","change the definition of a procedural language","sql-alterlanguage",D_],["ALTER LARGE OBJECT","change the definition of a large object","sql-alterlargeobject",k_],["ALTER MATERIALIZED VIEW","change the definition of a materialized view","sql-altermaterializedview",P_],["ALTER OPERATOR","change the definition of an operator","sql-alteroperator",M_],["ALTER OPERATOR CLASS","change the definition of an operator class","sql-alteropclass",F_],["ALTER OPERATOR FAMILY","change the definition of an operator family","sql-alteropfamily",U_],["ALTER POLICY","change the definition of a row-level security policy","sql-alterpolicy",B_],["ALTER PROCEDURE","change the definition of a procedure","sql-alterprocedure",H_],["ALTER PUBLICATION","change the definition of a publication","sql-alterpublication",W_],["ALTER ROLE","change a database role","sql-alterrole",G_],["ALTER ROUTINE","change the definition of a routine","sql-alterroutine",V_],["ALTER RULE","change the definition of a rule","sql-alterrule",q_],["ALTER SCHEMA","change the definition of a schema","sql-alterschema",Y_],["ALTER SEQUENCE","change the definition of a sequence generator","sql-altersequence",j_],["ALTER SERVER","change the definition of a foreign server","sql-alterserver",X_],["ALTER STATISTICS","change the definition of an extended statistics object","sql-alterstatistics",z_],["ALTER SUBSCRIPTION","change the definition of a subscription","sql-altersubscription",K_],["ALTER SYSTEM","change a server configuration parameter","sql-altersystem",$_],["ALTER TABLE","change the definition of a table","sql-altertable",J_],["ALTER TABLESPACE","change the definition of a tablespace","sql-altertablespace",Q_],["ALTER TEXT SEARCH CONFIGURATION","change the definition of a text search configuration","sql-altertsconfig",Z_],["ALTER TEXT SEARCH DICTIONARY","change the definition of a text search dictionary","sql-altertsdictionary",eO],["ALTER TEXT SEARCH PARSER","change the definition of a text search parser","sql-altertsparser",tO],["ALTER TEXT SEARCH TEMPLATE","change the definition of a text search template","sql-altertstemplate",nO],["ALTER TRIGGER","change the definition of a trigger","sql-altertrigger",iO],["ALTER TYPE","change the definition of a type","sql-altertype",sO],["ALTER USER","change a database role","sql-alteruser",rO],["ALTER USER MAPPING","change the definition of a user mapping","sql-alterusermapping",oO],["ALTER VIEW","change the definition of a view","sql-alterview",aO],["ANALYZE","collect statistics about a database","sql-analyze",lO],["BEGIN","start a transaction block","sql-begin",cO],["CALL","invoke a procedure","sql-call",hO],["CHECKPOINT","force a write-ahead log checkpoint","sql-checkpoint",fO],["CLOSE","close a cursor","sql-close",uO],["CLUSTER","cluster a table according to an index","sql-cluster",dO],["COMMENT","define or change the comment of an object","sql-comment",pO],["COMMIT","commit the current transaction","sql-commit",mO],["COMMIT PREPARED","commit a transaction that was earlier prepared for two-phase commit","sql-commit-prepared",gO],["COPY","copy data between a file and a table","sql-copy",EO],["CREATE ACCESS METHOD","define a new access method","sql-create-access-method",TO],["CREATE AGGREGATE","define a new aggregate function","sql-createaggregate",SO],["CREATE CAST","define a new cast","sql-createcast",AO],["CREATE COLLATION","define a new collation","sql-createcollation",RO],["CREATE CONVERSION","define a new encoding conversion","sql-createconversion",_O],["CREATE DATABASE","create a new database","sql-createdatabase",OO],["CREATE DOMAIN","define a new domain","sql-createdomain",NO],["CREATE EVENT TRIGGER","define a new event trigger","sql-createeventtrigger",bO],["CREATE EXTENSION","install an extension","sql-createextension",yO],["CREATE FOREIGN DATA WRAPPER","define a new foreign-data wrapper","sql-createforeigndatawrapper",CO],["CREATE FOREIGN TABLE","define a new foreign table","sql-createforeigntable",LO],["CREATE FUNCTION","define a new function","sql-createfunction",IO],["CREATE GROUP","define a new database role","sql-creategroup",wO],["CREATE INDEX","define a new index","sql-createindex",xO],["CREATE LANGUAGE","define a new procedural language","sql-createlanguage",vO],["CREATE MATERIALIZED VIEW","define a new materialized view","sql-creatematerializedview",DO],["CREATE OPERATOR","define a new operator","sql-createoperator",kO],["CREATE OPERATOR CLASS","define a new operator class","sql-createopclass",PO],["CREATE OPERATOR FAMILY","define a new operator family","sql-createopfamily",MO],["CREATE POLICY","define a new row-level security policy for a table","sql-createpolicy",FO],["CREATE PROCEDURE","define a new procedure","sql-createprocedure",UO],["CREATE PUBLICATION","define a new publication","sql-createpublication",BO],["CREATE ROLE","define a new database role","sql-createrole",HO],["CREATE RULE","define a new rewrite rule","sql-createrule",WO],["CREATE SCHEMA","define a new schema","sql-createschema",GO],["CREATE SEQUENCE","define a new sequence generator","sql-createsequence",VO],["CREATE SERVER","define a new foreign server","sql-createserver",qO],["CREATE STATISTICS","define extended statistics","sql-createstatistics",YO],["CREATE SUBSCRIPTION","define a new subscription","sql-createsubscription",jO],["CREATE TABLE","define a new table","sql-createtable",XO],["CREATE TABLE AS","define a new table from the results of a query","sql-createtableas",zO],["CREATE TABLESPACE","define a new tablespace","sql-createtablespace",KO],["CREATE TEXT SEARCH CONFIGURATION","define a new text search configuration","sql-createtsconfig",$O],["CREATE TEXT SEARCH DICTIONARY","define a new text search dictionary","sql-createtsdictionary",JO],["CREATE TEXT SEARCH PARSER","define a new text search parser","sql-createtsparser",QO],["CREATE TEXT SEARCH TEMPLATE","define a new text search template","sql-createtstemplate",ZO],["CREATE TRANSFORM","define a new transform","sql-createtransform",eN],["CREATE TRIGGER","define a new trigger","sql-createtrigger",tN],["CREATE TYPE","define a new data type","sql-createtype",nN],["CREATE USER","define a new database role","sql-createuser",iN],["CREATE USER MAPPING","define a new mapping of a user to a foreign server","sql-createusermapping",sN],["CREATE VIEW","define a new view","sql-createview",rN],["DEALLOCATE","deallocate a prepared statement","sql-deallocate",oN],["DECLARE","define a cursor","sql-declare",aN],["DELETE","delete rows of a table","sql-delete",lN],["DISCARD","discard session state","sql-discard",cN],["DO","execute an anonymous code block","sql-do",hN],["DROP ACCESS METHOD","remove an access method","sql-drop-access-method",fN],["DROP AGGREGATE","remove an aggregate function","sql-dropaggregate",uN],["DROP CAST","remove a cast","sql-dropcast",dN],["DROP COLLATION","remove a collation","sql-dropcollation",pN],["DROP CONVERSION","remove a conversion","sql-dropconversion",mN],["DROP DATABASE","remove a database","sql-dropdatabase",gN],["DROP DOMAIN","remove a domain","sql-dropdomain",EN],["DROP EVENT TRIGGER","remove an event trigger","sql-dropeventtrigger",TN],["DROP EXTENSION","remove an extension","sql-dropextension",SN],["DROP FOREIGN DATA WRAPPER","remove a foreign-data wrapper","sql-dropforeigndatawrapper",AN],["DROP FOREIGN TABLE","remove a foreign table","sql-dropforeigntable",RN],["DROP FUNCTION","remove a function","sql-dropfunction",_N],["DROP GROUP","remove a database role","sql-dropgroup",ON],["DROP INDEX","remove an index","sql-dropindex",NN],["DROP LANGUAGE","remove a procedural language","sql-droplanguage",bN],["DROP MATERIALIZED VIEW","remove a materialized view","sql-dropmaterializedview",yN],["DROP OPERATOR","remove an operator","sql-dropoperator",CN],["DROP OPERATOR CLASS","remove an operator class","sql-dropopclass",LN],["DROP OPERATOR FAMILY","remove an operator family","sql-dropopfamily",IN],["DROP OWNED","remove database objects owned by a database role","sql-drop-owned",wN],["DROP POLICY","remove a row-level security policy from a table","sql-droppolicy",xN],["DROP PROCEDURE","remove a procedure","sql-dropprocedure",vN],["DROP PUBLICATION","remove a publication","sql-droppublication",DN],["DROP ROLE","remove a database role","sql-droprole",kN],["DROP ROUTINE","remove a routine","sql-droproutine",PN],["DROP RULE","remove a rewrite rule","sql-droprule",MN],["DROP SCHEMA","remove a schema","sql-dropschema",FN],["DROP SEQUENCE","remove a sequence","sql-dropsequence",UN],["DROP SERVER","remove a foreign server descriptor","sql-dropserver",BN],["DROP STATISTICS","remove extended statistics","sql-dropstatistics",HN],["DROP SUBSCRIPTION","remove a subscription","sql-dropsubscription",WN],["DROP TABLE","remove a table","sql-droptable",GN],["DROP TABLESPACE","remove a tablespace","sql-droptablespace",VN],["DROP TEXT SEARCH CONFIGURATION","remove a text search configuration","sql-droptsconfig",qN],["DROP TEXT SEARCH DICTIONARY","remove a text search dictionary","sql-droptsdictionary",YN],["DROP TEXT SEARCH PARSER","remove a text search parser","sql-droptsparser",jN],["DROP TEXT SEARCH TEMPLATE","remove a text search template","sql-droptstemplate",XN],["DROP TRANSFORM","remove a transform","sql-droptransform",zN],["DROP TRIGGER","remove a trigger","sql-droptrigger",KN],["DROP TYPE","remove a data type","sql-droptype",$N],["DROP USER","remove a database role","sql-dropuser",JN],["DROP USER MAPPING","remove a user mapping for a foreign server","sql-dropusermapping",QN],["DROP VIEW","remove a view","sql-dropview",ZN],["END","commit the current transaction","sql-end",eb],["EXECUTE","execute a prepared statement","sql-execute",tb],["EXPLAIN","show the execution plan of a statement","sql-explain",nb],["FETCH","retrieve rows from a query using a cursor","sql-fetch",ib],["GRANT","define access privileges","sql-grant",sb],["IMPORT FOREIGN SCHEMA","import table definitions from a foreign server","sql-importforeignschema",rb],["INSERT","create new rows in a table","sql-insert",ob],["LISTEN","listen for a notification","sql-listen",ab],["LOAD","load a shared library file","sql-load",lb],["LOCK","lock a table","sql-lock",cb],["MERGE","conditionally insert, update, or delete rows of a table","sql-merge",hb],["MOVE","position a cursor","sql-move",fb],["NOTIFY","generate a notification","sql-notify",ub],["PREPARE","prepare a statement for execution","sql-prepare",db],["PREPARE TRANSACTION","prepare the current transaction for two-phase commit","sql-prepare-transaction",pb],["REASSIGN OWNED","change the ownership of database objects owned by a database role","sql-reassign-owned",mb],["REFRESH MATERIALIZED VIEW","replace the contents of a materialized view","sql-refreshmaterializedview",gb],["REINDEX","rebuild indexes","sql-reindex",Eb],["RELEASE SAVEPOINT","release a previously defined savepoint","sql-release-savepoint",Tb],["RESET","restore the value of a run-time parameter to the default value","sql-reset",Sb],["REVOKE","remove access privileges","sql-revoke",Ab],["ROLLBACK","abort the current transaction","sql-rollback",Rb],["ROLLBACK PREPARED","cancel a transaction that was earlier prepared for two-phase commit","sql-rollback-prepared",_b],["ROLLBACK TO SAVEPOINT","roll back to a savepoint","sql-rollback-to",Ob],["SAVEPOINT","define a new savepoint within the current transaction","sql-savepoint",Nb],["SECURITY LABEL","define or change a security label applied to an object","sql-security-label",bb],["SELECT","retrieve rows from a table or view","sql-select",yb],["SELECT INTO","define a new table from the results of a query","sql-selectinto",Cb],["SET","change a run-time parameter","sql-set",Lb],["SET CONSTRAINTS","set constraint check timing for the current transaction","sql-set-constraints",Ib],["SET ROLE","set the current user identifier of the current session","sql-set-role",wb],["SET SESSION AUTHORIZATION","set the session user identifier and the current user identifier of the current session","sql-set-session-authorization",xb],["SET TRANSACTION","set the characteristics of the current transaction","sql-set-transaction",vb],["SHOW","show the value of a run-time parameter","sql-show",Db],["START TRANSACTION","start a transaction block","sql-start-transaction",kb],["TABLE","retrieve rows from a table or view","sql-select",Pb],["TRUNCATE","empty a table or set of tables","sql-truncate",Mb],["UNLISTEN","stop listening for a notification","sql-unlisten",Fb],["UPDATE","update rows of a table","sql-update",Ub],["VACUUM","garbage-collect and optionally analyze a database","sql-vacuum",Bb],["VALUES","compute a set of rows","sql-values",Hb],["WITH","retrieve rows from a table or view","sql-select",Wb]];function S_(n){_(n,"ABORT [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function A_(n){_(n,`ALTER AGGREGATE %s ( %s ) RENAME TO %s
ALTER AGGREGATE %s ( %s )
                OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER AGGREGATE %s ( %s ) SET SCHEMA %s

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,r("name"),r("aggregate_signature"),r("new_name"),r("name"),r("aggregate_signature"),r("new_owner"),r("name"),r("aggregate_signature"),r("new_schema"),r("where aggregate_signature is:"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"))}function R_(n){_(n,`ALTER COLLATION %s REFRESH VERSION

ALTER COLLATION %s RENAME TO %s
ALTER COLLATION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER COLLATION %s SET SCHEMA %s`,r("name"),r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("new_schema"))}function __(n){_(n,`ALTER CONVERSION %s RENAME TO %s
ALTER CONVERSION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER CONVERSION %s SET SCHEMA %s`,r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("new_schema"))}function O_(n){_(n,`ALTER DATABASE %s [ [ WITH ] %s [ ... ] ]

%s

    ALLOW_CONNECTIONS %s
    CONNECTION LIMIT %s
    IS_TEMPLATE %s

ALTER DATABASE %s RENAME TO %s

ALTER DATABASE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER DATABASE %s SET TABLESPACE %s

ALTER DATABASE %s REFRESH COLLATION VERSION

ALTER DATABASE %s SET %s { TO | = } { %s | DEFAULT }
ALTER DATABASE %s SET %s FROM CURRENT
ALTER DATABASE %s RESET %s
ALTER DATABASE %s RESET ALL`,r("name"),r("option"),r("where option can be:"),r("allowconn"),r("connlimit"),r("istemplate"),r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("new_tablespace"),r("name"),r("name"),r("configuration_parameter"),r("value"),r("name"),r("configuration_parameter"),r("name"),r("configuration_parameter"),r("name"))}function N_(n){_(n,`ALTER DEFAULT PRIVILEGES
    [ FOR { ROLE | USER } %s [, ...] ]
    [ IN SCHEMA %s [, ...] ]
    %s

%s

GRANT { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER | MAINTAIN }
    [, ...] | ALL [ PRIVILEGES ] }
    ON TABLES
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON SEQUENCES
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { EXECUTE | ALL [ PRIVILEGES ] }
    ON { FUNCTIONS | ROUTINES }
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON TYPES
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { { USAGE | CREATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON SCHEMAS
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

REVOKE [ GRANT OPTION FOR ]
    { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER | MAINTAIN }
    [, ...] | ALL [ PRIVILEGES ] }
    ON TABLES
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON SEQUENCES
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { EXECUTE | ALL [ PRIVILEGES ] }
    ON { FUNCTIONS | ROUTINES }
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON TYPES
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { USAGE | CREATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON SCHEMAS
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]`,r("target_role"),r("schema_name"),r("abbreviated_grant_or_revoke"),r("where abbreviated_grant_or_revoke is one of:"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"))}function b_(n){_(n,`ALTER DOMAIN %s
    { SET DEFAULT %s | DROP DEFAULT }
ALTER DOMAIN %s
    { SET | DROP } NOT NULL
ALTER DOMAIN %s
    ADD %s [ NOT VALID ]
ALTER DOMAIN %s
    DROP CONSTRAINT [ IF EXISTS ] %s [ RESTRICT | CASCADE ]
ALTER DOMAIN %s
     RENAME CONSTRAINT %s TO %s
ALTER DOMAIN %s
    VALIDATE CONSTRAINT %s
ALTER DOMAIN %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER DOMAIN %s
    RENAME TO %s
ALTER DOMAIN %s
    SET SCHEMA %s`,r("name"),r("expression"),r("name"),r("name"),r("domain_constraint"),r("name"),r("constraint_name"),r("name"),r("constraint_name"),r("new_constraint_name"),r("name"),r("constraint_name"),r("name"),r("new_owner"),r("name"),r("new_name"),r("name"),r("new_schema"))}function y_(n){_(n,`ALTER EVENT TRIGGER %s DISABLE
ALTER EVENT TRIGGER %s ENABLE [ REPLICA | ALWAYS ]
ALTER EVENT TRIGGER %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER EVENT TRIGGER %s RENAME TO %s`,r("name"),r("name"),r("name"),r("new_owner"),r("name"),r("new_name"))}function C_(n){_(n,`ALTER EXTENSION %s UPDATE [ TO %s ]
ALTER EXTENSION %s SET SCHEMA %s
ALTER EXTENSION %s ADD %s
ALTER EXTENSION %s DROP %s

%s

  ACCESS METHOD %s |
  AGGREGATE %s ( %s ) |
  CAST (%s AS %s) |
  COLLATION %s |
  CONVERSION %s |
  DOMAIN %s |
  EVENT TRIGGER %s |
  FOREIGN DATA WRAPPER %s |
  FOREIGN TABLE %s |
  FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  MATERIALIZED VIEW %s |
  OPERATOR %s (%s, %s) |
  OPERATOR CLASS %s USING %s |
  OPERATOR FAMILY %s USING %s |
  [ PROCEDURAL ] LANGUAGE %s |
  PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  SCHEMA %s |
  SEQUENCE %s |
  SERVER %s |
  TABLE %s |
  TEXT SEARCH CONFIGURATION %s |
  TEXT SEARCH DICTIONARY %s |
  TEXT SEARCH PARSER %s |
  TEXT SEARCH TEMPLATE %s |
  TRANSFORM FOR %s LANGUAGE %s |
  TYPE %s |
  VIEW %s

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,r("name"),r("new_version"),r("name"),r("new_schema"),r("name"),r("member_object"),r("name"),r("member_object"),r("where member_object is:"),r("object_name"),r("aggregate_name"),r("aggregate_signature"),r("source_type"),r("target_type"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("function_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("operator_name"),r("left_type"),r("right_type"),r("object_name"),r("index_method"),r("object_name"),r("index_method"),r("object_name"),r("procedure_name"),r("argmode"),r("argname"),r("argtype"),r("routine_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("type_name"),r("lang_name"),r("object_name"),r("object_name"),r("and aggregate_signature is:"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"))}function L_(n){_(n,`ALTER FOREIGN DATA WRAPPER %s
    [ HANDLER %s | NO HANDLER ]
    [ VALIDATOR %s | NO VALIDATOR ]
    [ OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ]) ]
ALTER FOREIGN DATA WRAPPER %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER FOREIGN DATA WRAPPER %s RENAME TO %s`,r("name"),r("handler_function"),r("validator_function"),r("option"),r("value"),r("name"),r("new_owner"),r("name"),r("new_name"))}function I_(n){_(n,`ALTER FOREIGN TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    %s [, ... ]
ALTER FOREIGN TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    RENAME [ COLUMN ] %s TO %s
ALTER FOREIGN TABLE [ IF EXISTS ] %s
    RENAME TO %s
ALTER FOREIGN TABLE [ IF EXISTS ] %s
    SET SCHEMA %s

%s

    ADD [ COLUMN ] %s %s [ COLLATE %s ] [ %s [ ... ] ]
    DROP [ COLUMN ] [ IF EXISTS ] %s [ RESTRICT | CASCADE ]
    ALTER [ COLUMN ] %s [ SET DATA ] TYPE %s [ COLLATE %s ]
    ALTER [ COLUMN ] %s SET DEFAULT %s
    ALTER [ COLUMN ] %s DROP DEFAULT
    ALTER [ COLUMN ] %s { SET | DROP } NOT NULL
    ALTER [ COLUMN ] %s SET STATISTICS %s
    ALTER [ COLUMN ] %s SET ( %s = %s [, ... ] )
    ALTER [ COLUMN ] %s RESET ( %s [, ... ] )
    ALTER [ COLUMN ] %s SET STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT }
    ALTER [ COLUMN ] %s OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ])
    ADD %s [ NOT VALID ]
    VALIDATE CONSTRAINT %s
    DROP CONSTRAINT [ IF EXISTS ]  %s [ RESTRICT | CASCADE ]
    DISABLE TRIGGER [ %s | ALL | USER ]
    ENABLE TRIGGER [ %s | ALL | USER ]
    ENABLE REPLICA TRIGGER %s
    ENABLE ALWAYS TRIGGER %s
    SET WITHOUT OIDS
    INHERIT %s
    NO INHERIT %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
    OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ])`,r("name"),r("action"),r("name"),r("column_name"),r("new_column_name"),r("name"),r("new_name"),r("name"),r("new_schema"),r("where action is one of:"),r("column_name"),r("data_type"),r("collation"),r("column_constraint"),r("column_name"),r("column_name"),r("data_type"),r("collation"),r("column_name"),r("expression"),r("column_name"),r("column_name"),r("column_name"),r("integer"),r("column_name"),r("attribute_option"),r("value"),r("column_name"),r("attribute_option"),r("column_name"),r("column_name"),r("option"),r("value"),r("table_constraint"),r("constraint_name"),r("constraint_name"),r("trigger_name"),r("trigger_name"),r("trigger_name"),r("trigger_name"),r("parent_table"),r("parent_table"),r("new_owner"),r("option"),r("value"))}function w_(n){_(n,`ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    %s [ ... ] [ RESTRICT ]
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    RENAME TO %s
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    SET SCHEMA %s
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    [ NO ] DEPENDS ON EXTENSION %s

%s

    CALLED ON NULL INPUT | RETURNS NULL ON NULL INPUT | STRICT
    IMMUTABLE | STABLE | VOLATILE
    [ NOT ] LEAKPROOF
    [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    PARALLEL { UNSAFE | RESTRICTED | SAFE }
    COST %s
    ROWS %s
    SUPPORT %s
    SET %s { TO | = } { %s | DEFAULT }
    SET %s FROM CURRENT
    RESET %s
    RESET ALL`,r("name"),r("argmode"),r("argname"),r("argtype"),r("action"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_name"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_owner"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_schema"),r("name"),r("argmode"),r("argname"),r("argtype"),r("extension_name"),r("where action is one of:"),r("execution_cost"),r("result_rows"),r("support_function"),r("configuration_parameter"),r("value"),r("configuration_parameter"),r("configuration_parameter"))}function x_(n){_(n,`ALTER GROUP %s ADD USER %s [, ... ]
ALTER GROUP %s DROP USER %s [, ... ]

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER

ALTER GROUP %s RENAME TO %s`,r("role_specification"),r("user_name"),r("role_specification"),r("user_name"),r("where role_specification can be:"),r("role_name"),r("group_name"),r("new_name"))}function v_(n){_(n,`ALTER INDEX [ IF EXISTS ] %s RENAME TO %s
ALTER INDEX [ IF EXISTS ] %s SET TABLESPACE %s
ALTER INDEX %s ATTACH PARTITION %s
ALTER INDEX %s [ NO ] DEPENDS ON EXTENSION %s
ALTER INDEX [ IF EXISTS ] %s SET ( %s [= %s] [, ... ] )
ALTER INDEX [ IF EXISTS ] %s RESET ( %s [, ... ] )
ALTER INDEX [ IF EXISTS ] %s ALTER [ COLUMN ] %s
    SET STATISTICS %s
ALTER INDEX ALL IN TABLESPACE %s [ OWNED BY %s [, ... ] ]
    SET TABLESPACE %s [ NOWAIT ]`,r("name"),r("new_name"),r("name"),r("tablespace_name"),r("name"),r("index_name"),r("name"),r("extension_name"),r("name"),r("storage_parameter"),r("value"),r("name"),r("storage_parameter"),r("name"),r("column_number"),r("integer"),r("name"),r("role_name"),r("new_tablespace"))}function D_(n){_(n,`ALTER [ PROCEDURAL ] LANGUAGE %s RENAME TO %s
ALTER [ PROCEDURAL ] LANGUAGE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,r("name"),r("new_name"),r("name"),r("new_owner"))}function k_(n){_(n,"ALTER LARGE OBJECT %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }",r("large_object_oid"),r("new_owner"))}function P_(n){_(n,`ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    %s [, ... ]
ALTER MATERIALIZED VIEW %s
    [ NO ] DEPENDS ON EXTENSION %s
ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    RENAME [ COLUMN ] %s TO %s
ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    RENAME TO %s
ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    SET SCHEMA %s
ALTER MATERIALIZED VIEW ALL IN TABLESPACE %s [ OWNED BY %s [, ... ] ]
    SET TABLESPACE %s [ NOWAIT ]

%s

    ALTER [ COLUMN ] %s SET STATISTICS %s
    ALTER [ COLUMN ] %s SET ( %s = %s [, ... ] )
    ALTER [ COLUMN ] %s RESET ( %s [, ... ] )
    ALTER [ COLUMN ] %s SET STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT }
    ALTER [ COLUMN ] %s SET COMPRESSION %s
    CLUSTER ON %s
    SET WITHOUT CLUSTER
    SET ACCESS METHOD %s
    SET TABLESPACE %s
    SET ( %s [= %s] [, ... ] )
    RESET ( %s [, ... ] )
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,r("name"),r("action"),r("name"),r("extension_name"),r("name"),r("column_name"),r("new_column_name"),r("name"),r("new_name"),r("name"),r("new_schema"),r("name"),r("role_name"),r("new_tablespace"),r("where action is one of:"),r("column_name"),r("integer"),r("column_name"),r("attribute_option"),r("value"),r("column_name"),r("attribute_option"),r("column_name"),r("column_name"),r("compression_method"),r("index_name"),r("new_access_method"),r("new_tablespace"),r("storage_parameter"),r("value"),r("storage_parameter"),r("new_owner"))}function M_(n){_(n,`ALTER OPERATOR %s ( { %s | NONE } , %s )
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER OPERATOR %s ( { %s | NONE } , %s )
    SET SCHEMA %s

ALTER OPERATOR %s ( { %s | NONE } , %s )
    SET ( {  RESTRICT = { %s | NONE }
           | JOIN = { %s | NONE }
           | COMMUTATOR = %s
           | NEGATOR = %s
           | HASHES
           | MERGES
          } [, ... ] )`,r("name"),r("left_type"),r("right_type"),r("new_owner"),r("name"),r("left_type"),r("right_type"),r("new_schema"),r("name"),r("left_type"),r("right_type"),r("res_proc"),r("join_proc"),r("com_op"),r("neg_op"))}function F_(n){_(n,`ALTER OPERATOR CLASS %s USING %s
    RENAME TO %s

ALTER OPERATOR CLASS %s USING %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER OPERATOR CLASS %s USING %s
    SET SCHEMA %s`,r("name"),r("index_method"),r("new_name"),r("name"),r("index_method"),r("new_owner"),r("name"),r("index_method"),r("new_schema"))}function U_(n){_(n,`ALTER OPERATOR FAMILY %s USING %s ADD
  {  OPERATOR %s %s ( %s, %s )
              [ FOR SEARCH | FOR ORDER BY %s ]
   | FUNCTION %s [ ( %s [ , %s ] ) ]
              %s [ ( %s [, ...] ) ]
  } [, ... ]

ALTER OPERATOR FAMILY %s USING %s DROP
  {  OPERATOR %s ( %s [ , %s ] )
   | FUNCTION %s ( %s [ , %s ] )
  } [, ... ]

ALTER OPERATOR FAMILY %s USING %s
    RENAME TO %s

ALTER OPERATOR FAMILY %s USING %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER OPERATOR FAMILY %s USING %s
    SET SCHEMA %s`,r("name"),r("index_method"),r("strategy_number"),r("operator_name"),r("op_type"),r("op_type"),r("sort_family_name"),r("support_number"),r("op_type"),r("op_type"),r("function_name"),r("argument_type"),r("name"),r("index_method"),r("strategy_number"),r("op_type"),r("op_type"),r("support_number"),r("op_type"),r("op_type"),r("name"),r("index_method"),r("new_name"),r("name"),r("index_method"),r("new_owner"),r("name"),r("index_method"),r("new_schema"))}function B_(n){_(n,`ALTER POLICY %s ON %s RENAME TO %s

ALTER POLICY %s ON %s
    [ TO { %s | PUBLIC | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...] ]
    [ USING ( %s ) ]
    [ WITH CHECK ( %s ) ]`,r("name"),r("table_name"),r("new_name"),r("name"),r("table_name"),r("role_name"),r("using_expression"),r("check_expression"))}function H_(n){_(n,`ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    %s [ ... ] [ RESTRICT ]
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    RENAME TO %s
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    SET SCHEMA %s
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    [ NO ] DEPENDS ON EXTENSION %s

%s

    [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    SET %s { TO | = } { %s | DEFAULT }
    SET %s FROM CURRENT
    RESET %s
    RESET ALL`,r("name"),r("argmode"),r("argname"),r("argtype"),r("action"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_name"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_owner"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_schema"),r("name"),r("argmode"),r("argname"),r("argtype"),r("extension_name"),r("where action is one of:"),r("configuration_parameter"),r("value"),r("configuration_parameter"),r("configuration_parameter"))}function W_(n){_(n,`ALTER PUBLICATION %s ADD %s [, ...]
ALTER PUBLICATION %s SET %s [, ...]
ALTER PUBLICATION %s DROP %s [, ...]
ALTER PUBLICATION %s SET ( %s [= %s] [, ... ] )
ALTER PUBLICATION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER PUBLICATION %s RENAME TO %s

%s

    TABLE [ ONLY ] %s [ * ] [ ( %s [, ... ] ) ] [ WHERE ( %s ) ] [, ... ]
    TABLES IN SCHEMA { %s | CURRENT_SCHEMA } [, ... ]`,r("name"),r("publication_object"),r("name"),r("publication_object"),r("name"),r("publication_object"),r("name"),r("publication_parameter"),r("value"),r("name"),r("new_owner"),r("name"),r("new_name"),r("where publication_object is one of:"),r("table_name"),r("column_name"),r("expression"),r("schema_name"))}function G_(n){_(n,`ALTER ROLE %s [ WITH ] %s [ ... ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'

ALTER ROLE %s RENAME TO %s

ALTER ROLE { %s | ALL } [ IN DATABASE %s ] SET %s { TO | = } { %s | DEFAULT }
ALTER ROLE { %s | ALL } [ IN DATABASE %s ] SET %s FROM CURRENT
ALTER ROLE { %s | ALL } [ IN DATABASE %s ] RESET %s
ALTER ROLE { %s | ALL } [ IN DATABASE %s ] RESET ALL

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,r("role_specification"),r("option"),r("where option can be:"),r("connlimit"),r("password"),r("timestamp"),r("name"),r("new_name"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("value"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("role_specification"),r("database_name"),r("where role_specification can be:"),r("role_name"))}function V_(n){_(n,`ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    %s [ ... ] [ RESTRICT ]
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    RENAME TO %s
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    SET SCHEMA %s
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    [ NO ] DEPENDS ON EXTENSION %s

%s

    IMMUTABLE | STABLE | VOLATILE
    [ NOT ] LEAKPROOF
    [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    PARALLEL { UNSAFE | RESTRICTED | SAFE }
    COST %s
    ROWS %s
    SET %s { TO | = } { %s | DEFAULT }
    SET %s FROM CURRENT
    RESET %s
    RESET ALL`,r("name"),r("argmode"),r("argname"),r("argtype"),r("action"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_name"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_owner"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_schema"),r("name"),r("argmode"),r("argname"),r("argtype"),r("extension_name"),r("where action is one of:"),r("execution_cost"),r("result_rows"),r("configuration_parameter"),r("value"),r("configuration_parameter"),r("configuration_parameter"))}function q_(n){_(n,"ALTER RULE %s ON %s RENAME TO %s",r("name"),r("table_name"),r("new_name"))}function Y_(n){_(n,`ALTER SCHEMA %s RENAME TO %s
ALTER SCHEMA %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,r("name"),r("new_name"),r("name"),r("new_owner"))}function j_(n){_(n,`ALTER SEQUENCE [ IF EXISTS ] %s
    [ AS %s ]
    [ INCREMENT [ BY ] %s ]
    [ MINVALUE %s | NO MINVALUE ] [ MAXVALUE %s | NO MAXVALUE ]
    [ START [ WITH ] %s ]
    [ RESTART [ [ WITH ] %s ] ]
    [ CACHE %s ] [ [ NO ] CYCLE ]
    [ OWNED BY { %s.%s | NONE } ]
ALTER SEQUENCE [ IF EXISTS ] %s SET { LOGGED | UNLOGGED }
ALTER SEQUENCE [ IF EXISTS ] %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER SEQUENCE [ IF EXISTS ] %s RENAME TO %s
ALTER SEQUENCE [ IF EXISTS ] %s SET SCHEMA %s`,r("name"),r("data_type"),r("increment"),r("minvalue"),r("maxvalue"),r("start"),r("restart"),r("cache"),r("table_name"),r("column_name"),r("name"),r("name"),r("new_owner"),r("name"),r("new_name"),r("name"),r("new_schema"))}function X_(n){_(n,`ALTER SERVER %s [ VERSION '%s' ]
    [ OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ] ) ]
ALTER SERVER %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER SERVER %s RENAME TO %s`,r("name"),r("new_version"),r("option"),r("value"),r("name"),r("new_owner"),r("name"),r("new_name"))}function z_(n){_(n,`ALTER STATISTICS %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER STATISTICS %s RENAME TO %s
ALTER STATISTICS %s SET SCHEMA %s
ALTER STATISTICS %s SET STATISTICS { %s | DEFAULT }`,r("name"),r("new_owner"),r("name"),r("new_name"),r("name"),r("new_schema"),r("name"),r("new_target"))}function K_(n){_(n,`ALTER SUBSCRIPTION %s CONNECTION '%s'
ALTER SUBSCRIPTION %s SET PUBLICATION %s [, ...] [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s ADD PUBLICATION %s [, ...] [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s DROP PUBLICATION %s [, ...] [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s REFRESH PUBLICATION [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s ENABLE
ALTER SUBSCRIPTION %s DISABLE
ALTER SUBSCRIPTION %s SET ( %s [= %s] [, ... ] )
ALTER SUBSCRIPTION %s SKIP ( %s = %s )
ALTER SUBSCRIPTION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER SUBSCRIPTION %s RENAME TO %s`,r("name"),r("conninfo"),r("name"),r("publication_name"),r("publication_option"),r("value"),r("name"),r("publication_name"),r("publication_option"),r("value"),r("name"),r("publication_name"),r("publication_option"),r("value"),r("name"),r("refresh_option"),r("value"),r("name"),r("name"),r("name"),r("subscription_parameter"),r("value"),r("name"),r("skip_option"),r("value"),r("name"),r("new_owner"),r("name"),r("new_name"))}function $_(n){_(n,`ALTER SYSTEM SET %s { TO | = } { %s | '%s' | DEFAULT }

ALTER SYSTEM RESET %s
ALTER SYSTEM RESET ALL`,r("configuration_parameter"),r("value"),r("value"),r("configuration_parameter"))}function J_(n){_(n,`ALTER TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    %s [, ... ]
ALTER TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    RENAME [ COLUMN ] %s TO %s
ALTER TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    RENAME CONSTRAINT %s TO %s
ALTER TABLE [ IF EXISTS ] %s
    RENAME TO %s
ALTER TABLE [ IF EXISTS ] %s
    SET SCHEMA %s
ALTER TABLE ALL IN TABLESPACE %s [ OWNED BY %s [, ... ] ]
    SET TABLESPACE %s [ NOWAIT ]
ALTER TABLE [ IF EXISTS ] %s
    ATTACH PARTITION %s { FOR VALUES %s | DEFAULT }
ALTER TABLE [ IF EXISTS ] %s
    DETACH PARTITION %s [ CONCURRENTLY | FINALIZE ]

%s

    ADD [ COLUMN ] [ IF NOT EXISTS ] %s %s [ COLLATE %s ] [ %s [ ... ] ]
    DROP [ COLUMN ] [ IF EXISTS ] %s [ RESTRICT | CASCADE ]
    ALTER [ COLUMN ] %s [ SET DATA ] TYPE %s [ COLLATE %s ] [ USING %s ]
    ALTER [ COLUMN ] %s SET DEFAULT %s
    ALTER [ COLUMN ] %s DROP DEFAULT
    ALTER [ COLUMN ] %s { SET | DROP } NOT NULL
    ALTER [ COLUMN ] %s SET EXPRESSION AS ( %s )
    ALTER [ COLUMN ] %s DROP EXPRESSION [ IF EXISTS ]
    ALTER [ COLUMN ] %s ADD GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY [ ( %s ) ]
    ALTER [ COLUMN ] %s { SET GENERATED { ALWAYS | BY DEFAULT } | SET %s | RESTART [ [ WITH ] %s ] } [...]
    ALTER [ COLUMN ] %s DROP IDENTITY [ IF EXISTS ]
    ALTER [ COLUMN ] %s SET STATISTICS { %s | DEFAULT }
    ALTER [ COLUMN ] %s SET ( %s = %s [, ... ] )
    ALTER [ COLUMN ] %s RESET ( %s [, ... ] )
    ALTER [ COLUMN ] %s SET STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT }
    ALTER [ COLUMN ] %s SET COMPRESSION %s
    ADD %s [ NOT VALID ]
    ADD %s
    ALTER CONSTRAINT %s [ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]
    VALIDATE CONSTRAINT %s
    DROP CONSTRAINT [ IF EXISTS ]  %s [ RESTRICT | CASCADE ]
    DISABLE TRIGGER [ %s | ALL | USER ]
    ENABLE TRIGGER [ %s | ALL | USER ]
    ENABLE REPLICA TRIGGER %s
    ENABLE ALWAYS TRIGGER %s
    DISABLE RULE %s
    ENABLE RULE %s
    ENABLE REPLICA RULE %s
    ENABLE ALWAYS RULE %s
    DISABLE ROW LEVEL SECURITY
    ENABLE ROW LEVEL SECURITY
    FORCE ROW LEVEL SECURITY
    NO FORCE ROW LEVEL SECURITY
    CLUSTER ON %s
    SET WITHOUT CLUSTER
    SET WITHOUT OIDS
    SET ACCESS METHOD { %s | DEFAULT }
    SET TABLESPACE %s
    SET { LOGGED | UNLOGGED }
    SET ( %s [= %s] [, ... ] )
    RESET ( %s [, ... ] )
    INHERIT %s
    NO INHERIT %s
    OF %s
    NOT OF
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
    REPLICA IDENTITY { DEFAULT | USING INDEX %s | FULL | NOTHING }

%s

IN ( %s [, ...] ) |
FROM ( { %s | MINVALUE | MAXVALUE } [, ...] )
  TO ( { %s | MINVALUE | MAXVALUE } [, ...] ) |
WITH ( MODULUS %s, REMAINDER %s )

%s

[ CONSTRAINT %s ]
{ NOT NULL |
  NULL |
  CHECK ( %s ) [ NO INHERIT ] |
  DEFAULT %s |
  GENERATED ALWAYS AS ( %s ) STORED |
  GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY [ ( %s ) ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] %s |
  PRIMARY KEY %s |
  REFERENCES %s [ ( %s ) ] [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ]
    [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

[ CONSTRAINT %s ]
{ CHECK ( %s ) [ NO INHERIT ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] ( %s [, ... ] ) %s |
  PRIMARY KEY ( %s [, ... ] ) %s |
  EXCLUDE [ USING %s ] ( %s WITH %s [, ... ] ) %s [ WHERE ( %s ) ] |
  FOREIGN KEY ( %s [, ... ] ) REFERENCES %s [ ( %s [, ... ] ) ]
    [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ] [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

    [ CONSTRAINT %s ]
    { UNIQUE | PRIMARY KEY } USING INDEX %s
    [ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

[ INCLUDE ( %s [, ... ] ) ]
[ WITH ( %s [= %s] [, ... ] ) ]
[ USING INDEX TABLESPACE %s ]

%s

{ %s | ( %s ) } [ COLLATE %s ] [ %s [ ( %s = %s [, ... ] ) ] ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ]

%s

{ NO ACTION | RESTRICT | CASCADE | SET NULL [ ( %s [, ... ] ) ] | SET DEFAULT [ ( %s [, ... ] ) ] }`,r("name"),r("action"),r("name"),r("column_name"),r("new_column_name"),r("name"),r("constraint_name"),r("new_constraint_name"),r("name"),r("new_name"),r("name"),r("new_schema"),r("name"),r("role_name"),r("new_tablespace"),r("name"),r("partition_name"),r("partition_bound_spec"),r("name"),r("partition_name"),r("where action is one of:"),r("column_name"),r("data_type"),r("collation"),r("column_constraint"),r("column_name"),r("column_name"),r("data_type"),r("collation"),r("expression"),r("column_name"),r("expression"),r("column_name"),r("column_name"),r("column_name"),r("expression"),r("column_name"),r("column_name"),r("sequence_options"),r("column_name"),r("sequence_option"),r("restart"),r("column_name"),r("column_name"),r("integer"),r("column_name"),r("attribute_option"),r("value"),r("column_name"),r("attribute_option"),r("column_name"),r("column_name"),r("compression_method"),r("table_constraint"),r("table_constraint_using_index"),r("constraint_name"),r("constraint_name"),r("constraint_name"),r("trigger_name"),r("trigger_name"),r("trigger_name"),r("trigger_name"),r("rewrite_rule_name"),r("rewrite_rule_name"),r("rewrite_rule_name"),r("rewrite_rule_name"),r("index_name"),r("new_access_method"),r("new_tablespace"),r("storage_parameter"),r("value"),r("storage_parameter"),r("parent_table"),r("parent_table"),r("type_name"),r("new_owner"),r("index_name"),r("and partition_bound_spec is:"),r("partition_bound_expr"),r("partition_bound_expr"),r("partition_bound_expr"),r("numeric_literal"),r("numeric_literal"),r("and column_constraint is:"),r("constraint_name"),r("expression"),r("default_expr"),r("generation_expr"),r("sequence_options"),r("index_parameters"),r("index_parameters"),r("reftable"),r("refcolumn"),r("referential_action"),r("referential_action"),r("and table_constraint is:"),r("constraint_name"),r("expression"),r("column_name"),r("index_parameters"),r("column_name"),r("index_parameters"),r("index_method"),r("exclude_element"),r("operator"),r("index_parameters"),r("predicate"),r("column_name"),r("reftable"),r("refcolumn"),r("referential_action"),r("referential_action"),r("and table_constraint_using_index is:"),r("constraint_name"),r("index_name"),r("index_parameters in UNIQUE, PRIMARY KEY, and EXCLUDE constraints are:"),r("column_name"),r("storage_parameter"),r("value"),r("tablespace_name"),r("exclude_element in an EXCLUDE constraint is:"),r("column_name"),r("expression"),r("collation"),r("opclass"),r("opclass_parameter"),r("value"),r("referential_action in a FOREIGN KEY/REFERENCES constraint is:"),r("column_name"),r("column_name"))}function Q_(n){_(n,`ALTER TABLESPACE %s RENAME TO %s
ALTER TABLESPACE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TABLESPACE %s SET ( %s = %s [, ... ] )
ALTER TABLESPACE %s RESET ( %s [, ... ] )`,r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("tablespace_option"),r("value"),r("name"),r("tablespace_option"))}function Z_(n){_(n,`ALTER TEXT SEARCH CONFIGURATION %s
    ADD MAPPING FOR %s [, ... ] WITH %s [, ... ]
ALTER TEXT SEARCH CONFIGURATION %s
    ALTER MAPPING FOR %s [, ... ] WITH %s [, ... ]
ALTER TEXT SEARCH CONFIGURATION %s
    ALTER MAPPING REPLACE %s WITH %s
ALTER TEXT SEARCH CONFIGURATION %s
    ALTER MAPPING FOR %s [, ... ] REPLACE %s WITH %s
ALTER TEXT SEARCH CONFIGURATION %s
    DROP MAPPING [ IF EXISTS ] FOR %s [, ... ]
ALTER TEXT SEARCH CONFIGURATION %s RENAME TO %s
ALTER TEXT SEARCH CONFIGURATION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TEXT SEARCH CONFIGURATION %s SET SCHEMA %s`,r("name"),r("token_type"),r("dictionary_name"),r("name"),r("token_type"),r("dictionary_name"),r("name"),r("old_dictionary"),r("new_dictionary"),r("name"),r("token_type"),r("old_dictionary"),r("new_dictionary"),r("name"),r("token_type"),r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("new_schema"))}function eO(n){_(n,`ALTER TEXT SEARCH DICTIONARY %s (
    %s [ = %s ] [, ... ]
)
ALTER TEXT SEARCH DICTIONARY %s RENAME TO %s
ALTER TEXT SEARCH DICTIONARY %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TEXT SEARCH DICTIONARY %s SET SCHEMA %s`,r("name"),r("option"),r("value"),r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("new_schema"))}function tO(n){_(n,`ALTER TEXT SEARCH PARSER %s RENAME TO %s
ALTER TEXT SEARCH PARSER %s SET SCHEMA %s`,r("name"),r("new_name"),r("name"),r("new_schema"))}function nO(n){_(n,`ALTER TEXT SEARCH TEMPLATE %s RENAME TO %s
ALTER TEXT SEARCH TEMPLATE %s SET SCHEMA %s`,r("name"),r("new_name"),r("name"),r("new_schema"))}function iO(n){_(n,`ALTER TRIGGER %s ON %s RENAME TO %s
ALTER TRIGGER %s ON %s [ NO ] DEPENDS ON EXTENSION %s`,r("name"),r("table_name"),r("new_name"),r("name"),r("table_name"),r("extension_name"))}function sO(n){_(n,`ALTER TYPE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TYPE %s RENAME TO %s
ALTER TYPE %s SET SCHEMA %s
ALTER TYPE %s RENAME ATTRIBUTE %s TO %s [ CASCADE | RESTRICT ]
ALTER TYPE %s %s [, ... ]
ALTER TYPE %s ADD VALUE [ IF NOT EXISTS ] %s [ { BEFORE | AFTER } %s ]
ALTER TYPE %s RENAME VALUE %s TO %s
ALTER TYPE %s SET ( %s = %s [, ... ] )

%s

    ADD ATTRIBUTE %s %s [ COLLATE %s ] [ CASCADE | RESTRICT ]
    DROP ATTRIBUTE [ IF EXISTS ] %s [ CASCADE | RESTRICT ]
    ALTER ATTRIBUTE %s [ SET DATA ] TYPE %s [ COLLATE %s ] [ CASCADE | RESTRICT ]`,r("name"),r("new_owner"),r("name"),r("new_name"),r("name"),r("new_schema"),r("name"),r("attribute_name"),r("new_attribute_name"),r("name"),r("action"),r("name"),r("new_enum_value"),r("neighbor_enum_value"),r("name"),r("existing_enum_value"),r("new_enum_value"),r("name"),r("property"),r("value"),r("where action is one of:"),r("attribute_name"),r("data_type"),r("collation"),r("attribute_name"),r("attribute_name"),r("data_type"),r("collation"))}function rO(n){_(n,`ALTER USER %s [ WITH ] %s [ ... ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'

ALTER USER %s RENAME TO %s

ALTER USER { %s | ALL } [ IN DATABASE %s ] SET %s { TO | = } { %s | DEFAULT }
ALTER USER { %s | ALL } [ IN DATABASE %s ] SET %s FROM CURRENT
ALTER USER { %s | ALL } [ IN DATABASE %s ] RESET %s
ALTER USER { %s | ALL } [ IN DATABASE %s ] RESET ALL

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,r("role_specification"),r("option"),r("where option can be:"),r("connlimit"),r("password"),r("timestamp"),r("name"),r("new_name"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("value"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("role_specification"),r("database_name"),r("where role_specification can be:"),r("role_name"))}function oO(n){_(n,`ALTER USER MAPPING FOR { %s | USER | CURRENT_ROLE | CURRENT_USER | SESSION_USER | PUBLIC }
    SERVER %s
    OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ] )`,r("user_name"),r("server_name"),r("option"),r("value"))}function aO(n){_(n,`ALTER VIEW [ IF EXISTS ] %s ALTER [ COLUMN ] %s SET DEFAULT %s
ALTER VIEW [ IF EXISTS ] %s ALTER [ COLUMN ] %s DROP DEFAULT
ALTER VIEW [ IF EXISTS ] %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER VIEW [ IF EXISTS ] %s RENAME [ COLUMN ] %s TO %s
ALTER VIEW [ IF EXISTS ] %s RENAME TO %s
ALTER VIEW [ IF EXISTS ] %s SET SCHEMA %s
ALTER VIEW [ IF EXISTS ] %s SET ( %s [= %s] [, ... ] )
ALTER VIEW [ IF EXISTS ] %s RESET ( %s [, ... ] )`,r("name"),r("column_name"),r("expression"),r("name"),r("column_name"),r("name"),r("new_owner"),r("name"),r("column_name"),r("new_column_name"),r("name"),r("new_name"),r("name"),r("new_schema"),r("name"),r("view_option_name"),r("view_option_value"),r("name"),r("view_option_name"))}function lO(n){_(n,`ANALYZE [ ( %s [, ...] ) ] [ %s [, ...] ]

%s

    VERBOSE [ %s ]
    SKIP_LOCKED [ %s ]
    BUFFER_USAGE_LIMIT %s

%s

    %s [ ( %s [, ...] ) ]`,r("option"),r("table_and_columns"),r("where option can be one of:"),r("boolean"),r("boolean"),r("size"),r("and table_and_columns is:"),r("table_name"),r("column_name"))}function cO(n){_(n,`BEGIN [ WORK | TRANSACTION ] [ %s [, ...] ]

%s

    ISOLATION LEVEL { SERIALIZABLE | REPEATABLE READ | READ COMMITTED | READ UNCOMMITTED }
    READ WRITE | READ ONLY
    [ NOT ] DEFERRABLE`,r("transaction_mode"),r("where transaction_mode is one of:"))}function hO(n){_(n,"CALL %s ( [ %s ] [, ...] )",r("name"),r("argument"))}function fO(n){_(n,"CHECKPOINT")}function uO(n){_(n,"CLOSE { %s | ALL }",r("name"))}function dO(n){_(n,`CLUSTER [ ( %s [, ...] ) ] [ %s [ USING %s ] ]

%s

    VERBOSE [ %s ]`,r("option"),r("table_name"),r("index_name"),r("where option can be one of:"),r("boolean"))}function pO(n){_(n,`COMMENT ON
{
  ACCESS METHOD %s |
  AGGREGATE %s ( %s ) |
  CAST (%s AS %s) |
  COLLATION %s |
  COLUMN %s.%s |
  CONSTRAINT %s ON %s |
  CONSTRAINT %s ON DOMAIN %s |
  CONVERSION %s |
  DATABASE %s |
  DOMAIN %s |
  EXTENSION %s |
  EVENT TRIGGER %s |
  FOREIGN DATA WRAPPER %s |
  FOREIGN TABLE %s |
  FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  INDEX %s |
  LARGE OBJECT %s |
  MATERIALIZED VIEW %s |
  OPERATOR %s (%s, %s) |
  OPERATOR CLASS %s USING %s |
  OPERATOR FAMILY %s USING %s |
  POLICY %s ON %s |
  [ PROCEDURAL ] LANGUAGE %s |
  PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  PUBLICATION %s |
  ROLE %s |
  ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  RULE %s ON %s |
  SCHEMA %s |
  SEQUENCE %s |
  SERVER %s |
  STATISTICS %s |
  SUBSCRIPTION %s |
  TABLE %s |
  TABLESPACE %s |
  TEXT SEARCH CONFIGURATION %s |
  TEXT SEARCH DICTIONARY %s |
  TEXT SEARCH PARSER %s |
  TEXT SEARCH TEMPLATE %s |
  TRANSFORM FOR %s LANGUAGE %s |
  TRIGGER %s ON %s |
  TYPE %s |
  VIEW %s
} IS { %s | NULL }

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,r("object_name"),r("aggregate_name"),r("aggregate_signature"),r("source_type"),r("target_type"),r("object_name"),r("relation_name"),r("column_name"),r("constraint_name"),r("table_name"),r("constraint_name"),r("domain_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("function_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("large_object_oid"),r("object_name"),r("operator_name"),r("left_type"),r("right_type"),r("object_name"),r("index_method"),r("object_name"),r("index_method"),r("policy_name"),r("table_name"),r("object_name"),r("procedure_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("object_name"),r("routine_name"),r("argmode"),r("argname"),r("argtype"),r("rule_name"),r("table_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("type_name"),r("lang_name"),r("trigger_name"),r("table_name"),r("object_name"),r("object_name"),r("string_literal"),r("where aggregate_signature is:"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"))}function mO(n){_(n,"COMMIT [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function gO(n){_(n,"COMMIT PREPARED %s",r("transaction_id"))}function EO(n){_(n,`COPY %s [ ( %s [, ...] ) ]
    FROM { '%s' | PROGRAM '%s' | STDIN }
    [ [ WITH ] ( %s [, ...] ) ]
    [ WHERE %s ]

COPY { %s [ ( %s [, ...] ) ] | ( %s ) }
    TO { '%s' | PROGRAM '%s' | STDOUT }
    [ [ WITH ] ( %s [, ...] ) ]

%s

    FORMAT %s
    FREEZE [ %s ]
    DELIMITER '%s'
    NULL '%s'
    DEFAULT '%s'
    HEADER [ %s | MATCH ]
    QUOTE '%s'
    ESCAPE '%s'
    FORCE_QUOTE { ( %s [, ...] ) | * }
    FORCE_NOT_NULL { ( %s [, ...] ) | * }
    FORCE_NULL { ( %s [, ...] ) | * }
    ON_ERROR %s
    ENCODING '%s'
    LOG_VERBOSITY %s`,r("table_name"),r("column_name"),r("filename"),r("command"),r("option"),r("condition"),r("table_name"),r("column_name"),r("query"),r("filename"),r("command"),r("option"),r("where option can be one of:"),r("format_name"),r("boolean"),r("delimiter_character"),r("null_string"),r("default_string"),r("boolean"),r("quote_character"),r("escape_character"),r("column_name"),r("column_name"),r("column_name"),r("error_action"),r("encoding_name"),r("verbosity"))}function TO(n){_(n,`CREATE ACCESS METHOD %s
    TYPE %s
    HANDLER %s`,r("name"),r("access_method_type"),r("handler_function"))}function SO(n){_(n,`CREATE [ OR REPLACE ] AGGREGATE %s ( [ %s ] [ %s ] %s [ , ... ] ) (
    SFUNC = %s,
    STYPE = %s
    [ , SSPACE = %s ]
    [ , FINALFUNC = %s ]
    [ , FINALFUNC_EXTRA ]
    [ , FINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , COMBINEFUNC = %s ]
    [ , SERIALFUNC = %s ]
    [ , DESERIALFUNC = %s ]
    [ , INITCOND = %s ]
    [ , MSFUNC = %s ]
    [ , MINVFUNC = %s ]
    [ , MSTYPE = %s ]
    [ , MSSPACE = %s ]
    [ , MFINALFUNC = %s ]
    [ , MFINALFUNC_EXTRA ]
    [ , MFINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , MINITCOND = %s ]
    [ , SORTOP = %s ]
    [ , PARALLEL = { SAFE | RESTRICTED | UNSAFE } ]
)

CREATE [ OR REPLACE ] AGGREGATE %s ( [ [ %s ] [ %s ] %s [ , ... ] ]
                        ORDER BY [ %s ] [ %s ] %s [ , ... ] ) (
    SFUNC = %s,
    STYPE = %s
    [ , SSPACE = %s ]
    [ , FINALFUNC = %s ]
    [ , FINALFUNC_EXTRA ]
    [ , FINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , INITCOND = %s ]
    [ , PARALLEL = { SAFE | RESTRICTED | UNSAFE } ]
    [ , HYPOTHETICAL ]
)

%s

CREATE [ OR REPLACE ] AGGREGATE %s (
    BASETYPE = %s,
    SFUNC = %s,
    STYPE = %s
    [ , SSPACE = %s ]
    [ , FINALFUNC = %s ]
    [ , FINALFUNC_EXTRA ]
    [ , FINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , COMBINEFUNC = %s ]
    [ , SERIALFUNC = %s ]
    [ , DESERIALFUNC = %s ]
    [ , INITCOND = %s ]
    [ , MSFUNC = %s ]
    [ , MINVFUNC = %s ]
    [ , MSTYPE = %s ]
    [ , MSSPACE = %s ]
    [ , MFINALFUNC = %s ]
    [ , MFINALFUNC_EXTRA ]
    [ , MFINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , MINITCOND = %s ]
    [ , SORTOP = %s ]
)`,r("name"),r("argmode"),r("argname"),r("arg_data_type"),r("sfunc"),r("state_data_type"),r("state_data_size"),r("ffunc"),r("combinefunc"),r("serialfunc"),r("deserialfunc"),r("initial_condition"),r("msfunc"),r("minvfunc"),r("mstate_data_type"),r("mstate_data_size"),r("mffunc"),r("minitial_condition"),r("sort_operator"),r("name"),r("argmode"),r("argname"),r("arg_data_type"),r("argmode"),r("argname"),r("arg_data_type"),r("sfunc"),r("state_data_type"),r("state_data_size"),r("ffunc"),r("initial_condition"),r("or the old syntax"),r("name"),r("base_type"),r("sfunc"),r("state_data_type"),r("state_data_size"),r("ffunc"),r("combinefunc"),r("serialfunc"),r("deserialfunc"),r("initial_condition"),r("msfunc"),r("minvfunc"),r("mstate_data_type"),r("mstate_data_size"),r("mffunc"),r("minitial_condition"),r("sort_operator"))}function AO(n){_(n,`CREATE CAST (%s AS %s)
    WITH FUNCTION %s [ (%s [, ...]) ]
    [ AS ASSIGNMENT | AS IMPLICIT ]

CREATE CAST (%s AS %s)
    WITHOUT FUNCTION
    [ AS ASSIGNMENT | AS IMPLICIT ]

CREATE CAST (%s AS %s)
    WITH INOUT
    [ AS ASSIGNMENT | AS IMPLICIT ]`,r("source_type"),r("target_type"),r("function_name"),r("argument_type"),r("source_type"),r("target_type"),r("source_type"),r("target_type"))}function RO(n){_(n,`CREATE COLLATION [ IF NOT EXISTS ] %s (
    [ LOCALE = %s, ]
    [ LC_COLLATE = %s, ]
    [ LC_CTYPE = %s, ]
    [ PROVIDER = %s, ]
    [ DETERMINISTIC = %s, ]
    [ RULES = %s, ]
    [ VERSION = %s ]
)
CREATE COLLATION [ IF NOT EXISTS ] %s FROM %s`,r("name"),r("locale"),r("lc_collate"),r("lc_ctype"),r("provider"),r("boolean"),r("rules"),r("version"),r("name"),r("existing_collation"))}function _O(n){_(n,`CREATE [ DEFAULT ] CONVERSION %s
    FOR %s TO %s FROM %s`,r("name"),r("source_encoding"),r("dest_encoding"),r("function_name"))}function OO(n){_(n,`CREATE DATABASE %s
    [ WITH ] [ OWNER [=] %s ]
           [ TEMPLATE [=] %s ]
           [ ENCODING [=] %s ]
           [ STRATEGY [=] %s ]
           [ LOCALE [=] %s ]
           [ LC_COLLATE [=] %s ]
           [ LC_CTYPE [=] %s ]
           [ BUILTIN_LOCALE [=] %s ]
           [ ICU_LOCALE [=] %s ]
           [ ICU_RULES [=] %s ]
           [ LOCALE_PROVIDER [=] %s ]
           [ COLLATION_VERSION = %s ]
           [ TABLESPACE [=] %s ]
           [ ALLOW_CONNECTIONS [=] %s ]
           [ CONNECTION LIMIT [=] %s ]
           [ IS_TEMPLATE [=] %s ]
           [ OID [=] %s ]`,r("name"),r("user_name"),r("template"),r("encoding"),r("strategy"),r("locale"),r("lc_collate"),r("lc_ctype"),r("builtin_locale"),r("icu_locale"),r("icu_rules"),r("locale_provider"),r("collation_version"),r("tablespace_name"),r("allowconn"),r("connlimit"),r("istemplate"),r("oid"))}function NO(n){_(n,`CREATE DOMAIN %s [ AS ] %s
    [ COLLATE %s ]
    [ DEFAULT %s ]
    [ %s [ ... ] ]

%s

[ CONSTRAINT %s ]
{ NOT NULL | NULL | CHECK (%s) }`,r("name"),r("data_type"),r("collation"),r("expression"),r("domain_constraint"),r("where domain_constraint is:"),r("constraint_name"),r("expression"))}function bO(n){_(n,`CREATE EVENT TRIGGER %s
    ON %s
    [ WHEN %s IN (%s [, ... ]) [ AND ... ] ]
    EXECUTE { FUNCTION | PROCEDURE } %s()`,r("name"),r("event"),r("filter_variable"),r("filter_value"),r("function_name"))}function yO(n){_(n,`CREATE EXTENSION [ IF NOT EXISTS ] %s
    [ WITH ] [ SCHEMA %s ]
             [ VERSION %s ]
             [ CASCADE ]`,r("extension_name"),r("schema_name"),r("version"))}function CO(n){_(n,`CREATE FOREIGN DATA WRAPPER %s
    [ HANDLER %s | NO HANDLER ]
    [ VALIDATOR %s | NO VALIDATOR ]
    [ OPTIONS ( %s '%s' [, ... ] ) ]`,r("name"),r("handler_function"),r("validator_function"),r("option"),r("value"))}function LO(n){_(n,`CREATE FOREIGN TABLE [ IF NOT EXISTS ] %s ( [
  { %s %s [ OPTIONS ( %s '%s' [, ... ] ) ] [ COLLATE %s ] [ %s [ ... ] ]
    | %s }
    [, ... ]
] )
[ INHERITS ( %s [, ... ] ) ]
  SERVER %s
[ OPTIONS ( %s '%s' [, ... ] ) ]

CREATE FOREIGN TABLE [ IF NOT EXISTS ] %s
  PARTITION OF %s [ (
  { %s [ WITH OPTIONS ] [ %s [ ... ] ]
    | %s }
    [, ... ]
) ]
{ FOR VALUES %s | DEFAULT }
  SERVER %s
[ OPTIONS ( %s '%s' [, ... ] ) ]

%s

[ CONSTRAINT %s ]
{ NOT NULL |
  NULL |
  CHECK ( %s ) [ NO INHERIT ] |
  DEFAULT %s |
  GENERATED ALWAYS AS ( %s ) STORED }

%s

[ CONSTRAINT %s ]
CHECK ( %s ) [ NO INHERIT ]

%s

IN ( %s [, ...] ) |
FROM ( { %s | MINVALUE | MAXVALUE } [, ...] )
  TO ( { %s | MINVALUE | MAXVALUE } [, ...] ) |
WITH ( MODULUS %s, REMAINDER %s )`,r("table_name"),r("column_name"),r("data_type"),r("option"),r("value"),r("collation"),r("column_constraint"),r("table_constraint"),r("parent_table"),r("server_name"),r("option"),r("value"),r("table_name"),r("parent_table"),r("column_name"),r("column_constraint"),r("table_constraint"),r("partition_bound_spec"),r("server_name"),r("option"),r("value"),r("where column_constraint is:"),r("constraint_name"),r("expression"),r("default_expr"),r("generation_expr"),r("and table_constraint is:"),r("constraint_name"),r("expression"),r("and partition_bound_spec is:"),r("partition_bound_expr"),r("partition_bound_expr"),r("partition_bound_expr"),r("numeric_literal"),r("numeric_literal"))}function IO(n){_(n,`CREATE [ OR REPLACE ] FUNCTION
    %s ( [ [ %s ] [ %s ] %s [ { DEFAULT | = } %s ] [, ...] ] )
    [ RETURNS %s
      | RETURNS TABLE ( %s %s [, ...] ) ]
  { LANGUAGE %s
    | TRANSFORM { FOR TYPE %s } [, ... ]
    | WINDOW
    | { IMMUTABLE | STABLE | VOLATILE }
    | [ NOT ] LEAKPROOF
    | { CALLED ON NULL INPUT | RETURNS NULL ON NULL INPUT | STRICT }
    | { [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER }
    | PARALLEL { UNSAFE | RESTRICTED | SAFE }
    | COST %s
    | ROWS %s
    | SUPPORT %s
    | SET %s { TO %s | = %s | FROM CURRENT }
    | AS '%s'
    | AS '%s', '%s'
    | %s
  } ...`,r("name"),r("argmode"),r("argname"),r("argtype"),r("default_expr"),r("rettype"),r("column_name"),r("column_type"),r("lang_name"),r("type_name"),r("execution_cost"),r("result_rows"),r("support_function"),r("configuration_parameter"),r("value"),r("value"),r("definition"),r("obj_file"),r("link_symbol"),r("sql_body"))}function wO(n){_(n,`CREATE GROUP %s [ [ WITH ] %s [ ... ] ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'
    | IN ROLE %s [, ...]
    | IN GROUP %s [, ...]
    | ROLE %s [, ...]
    | ADMIN %s [, ...]
    | USER %s [, ...]
    | SYSID %s`,r("name"),r("option"),r("where option can be:"),r("connlimit"),r("password"),r("timestamp"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("uid"))}function xO(n){_(n,`CREATE [ UNIQUE ] INDEX [ CONCURRENTLY ] [ [ IF NOT EXISTS ] %s ] ON [ ONLY ] %s [ USING %s ]
    ( { %s | ( %s ) } [ COLLATE %s ] [ %s [ ( %s = %s [, ... ] ) ] ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ] [, ...] )
    [ INCLUDE ( %s [, ...] ) ]
    [ NULLS [ NOT ] DISTINCT ]
    [ WITH ( %s [= %s] [, ... ] ) ]
    [ TABLESPACE %s ]
    [ WHERE %s ]`,r("name"),r("table_name"),r("method"),r("column_name"),r("expression"),r("collation"),r("opclass"),r("opclass_parameter"),r("value"),r("column_name"),r("storage_parameter"),r("value"),r("tablespace_name"),r("predicate"))}function vO(n){_(n,`CREATE [ OR REPLACE ] [ TRUSTED ] [ PROCEDURAL ] LANGUAGE %s
    HANDLER %s [ INLINE %s ] [ VALIDATOR %s ]
CREATE [ OR REPLACE ] [ TRUSTED ] [ PROCEDURAL ] LANGUAGE %s`,r("name"),r("call_handler"),r("inline_handler"),r("valfunction"),r("name"))}function DO(n){_(n,`CREATE MATERIALIZED VIEW [ IF NOT EXISTS ] %s
    [ (%s [, ...] ) ]
    [ USING %s ]
    [ WITH ( %s [= %s] [, ... ] ) ]
    [ TABLESPACE %s ]
    AS %s
    [ WITH [ NO ] DATA ]`,r("table_name"),r("column_name"),r("method"),r("storage_parameter"),r("value"),r("tablespace_name"),r("query"))}function kO(n){_(n,`CREATE OPERATOR %s (
    {FUNCTION|PROCEDURE} = %s
    [, LEFTARG = %s ] [, RIGHTARG = %s ]
    [, COMMUTATOR = %s ] [, NEGATOR = %s ]
    [, RESTRICT = %s ] [, JOIN = %s ]
    [, HASHES ] [, MERGES ]
)`,r("name"),r("function_name"),r("left_type"),r("right_type"),r("com_op"),r("neg_op"),r("res_proc"),r("join_proc"))}function PO(n){_(n,`CREATE OPERATOR CLASS %s [ DEFAULT ] FOR TYPE %s
  USING %s [ FAMILY %s ] AS
  {  OPERATOR %s %s [ ( %s, %s ) ] [ FOR SEARCH | FOR ORDER BY %s ]
   | FUNCTION %s [ ( %s [ , %s ] ) ] %s ( %s [, ...] )
   | STORAGE %s
  } [, ... ]`,r("name"),r("data_type"),r("index_method"),r("family_name"),r("strategy_number"),r("operator_name"),r("op_type"),r("op_type"),r("sort_family_name"),r("support_number"),r("op_type"),r("op_type"),r("function_name"),r("argument_type"),r("storage_type"))}function MO(n){_(n,"CREATE OPERATOR FAMILY %s USING %s",r("name"),r("index_method"))}function FO(n){_(n,`CREATE POLICY %s ON %s
    [ AS { PERMISSIVE | RESTRICTIVE } ]
    [ FOR { ALL | SELECT | INSERT | UPDATE | DELETE } ]
    [ TO { %s | PUBLIC | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...] ]
    [ USING ( %s ) ]
    [ WITH CHECK ( %s ) ]`,r("name"),r("table_name"),r("role_name"),r("using_expression"),r("check_expression"))}function UO(n){_(n,`CREATE [ OR REPLACE ] PROCEDURE
    %s ( [ [ %s ] [ %s ] %s [ { DEFAULT | = } %s ] [, ...] ] )
  { LANGUAGE %s
    | TRANSFORM { FOR TYPE %s } [, ... ]
    | [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    | SET %s { TO %s | = %s | FROM CURRENT }
    | AS '%s'
    | AS '%s', '%s'
    | %s
  } ...`,r("name"),r("argmode"),r("argname"),r("argtype"),r("default_expr"),r("lang_name"),r("type_name"),r("configuration_parameter"),r("value"),r("value"),r("definition"),r("obj_file"),r("link_symbol"),r("sql_body"))}function BO(n){_(n,`CREATE PUBLICATION %s
    [ FOR ALL TABLES
      | FOR %s [, ... ] ]
    [ WITH ( %s [= %s] [, ... ] ) ]

%s

    TABLE [ ONLY ] %s [ * ] [ ( %s [, ... ] ) ] [ WHERE ( %s ) ] [, ... ]
    TABLES IN SCHEMA { %s | CURRENT_SCHEMA } [, ... ]`,r("name"),r("publication_object"),r("publication_parameter"),r("value"),r("where publication_object is one of:"),r("table_name"),r("column_name"),r("expression"),r("schema_name"))}function HO(n){_(n,`CREATE ROLE %s [ [ WITH ] %s [ ... ] ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'
    | IN ROLE %s [, ...]
    | ROLE %s [, ...]
    | ADMIN %s [, ...]
    | SYSID %s`,r("name"),r("option"),r("where option can be:"),r("connlimit"),r("password"),r("timestamp"),r("role_name"),r("role_name"),r("role_name"),r("uid"))}function WO(n){_(n,`CREATE [ OR REPLACE ] RULE %s AS ON %s
    TO %s [ WHERE %s ]
    DO [ ALSO | INSTEAD ] { NOTHING | %s | ( %s ; %s ... ) }

%s

    SELECT | INSERT | UPDATE | DELETE`,r("name"),r("event"),r("table_name"),r("condition"),r("command"),r("command"),r("command"),r("where event can be one of:"))}function GO(n){_(n,`CREATE SCHEMA %s [ AUTHORIZATION %s ] [ %s [ ... ] ]
CREATE SCHEMA AUTHORIZATION %s [ %s [ ... ] ]
CREATE SCHEMA IF NOT EXISTS %s [ AUTHORIZATION %s ]
CREATE SCHEMA IF NOT EXISTS AUTHORIZATION %s

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,r("schema_name"),r("role_specification"),r("schema_element"),r("role_specification"),r("schema_element"),r("schema_name"),r("role_specification"),r("role_specification"),r("where role_specification can be:"),r("user_name"))}function VO(n){_(n,`CREATE [ { TEMPORARY | TEMP } | UNLOGGED ] SEQUENCE [ IF NOT EXISTS ] %s
    [ AS %s ]
    [ INCREMENT [ BY ] %s ]
    [ MINVALUE %s | NO MINVALUE ] [ MAXVALUE %s | NO MAXVALUE ]
    [ START [ WITH ] %s ] [ CACHE %s ] [ [ NO ] CYCLE ]
    [ OWNED BY { %s.%s | NONE } ]`,r("name"),r("data_type"),r("increment"),r("minvalue"),r("maxvalue"),r("start"),r("cache"),r("table_name"),r("column_name"))}function qO(n){_(n,`CREATE SERVER [ IF NOT EXISTS ] %s [ TYPE '%s' ] [ VERSION '%s' ]
    FOREIGN DATA WRAPPER %s
    [ OPTIONS ( %s '%s' [, ... ] ) ]`,r("server_name"),r("server_type"),r("server_version"),r("fdw_name"),r("option"),r("value"))}function YO(n){_(n,`CREATE STATISTICS [ [ IF NOT EXISTS ] %s ]
    ON ( %s )
    FROM %s

CREATE STATISTICS [ [ IF NOT EXISTS ] %s ]
    [ ( %s [, ... ] ) ]
    ON { %s | ( %s ) }, { %s | ( %s ) } [, ...]
    FROM %s`,r("statistics_name"),r("expression"),r("table_name"),r("statistics_name"),r("statistics_kind"),r("column_name"),r("expression"),r("column_name"),r("expression"),r("table_name"))}function jO(n){_(n,`CREATE SUBSCRIPTION %s
    CONNECTION '%s'
    PUBLICATION %s [, ...]
    [ WITH ( %s [= %s] [, ... ] ) ]`,r("subscription_name"),r("conninfo"),r("publication_name"),r("subscription_parameter"),r("value"))}function XO(n){_(n,`CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s ( [
  { %s %s [ STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT } ] [ COMPRESSION %s ] [ COLLATE %s ] [ %s [ ... ] ]
    | %s
    | LIKE %s [ %s ... ] }
    [, ... ]
] )
[ INHERITS ( %s [, ... ] ) ]
[ PARTITION BY { RANGE | LIST | HASH } ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ... ] ) ]
[ USING %s ]
[ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
[ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
[ TABLESPACE %s ]

CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s
    OF %s [ (
  { %s [ WITH OPTIONS ] [ %s [ ... ] ]
    | %s }
    [, ... ]
) ]
[ PARTITION BY { RANGE | LIST | HASH } ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ... ] ) ]
[ USING %s ]
[ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
[ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
[ TABLESPACE %s ]

CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s
    PARTITION OF %s [ (
  { %s [ WITH OPTIONS ] [ %s [ ... ] ]
    | %s }
    [, ... ]
) ] { FOR VALUES %s | DEFAULT }
[ PARTITION BY { RANGE | LIST | HASH } ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ... ] ) ]
[ USING %s ]
[ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
[ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
[ TABLESPACE %s ]

%s

[ CONSTRAINT %s ]
{ NOT NULL |
  NULL |
  CHECK ( %s ) [ NO INHERIT ] |
  DEFAULT %s |
  GENERATED ALWAYS AS ( %s ) STORED |
  GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY [ ( %s ) ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] %s |
  PRIMARY KEY %s |
  REFERENCES %s [ ( %s ) ] [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ]
    [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

[ CONSTRAINT %s ]
{ CHECK ( %s ) [ NO INHERIT ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] ( %s [, ... ] ) %s |
  PRIMARY KEY ( %s [, ... ] ) %s |
  EXCLUDE [ USING %s ] ( %s WITH %s [, ... ] ) %s [ WHERE ( %s ) ] |
  FOREIGN KEY ( %s [, ... ] ) REFERENCES %s [ ( %s [, ... ] ) ]
    [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ] [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

{ INCLUDING | EXCLUDING } { COMMENTS | COMPRESSION | CONSTRAINTS | DEFAULTS | GENERATED | IDENTITY | INDEXES | STATISTICS | STORAGE | ALL }

%s

IN ( %s [, ...] ) |
FROM ( { %s | MINVALUE | MAXVALUE } [, ...] )
  TO ( { %s | MINVALUE | MAXVALUE } [, ...] ) |
WITH ( MODULUS %s, REMAINDER %s )

%s

[ INCLUDE ( %s [, ... ] ) ]
[ WITH ( %s [= %s] [, ... ] ) ]
[ USING INDEX TABLESPACE %s ]

%s

{ %s | ( %s ) } [ COLLATE %s ] [ %s [ ( %s = %s [, ... ] ) ] ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ]

%s

{ NO ACTION | RESTRICT | CASCADE | SET NULL [ ( %s [, ... ] ) ] | SET DEFAULT [ ( %s [, ... ] ) ] }`,r("table_name"),r("column_name"),r("data_type"),r("compression_method"),r("collation"),r("column_constraint"),r("table_constraint"),r("source_table"),r("like_option"),r("parent_table"),r("column_name"),r("expression"),r("collation"),r("opclass"),r("method"),r("storage_parameter"),r("value"),r("tablespace_name"),r("table_name"),r("type_name"),r("column_name"),r("column_constraint"),r("table_constraint"),r("column_name"),r("expression"),r("collation"),r("opclass"),r("method"),r("storage_parameter"),r("value"),r("tablespace_name"),r("table_name"),r("parent_table"),r("column_name"),r("column_constraint"),r("table_constraint"),r("partition_bound_spec"),r("column_name"),r("expression"),r("collation"),r("opclass"),r("method"),r("storage_parameter"),r("value"),r("tablespace_name"),r("where column_constraint is:"),r("constraint_name"),r("expression"),r("default_expr"),r("generation_expr"),r("sequence_options"),r("index_parameters"),r("index_parameters"),r("reftable"),r("refcolumn"),r("referential_action"),r("referential_action"),r("and table_constraint is:"),r("constraint_name"),r("expression"),r("column_name"),r("index_parameters"),r("column_name"),r("index_parameters"),r("index_method"),r("exclude_element"),r("operator"),r("index_parameters"),r("predicate"),r("column_name"),r("reftable"),r("refcolumn"),r("referential_action"),r("referential_action"),r("and like_option is:"),r("and partition_bound_spec is:"),r("partition_bound_expr"),r("partition_bound_expr"),r("partition_bound_expr"),r("numeric_literal"),r("numeric_literal"),r("index_parameters in UNIQUE, PRIMARY KEY, and EXCLUDE constraints are:"),r("column_name"),r("storage_parameter"),r("value"),r("tablespace_name"),r("exclude_element in an EXCLUDE constraint is:"),r("column_name"),r("expression"),r("collation"),r("opclass"),r("opclass_parameter"),r("value"),r("referential_action in a FOREIGN KEY/REFERENCES constraint is:"),r("column_name"),r("column_name"))}function zO(n){_(n,`CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s
    [ (%s [, ...] ) ]
    [ USING %s ]
    [ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
    [ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
    [ TABLESPACE %s ]
    AS %s
    [ WITH [ NO ] DATA ]`,r("table_name"),r("column_name"),r("method"),r("storage_parameter"),r("value"),r("tablespace_name"),r("query"))}function KO(n){_(n,`CREATE TABLESPACE %s
    [ OWNER { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER } ]
    LOCATION '%s'
    [ WITH ( %s = %s [, ... ] ) ]`,r("tablespace_name"),r("new_owner"),r("directory"),r("tablespace_option"),r("value"))}function $O(n){_(n,`CREATE TEXT SEARCH CONFIGURATION %s (
    PARSER = %s |
    COPY = %s
)`,r("name"),r("parser_name"),r("source_config"))}function JO(n){_(n,`CREATE TEXT SEARCH DICTIONARY %s (
    TEMPLATE = %s
    [, %s = %s [, ... ]]
)`,r("name"),r("template"),r("option"),r("value"))}function QO(n){_(n,`CREATE TEXT SEARCH PARSER %s (
    START = %s ,
    GETTOKEN = %s ,
    END = %s ,
    LEXTYPES = %s
    [, HEADLINE = %s ]
)`,r("name"),r("start_function"),r("gettoken_function"),r("end_function"),r("lextypes_function"),r("headline_function"))}function ZO(n){_(n,`CREATE TEXT SEARCH TEMPLATE %s (
    [ INIT = %s , ]
    LEXIZE = %s
)`,r("name"),r("init_function"),r("lexize_function"))}function eN(n){_(n,`CREATE [ OR REPLACE ] TRANSFORM FOR %s LANGUAGE %s (
    FROM SQL WITH FUNCTION %s [ (%s [, ...]) ],
    TO SQL WITH FUNCTION %s [ (%s [, ...]) ]
);`,r("type_name"),r("lang_name"),r("from_sql_function_name"),r("argument_type"),r("to_sql_function_name"),r("argument_type"))}function tN(n){_(n,`CREATE [ OR REPLACE ] [ CONSTRAINT ] TRIGGER %s { BEFORE | AFTER | INSTEAD OF } { %s [ OR ... ] }
    ON %s
    [ FROM %s ]
    [ NOT DEFERRABLE | [ DEFERRABLE ] [ INITIALLY IMMEDIATE | INITIALLY DEFERRED ] ]
    [ REFERENCING { { OLD | NEW } TABLE [ AS ] %s } [ ... ] ]
    [ FOR [ EACH ] { ROW | STATEMENT } ]
    [ WHEN ( %s ) ]
    EXECUTE { FUNCTION | PROCEDURE } %s ( %s )

%s

    INSERT
    UPDATE [ OF %s [, ... ] ]
    DELETE
    TRUNCATE`,r("name"),r("event"),r("table_name"),r("referenced_table_name"),r("transition_relation_name"),r("condition"),r("function_name"),r("arguments"),r("where event can be one of:"),r("column_name"))}function nN(n){_(n,`CREATE TYPE %s AS
    ( [ %s %s [ COLLATE %s ] [, ... ] ] )

CREATE TYPE %s AS ENUM
    ( [ '%s' [, ... ] ] )

CREATE TYPE %s AS RANGE (
    SUBTYPE = %s
    [ , SUBTYPE_OPCLASS = %s ]
    [ , COLLATION = %s ]
    [ , CANONICAL = %s ]
    [ , SUBTYPE_DIFF = %s ]
    [ , MULTIRANGE_TYPE_NAME = %s ]
)

CREATE TYPE %s (
    INPUT = %s,
    OUTPUT = %s
    [ , RECEIVE = %s ]
    [ , SEND = %s ]
    [ , TYPMOD_IN = %s ]
    [ , TYPMOD_OUT = %s ]
    [ , ANALYZE = %s ]
    [ , SUBSCRIPT = %s ]
    [ , INTERNALLENGTH = { %s | VARIABLE } ]
    [ , PASSEDBYVALUE ]
    [ , ALIGNMENT = %s ]
    [ , STORAGE = %s ]
    [ , LIKE = %s ]
    [ , CATEGORY = %s ]
    [ , PREFERRED = %s ]
    [ , DEFAULT = %s ]
    [ , ELEMENT = %s ]
    [ , DELIMITER = %s ]
    [ , COLLATABLE = %s ]
)

CREATE TYPE %s`,r("name"),r("attribute_name"),r("data_type"),r("collation"),r("name"),r("label"),r("name"),r("subtype"),r("subtype_operator_class"),r("collation"),r("canonical_function"),r("subtype_diff_function"),r("multirange_type_name"),r("name"),r("input_function"),r("output_function"),r("receive_function"),r("send_function"),r("type_modifier_input_function"),r("type_modifier_output_function"),r("analyze_function"),r("subscript_function"),r("internallength"),r("alignment"),r("storage"),r("like_type"),r("category"),r("preferred"),r("default"),r("element"),r("delimiter"),r("collatable"),r("name"))}function iN(n){_(n,`CREATE USER %s [ [ WITH ] %s [ ... ] ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'
    | IN ROLE %s [, ...]
    | IN GROUP %s [, ...]
    | ROLE %s [, ...]
    | ADMIN %s [, ...]
    | USER %s [, ...]
    | SYSID %s`,r("name"),r("option"),r("where option can be:"),r("connlimit"),r("password"),r("timestamp"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("uid"))}function sN(n){_(n,`CREATE USER MAPPING [ IF NOT EXISTS ] FOR { %s | USER | CURRENT_ROLE | CURRENT_USER | PUBLIC }
    SERVER %s
    [ OPTIONS ( %s '%s' [ , ... ] ) ]`,r("user_name"),r("server_name"),r("option"),r("value"))}function rN(n){_(n,`CREATE [ OR REPLACE ] [ TEMP | TEMPORARY ] [ RECURSIVE ] VIEW %s [ ( %s [, ...] ) ]
    [ WITH ( %s [= %s] [, ... ] ) ]
    AS %s
    [ WITH [ CASCADED | LOCAL ] CHECK OPTION ]`,r("name"),r("column_name"),r("view_option_name"),r("view_option_value"),r("query"))}function oN(n){_(n,"DEALLOCATE [ PREPARE ] { %s | ALL }",r("name"))}function aN(n){_(n,`DECLARE %s [ BINARY ] [ ASENSITIVE | INSENSITIVE ] [ [ NO ] SCROLL ]
    CURSOR [ { WITH | WITHOUT } HOLD ] FOR %s`,r("name"),r("query"))}function lN(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
DELETE FROM [ ONLY ] %s [ * ] [ [ AS ] %s ]
    [ USING %s [, ...] ]
    [ WHERE %s | WHERE CURRENT OF %s ]
    [ RETURNING { * | %s [ [ AS ] %s ] } [, ...] ]`,r("with_query"),r("table_name"),r("alias"),r("from_item"),r("condition"),r("cursor_name"),r("output_expression"),r("output_name"))}function cN(n){_(n,"DISCARD { ALL | PLANS | SEQUENCES | TEMPORARY | TEMP }")}function hN(n){_(n,"DO [ LANGUAGE %s ] %s",r("lang_name"),r("code"))}function fN(n){_(n,"DROP ACCESS METHOD [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function uN(n){_(n,`DROP AGGREGATE [ IF EXISTS ] %s ( %s ) [, ...] [ CASCADE | RESTRICT ]

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,r("name"),r("aggregate_signature"),r("where aggregate_signature is:"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"))}function dN(n){_(n,"DROP CAST [ IF EXISTS ] (%s AS %s) [ CASCADE | RESTRICT ]",r("source_type"),r("target_type"))}function pN(n){_(n,"DROP COLLATION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function mN(n){_(n,"DROP CONVERSION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function gN(n){_(n,`DROP DATABASE [ IF EXISTS ] %s [ [ WITH ] ( %s [, ...] ) ]

%s

    FORCE`,r("name"),r("option"),r("where option can be:"))}function EN(n){_(n,"DROP DOMAIN [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function TN(n){_(n,"DROP EVENT TRIGGER [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function SN(n){_(n,"DROP EXTENSION [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function AN(n){_(n,"DROP FOREIGN DATA WRAPPER [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function RN(n){_(n,"DROP FOREIGN TABLE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function _N(n){_(n,`DROP FUNCTION [ IF EXISTS ] %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
    [ CASCADE | RESTRICT ]`,r("name"),r("argmode"),r("argname"),r("argtype"))}function ON(n){_(n,"DROP GROUP [ IF EXISTS ] %s [, ...]",r("name"))}function NN(n){_(n,"DROP INDEX [ CONCURRENTLY ] [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function bN(n){_(n,"DROP [ PROCEDURAL ] LANGUAGE [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function yN(n){_(n,"DROP MATERIALIZED VIEW [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function CN(n){_(n,"DROP OPERATOR [ IF EXISTS ] %s ( { %s | NONE } , %s ) [, ...] [ CASCADE | RESTRICT ]",r("name"),r("left_type"),r("right_type"))}function LN(n){_(n,"DROP OPERATOR CLASS [ IF EXISTS ] %s USING %s [ CASCADE | RESTRICT ]",r("name"),r("index_method"))}function IN(n){_(n,"DROP OPERATOR FAMILY [ IF EXISTS ] %s USING %s [ CASCADE | RESTRICT ]",r("name"),r("index_method"))}function wN(n){_(n,"DROP OWNED BY { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...] [ CASCADE | RESTRICT ]",r("name"))}function xN(n){_(n,"DROP POLICY [ IF EXISTS ] %s ON %s [ CASCADE | RESTRICT ]",r("name"),r("table_name"))}function vN(n){_(n,`DROP PROCEDURE [ IF EXISTS ] %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
    [ CASCADE | RESTRICT ]`,r("name"),r("argmode"),r("argname"),r("argtype"))}function DN(n){_(n,"DROP PUBLICATION [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function kN(n){_(n,"DROP ROLE [ IF EXISTS ] %s [, ...]",r("name"))}function PN(n){_(n,`DROP ROUTINE [ IF EXISTS ] %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
    [ CASCADE | RESTRICT ]`,r("name"),r("argmode"),r("argname"),r("argtype"))}function MN(n){_(n,"DROP RULE [ IF EXISTS ] %s ON %s [ CASCADE | RESTRICT ]",r("name"),r("table_name"))}function FN(n){_(n,"DROP SCHEMA [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function UN(n){_(n,"DROP SEQUENCE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function BN(n){_(n,"DROP SERVER [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function HN(n){_(n,"DROP STATISTICS [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function WN(n){_(n,"DROP SUBSCRIPTION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function GN(n){_(n,"DROP TABLE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function VN(n){_(n,"DROP TABLESPACE [ IF EXISTS ] %s",r("name"))}function qN(n){_(n,"DROP TEXT SEARCH CONFIGURATION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function YN(n){_(n,"DROP TEXT SEARCH DICTIONARY [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function jN(n){_(n,"DROP TEXT SEARCH PARSER [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function XN(n){_(n,"DROP TEXT SEARCH TEMPLATE [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function zN(n){_(n,"DROP TRANSFORM [ IF EXISTS ] FOR %s LANGUAGE %s [ CASCADE | RESTRICT ]",r("type_name"),r("lang_name"))}function KN(n){_(n,"DROP TRIGGER [ IF EXISTS ] %s ON %s [ CASCADE | RESTRICT ]",r("name"),r("table_name"))}function $N(n){_(n,"DROP TYPE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function JN(n){_(n,"DROP USER [ IF EXISTS ] %s [, ...]",r("name"))}function QN(n){_(n,"DROP USER MAPPING [ IF EXISTS ] FOR { %s | USER | CURRENT_ROLE | CURRENT_USER | PUBLIC } SERVER %s",r("user_name"),r("server_name"))}function ZN(n){_(n,"DROP VIEW [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function eb(n){_(n,"END [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function tb(n){_(n,"EXECUTE %s [ ( %s [, ...] ) ]",r("name"),r("parameter"))}function nb(n){_(n,`EXPLAIN [ ( %s [, ...] ) ] %s

%s

    ANALYZE [ %s ]
    VERBOSE [ %s ]
    COSTS [ %s ]
    SETTINGS [ %s ]
    GENERIC_PLAN [ %s ]
    BUFFERS [ %s ]
    SERIALIZE [ { NONE | TEXT | BINARY } ]
    WAL [ %s ]
    TIMING [ %s ]
    SUMMARY [ %s ]
    MEMORY [ %s ]
    FORMAT { TEXT | XML | JSON | YAML }`,r("option"),r("statement"),r("where option can be one of:"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"))}function ib(n){_(n,`FETCH [ %s ] [ FROM | IN ] %s

%s

    NEXT
    PRIOR
    FIRST
    LAST
    ABSOLUTE %s
    RELATIVE %s
    %s
    ALL
    FORWARD
    FORWARD %s
    FORWARD ALL
    BACKWARD
    BACKWARD %s
    BACKWARD ALL`,r("direction"),r("cursor_name"),r("where direction can be one of:"),r("count"),r("count"),r("count"),r("count"),r("count"))}function sb(n){_(n,`GRANT { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER | MAINTAIN }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { [ TABLE ] %s [, ...]
         | ALL TABLES IN SCHEMA %s [, ...] }
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { SELECT | INSERT | UPDATE | REFERENCES } ( %s [, ...] )
    [, ...] | ALL [ PRIVILEGES ] ( %s [, ...] ) }
    ON [ TABLE ] %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { SEQUENCE %s [, ...]
         | ALL SEQUENCES IN SCHEMA %s [, ...] }
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { CREATE | CONNECT | TEMPORARY | TEMP } [, ...] | ALL [ PRIVILEGES ] }
    ON DATABASE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON DOMAIN %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN DATA WRAPPER %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN SERVER %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { EXECUTE | ALL [ PRIVILEGES ] }
    ON { { FUNCTION | PROCEDURE | ROUTINE } %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
         | ALL { FUNCTIONS | PROCEDURES | ROUTINES } IN SCHEMA %s [, ...] }
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON LANGUAGE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { SELECT | UPDATE } [, ...] | ALL [ PRIVILEGES ] }
    ON LARGE OBJECT %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { SET | ALTER SYSTEM } [, ... ] | ALL [ PRIVILEGES ] }
    ON PARAMETER %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { CREATE | USAGE } [, ...] | ALL [ PRIVILEGES ] }
    ON SCHEMA %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { CREATE | ALL [ PRIVILEGES ] }
    ON TABLESPACE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON TYPE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT %s [, ...] TO %s [, ...]
    [ WITH { ADMIN | INHERIT | SET } { OPTION | TRUE | FALSE } ]
    [ GRANTED BY %s ]

%s

    [ GROUP ] %s
  | PUBLIC
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,r("table_name"),r("schema_name"),r("role_specification"),r("role_specification"),r("column_name"),r("column_name"),r("table_name"),r("role_specification"),r("role_specification"),r("sequence_name"),r("schema_name"),r("role_specification"),r("role_specification"),r("database_name"),r("role_specification"),r("role_specification"),r("domain_name"),r("role_specification"),r("role_specification"),r("fdw_name"),r("role_specification"),r("role_specification"),r("server_name"),r("role_specification"),r("role_specification"),r("routine_name"),r("argmode"),r("arg_name"),r("arg_type"),r("schema_name"),r("role_specification"),r("role_specification"),r("lang_name"),r("role_specification"),r("role_specification"),r("loid"),r("role_specification"),r("role_specification"),r("configuration_parameter"),r("role_specification"),r("role_specification"),r("schema_name"),r("role_specification"),r("role_specification"),r("tablespace_name"),r("role_specification"),r("role_specification"),r("type_name"),r("role_specification"),r("role_specification"),r("role_name"),r("role_specification"),r("role_specification"),r("where role_specification can be:"),r("role_name"))}function rb(n){_(n,`IMPORT FOREIGN SCHEMA %s
    [ { LIMIT TO | EXCEPT } ( %s [, ...] ) ]
    FROM SERVER %s
    INTO %s
    [ OPTIONS ( %s '%s' [, ... ] ) ]`,r("remote_schema"),r("table_name"),r("server_name"),r("local_schema"),r("option"),r("value"))}function ob(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
INSERT INTO %s [ AS %s ] [ ( %s [, ...] ) ]
    [ OVERRIDING { SYSTEM | USER } VALUE ]
    { DEFAULT VALUES | VALUES ( { %s | DEFAULT } [, ...] ) [, ...] | %s }
    [ ON CONFLICT [ %s ] %s ]
    [ RETURNING { * | %s [ [ AS ] %s ] } [, ...] ]

%s

    ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ...] ) [ WHERE %s ]
    ON CONSTRAINT %s

%s

    DO NOTHING
    DO UPDATE SET { %s = { %s | DEFAULT } |
                    ( %s [, ...] ) = [ ROW ] ( { %s | DEFAULT } [, ...] ) |
                    ( %s [, ...] ) = ( %s )
                  } [, ...]
              [ WHERE %s ]`,r("with_query"),r("table_name"),r("alias"),r("column_name"),r("expression"),r("query"),r("conflict_target"),r("conflict_action"),r("output_expression"),r("output_name"),r("where conflict_target can be one of:"),r("index_column_name"),r("index_expression"),r("collation"),r("opclass"),r("index_predicate"),r("constraint_name"),r("and conflict_action is one of:"),r("column_name"),r("expression"),r("column_name"),r("expression"),r("column_name"),r("sub-SELECT"),r("condition"))}function ab(n){_(n,"LISTEN %s",r("channel"))}function lb(n){_(n,"LOAD '%s'",r("filename"))}function cb(n){_(n,`LOCK [ TABLE ] [ ONLY ] %s [ * ] [, ...] [ IN %s MODE ] [ NOWAIT ]

%s

    ACCESS SHARE | ROW SHARE | ROW EXCLUSIVE | SHARE UPDATE EXCLUSIVE
    | SHARE | SHARE ROW EXCLUSIVE | EXCLUSIVE | ACCESS EXCLUSIVE`,r("name"),r("lockmode"),r("where lockmode is one of:"))}function hb(n){_(n,`[ WITH %s [, ...] ]
MERGE INTO [ ONLY ] %s [ * ] [ [ AS ] %s ]
USING %s ON %s
%s [...]
[ RETURNING { * | %s [ [ AS ] %s ] } [, ...] ]

%s

{ [ ONLY ] %s [ * ] | ( %s ) } [ [ AS ] %s ]

%s

{ WHEN MATCHED [ AND %s ] THEN { %s | %s | DO NOTHING } |
  WHEN NOT MATCHED BY SOURCE [ AND %s ] THEN { %s | %s | DO NOTHING } |
  WHEN NOT MATCHED [ BY TARGET ] [ AND %s ] THEN { %s | DO NOTHING } }

%s

INSERT [( %s [, ...] )]
[ OVERRIDING { SYSTEM | USER } VALUE ]
{ VALUES ( { %s | DEFAULT } [, ...] ) | DEFAULT VALUES }

%s

UPDATE SET { %s = { %s | DEFAULT } |
             ( %s [, ...] ) = [ ROW ] ( { %s | DEFAULT } [, ...] ) |
             ( %s [, ...] ) = ( %s )
           } [, ...]

%s

DELETE`,r("with_query"),r("target_table_name"),r("target_alias"),r("data_source"),r("join_condition"),r("when_clause"),r("output_expression"),r("output_name"),r("where data_source is:"),r("source_table_name"),r("source_query"),r("source_alias"),r("and when_clause is:"),r("condition"),r("merge_update"),r("merge_delete"),r("condition"),r("merge_update"),r("merge_delete"),r("condition"),r("merge_insert"),r("and merge_insert is:"),r("column_name"),r("expression"),r("and merge_update is:"),r("column_name"),r("expression"),r("column_name"),r("expression"),r("column_name"),r("sub-SELECT"),r("and merge_delete is:"))}function fb(n){_(n,`MOVE [ %s ] [ FROM | IN ] %s

%s

    NEXT
    PRIOR
    FIRST
    LAST
    ABSOLUTE %s
    RELATIVE %s
    %s
    ALL
    FORWARD
    FORWARD %s
    FORWARD ALL
    BACKWARD
    BACKWARD %s
    BACKWARD ALL`,r("direction"),r("cursor_name"),r("where direction can be one of:"),r("count"),r("count"),r("count"),r("count"),r("count"))}function ub(n){_(n,"NOTIFY %s [ , %s ]",r("channel"),r("payload"))}function db(n){_(n,"PREPARE %s [ ( %s [, ...] ) ] AS %s",r("name"),r("data_type"),r("statement"))}function pb(n){_(n,"PREPARE TRANSACTION %s",r("transaction_id"))}function mb(n){_(n,`REASSIGN OWNED BY { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...]
               TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,r("old_role"),r("new_role"))}function gb(n){_(n,`REFRESH MATERIALIZED VIEW [ CONCURRENTLY ] %s
    [ WITH [ NO ] DATA ]`,r("name"))}function Eb(n){_(n,`REINDEX [ ( %s [, ...] ) ] { INDEX | TABLE | SCHEMA } [ CONCURRENTLY ] %s
REINDEX [ ( %s [, ...] ) ] { DATABASE | SYSTEM } [ CONCURRENTLY ] [ %s ]

%s

    CONCURRENTLY [ %s ]
    TABLESPACE %s
    VERBOSE [ %s ]`,r("option"),r("name"),r("option"),r("name"),r("where option can be one of:"),r("boolean"),r("new_tablespace"),r("boolean"))}function Tb(n){_(n,"RELEASE [ SAVEPOINT ] %s",r("savepoint_name"))}function Sb(n){_(n,`RESET %s
RESET ALL`,r("configuration_parameter"))}function Ab(n){_(n,`REVOKE [ GRANT OPTION FOR ]
    { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER | MAINTAIN }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { [ TABLE ] %s [, ...]
         | ALL TABLES IN SCHEMA %s [, ...] }
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { SELECT | INSERT | UPDATE | REFERENCES } ( %s [, ...] )
    [, ...] | ALL [ PRIVILEGES ] ( %s [, ...] ) }
    ON [ TABLE ] %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { SEQUENCE %s [, ...]
         | ALL SEQUENCES IN SCHEMA %s [, ...] }
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { CREATE | CONNECT | TEMPORARY | TEMP } [, ...] | ALL [ PRIVILEGES ] }
    ON DATABASE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON DOMAIN %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN DATA WRAPPER %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN SERVER %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { EXECUTE | ALL [ PRIVILEGES ] }
    ON { { FUNCTION | PROCEDURE | ROUTINE } %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
         | ALL { FUNCTIONS | PROCEDURES | ROUTINES } IN SCHEMA %s [, ...] }
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON LANGUAGE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { SELECT | UPDATE } [, ...] | ALL [ PRIVILEGES ] }
    ON LARGE OBJECT %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { SET | ALTER SYSTEM } [, ...] | ALL [ PRIVILEGES ] }
    ON PARAMETER %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { CREATE | USAGE } [, ...] | ALL [ PRIVILEGES ] }
    ON SCHEMA %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { CREATE | ALL [ PRIVILEGES ] }
    ON TABLESPACE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON TYPE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ { ADMIN | INHERIT | SET } OPTION FOR ]
    %s [, ...] FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

%s

    [ GROUP ] %s
  | PUBLIC
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,r("table_name"),r("schema_name"),r("role_specification"),r("role_specification"),r("column_name"),r("column_name"),r("table_name"),r("role_specification"),r("role_specification"),r("sequence_name"),r("schema_name"),r("role_specification"),r("role_specification"),r("database_name"),r("role_specification"),r("role_specification"),r("domain_name"),r("role_specification"),r("role_specification"),r("fdw_name"),r("role_specification"),r("role_specification"),r("server_name"),r("role_specification"),r("role_specification"),r("function_name"),r("argmode"),r("arg_name"),r("arg_type"),r("schema_name"),r("role_specification"),r("role_specification"),r("lang_name"),r("role_specification"),r("role_specification"),r("loid"),r("role_specification"),r("role_specification"),r("configuration_parameter"),r("role_specification"),r("role_specification"),r("schema_name"),r("role_specification"),r("role_specification"),r("tablespace_name"),r("role_specification"),r("role_specification"),r("type_name"),r("role_specification"),r("role_specification"),r("role_name"),r("role_specification"),r("role_specification"),r("where role_specification can be:"),r("role_name"))}function Rb(n){_(n,"ROLLBACK [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function _b(n){_(n,"ROLLBACK PREPARED %s",r("transaction_id"))}function Ob(n){_(n,"ROLLBACK [ WORK | TRANSACTION ] TO [ SAVEPOINT ] %s",r("savepoint_name"))}function Nb(n){_(n,"SAVEPOINT %s",r("savepoint_name"))}function bb(n){_(n,`SECURITY LABEL [ FOR %s ] ON
{
  TABLE %s |
  COLUMN %s.%s |
  AGGREGATE %s ( %s ) |
  DATABASE %s |
  DOMAIN %s |
  EVENT TRIGGER %s |
  FOREIGN TABLE %s |
  FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  LARGE OBJECT %s |
  MATERIALIZED VIEW %s |
  [ PROCEDURAL ] LANGUAGE %s |
  PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  PUBLICATION %s |
  ROLE %s |
  ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  SCHEMA %s |
  SEQUENCE %s |
  SUBSCRIPTION %s |
  TABLESPACE %s |
  TYPE %s |
  VIEW %s
} IS { %s | NULL }

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,r("provider"),r("object_name"),r("table_name"),r("column_name"),r("aggregate_name"),r("aggregate_signature"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("function_name"),r("argmode"),r("argname"),r("argtype"),r("large_object_oid"),r("object_name"),r("object_name"),r("procedure_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("object_name"),r("routine_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("string_literal"),r("where aggregate_signature is:"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"))}function yb(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    [ { * | %s [ [ AS ] %s ] } [, ...] ]
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY [ ALL | DISTINCT ] %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } { ONLY | WITH TIES } ]
    [ FOR { UPDATE | NO KEY UPDATE | SHARE | KEY SHARE } [ OF %s [, ...] ] [ NOWAIT | SKIP LOCKED ] [...] ]

%s

    [ ONLY ] %s [ * ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
                [ TABLESAMPLE %s ( %s [, ...] ) [ REPEATABLE ( %s ) ] ]
    [ LATERAL ] ( %s ) [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] ) [ AS ] %s ( %s [, ...] )
    [ LATERAL ] %s ( [ %s [, ...] ] ) AS ( %s [, ...] )
    [ LATERAL ] ROWS FROM( %s ( [ %s [, ...] ] ) [ AS ( %s [, ...] ) ] [, ...] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s %s %s { ON %s | USING ( %s [, ...] ) [ AS %s ] }
    %s NATURAL %s %s
    %s CROSS JOIN %s

%s

    ( )
    %s
    ( %s [, ...] )
    ROLLUP ( { %s | ( %s [, ...] ) } [, ...] )
    CUBE ( { %s | ( %s [, ...] ) } [, ...] )
    GROUPING SETS ( %s [, ...] )

%s

    %s [ ( %s [, ...] ) ] AS [ [ NOT ] MATERIALIZED ] ( %s | %s | %s | %s | %s | %s )
        [ SEARCH { BREADTH | DEPTH } FIRST BY %s [, ...] SET %s ]
        [ CYCLE %s [, ...] SET %s [ TO %s DEFAULT %s ] USING %s ]

TABLE [ ONLY ] %s [ * ]`,r("with_query"),r("expression"),r("expression"),r("output_name"),r("from_item"),r("condition"),r("grouping_element"),r("condition"),r("window_name"),r("window_definition"),r("select"),r("expression"),r("operator"),r("count"),r("start"),r("count"),r("from_reference"),r("where from_item can be one of:"),r("table_name"),r("alias"),r("column_alias"),r("sampling_method"),r("argument"),r("seed"),r("select"),r("alias"),r("column_alias"),r("with_query_name"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("alias"),r("column_alias"),r("from_item"),r("join_type"),r("from_item"),r("join_condition"),r("join_column"),r("join_using_alias"),r("from_item"),r("join_type"),r("from_item"),r("from_item"),r("from_item"),r("and grouping_element can be one of:"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("grouping_element"),r("and with_query is:"),r("with_query_name"),r("column_name"),r("select"),r("values"),r("insert"),r("update"),r("delete"),r("merge"),r("column_name"),r("search_seq_col_name"),r("column_name"),r("cycle_mark_col_name"),r("cycle_mark_value"),r("cycle_mark_default"),r("cycle_path_col_name"),r("table_name"))}function Cb(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    [ { * | %s [ [ AS ] %s ] } [, ...] ]
    INTO [ TEMPORARY | TEMP | UNLOGGED ] [ TABLE ] %s
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } ONLY ]
    [ FOR { UPDATE | SHARE } [ OF %s [, ...] ] [ NOWAIT ] [...] ]`,r("with_query"),r("expression"),r("expression"),r("output_name"),r("new_table"),r("from_item"),r("condition"),r("expression"),r("condition"),r("window_name"),r("window_definition"),r("select"),r("expression"),r("operator"),r("count"),r("start"),r("count"),r("table_name"))}function Lb(n){_(n,`SET [ SESSION | LOCAL ] %s { TO | = } { %s | '%s' | DEFAULT }
SET [ SESSION | LOCAL ] TIME ZONE { %s | '%s' | LOCAL | DEFAULT }`,r("configuration_parameter"),r("value"),r("value"),r("value"),r("value"))}function Ib(n){_(n,"SET CONSTRAINTS { ALL | %s [, ...] } { DEFERRED | IMMEDIATE }",r("name"))}function wb(n){_(n,`SET [ SESSION | LOCAL ] ROLE %s
SET [ SESSION | LOCAL ] ROLE NONE
RESET ROLE`,r("role_name"))}function xb(n){_(n,`SET [ SESSION | LOCAL ] SESSION AUTHORIZATION %s
SET [ SESSION | LOCAL ] SESSION AUTHORIZATION DEFAULT
RESET SESSION AUTHORIZATION`,r("user_name"))}function vb(n){_(n,`SET TRANSACTION %s [, ...]
SET TRANSACTION SNAPSHOT %s
SET SESSION CHARACTERISTICS AS TRANSACTION %s [, ...]

%s

    ISOLATION LEVEL { SERIALIZABLE | REPEATABLE READ | READ COMMITTED | READ UNCOMMITTED }
    READ WRITE | READ ONLY
    [ NOT ] DEFERRABLE`,r("transaction_mode"),r("snapshot_id"),r("transaction_mode"),r("where transaction_mode is one of:"))}function Db(n){_(n,`SHOW %s
SHOW ALL`,r("name"))}function kb(n){_(n,`START TRANSACTION [ %s [, ...] ]

%s

    ISOLATION LEVEL { SERIALIZABLE | REPEATABLE READ | READ COMMITTED | READ UNCOMMITTED }
    READ WRITE | READ ONLY
    [ NOT ] DEFERRABLE`,r("transaction_mode"),r("where transaction_mode is one of:"))}function Pb(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    [ { * | %s [ [ AS ] %s ] } [, ...] ]
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY [ ALL | DISTINCT ] %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } { ONLY | WITH TIES } ]
    [ FOR { UPDATE | NO KEY UPDATE | SHARE | KEY SHARE } [ OF %s [, ...] ] [ NOWAIT | SKIP LOCKED ] [...] ]

%s

    [ ONLY ] %s [ * ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
                [ TABLESAMPLE %s ( %s [, ...] ) [ REPEATABLE ( %s ) ] ]
    [ LATERAL ] ( %s ) [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] ) [ AS ] %s ( %s [, ...] )
    [ LATERAL ] %s ( [ %s [, ...] ] ) AS ( %s [, ...] )
    [ LATERAL ] ROWS FROM( %s ( [ %s [, ...] ] ) [ AS ( %s [, ...] ) ] [, ...] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s %s %s { ON %s | USING ( %s [, ...] ) [ AS %s ] }
    %s NATURAL %s %s
    %s CROSS JOIN %s

%s

    ( )
    %s
    ( %s [, ...] )
    ROLLUP ( { %s | ( %s [, ...] ) } [, ...] )
    CUBE ( { %s | ( %s [, ...] ) } [, ...] )
    GROUPING SETS ( %s [, ...] )

%s

    %s [ ( %s [, ...] ) ] AS [ [ NOT ] MATERIALIZED ] ( %s | %s | %s | %s | %s | %s )
        [ SEARCH { BREADTH | DEPTH } FIRST BY %s [, ...] SET %s ]
        [ CYCLE %s [, ...] SET %s [ TO %s DEFAULT %s ] USING %s ]

TABLE [ ONLY ] %s [ * ]`,r("with_query"),r("expression"),r("expression"),r("output_name"),r("from_item"),r("condition"),r("grouping_element"),r("condition"),r("window_name"),r("window_definition"),r("select"),r("expression"),r("operator"),r("count"),r("start"),r("count"),r("from_reference"),r("where from_item can be one of:"),r("table_name"),r("alias"),r("column_alias"),r("sampling_method"),r("argument"),r("seed"),r("select"),r("alias"),r("column_alias"),r("with_query_name"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("alias"),r("column_alias"),r("from_item"),r("join_type"),r("from_item"),r("join_condition"),r("join_column"),r("join_using_alias"),r("from_item"),r("join_type"),r("from_item"),r("from_item"),r("from_item"),r("and grouping_element can be one of:"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("grouping_element"),r("and with_query is:"),r("with_query_name"),r("column_name"),r("select"),r("values"),r("insert"),r("update"),r("delete"),r("merge"),r("column_name"),r("search_seq_col_name"),r("column_name"),r("cycle_mark_col_name"),r("cycle_mark_value"),r("cycle_mark_default"),r("cycle_path_col_name"),r("table_name"))}function Mb(n){_(n,`TRUNCATE [ TABLE ] [ ONLY ] %s [ * ] [, ... ]
    [ RESTART IDENTITY | CONTINUE IDENTITY ] [ CASCADE | RESTRICT ]`,r("name"))}function Fb(n){_(n,"UNLISTEN { %s | * }",r("channel"))}function Ub(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
UPDATE [ ONLY ] %s [ * ] [ [ AS ] %s ]
    SET { %s = { %s | DEFAULT } |
          ( %s [, ...] ) = [ ROW ] ( { %s | DEFAULT } [, ...] ) |
          ( %s [, ...] ) = ( %s )
        } [, ...]
    [ FROM %s [, ...] ]
    [ WHERE %s | WHERE CURRENT OF %s ]
    [ RETURNING { * | %s [ [ AS ] %s ] } [, ...] ]`,r("with_query"),r("table_name"),r("alias"),r("column_name"),r("expression"),r("column_name"),r("expression"),r("column_name"),r("sub-SELECT"),r("from_item"),r("condition"),r("cursor_name"),r("output_expression"),r("output_name"))}function Bb(n){_(n,`VACUUM [ ( %s [, ...] ) ] [ %s [, ...] ]

%s

    FULL [ %s ]
    FREEZE [ %s ]
    VERBOSE [ %s ]
    ANALYZE [ %s ]
    DISABLE_PAGE_SKIPPING [ %s ]
    SKIP_LOCKED [ %s ]
    INDEX_CLEANUP { AUTO | ON | OFF }
    PROCESS_MAIN [ %s ]
    PROCESS_TOAST [ %s ]
    TRUNCATE [ %s ]
    PARALLEL %s
    SKIP_DATABASE_STATS [ %s ]
    ONLY_DATABASE_STATS [ %s ]
    BUFFER_USAGE_LIMIT %s

%s

    %s [ ( %s [, ...] ) ]`,r("option"),r("table_and_columns"),r("where option can be one of:"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("integer"),r("boolean"),r("boolean"),r("size"),r("and table_and_columns is:"),r("table_name"),r("column_name"))}function Hb(n){_(n,`VALUES ( %s [, ...] ) [, ...]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } ONLY ]`,r("expression"),r("sort_expression"),r("operator"),r("count"),r("start"),r("count"))}function Wb(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    [ { * | %s [ [ AS ] %s ] } [, ...] ]
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY [ ALL | DISTINCT ] %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } { ONLY | WITH TIES } ]
    [ FOR { UPDATE | NO KEY UPDATE | SHARE | KEY SHARE } [ OF %s [, ...] ] [ NOWAIT | SKIP LOCKED ] [...] ]

%s

    [ ONLY ] %s [ * ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
                [ TABLESAMPLE %s ( %s [, ...] ) [ REPEATABLE ( %s ) ] ]
    [ LATERAL ] ( %s ) [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] ) [ AS ] %s ( %s [, ...] )
    [ LATERAL ] %s ( [ %s [, ...] ] ) AS ( %s [, ...] )
    [ LATERAL ] ROWS FROM( %s ( [ %s [, ...] ] ) [ AS ( %s [, ...] ) ] [, ...] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s %s %s { ON %s | USING ( %s [, ...] ) [ AS %s ] }
    %s NATURAL %s %s
    %s CROSS JOIN %s

%s

    ( )
    %s
    ( %s [, ...] )
    ROLLUP ( { %s | ( %s [, ...] ) } [, ...] )
    CUBE ( { %s | ( %s [, ...] ) } [, ...] )
    GROUPING SETS ( %s [, ...] )

%s

    %s [ ( %s [, ...] ) ] AS [ [ NOT ] MATERIALIZED ] ( %s | %s | %s | %s | %s | %s )
        [ SEARCH { BREADTH | DEPTH } FIRST BY %s [, ...] SET %s ]
        [ CYCLE %s [, ...] SET %s [ TO %s DEFAULT %s ] USING %s ]

TABLE [ ONLY ] %s [ * ]`,r("with_query"),r("expression"),r("expression"),r("output_name"),r("from_item"),r("condition"),r("grouping_element"),r("condition"),r("window_name"),r("window_definition"),r("select"),r("expression"),r("operator"),r("count"),r("start"),r("count"),r("from_reference"),r("where from_item can be one of:"),r("table_name"),r("alias"),r("column_alias"),r("sampling_method"),r("argument"),r("seed"),r("select"),r("alias"),r("column_alias"),r("with_query_name"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("alias"),r("column_alias"),r("from_item"),r("join_type"),r("from_item"),r("join_condition"),r("join_column"),r("join_using_alias"),r("from_item"),r("join_type"),r("from_item"),r("from_item"),r("from_item"),r("and grouping_element can be one of:"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("grouping_element"),r("and with_query is:"),r("with_query_name"),r("column_name"),r("select"),r("values"),r("insert"),r("update"),r("delete"),r("merge"),r("column_name"),r("search_seq_col_name"),r("column_name"),r("cycle_mark_col_name"),r("cycle_mark_value"),r("cycle_mark_default"),r("cycle_path_col_name"),r("table_name"))}var zd=n=>{var{theme:e,settings:t={},styles:i=[]}=n,s={".cm-gutters":{}},o={};t.background&&(o.backgroundColor=t.background),t.backgroundImage&&(o.backgroundImage=t.backgroundImage),t.foreground&&(o.color=t.foreground),t.fontSize&&(o.fontSize=t.fontSize),(t.background||t.foreground)&&(s["&"]=o),t.fontFamily&&(s["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(s[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(s[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(s[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(s[".cm-content"]={caretColor:t.caret},s[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var a={};t.gutterActiveForeground&&(a.color=t.gutterActiveForeground),t.lineHighlight&&(s[".cm-activeLine"]={backgroundColor:t.lineHighlight},a.backgroundColor=t.lineHighlight),s[".cm-activeLineGutter"]=a,t.selection&&(s["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(s["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var l=Q.theme(s,{dark:e==="dark"}),c=Ei.define(i),h=[l,il(c)];return h},Gb={background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},Vb=[{tag:[w.standard(w.tagName),w.tagName],color:"#116329"},{tag:[w.comment,w.bracket],color:"#6a737d"},{tag:[w.className,w.propertyName],color:"#6f42c1"},{tag:[w.variableName,w.attributeName,w.number,w.operator],color:"#005cc5"},{tag:[w.keyword,w.typeName,w.typeOperator,w.typeName],color:"#d73a49"},{tag:[w.string,w.meta,w.regexp],color:"#032f62"},{tag:[w.name,w.quote],color:"#22863a"},{tag:[w.heading,w.strong],color:"#24292e",fontWeight:"bold"},{tag:[w.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[w.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[w.atom,w.bool,w.special(w.variableName)],color:"#e36209"},{tag:[w.url,w.escape,w.regexp,w.link],color:"#032f62"},{tag:w.link,textDecoration:"underline"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.invalid,color:"#cb2431"}],qb=n=>{var{theme:e="light",settings:t={},styles:i=[]}=n||{};return zd({theme:e,settings:ka({},Gb,t),styles:[...Vb,...i]})},Yb=qb(),jb={background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},Xb=[{tag:[w.standard(w.tagName),w.tagName],color:"#7ee787"},{tag:[w.comment,w.bracket],color:"#8b949e"},{tag:[w.className,w.propertyName],color:"#d2a8ff"},{tag:[w.variableName,w.attributeName,w.number,w.operator],color:"#79c0ff"},{tag:[w.keyword,w.typeName,w.typeOperator,w.typeName],color:"#ff7b72"},{tag:[w.string,w.meta,w.regexp],color:"#a5d6ff"},{tag:[w.name,w.quote],color:"#7ee787"},{tag:[w.heading,w.strong],color:"#d2a8ff",fontWeight:"bold"},{tag:[w.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[w.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[w.atom,w.bool,w.special(w.variableName)],color:"#ffab70"},{tag:w.link,textDecoration:"underline"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.invalid,color:"#f97583"}],zb=n=>{var{theme:e="dark",settings:t={},styles:i=[]}=n||{};return zd({theme:e,settings:ka({},jb,t),styles:[...Xb,...i]})},Kb=zb();const $b=[{label:"\\d",type:"function",displayLabel:"\\d[S+] [ pattern ]",detail:"PSQL Describe"},{label:"\\da",type:"function",displayLabel:"\\da[S] [ pattern ]",detail:"Lists aggregate functions"},{label:"\\dA",type:"function",displayLabel:"\\dA[+] [ pattern ]",detail:"Lists access methods"},{label:"\\dAc",type:"function",displayLabel:"\\dAc[+] [access-method-pattern [input-type-pattern]]",detail:"Lists operator classes"},{label:"\\dAf",type:"function",displayLabel:"\\dAf[+] [access-method-pattern [input-type-pattern]]",detail:"Lists operator families"},{label:"\\dAo",type:"function",displayLabel:"\\dAo[+] [access-method-pattern [operator-family-pattern]]",detail:"Lists operators associated with operator families"},{label:"\\dAp",type:"function",displayLabel:"\\dAp[+] [access-method-pattern [operator-family-pattern]]",detail:"Lists support functions associated with operator families"},{label:"\\db",type:"function",displayLabel:"\\db[+] [ pattern ]",detail:"Lists tablespaces"},{label:"\\dc",type:"function",displayLabel:"\\dc[S+] [ pattern ]",detail:"Lists conversions between character-set encodings"},{label:"\\dconfig",type:"function",displayLabel:"\\dconfig[+] [ pattern ]",detail:"Lists server configuration parameters and their values"},{label:"\\dC",type:"function",displayLabel:"\\dC[+] [ pattern ]",detail:"Lists type casts"},{label:"\\dd",type:"function",displayLabel:"\\dd[S] [ pattern ]",detail:"Shows the descriptions of objects of type constraint, operator class, operator family, rule, and trigger"},{label:"\\dD",type:"function",displayLabel:"\\dD[S+] [ pattern ]",detail:"Lists domains"},{label:"\\ddp",type:"function",displayLabel:"\\ddp [ pattern ]",detail:"Lists default access privilege settings"},{label:"\\dE",type:"function",displayLabel:"\\dE[S+] [ pattern ]",detail:"Lists foreign tables"},{label:"\\di",type:"function",displayLabel:"\\di[S+] [ pattern ]",detail:"Lists indexes"},{label:"\\dm",type:"function",displayLabel:"\\dm[S+] [ pattern ]",detail:"Lists materialized views"},{label:"\\ds",type:"function",displayLabel:"\\ds[S+] [ pattern ]",detail:"Lists sequences"},{label:"\\dt",type:"function",displayLabel:"\\dt[S+] [ pattern ]",detail:"Lists tables"},{label:"\\dv",type:"function",displayLabel:"\\dv[S+] [ pattern ]",detail:"Lists views"},{label:"\\des",type:"function",displayLabel:"\\des[+] [ pattern ]",detail:"Lists foreign servers"},{label:"\\det",type:"function",displayLabel:"\\det[+] [ pattern ]",detail:"Lists foreign tables"},{label:"\\deu",type:"function",displayLabel:"\\deu[+] [ pattern ]",detail:"Lists user mappings"},{label:"\\dew",type:"function",displayLabel:"\\dew[+] [ pattern ]",detail:"Lists foreign-data wrappers"},{label:"\\df",type:"function",displayLabel:"\\df[anptwS+] [ pattern [ arg_pattern ... ] ]",detail:"Lists functions"},{label:"\\dF",type:"function",displayLabel:"\\dF[+] [ pattern ]",detail:"Lists text search configurations"},{label:"\\dFd",type:"function",displayLabel:"\\dFd[+] [ pattern ]",detail:"Lists text search dictionaries"},{label:"\\dFp",type:"function",displayLabel:"\\dFp[+] [ pattern ]",detail:"Lists text search parsers"},{label:"\\dFt",type:"function",displayLabel:"\\dFt[+] [ pattern ]",detail:"Lists text search templates"},{label:"\\dg",type:"function",displayLabel:"\\dg[S+] [ pattern ]",detail:"Lists database roles"},{label:"\\dl",type:"function",displayLabel:"\\dl[+] ",detail:"List large objects"},{label:"\\dL",type:"function",displayLabel:"\\dL[S+] [ pattern ]",detail:"Lists procedural languages"},{label:"\\dn",type:"function",displayLabel:"\\dn[S+] [ pattern ]",detail:"Lists schemas"},{label:"\\do",type:"function",displayLabel:"\\do[S+] [ pattern [ arg_pattern [ arg_pattern ] ] ]",detail:"Lists operators with their operand and result types"},{label:"\\dO",type:"function",displayLabel:"\\dO[S+] [ pattern ]",detail:"Lists collations"},{label:"\\dp",type:"function",displayLabel:"\\dp[S] [ pattern ]",detail:"Lists tables, views and sequences with their associated access privileges"},{label:"\\dP",type:"function",displayLabel:"\\dP[itn+] [ pattern ]",detail:"Lists partitioned relations"},{label:"\\drds",type:"function",displayLabel:"\\drds [ role-pattern [ database-pattern ] ]",detail:"Lists defined configuration settings"},{label:"\\drg",type:"function",displayLabel:"\\drg[S] [ pattern ]",detail:"Lists information about each granted role membership"},{label:"\\dRp",type:"function",displayLabel:"\\dRp[+] [ pattern ]",detail:"Lists replication publications"},{label:"\\dRs",type:"function",displayLabel:"\\dRs[+] [ pattern ]",detail:"Lists replication subscriptions"},{label:"\\dT",type:"function",displayLabel:"\\dT[S+] [ pattern ]",detail:"Lists data types"},{label:"\\du",type:"function",displayLabel:"\\du[S+] [ pattern ]",detail:"Lists database roles"},{label:"\\dx",type:"function",displayLabel:"\\dx[+] [ pattern ]",detail:"Lists installed extensions"},{label:"\\dX",type:"function",displayLabel:"\\dX [ pattern ]",detail:"Lists extended statistics"},{label:"\\dy",type:"function",displayLabel:"\\dy[+] [ pattern ]",detail:"Lists event triggers"}];function Jb(n){const e=n.matchBefore(/\\\w*/);return!e||e.from===e.to?null:{from:e.from,options:$b}}function Qb(n={}){const e=n.dialect||qd;return new pT(e.language,[n.schema?e.language.data.of({autocomplete:$0(n)}):[],e.language.data.of({autocomplete:K0(e,!!n.upperCaseKeywords)}),e.language.data.of({autocomplete:Jb})])}async function Zb(n,e){if(n.trim().toLowerCase().startsWith("\\"))return ey(n,e);const t=performance.now();try{const i=await e.exec(n,{rowMode:"array"}),s=performance.now()-t;return{query:n,results:i,time:s}}catch(i){return{query:n,error:i.message,time:performance.now()-t}}}async function ey(n,e){const t=performance.now();let i,s;const{promise:o,cancel:a}=u_(n,"postgres",async c=>(s=(await e.exec(c,{rowMode:"array"}))[0],{rows:s.rows,fields:s.fields,rowCount:s.rows.length}),c=>{i=c});await o;const l=performance.now()-t;return i?typeof i=="string"?i.startsWith("ERROR:")?{query:n,error:i,time:l}:{query:n,text:i,time:l}:{query:n,text:i.title,results:[s],time:l}:{query:n,error:"No output",time:l}}async function kh(n){const e=await n.query(`
    SELECT 
      table_schema AS schema,
      table_name AS table,
      array_agg(column_name) AS columns
    FROM 
      information_schema.columns
    GROUP BY 
      table_schema, table_name
    ORDER BY 
      table_schema, table_name;
  `),t={};for(const i of e.rows)t[`${i.schema}.${i.table}`]=Array.isArray(i.columns)?i.columns:i.columns.slice(1,-1).split(",");return t}const xo=100,Ph=200;function ty(n){return n===null?"PGliteRepl-null":typeof n=="number"?"PGliteRepl-number":typeof n=="boolean"?"PGliteRepl-boolean":""}function Kd(n){let e;return n===null?e="null":typeof n=="number"?e=n.toString():typeof n=="boolean"?e=n?"true":"false":n instanceof Date?e=n.toISOString():Array.isArray(n)?e=`[${n.map(Kd).join(", ")}]`:typeof n=="object"?e=JSON.stringify(n):ArrayBuffer.isView(n)?e=`${n.byteLength} bytes`:n===void 0?e="undefined":e=n.toString(),e.length>Ph?e.slice(0,Ph)+"…":e}function ny({result:n}){const[e,t]=Ne.useState(xo),i=n.rows.slice(0,e);Ne.useEffect(()=>{t(xo)},[n]);const s=()=>{t(o=>o+xo)};return pe.jsxs(pe.Fragment,{children:[pe.jsx("div",{className:"PGliteRepl-table-scroll",children:pe.jsxs("table",{className:"PGliteRepl-table",children:[pe.jsx("thead",{children:pe.jsx("tr",{children:n.fields.map(o=>pe.jsx("th",{children:o.name},o.name))})}),pe.jsx("tbody",{children:i.map((o,a)=>pe.jsx("tr",{children:o.map((l,c)=>pe.jsx("td",{className:ty(l),children:Kd(l)},c))},a))})]})}),pe.jsxs("div",{className:"PGliteRepl-table-row-count",children:[n.rows.length>e?`${e} of `:"",n.rows.length," rows"," ",n.rows.length>e&&pe.jsx("a",{href:"",onClick:o=>{o.preventDefault(),s()},children:"Show more"})]})]})}function iy({result:n}){return pe.jsx("div",{className:"PGliteRepl-line",children:n.fields.length>0?pe.jsx(ny,{result:n}):pe.jsx("div",{className:"PGliteRepl-null",children:"null"})})}function sy({response:n,showTime:e}){var t;let i;return n.error?i=pe.jsx("div",{className:"PGliteRepl-line PGliteRepl-error",children:n.error}):i=pe.jsx(pe.Fragment,{children:(t=n.results)==null?void 0:t.map((s,o)=>pe.jsx(iy,{result:s},o))}),pe.jsxs(pe.Fragment,{children:[pe.jsx("pre",{className:"PGliteRepl-line PGliteRepl-query",children:n.query}),n.text&&pe.jsx("div",{className:"PGliteRepl-line PGliteRepl-text",children:n.text}),i,pe.jsxs("div",{className:"PGliteRepl-divider",children:[pe.jsx("hr",{}),e&&pe.jsxs("div",{className:"PGliteRepl-time",children:[n.time.toFixed(1),"ms"]})]})]})}const ry=hd.filter(n=>n.key!=="Enter"),oy=Yb,ay=Kb;function ly({pg:n,border:e=!1,lightTheme:t=oy,darkTheme:i=ay,theme:s="auto",showTime:o=!1,disableUpdateSchema:a=!1}){const[l,c]=Ne.useState(""),h=Ne.useRef(""),[f,u]=Ne.useState(!0),[m,T]=Ne.useState([]),N=Ne.useRef(null),[y,p]=Ne.useState({}),L=Ne.useRef(-1),D=Ne.useRef(null),[G,q]=Ne.useState(s==="dark"?i:t),[H,M]=Ne.useState({}),V=Hp(n);Ne.useEffect(()=>{let ee=!1;const K=async()=>{await V.waitReady,!ee&&u(!1)};return u(!0),K(),()=>{ee=!0}},[V]),Ne.useEffect(()=>{if(s==="auto"){const ee=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";q(ee==="dark"?i:t);const K=he=>{q(he.matches?i:t),setTimeout(()=>{Y()},0)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",K),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",K)}}else{q(s==="dark"?i:t),setTimeout(()=>{Y()},0);return}},[s,t,i]);const ie=Ne.useCallback((ee,K)=>{Y(),c(ee),L.current===-1&&(h.current=ee)},[]),z=Ne.useMemo(()=>[hs.of([{key:"Enter",preventDefault:!0,run:()=>l.trim()===""?!1:(Zb(l,V).then(ee=>{T(K=>[...K,ee]),N.current&&setTimeout(()=>{N.current.scrollTop=N.current.scrollHeight},0),a||kh(V).then(p)}),L.current=-1,h.current="",c(""),!0)},{key:"ArrowUp",run:ee=>{const K=ee.state;if(K.doc.lineAt(K.selection.main.head).number===1){const ue=L.current;return L.current++,L.current>=m.length&&(L.current=m.length-1),L.current<-1&&(L.current=-1),L.current===ue||(L.current===-1?c(h.current):c(m[m.length-L.current-1].query)),!0}return!1}},{key:"ArrowDown",run:ee=>{const K=ee.state,he=K.doc.lineAt(K.selection.main.head).number,ue=K.doc.lines;if(he===ue){const Ee=L.current;return L.current--,L.current>=m.length&&(L.current=m.length-1),L.current<-1&&(L.current=-1),L.current===Ee||(L.current===-1?c(h.current):c(m[m.length-L.current-1].query)),!0}return!1}},...ry]),Qb({dialect:qd,schema:y,tables:[{label:"d",displayLabel:"\\d"}],defaultSchema:"public"})],[V,y,l,m,a]),Y=()=>{var ee,K;const he=(K=(ee=D.current)==null?void 0:ee.editor)==null?void 0:K.querySelector(".cm-editor");if(!he)throw new Error("No CodeMirror editor found");const ue=he.querySelector(".cm-gutters"),Ee=window.getComputedStyle(he),Ce=Ee.color,Oe=Ee.backgroundColor,ke=window.getComputedStyle(ue),_e=ke.borderRight,We=parseInt(ke.borderRightWidth)||0,at=We?ke.borderRightColor:Ce.replace("rgb","rgba").replace(")",", 0.15)"),ze=We?ke.borderRight:`1px solid ${at}`;M({"--PGliteRepl-foreground-color":Ce,"--PGliteRepl-background-color":Oe,"--PGliteRepl-border":ze,"--PGliteRepl-gutter-border":_e,"--PGliteRepl-border-color":at})};return pe.jsxs("div",{className:`
      PGliteRepl-root
      ${e?"PGliteRepl-root-border":""}
    `,style:H,children:[pe.jsxs("div",{className:"PGliteRepl-output",ref:ee=>N.current=ee,children:[f&&pe.jsx("div",{className:"PGliteRepl-loading-msg",children:"Loading..."}),m.map(ee=>pe.jsx("div",{children:pe.jsx(sy,{response:ee||[],showTime:o})},`${ee.query}-${ee.time}`))]}),pe.jsx(Md,{ref:D,className:`PGliteRepl-input ${f?"PGliteRepl-input-loading":""}`,width:"100%",value:l,basicSetup:{defaultKeymap:!1},extensions:z,theme:G,onChange:ie,editable:!f,onCreateEditor:()=>{Y(),setTimeout(Y,0),kh(V).then(p)}})]})}const gy=Wp("/repl")({component:cy});function cy(){const{theme:n}=Gp();return pe.jsx("div",{className:"container p-4 mx-auto",children:pe.jsxs(zp,{className:"p-4",children:[pe.jsx(Kp,{children:"REPL"}),pe.jsx(qp,{type:"single",collapsible:!0,children:pe.jsxs(Yp,{value:"item-1",children:[pe.jsx(jp,{children:"Current schema"}),pe.jsx(Xp,{children:pe.jsx("pre",{className:"p-2 text-xs rounded-md bg-secondary",children:`CREATE TABLE IF NOT EXISTS records(
  id text PRIMARY KEY,
  type TEXT NOT NULL,
  source_name text,
  source_version text,
  device text,
  unit text,
  value real NOT NULL,
  creation_date timestamp,
  start_date timestamp,
  end_date timestamp
);

CREATE TABLE IF NOT EXISTS record_metadata(
  record_id text REFERENCES records(id),
  key TEXT NOT NULL,
  value text NOT NULL,
  PRIMARY KEY (record_id, key)
);

CREATE INDEX idx_records_type ON records(type);

CREATE INDEX idx_records_dates ON records(start_date, end_date);

CREATE INDEX idx_metadata_key ON record_metadata(key);`})})]})}),pe.jsx(ly,{pg:Vp,showTime:!0,border:!0,theme:n==="system"?"auto":n})]})})}export{gy as Route};
