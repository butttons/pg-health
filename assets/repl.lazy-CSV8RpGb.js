import{r as pe,j as Z,a6 as ym,o as Qh,I as Wa,K as Zh,P as cs,q as ef,t as Lm,p as tf,V as Im,U as wm,R as Ct,X as xm,A as Ga,Y as vm,a5 as Dm,u as km,a3 as Pm}from"./index-2zcgcDBM.js";import{_ as Va}from"./extends-CF3RwP-h.js";import{C as Mm,b as Fm}from"./card-D2ofs_iy.js";function Um(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;t[i]=n[i]}return t}let Uo=[],nf=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?nf:Uo).push(t=t+n[e])})();function Bm(n){if(n<768)return!1;for(let e=0,t=Uo.length;;){let i=e+t>>1;if(n<Uo[i])t=i;else if(n>=nf[i])e=i+1;else return!0;if(e==t)return!1}}function Fl(n){return n>=127462&&n<=127487}const Ul=8205;function Hm(n,e,t=!0,i=!0){return(t?sf:Wm)(n,e,i)}function sf(n,e,t){if(e==n.length)return e;e&&rf(n.charCodeAt(e))&&of(n.charCodeAt(e-1))&&e--;let i=io(n,e);for(e+=Bl(i);e<n.length;){let s=io(n,e);if(i==Ul||s==Ul||t&&Bm(s))e+=Bl(s),i=s;else if(Fl(s)){let r=0,a=e-2;for(;a>=0&&Fl(io(n,a));)r++,a-=2;if(r%2==0)break;e+=2}else break}return e}function Wm(n,e,t){for(;e>0;){let i=sf(n,e-2,t);if(i<e)return i;e--}return 0}function io(n,e){let t=n.charCodeAt(e);if(!of(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return rf(i)?(t-55296<<10)+(i-56320)+65536:t}function rf(n){return n>=56320&&n<57344}function of(n){return n>=55296&&n<56320}function Bl(n){return n<65536?1:2}class _e{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=hi(this,e,t);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),Ht.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=hi(this,e,t);let i=[];return this.decompose(e,t,i,0),Ht.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new Gi(this),r=new Gi(e);for(let a=t,l=t;;){if(s.next(a),r.next(a),a=0,s.lineBreak!=r.lineBreak||s.done!=r.done||s.value!=r.value)return!1;if(l+=s.value.length,s.done||l>=i)return!0}}iter(e=1){return new Gi(this,e)}iterRange(e,t=this.length){return new af(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new lf(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?_e.empty:e.length<=32?new Me(e):Ht.from(Me.split(e,[]))}}class Me extends _e{constructor(e,t=Gm(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let r=0;;r++){let a=this.text[r],l=s+a.length;if((t?i:l)>=e)return new Vm(s,l,i,a);s=l+1,i++}}decompose(e,t,i,s){let r=e<=0&&t>=this.length?this:new Me(Hl(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=i.pop(),l=$s(r.text,a.text.slice(),0,r.length);if(l.length<=32)i.push(new Me(l,a.length+r.length));else{let c=l.length>>1;i.push(new Me(l.slice(0,c)),new Me(l.slice(c)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof Me))return super.replace(e,t,i);[e,t]=hi(this,e,t);let s=$s(this.text,$s(i.text,Hl(this.text,0,e)),t),r=this.length+i.length-(t-e);return s.length<=32?new Me(s,r):Ht.from(Me.split(s,[]),r)}sliceString(e,t=this.length,i=`
`){[e,t]=hi(this,e,t);let s="";for(let r=0,a=0;r<=t&&a<this.text.length;a++){let l=this.text[a],c=r+l.length;r>e&&a&&(s+=i),e<c&&t>r&&(s+=l.slice(Math.max(0,e-r),t-r)),r=c+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let r of e)i.push(r),s+=r.length+1,i.length==32&&(t.push(new Me(i,s)),i=[],s=-1);return s>-1&&t.push(new Me(i,s)),t}}class Ht extends _e{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let r=0;;r++){let a=this.children[r],l=s+a.length,c=i+a.lines-1;if((t?c:l)>=e)return a.lineInner(e,t,i,s);s=l+1,i=c+1}}decompose(e,t,i,s){for(let r=0,a=0;a<=t&&r<this.children.length;r++){let l=this.children[r],c=a+l.length;if(e<=c&&t>=a){let h=s&((a<=e?1:0)|(c>=t?2:0));a>=e&&c<=t&&!h?i.push(l):l.decompose(e-a,t-a,i,h)}a=c+1}}replace(e,t,i){if([e,t]=hi(this,e,t),i.lines<this.lines)for(let s=0,r=0;s<this.children.length;s++){let a=this.children[s],l=r+a.length;if(e>=r&&t<=l){let c=a.replace(e-r,t-r,i),h=this.lines-a.lines+c.lines;if(c.lines<h>>4&&c.lines>h>>6){let f=this.children.slice();return f[s]=c,new Ht(f,this.length-(t-e)+i.length)}return super.replace(r,l,c)}r=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=hi(this,e,t);let s="";for(let r=0,a=0;r<this.children.length&&a<=t;r++){let l=this.children[r],c=a+l.length;a>e&&r&&(s+=i),e<c&&t>a&&(s+=l.sliceString(e-a,t-a,i)),a=c+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Ht))return 0;let i=0,[s,r,a,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,r+=t){if(s==a||r==l)return i;let c=this.children[s],h=e.children[r];if(c!=h)return i+c.scanIdentical(h,t);i+=c.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let T of e)i+=T.lines;if(i<32){let T=[];for(let N of e)N.flatten(T);return new Me(T,t)}let s=Math.max(32,i>>5),r=s<<1,a=s>>1,l=[],c=0,h=-1,f=[];function u(T){let N;if(T.lines>r&&T instanceof Ht)for(let b of T.children)u(b);else T.lines>a&&(c>a||!c)?(m(),l.push(T)):T instanceof Me&&c&&(N=f[f.length-1])instanceof Me&&T.lines+N.lines<=32?(c+=T.lines,h+=T.length+1,f[f.length-1]=new Me(N.text.concat(T.text),N.length+1+T.length)):(c+T.lines>s&&m(),c+=T.lines,h+=T.length+1,f.push(T))}function m(){c!=0&&(l.push(f.length==1?f[0]:Ht.from(f,h)),h=-1,c=f.length=0)}for(let T of e)u(T);return m(),l.length==1?l[0]:new Ht(l,t)}}_e.empty=new Me([""],0);function Gm(n){let e=-1;for(let t of n)e+=t.length+1;return e}function $s(n,e,t=0,i=1e9){for(let s=0,r=0,a=!0;r<n.length&&s<=i;r++){let l=n[r],c=s+l.length;c>=t&&(c>i&&(l=l.slice(0,i-s)),s<t&&(l=l.slice(t-s)),a?(e[e.length-1]+=l,a=!1):e.push(l)),s=c+1}return e}function Hl(n,e,t){return $s(n,[""],e,t)}class Gi{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Me?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],r=this.offsets[i],a=r>>1,l=s instanceof Me?s.text.length:s.children.length;if(a==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Me){let c=s.text[a+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=s.children[a+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof Me?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class af{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Gi(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class lf{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(_e.prototype[Symbol.iterator]=function(){return this.iter()},Gi.prototype[Symbol.iterator]=af.prototype[Symbol.iterator]=lf.prototype[Symbol.iterator]=function(){return this});class Vm{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}function hi(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Qe(n,e,t=!0,i=!0){return Hm(n,e,t,i)}function qm(n){return n>=56320&&n<57344}function Ym(n){return n>=55296&&n<56320}function ht(n,e){let t=n.charCodeAt(e);if(!Ym(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return qm(i)?(t-55296<<10)+(i-56320)+65536:t}function qa(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Wt(n){return n<65536?1:2}const Bo=/\r\n?|\n/;var st=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(st||(st={}));class Yt{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let r=this.sections[t++],a=this.sections[t++];a<0?(e(i,s,r),s+=r):s+=a,i+=r}}iterChangedRanges(e,t=!1){Ho(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new Yt(e)}composeDesc(e){return this.empty?e:e.empty?this:cf(this,e)}mapDesc(e,t=!1){return e.empty?this:Wo(this,e,t)}mapPos(e,t=-1,i=st.Simple){let s=0,r=0;for(let a=0;a<this.sections.length;){let l=this.sections[a++],c=this.sections[a++],h=s+l;if(c<0){if(h>e)return r+(e-s);r+=l}else{if(i!=st.Simple&&h>=e&&(i==st.TrackDel&&s<e&&h>e||i==st.TrackBefore&&s<e||i==st.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==s||t<0?r:r+c;r+=c}s=h}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return r}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let r=this.sections[i++],a=this.sections[i++],l=s+r;if(a>=0&&s<=t&&l>=e)return s<e&&l>t?"cover":!0;s=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Yt(e)}static create(e){return new Yt(e)}}class Ge extends Yt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Ho(this,(t,i,s,r,a)=>e=e.replace(s,s+(i-t),a),!1),e}mapDesc(e,t=!1){return Wo(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,r=0;s<t.length;s+=2){let a=t[s],l=t[s+1];if(l>=0){t[s]=l,t[s+1]=a;let c=s>>1;for(;i.length<c;)i.push(_e.empty);i.push(a?e.slice(r,r+a):_e.empty)}r+=a}return new Ge(t,i)}compose(e){return this.empty?e:e.empty?this:cf(this,e,!0)}map(e,t=!1){return e.empty?this:Wo(this,e,t,!0)}iterChanges(e,t=!1){Ho(this,e,t)}get desc(){return Yt.create(this.sections)}filter(e){let t=[],i=[],s=[],r=new Xi(this);e:for(let a=0,l=0;;){let c=a==e.length?1e9:e[a++];for(;l<c||l==c&&r.len==0;){if(r.done)break e;let f=Math.min(r.len,c-l);tt(s,f,-1);let u=r.ins==-1?-1:r.off==0?r.ins:0;tt(t,f,u),u>0&&gn(i,t,r.text),r.forward(f),l+=f}let h=e[a++];for(;l<h;){if(r.done)break e;let f=Math.min(r.len,h-l);tt(t,f,-1),tt(s,f,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(f),l+=f}}return{changes:new Ge(t,i),filtered:Yt.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],r=[],a=0,l=null;function c(f=!1){if(!f&&!s.length)return;a<t&&tt(s,t-a,-1);let u=new Ge(s,r);l=l?l.compose(u.map(l)):u,s=[],r=[],a=0}function h(f){if(Array.isArray(f))for(let u of f)h(u);else if(f instanceof Ge){if(f.length!=t)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${t})`);c(),l=l?l.compose(f.map(l)):f}else{let{from:u,to:m=u,insert:T}=f;if(u>m||u<0||m>t)throw new RangeError(`Invalid change range ${u} to ${m} (in doc of length ${t})`);let N=T?typeof T=="string"?_e.of(T.split(i||Bo)):T:_e.empty,b=N.length;if(u==m&&b==0)return;u<a&&c(),u>a&&tt(s,u-a,-1),tt(s,m-u,b),gn(r,s,N),a=m}}return h(e),c(!l),l}static empty(e){return new Ge(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let r=e[s];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((a,l)=>l&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<s;)i.push(_e.empty);i[s]=_e.of(r.slice(1)),t.push(r[0],i[s].length)}}}return new Ge(t,i)}static createSet(e,t){return new Ge(e,t)}}function tt(n,e,t,i=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=t:i?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function gn(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(_e.empty);n.push(t)}}function Ho(n,e,t){let i=n.inserted;for(let s=0,r=0,a=0;a<n.sections.length;){let l=n.sections[a++],c=n.sections[a++];if(c<0)s+=l,r+=l;else{let h=s,f=r,u=_e.empty;for(;h+=l,f+=c,c&&i&&(u=u.append(i[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)l=n.sections[a++],c=n.sections[a++];e(s,h,r,f,u),s=h,r=f}}}function Wo(n,e,t,i=!1){let s=[],r=i?[]:null,a=new Xi(n),l=new Xi(e);for(let c=-1;;){if(a.done&&l.len||l.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&l.ins==-1){let h=Math.min(a.len,l.len);tt(s,h,-1),a.forward(h),l.forward(h)}else if(l.ins>=0&&(a.ins<0||c==a.i||a.off==0&&(l.len<a.len||l.len==a.len&&!t))){let h=l.len;for(tt(s,l.ins,-1);h;){let f=Math.min(a.len,h);a.ins>=0&&c<a.i&&a.len<=f&&(tt(s,0,a.ins),r&&gn(r,s,a.text),c=a.i),a.forward(f),h-=f}l.next()}else if(a.ins>=0){let h=0,f=a.len;for(;f;)if(l.ins==-1){let u=Math.min(f,l.len);h+=u,f-=u,l.forward(u)}else if(l.ins==0&&l.len<f)f-=l.len,l.next();else break;tt(s,h,c<a.i?a.ins:0),r&&c<a.i&&gn(r,s,a.text),c=a.i,a.forward(a.len-f)}else{if(a.done&&l.done)return r?Ge.createSet(s,r):Yt.create(s);throw new Error("Mismatched change set lengths")}}}function cf(n,e,t=!1){let i=[],s=t?[]:null,r=new Xi(n),a=new Xi(e);for(let l=!1;;){if(r.done&&a.done)return s?Ge.createSet(i,s):Yt.create(i);if(r.ins==0)tt(i,r.len,0,l),r.next();else if(a.len==0&&!a.done)tt(i,0,a.ins,l),s&&gn(s,i,a.text),a.next();else{if(r.done||a.done)throw new Error("Mismatched change set lengths");{let c=Math.min(r.len2,a.len),h=i.length;if(r.ins==-1){let f=a.ins==-1?-1:a.off?0:a.ins;tt(i,c,f,l),s&&f&&gn(s,i,a.text)}else a.ins==-1?(tt(i,r.off?0:r.len,c,l),s&&gn(s,i,r.textBit(c))):(tt(i,r.off?0:r.len,a.off?0:a.ins,l),s&&!a.off&&gn(s,i,a.text));l=(r.ins>c||a.ins>=0&&a.len>c)&&(l||i.length>h),r.forward2(c),a.forward(c)}}}}class Xi{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?_e.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?_e.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Fn{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new Fn(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return B.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return B.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return B.range(e.anchor,e.head)}static create(e,t,i){return new Fn(e,t,i)}}class B{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:B.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new B([this.main],0)}addRange(e,t=!0){return B.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,B.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new B(e.ranges.map(t=>Fn.fromJSON(t)),e.main)}static single(e,t=e){return new B([B.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let r=e[s];if(r.empty?r.from<=i:r.from<i)return B.normalized(e.slice(),t);i=r.to}return new B(e,t)}static cursor(e,t=0,i,s){return Fn.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,t,i,s){let r=(i??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?Fn.create(t,e,48|r):Fn.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let i=e[t];e.sort((s,r)=>s.from-r.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let r=e[s],a=e[s-1];if(r.empty?r.from<=a.to:r.from<a.to){let l=a.from,c=Math.max(r.to,a.to);s<=t&&t--,e.splice(--s,2,r.anchor>r.head?B.range(c,l):B.range(l,c))}}return new B(e,t)}}function hf(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Ya=0;class ie{constructor(e,t,i,s,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=Ya++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new ie(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:ja),!!e.static,e.enables)}of(e){return new Js([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Js(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Js(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function ja(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class Js{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=Ya++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,r=this.id,a=e[r]>>1,l=this.type==2,c=!1,h=!1,f=[];for(let u of this.dependencies)u=="doc"?c=!0:u=="selection"?h=!0:((t=e[u.id])!==null&&t!==void 0?t:1)&1||f.push(e[u.id]);return{create(u){return u.values[a]=i(u),1},update(u,m){if(c&&m.docChanged||h&&(m.docChanged||m.selection)||Go(u,f)){let T=i(u);if(l?!Wl(T,u.values[a],s):!s(T,u.values[a]))return u.values[a]=T,1}return 0},reconfigure:(u,m)=>{let T,N=m.config.address[r];if(N!=null){let b=hr(m,N);if(this.dependencies.every(p=>p instanceof ie?m.facet(p)===u.facet(p):p instanceof Ze?m.field(p,!1)==u.field(p,!1):!0)||(l?Wl(T=i(u),b,s):s(T=i(u),b)))return u.values[a]=b,0}else T=i(u);return u.values[a]=T,1}}}}function Wl(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function Go(n,e){let t=!1;for(let i of e)Vi(n,i)&1&&(t=!0);return t}function jm(n,e,t){let i=t.map(c=>n[c.id]),s=t.map(c=>c.type),r=i.filter(c=>!(c&1)),a=n[e.id]>>1;function l(c){let h=[];for(let f=0;f<i.length;f++){let u=hr(c,i[f]);if(s[f]==2)for(let m of u)h.push(m);else h.push(u)}return e.combine(h)}return{create(c){for(let h of i)Vi(c,h);return c.values[a]=l(c),1},update(c,h){if(!Go(c,r))return 0;let f=l(c);return e.compare(f,c.values[a])?0:(c.values[a]=f,1)},reconfigure(c,h){let f=Go(c,i),u=h.config.facets[e.id],m=h.facet(e);if(u&&!f&&ja(t,u))return c.values[a]=m,0;let T=l(c);return e.compare(T,m)?(c.values[a]=m,0):(c.values[a]=T,1)}}}const Gl=ie.define({static:!0});class Ze{constructor(e,t,i,s,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=r,this.provides=void 0}static define(e){let t=new Ze(Ya++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Gl).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let r=i.values[t],a=this.updateF(r,s);return this.compareF(r,a)?0:(i.values[t]=a,1)},reconfigure:(i,s)=>s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,Gl.of({field:this,create:e})]}get extension(){return this}}const Pn={lowest:4,low:3,default:2,high:1,highest:0};function yi(n){return e=>new ff(e,n)}const jn={highest:yi(Pn.highest),high:yi(Pn.high),default:yi(Pn.default),low:yi(Pn.low),lowest:yi(Pn.lowest)};class ff{constructor(e,t){this.inner=e,this.prec=t}}class Br{of(e){return new Vo(this,e)}reconfigure(e){return Br.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Vo{constructor(e,t){this.compartment=e,this.inner=t}}class cr{constructor(e,t,i,s,r,a){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=r,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],r=Object.create(null),a=new Map;for(let m of Xm(e,t,a))m instanceof Ze?s.push(m):(r[m.facet.id]||(r[m.facet.id]=[])).push(m);let l=Object.create(null),c=[],h=[];for(let m of s)l[m.id]=h.length<<1,h.push(T=>m.slot(T));let f=i?.config.facets;for(let m in r){let T=r[m],N=T[0].facet,b=f&&f[m]||[];if(T.every(p=>p.type==0))if(l[N.id]=c.length<<1|1,ja(b,T))c.push(i.facet(N));else{let p=N.combine(T.map(L=>L.value));c.push(i&&N.compare(p,i.facet(N))?i.facet(N):p)}else{for(let p of T)p.type==0?(l[p.id]=c.length<<1|1,c.push(p.value)):(l[p.id]=h.length<<1,h.push(L=>p.dynamicSlot(L)));l[N.id]=h.length<<1,h.push(p=>jm(p,N,T))}}let u=h.map(m=>m(l));return new cr(e,a,u,l,c,r)}}function Xm(n,e,t){let i=[[],[],[],[],[]],s=new Map;function r(a,l){let c=s.get(a);if(c!=null){if(c<=l)return;let h=i[c].indexOf(a);h>-1&&i[c].splice(h,1),a instanceof Vo&&t.delete(a.compartment)}if(s.set(a,l),Array.isArray(a))for(let h of a)r(h,l);else if(a instanceof Vo){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(a.compartment)||a.inner;t.set(a.compartment,h),r(h,l)}else if(a instanceof ff)r(a.inner,a.prec);else if(a instanceof Ze)i[l].push(a),a.provides&&r(a.provides,l);else if(a instanceof Js)i[l].push(a),a.facet.extensions&&r(a.facet.extensions,Pn.default);else{let h=a.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(h,l)}}return r(n,Pn.default),i.reduce((a,l)=>a.concat(l))}function Vi(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function hr(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const uf=ie.define(),qo=ie.define({combine:n=>n.some(e=>e),static:!0}),df=ie.define({combine:n=>n.length?n[0]:void 0,static:!0}),pf=ie.define(),mf=ie.define(),gf=ie.define(),Ef=ie.define({combine:n=>n.length?n[0]:!1});class Xt{constructor(e,t){this.type=e,this.value=t}static define(){return new zm}}class zm{of(e){return new Xt(this,e)}}class Km{constructor(e){this.map=e}of(e){return new ge(this,e)}}class ge{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ge(this.type,t)}is(e){return this.type==e}static define(e={}){return new Km(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let r=s.map(t);r&&i.push(r)}return i}}ge.reconfigure=ge.define();ge.appendConfig=ge.define();class Ve{constructor(e,t,i,s,r,a){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=r,this.scrollIntoView=a,this._doc=null,this._state=null,i&&hf(i,t.newLength),r.some(l=>l.type==Ve.time)||(this.annotations=r.concat(Ve.time.of(Date.now())))}static create(e,t,i,s,r,a){return new Ve(e,t,i,s,r,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ve.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ve.time=Xt.define();Ve.userEvent=Xt.define();Ve.addToHistory=Xt.define();Ve.remote=Xt.define();function $m(n,e){let t=[];for(let i=0,s=0;;){let r,a;if(i<n.length&&(s==e.length||e[s]>=n[i]))r=n[i++],a=n[i++];else if(s<e.length)r=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<r?t.push(r,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function Tf(n,e,t){var i;let s,r,a;return t?(s=e.changes,r=Ge.empty(e.changes.length),a=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),r=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(r):(i=n.selection)===null||i===void 0?void 0:i.map(s),effects:ge.mapEffects(n.effects,s).concat(ge.mapEffects(e.effects,r)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Yo(n,e,t){let i=e.selection,s=si(e.annotations);return e.userEvent&&(s=s.concat(Ve.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ge?e.changes:Ge.of(e.changes||[],t,n.facet(df)),selection:i&&(i instanceof B?i:B.single(i.anchor,i.head)),effects:si(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Af(n,e,t){let i=Yo(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let a=!!e[r].sequential;i=Tf(i,Yo(n,e[r],a?i.changes.newLength:n.doc.length),a)}let s=Ve.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Qm(t?Jm(s):s)}function Jm(n){let e=n.startState,t=!0;for(let s of e.facet(pf)){let r=s(n);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:$m(t,r))}if(t!==!0){let s,r;if(t===!1)r=n.changes.invertedDesc,s=Ge.empty(e.doc.length);else{let a=n.changes.filter(t);s=a.changes,r=a.filtered.mapDesc(a.changes).invertedDesc}n=Ve.create(e,s,n.selection&&n.selection.map(r),ge.mapEffects(n.effects,r),n.annotations,n.scrollIntoView)}let i=e.facet(mf);for(let s=i.length-1;s>=0;s--){let r=i[s](n);r instanceof Ve?n=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Ve?n=r[0]:n=Af(e,si(r),!1)}return n}function Qm(n){let e=n.startState,t=e.facet(gf),i=n;for(let s=t.length-1;s>=0;s--){let r=t[s](n);r&&Object.keys(r).length&&(i=Tf(i,Yo(e,r,n.changes.newLength),!0))}return i==n?n:Ve.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const Zm=[];function si(n){return n==null?Zm:Array.isArray(n)?n:[n]}var De=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(De||(De={}));const eg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let jo;try{jo=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function tg(n){if(jo)return jo.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||eg.test(t)))return!0}return!1}function ng(n){return e=>{if(!/\S/.test(e))return De.Space;if(tg(e))return De.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return De.Word;return De.Other}}class Ae{constructor(e,t,i,s,r,a){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=r,a&&(a._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Vi(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Vi(this,i),hr(this,i)}update(...e){return Af(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let l of e.effects)l.is(Br.reconfigure)?(t&&(s=new Map,t.compartments.forEach((c,h)=>s.set(h,c)),t=null),s.set(l.value.compartment,l.value.extension)):l.is(ge.reconfigure)?(t=null,i=l.value):l.is(ge.appendConfig)&&(t=null,i=si(i).concat(l.value));let r;t?r=e.startState.values.slice():(t=cr.resolve(i,s,this),r=new Ae(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,h)=>h.reconfigure(c,this),null).values);let a=e.startState.facet(qo)?e.newSelection:e.newSelection.asSingle();new Ae(t,e.newDoc,a,r,(l,c)=>c.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:B.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),r=[i.range],a=si(i.effects);for(let l=1;l<t.ranges.length;l++){let c=e(t.ranges[l]),h=this.changes(c.changes),f=h.map(s);for(let m=0;m<l;m++)r[m]=r[m].map(f);let u=s.mapDesc(h,!0);r.push(c.range.map(u)),s=s.compose(f),a=ge.mapEffects(a,f).concat(ge.mapEffects(si(c.effects),u))}return{changes:s,selection:B.create(r,t.mainIndex),effects:a}}changes(e=[]){return e instanceof Ge?e:Ge.of(e,this.doc.length,this.facet(Ae.lineSeparator))}toText(e){return _e.of(e.split(this.facet(Ae.lineSeparator)||Bo))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Vi(this,t),hr(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof Ze&&this.config.address[s.id]!=null&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let a=i[r],l=e[r];s.push(a.init(c=>a.spec.fromJSON(l,c)))}}return Ae.create({doc:e.doc,selection:B.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=cr.resolve(e.extensions||[],new Map),i=e.doc instanceof _e?e.doc:_e.of((e.doc||"").split(t.staticFacet(Ae.lineSeparator)||Bo)),s=e.selection?e.selection instanceof B?e.selection:B.single(e.selection.anchor,e.selection.head):B.single(0);return hf(s,i.length),t.staticFacet(qo)||(s=s.asSingle()),new Ae(t,i,s,t.dynamicSlots.map(()=>null),(r,a)=>a.create(r),null)}get tabSize(){return this.facet(Ae.tabSize)}get lineBreak(){return this.facet(Ae.lineSeparator)||`
`}get readOnly(){return this.facet(Ef)}phrase(e,...t){for(let i of this.facet(Ae.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let r=+(s||1);return!r||r>t.length?i:t[r-1]})),e}languageDataAt(e,t,i=-1){let s=[];for(let r of this.facet(uf))for(let a of r(this,t,i))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return ng(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),r=this.charCategorizer(e),a=e-i,l=e-i;for(;a>0;){let c=Qe(t,a,!1);if(r(t.slice(c,a))!=De.Word)break;a=c}for(;l<s;){let c=Qe(t,l);if(r(t.slice(l,c))!=De.Word)break;l=c}return a==l?null:B.range(a+i,l+i)}}Ae.allowMultipleSelections=qo;Ae.tabSize=ie.define({combine:n=>n.length?n[0]:4});Ae.lineSeparator=df;Ae.readOnly=Ef;Ae.phrases=ie.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(s=>n[s]==e[s])}});Ae.languageData=uf;Ae.changeFilter=pf;Ae.transactionFilter=mf;Ae.transactionExtender=gf;Br.reconfigure=ge.define();function zt(n,e,t={}){let i={};for(let s of n)for(let r of Object.keys(s)){let a=s[r],l=i[r];if(l===void 0)i[r]=a;else if(!(l===a||a===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](l,a);else throw new Error("Config merge conflict for field "+r)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class Wn{eq(e){return this==e}range(e,t=e){return Xo.create(e,t,this)}}Wn.prototype.startSide=Wn.prototype.endSide=0;Wn.prototype.point=!1;Wn.prototype.mapMode=st.TrackDel;let Xo=class Sf{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Sf(e,t,i)}};function zo(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Xa{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let r=i?this.to:this.from;for(let a=s,l=r.length;;){if(a==l)return a;let c=a+l>>1,h=r[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==a)return h>=0?a:l;h>=0?l=c:a=c+1}}between(e,t,i,s){for(let r=this.findIndex(t,-1e9,!0),a=this.findIndex(i,1e9,!1,r);r<a;r++)if(s(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],s=[],r=[],a=-1,l=-1;for(let c=0;c<this.value.length;c++){let h=this.value[c],f=this.from[c]+e,u=this.to[c]+e,m,T;if(f==u){let N=t.mapPos(f,h.startSide,h.mapMode);if(N==null||(m=T=N,h.startSide!=h.endSide&&(T=t.mapPos(f,h.endSide),T<m)))continue}else if(m=t.mapPos(f,h.startSide),T=t.mapPos(u,h.endSide),m>T||m==T&&h.startSide>0&&h.endSide<=0)continue;(T-m||h.endSide-h.startSide)<0||(a<0&&(a=m),h.point&&(l=Math.max(l,T-m)),i.push(h),s.push(m-a),r.push(T-a))}return{mapped:i.length?new Xa(s,r,i,l):null,pos:a}}}class Re{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new Re(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:r=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(i&&(t=t.slice().sort(zo)),this.isEmpty)return t.length?Re.of(t):this;let l=new Rf(this,null,-1).goto(0),c=0,h=[],f=new sn;for(;l.value||c<t.length;)if(c<t.length&&(l.from-t[c].from||l.startSide-t[c].value.startSide)>=0){let u=t[c++];f.addInner(u.from,u.to,u.value)||h.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(l.chunkIndex)<t[c].from)&&(!a||s>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&f.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!a||s>l.to||r<l.from||a(l.from,l.to,l.value))&&(f.addInner(l.from,l.to,l.value)||h.push(Xo.create(l.from,l.to,l.value))),l.next());return f.finishInner(this.nextLayer.isEmpty&&!h.length?Re.empty:this.nextLayer.update({add:h,filter:a,filterFrom:s,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],c=this.chunk[a],h=e.touchesRange(l,l+c.length);if(h===!1)s=Math.max(s,c.maxPoint),t.push(c),i.push(e.mapPos(l));else if(h===!0){let{mapped:f,pos:u}=c.map(l,e);f&&(s=Math.max(s,f.maxPoint),t.push(f),i.push(u))}}let r=this.nextLayer.map(e);return t.length==0?r:new Re(i,t,r||Re.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],a=this.chunk[s];if(t>=r&&e<=r+a.length&&a.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return zi.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return zi.from(e).goto(t)}static compare(e,t,i,s,r=-1){let a=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=r),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=r),c=Vl(a,l,i),h=new Li(a,c,r),f=new Li(l,c,r);i.iterGaps((u,m,T)=>ql(h,u,f,m,T,s)),i.empty&&i.length==0&&ql(h,0,f,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=999999999);let r=e.filter(f=>!f.isEmpty&&t.indexOf(f)<0),a=t.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(r.length!=a.length)return!1;if(!r.length)return!0;let l=Vl(r,a),c=new Li(r,l,0).goto(i),h=new Li(a,l,0).goto(i);for(;;){if(c.to!=h.to||!Ko(c.active,h.active)||c.point&&(!h.point||!c.point.eq(h.point)))return!1;if(c.to>s)return!0;c.next(),h.next()}}static spans(e,t,i,s,r=-1){let a=new Li(e,null,r).goto(t),l=t,c=a.openStart;for(;;){let h=Math.min(a.to,i);if(a.point){let f=a.activeForPoint(a.to),u=a.pointFrom<t?f.length+1:a.point.startSide<0?f.length:Math.min(f.length,c);s.point(l,h,a.point,f,u,a.pointRank),c=Math.min(a.openEnd(h),f.length)}else h>l&&(s.span(l,h,a.active,c),c=a.openEnd(h));if(a.to>i)return c+(a.point&&a.to>i?1:0);l=a.to,a.next()}}static of(e,t=!1){let i=new sn;for(let s of e instanceof Xo?[e]:t?ig(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return Re.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=Re.empty;s=s.nextLayer)t=new Re(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Re.empty=new Re([],[],null,-1);function ig(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(zo(e,i)>0)return n.slice().sort(zo);e=i}return n}Re.empty.nextLayer=Re.empty;class sn{finishChunk(e){this.chunks.push(new Xa(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new sn)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Re.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Re.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Vl(n,e,t){let i=new Map;for(let r of n)for(let a=0;a<r.chunk.length;a++)r.chunk[a].maxPoint<=0&&i.set(r.chunk[a],r.chunkPos[a]);let s=new Set;for(let r of e)for(let a=0;a<r.chunk.length;a++){let l=i.get(r.chunk[a]);l!=null&&(t?t.mapPos(l):l)==r.chunkPos[a]&&!t?.touchesRange(l,l+r.chunk[a].length)&&s.add(r.chunk[a])}return s}class Rf{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class zi{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let r=0;r<e.length;r++)for(let a=e[r];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&s.push(new Rf(a,t,i,r));return s.length==1?s[0]:new zi(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)so(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)so(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),so(this.heap,0)}}}function so(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let s=n[i];if(i+1<n.length&&s.compare(n[i+1])>=0&&(s=n[i+1],i++),t.compare(s)<0)break;n[i]=t,n[e]=s,e=i}}class Li{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=zi.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ys(this.active,e),ys(this.activeTo,e),ys(this.activeRank,e),this.minActive=Yl(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Ls(this.active,t,i),Ls(this.activeTo,t,s),Ls(this.activeRank,t,r),e&&Ls(e,t,this.cursor.from),this.minActive=Yl(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&ys(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function ql(n,e,t,i,s,r){n.goto(e),t.goto(i);let a=i+s,l=i,c=i-e;for(;;){let h=n.to+c-t.to,f=h||n.endSide-t.endSide,u=f<0?n.to+c:t.to,m=Math.min(u,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Ko(n.activeForPoint(n.to),t.activeForPoint(t.to))||r.comparePoint(l,m,n.point,t.point):m>l&&!Ko(n.active,t.active)&&r.compareRange(l,m,n.active,t.active),u>a)break;(h||n.openEnd!=t.openEnd)&&r.boundChange&&r.boundChange(u),l=u,f<=0&&n.next(),f>=0&&t.next()}}function Ko(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function ys(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function Ls(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function Yl(n,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||n[s].endSide-n[t].endSide)<0&&(t=s,i=e[s]);return t}function Ti(n,e,t=n.length){let i=0;for(let s=0;s<t;)n.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=Qe(n,s));return i}function $o(n,e,t,i){for(let s=0,r=0;;){if(r>=e)return s;if(s==n.length)break;r+=n.charCodeAt(s)==9?t-r%t:1,s=Qe(n,s)}return i===!0?-1:n.length}const Jo="ͼ",jl=typeof Symbol>"u"?"__"+Jo:Symbol.for(Jo),Qo=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Rn{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function r(a,l,c,h){let f=[],u=/^@(\w+)\b/.exec(a[0]),m=u&&u[1]=="keyframes";if(u&&l==null)return c.push(a[0]+";");for(let T in l){let N=l[T];if(/&/.test(T))r(T.split(/,\s*/).map(b=>a.map(p=>b.replace(/&/,p))).reduce((b,p)=>b.concat(p)),N,c);else if(N&&typeof N=="object"){if(!u)throw new RangeError("The value of a property ("+T+") should be a primitive value.");r(s(T),N,f,m)}else N!=null&&f.push(T.replace(/_.*/,"").replace(/[A-Z]/g,b=>"-"+b.toLowerCase())+": "+N+";")}(f.length||m)&&c.push((i&&!u&&!h?a.map(i):a).join(", ")+" {"+f.join(" ")+"}")}for(let a in e)r(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Xl[jl]||1;return Xl[jl]=e+1,Jo+e.toString(36)}static mount(e,t,i){let s=e[Qo],r=i&&i.nonce;s?r&&s.setNonce(r):s=new sg(e,r),s.mount(Array.isArray(t)?t:[t],e)}}let zl=new Map;class sg{constructor(e,t){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let r=zl.get(i);if(r)return e[Qo]=r;this.sheet=new s.CSSStyleSheet,zl.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Qo]=this}mount(e,t){let i=this.sheet,s=0,r=0;for(let a=0;a<e.length;a++){let l=e[a],c=this.modules.indexOf(l);if(c<r&&c>-1&&(this.modules.splice(c,1),r--,c=-1),c==-1){if(this.modules.splice(r++,0,l),i)for(let h=0;h<l.rules.length;h++)i.insertRule(l.rules[h],s++)}else{for(;r<c;)s+=this.modules[r++].rules.length;s+=l.rules.length,r++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let c=0;c<this.modules.length;c++)a+=this.modules[c].getRules()+`
`;this.styleTag.textContent=a;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var _n={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ki={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},rg=typeof navigator<"u"&&/Mac/.test(navigator.platform),og=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Je=0;Je<10;Je++)_n[48+Je]=_n[96+Je]=String(Je);for(var Je=1;Je<=24;Je++)_n[Je+111]="F"+Je;for(var Je=65;Je<=90;Je++)_n[Je]=String.fromCharCode(Je+32),Ki[Je]=String.fromCharCode(Je);for(var ro in _n)Ki.hasOwnProperty(ro)||(Ki[ro]=_n[ro]);function ag(n){var e=rg&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||og&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ki:_n)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function $i(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Zo(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Qs(n,e){if(!e.anchorNode)return!1;try{return Zo(n,e.anchorNode)}catch{return!1}}function fi(n){return n.nodeType==3?Vn(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function qi(n,e,t,i){return t?Kl(n,e,t,i,-1)||Kl(n,e,t,i,1):!1}function Gn(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function fr(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function Kl(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:jt(n))){if(n.nodeName=="DIV")return!1;let r=n.parentNode;if(!r||r.nodeType!=1)return!1;e=Gn(n)+(s<0?0:1),n=r}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?jt(n):0}else return!1}}function jt(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function hs(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function lg(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function _f(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function cg(n,e,t,i,s,r,a,l){let c=n.ownerDocument,h=c.defaultView||window;for(let f=n,u=!1;f&&!u;)if(f.nodeType==1){let m,T=f==c.body,N=1,b=1;if(T)m=lg(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(u=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let x=f.getBoundingClientRect();({scaleX:N,scaleY:b}=_f(f,x)),m={left:x.left,right:x.left+f.clientWidth*N,top:x.top,bottom:x.top+f.clientHeight*b}}let p=0,L=0;if(s=="nearest")e.top<m.top?(L=-(m.top-e.top+a),t>0&&e.bottom>m.bottom+L&&(L=e.bottom-m.bottom+L+a)):e.bottom>m.bottom&&(L=e.bottom-m.bottom+a,t<0&&e.top-L<m.top&&(L=-(m.top+L-e.top+a)));else{let x=e.bottom-e.top,W=m.bottom-m.top;L=(s=="center"&&x<=W?e.top+x/2-W/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-W+a)-m.top}if(i=="nearest"?e.left<m.left?(p=-(m.left-e.left+r),t>0&&e.right>m.right+p&&(p=e.right-m.right+p+r)):e.right>m.right&&(p=e.right-m.right+r,t<0&&e.left<m.left+p&&(p=-(m.left+p-e.left+r))):p=(i=="center"?e.left+(e.right-e.left)/2-(m.right-m.left)/2:i=="start"==l?e.left-r:e.right-(m.right-m.left)+r)-m.left,p||L)if(T)h.scrollBy(p,L);else{let x=0,W=0;if(L){let V=f.scrollTop;f.scrollTop+=L/b,W=(f.scrollTop-V)*b}if(p){let V=f.scrollLeft;f.scrollLeft+=p/N,x=(f.scrollLeft-V)*N}e={left:e.left-x,top:e.top-W,right:e.right-x,bottom:e.bottom-W},x&&Math.abs(x-p)<1&&(i="nearest"),W&&Math.abs(W-L)<1&&(s="nearest")}if(T)break;f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function hg(n){let e=n.ownerDocument,t,i;for(let s=n.parentNode;s&&!(s==e.body||t&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:i}}class fg{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?jt(t):0),i,Math.min(e.focusOffset,i?jt(i):0))}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let zn=null;function Of(n){if(n.setActive)return n.setActive();if(zn)return n.focus(zn);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(zn==null?{get preventScroll(){return zn={preventScroll:!0},!0}}:void 0),!zn){zn=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],r=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let $l;function Vn(n,e,t=e){let i=$l||($l=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function ri(n,e,t,i){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let r=new KeyboardEvent("keydown",s);r.synthetic=!0,n.dispatchEvent(r);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,n.dispatchEvent(a),r.defaultPrevented||a.defaultPrevented}function ug(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Nf(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function dg(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,jt(t));;)if(i){if(t.nodeType!=1)return!1;let s=t.childNodes[i-1];s.contentEditable=="false"?i--:(t=s,i=jt(t))}else{if(t==n)return!0;i=Gn(t),t=t.parentNode}}function bf(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Cf(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=jt(t)}else if(t.parentNode&&!fr(t))i=Gn(t),t=t.parentNode;else return null}}function yf(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!fr(t))i=Gn(t)+1,t=t.parentNode;else return null}}class nt{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new nt(e.parentNode,Gn(e),t)}static after(e,t){return new nt(e.parentNode,Gn(e)+1,t)}}const za=[];class Ce{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,s=null,r;for(let a of this.children){if(a.flags&7){if(!a.dom&&(r=s?s.nextSibling:i.firstChild)){let l=Ce.get(r);(!l||!l.parent&&l.canReuseDOM(a))&&a.reuseDOM(r)}a.sync(e,t),a.flags&=-8}if(r=s?s.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=a.dom&&(t.written=!0),a.dom.parentNode==i)for(;r&&r!=a.dom;)r=Jl(r);else i.insertBefore(a.dom,r);s=a.dom}for(r=s?s.nextSibling:i.firstChild,r&&t&&t.node==i&&(t.written=!0);r;)r=Jl(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=jt(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;s==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?s=-1:s=1),e=r}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ce.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,r=0;;s++){let a=this.children[s];if(a.dom==i)return r;r+=a.length+a.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,r=-1,a=-1,l=-1;for(let c=0,h=i,f=i;c<this.children.length;c++){let u=this.children[c],m=h+u.length;if(h<e&&m>t)return u.domBoundsAround(e,t,h);if(m>=e&&s==-1&&(s=c,r=h),h>t&&u.dom.parentNode==this.dom){a=c,l=f;break}f=m,h=m+u.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=za){this.markDirty();for(let s=e;s<t;s++){let r=this.children[s];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Lf(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,s,r,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ce.prototype.breakAfter=0;function Jl(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Lf{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function If(n,e,t,i,s,r,a,l,c){let{children:h}=n,f=h.length?h[e]:null,u=r.length?r[r.length-1]:null,m=u?u.breakAfter:a;if(!(e==i&&f&&!a&&!m&&r.length<2&&f.merge(t,s,r.length?u:null,t==0,l,c))){if(i<h.length){let T=h[i];T&&(s<T.length||T.breakAfter&&u?.breakAfter)?(e==i&&(T=T.split(s),s=0),!m&&u&&T.merge(0,s,u,!0,0,c)?r[r.length-1]=T:((s||T.children.length&&!T.children[0].length)&&T.merge(0,s,null,!1,0,c),r.push(T))):T?.breakAfter&&(u?u.breakAfter=1:a=1),i++}for(f&&(f.breakAfter=a,t>0&&(!a&&r.length&&f.merge(t,f.length,r[0],!1,l,0)?f.breakAfter=r.shift().breakAfter:(t<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(t,f.length,null,!1,l,0),e++));e<i&&r.length;)if(h[i-1].become(r[r.length-1]))i--,r.pop(),c=r.length?0:l;else if(h[e].become(r[0]))e++,r.shift(),l=r.length?0:c;else break;!r.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,c)&&e--,(e<i||r.length)&&n.replaceChildren(e,i,r)}}function wf(n,e,t,i,s,r){let a=n.childCursor(),{i:l,off:c}=a.findPos(t,1),{i:h,off:f}=a.findPos(e,-1),u=e-t;for(let m of i)u+=m.length;n.length+=u,If(n,h,f,l,c,i,0,s,r)}let ft=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},ea=typeof document<"u"?document:{documentElement:{style:{}}};const ta=/Edge\/(\d+)/.exec(ft.userAgent),xf=/MSIE \d/.test(ft.userAgent),na=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ft.userAgent),Hr=!!(xf||na||ta),Ql=!Hr&&/gecko\/(\d+)/i.test(ft.userAgent),oo=!Hr&&/Chrome\/(\d+)/.exec(ft.userAgent),Zl="webkitFontSmoothing"in ea.documentElement.style,vf=!Hr&&/Apple Computer/.test(ft.vendor),ec=vf&&(/Mobile\/\w+/.test(ft.userAgent)||ft.maxTouchPoints>2);var ne={mac:ec||/Mac/.test(ft.platform),windows:/Win/.test(ft.platform),linux:/Linux|X11/.test(ft.platform),ie:Hr,ie_version:xf?ea.documentMode||6:na?+na[1]:ta?+ta[1]:0,gecko:Ql,gecko_version:Ql?+(/Firefox\/(\d+)/.exec(ft.userAgent)||[0,0])[1]:0,chrome:!!oo,chrome_version:oo?+oo[1]:0,ios:ec,android:/Android\b/.test(ft.userAgent),webkit:Zl,safari:vf,webkit_version:Zl?+(/\bAppleWebKit\/(\d+)/.exec(ft.userAgent)||[0,0])[1]:0,tabSize:ea.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const pg=256;class vt extends Ce{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof vt)||this.length-(t-e)+i.length>pg||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new vt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new nt(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return mg(this.dom,e,t)}}class rn extends Ce{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if(Nf(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,s,r,a){return i&&(!(i instanceof rn&&i.mark.eq(this.mark))||e&&r<=0||t<this.length&&a<=0)?!1:(wf(this,e,t,i?i.children.slice():[],r-1,a-1),this.markDirty(),!0)}split(e){let t=[],i=0,s=-1,r=0;for(let l of this.children){let c=i+l.length;c>e&&t.push(i<e?l.split(e-i):l),s<0&&i>=e&&(s=r),i=c,r++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new rn(this.mark,t,a)}domAtPos(e){return Df(this,e)}coordsAt(e,t){return Pf(this,e,t)}}function mg(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let s=e,r=e,a=0;e==0&&t<0||e==i&&t>=0?ne.chrome||ne.gecko||(e?(s--,a=1):r<i&&(r++,a=-1)):t<0?s--:r<i&&r++;let l=Vn(n,s,r).getClientRects();if(!l.length)return null;let c=l[(a?a<0:t>=0)?0:l.length-1];return ne.safari&&!a&&c.width==0&&(c=Array.prototype.find.call(l,h=>h.width)||c),a?hs(c,a<0):c||null}class En extends Ce{static create(e,t,i){return new En(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=En.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,s,r,a){return i&&(!(i instanceof En)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof En&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return _e.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):_e.empty}domAtPos(e){return(this.length?e==0:this.side>0)?nt.before(this.dom):nt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let s=this.dom.getClientRects(),r=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let l=a?s.length-1:0;r=s[l],!(e>0?l==0:l==s.length-1||r.top<r.bottom);l+=a?-1:1);return hs(r,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ui extends Ce{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ui&&e.side==this.side}split(){return new ui(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?nt.before(this.dom):nt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return _e.empty}get isHidden(){return!0}}vt.prototype.children=En.prototype.children=ui.prototype.children=za;function Df(n,e){let t=n.dom,{children:i}=n,s=0;for(let r=0;s<i.length;s++){let a=i[s],l=r+a.length;if(!(l==r&&a.getSide()<=0)){if(e>r&&e<l&&a.dom.parentNode==t)return a.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=s;r>0;r--){let a=i[r-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let r=s;r<i.length;r++){let a=i[r];if(a.dom.parentNode==t)return a.domAtPos(0)}return new nt(t,0)}function kf(n,e,t){let i,{children:s}=n;t>0&&e instanceof rn&&s.length&&(i=s[s.length-1])instanceof rn&&i.mark.eq(e.mark)?kf(i,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function Pf(n,e,t){let i=null,s=-1,r=null,a=-1;function l(h,f){for(let u=0,m=0;u<h.children.length&&m<=f;u++){let T=h.children[u],N=m+T.length;N>=f&&(T.children.length?l(T,f-m):(!r||r.isHidden&&t>0)&&(N>f||m==N&&T.getSide()>0)?(r=T,a=f-m):(m<f||m==N&&T.getSide()<0&&!T.isHidden)&&(i=T,s=f-m)),m=N}}l(n,e);let c=(t<0?i:r)||i||r;return c?c.coordsAt(Math.max(0,c==i?s:a),t):gg(n)}function gg(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=fi(e);return t[t.length-1]||null}function ia(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const tc=Object.create(null);function ur(n,e,t){if(n==e)return!0;n||(n=tc),e||(e=tc);let i=Object.keys(n),s=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let r of i)if(r!=t&&(s.indexOf(r)==-1||n[r]!==e[r]))return!1;return!0}function sa(n,e,t){let i=!1;if(e)for(let s in e)t&&s in t||(i=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(i=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return i}function Eg(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class an{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var rt=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(rt||(rt={}));class le extends Wn{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new fs(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new On(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:r,end:a}=Mf(e,t);i=(r?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new On(e,i,s,t,e.widget||null,!0)}static line(e){return new us(e)}static set(e,t=!1){return Re.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}le.none=Re.empty;class fs extends le{constructor(e){let{start:t,end:i}=Mf(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof fs&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&ur(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}fs.prototype.point=!1;class us extends le{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof us&&this.spec.class==e.spec.class&&ur(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}us.prototype.mapMode=st.TrackBefore;us.prototype.point=!0;class On extends le{constructor(e,t,i,s,r,a){super(t,i,r,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?st.TrackBefore:st.TrackAfter:st.TrackDel}get type(){return this.startSide!=this.endSide?rt.WidgetRange:this.startSide<=0?rt.WidgetBefore:rt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof On&&Tg(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}On.prototype.point=!0;function Mf(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function Tg(n,e){return n==e||!!(n&&e&&n.compare(e))}function Zs(n,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class Be extends Ce{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,r,a){if(i){if(!(i instanceof Be))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),wf(this,e,t,i?i.children.slice():[],r,a),!0}split(e){let t=new Be;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ur(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){kf(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=ia(t,this.attrs||{})),i&&(this.attrs=ia({class:i},this.attrs||{}))}domAtPos(e){return Df(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(Nf(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(sa(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&Ce.get(s)instanceof rn;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=Ce.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!ne.ios||!this.children.some(r=>r instanceof vt))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof vt)||/[^ -~]/.test(i.text))return null;let s=fi(i.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=Pf(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:s}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-s.lineHeight)<2&&s.textHeight<r){let a=(r-s.textHeight)/2;return{top:i.top+a,bottom:i.bottom-a,left:i.left,right:i.left}}}return i}become(e){return e instanceof Be&&this.children.length==0&&e.children.length==0&&ur(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let r=e.children[i],a=s+r.length;if(a>=t){if(r instanceof Be)return r;if(a>t)break}s=a+r.breakAfter}return null}}class nn extends Ce{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,r,a){return i&&(!(i instanceof nn)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?nt.before(this.dom):nt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new nn(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return za}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):_e.empty}domBoundsAround(){return null}become(e){return e instanceof nn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof ra?null:hs(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class ra extends an{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Yi{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof nn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Be),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Is(new ui(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof nn)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=r,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Is(new vt(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,r,a){if(this.disallowBlockEffectsFor[a]&&i instanceof On){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof On)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new nn(i.widget||di.block,l,i));else{let c=En.create(i.widget||di.inline,l,l?0:i.startSide),h=this.atCursorPos&&!c.isEditable&&r<=s.length&&(e<t||i.startSide>0),f=!c.isEditable&&(e<t||r>s.length||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!h&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),h&&(u.append(Is(new ui(1),s),r),r=s.length+Math.max(0,r-s.length)),u.append(Is(c,s),r),this.atCursorPos=f,this.pendingBuffer=f?e<t||r>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,s,r){let a=new Yi(e,t,i,r);return a.openEnd=Re.spans(s,t,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Is(n,e){for(let t of e)n=new rn(t,[n],n.length);return n}class di extends an{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}di.inline=new di("span");di.block=new di("div");var xe=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(xe||(xe={}));const qn=xe.LTR,Ka=xe.RTL;function Ff(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const Ag=Ff("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Sg=Ff("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),oa=Object.create(null),Mt=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);oa[e]=t,oa[t]=-e}function Uf(n){return n<=247?Ag[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?Sg[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const Rg=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Tn{get dir(){return this.level%2?Ka:qn}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,s){let r=-1;for(let a=0;a<e.length;a++){let l=e[a];if(l.from<=t&&l.to>=t){if(l.level==i)return a;(r<0||(s!=0?s<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=a)}}if(r<0)throw new RangeError("Index out of range");return r}}function Bf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],s=e[t];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!Bf(i.inner,s.inner))return!1}return!0}const be=[];function _g(n,e,t,i,s){for(let r=0;r<=i.length;r++){let a=r?i[r-1].to:e,l=r<i.length?i[r].from:t,c=r?256:s;for(let h=a,f=c,u=c;h<l;h++){let m=Uf(n.charCodeAt(h));m==512?m=f:m==8&&u==4&&(m=16),be[h]=m==4?2:m,m&7&&(u=m),f=m}for(let h=a,f=c,u=c;h<l;h++){let m=be[h];if(m==128)h<l-1&&f==be[h+1]&&f&24?m=be[h]=f:be[h]=256;else if(m==64){let T=h+1;for(;T<l&&be[T]==64;)T++;let N=h&&f==8||T<t&&be[T]==8?u==1?1:8:256;for(let b=h;b<T;b++)be[b]=N;h=T-1}else m==8&&u==1&&(be[h]=1);f=m,m&7&&(u=m)}}}function Og(n,e,t,i,s){let r=s==1?2:1;for(let a=0,l=0,c=0;a<=i.length;a++){let h=a?i[a-1].to:e,f=a<i.length?i[a].from:t;for(let u=h,m,T,N;u<f;u++)if(T=oa[m=n.charCodeAt(u)])if(T<0){for(let b=l-3;b>=0;b-=3)if(Mt[b+1]==-T){let p=Mt[b+2],L=p&2?s:p&4?p&1?r:s:0;L&&(be[u]=be[Mt[b]]=L),l=b;break}}else{if(Mt.length==189)break;Mt[l++]=u,Mt[l++]=m,Mt[l++]=c}else if((N=be[u])==2||N==1){let b=N==s;c=b?0:1;for(let p=l-3;p>=0;p-=3){let L=Mt[p+2];if(L&2)break;if(b)Mt[p+2]|=2;else{if(L&4)break;Mt[p+2]|=4}}}}}function Ng(n,e,t,i){for(let s=0,r=i;s<=t.length;s++){let a=s?t[s-1].to:n,l=s<t.length?t[s].from:e;for(let c=a;c<l;){let h=be[c];if(h==256){let f=c+1;for(;;)if(f==l){if(s==t.length)break;f=t[s++].to,l=s<t.length?t[s].from:e}else if(be[f]==256)f++;else break;let u=r==1,m=(f<e?be[f]:i)==1,T=u==m?u?1:2:i;for(let N=f,b=s,p=b?t[b-1].to:n;N>c;)N==p&&(N=t[--b].from,p=b?t[b-1].to:n),be[--N]=T;c=f}else r=h,c++}}}function aa(n,e,t,i,s,r,a){let l=i%2?2:1;if(i%2==s%2)for(let c=e,h=0;c<t;){let f=!0,u=!1;if(h==r.length||c<r[h].from){let b=be[c];b!=l&&(f=!1,u=b==16)}let m=!f&&l==1?[]:null,T=f?i:i+1,N=c;e:for(;;)if(h<r.length&&N==r[h].from){if(u)break e;let b=r[h];if(!f)for(let p=b.to,L=h+1;;){if(p==t)break e;if(L<r.length&&r[L].from==p)p=r[L++].to;else{if(be[p]==l)break e;break}}if(h++,m)m.push(b);else{b.from>c&&a.push(new Tn(c,b.from,T));let p=b.direction==qn!=!(T%2);la(n,p?i+1:i,s,b.inner,b.from,b.to,a),c=b.to}N=b.to}else{if(N==t||(f?be[N]!=l:be[N]==l))break;N++}m?aa(n,c,N,i+1,s,m,a):c<N&&a.push(new Tn(c,N,T)),c=N}else for(let c=t,h=r.length;c>e;){let f=!0,u=!1;if(!h||c>r[h-1].to){let b=be[c-1];b!=l&&(f=!1,u=b==16)}let m=!f&&l==1?[]:null,T=f?i:i+1,N=c;e:for(;;)if(h&&N==r[h-1].to){if(u)break e;let b=r[--h];if(!f)for(let p=b.from,L=h;;){if(p==e)break e;if(L&&r[L-1].to==p)p=r[--L].from;else{if(be[p-1]==l)break e;break}}if(m)m.push(b);else{b.to<c&&a.push(new Tn(b.to,c,T));let p=b.direction==qn!=!(T%2);la(n,p?i+1:i,s,b.inner,b.from,b.to,a),c=b.from}N=b.from}else{if(N==e||(f?be[N-1]!=l:be[N-1]==l))break;N--}m?aa(n,N,c,i+1,s,m,a):N<c&&a.push(new Tn(N,c,T)),c=N}}function la(n,e,t,i,s,r,a){let l=e%2?2:1;_g(n,s,r,i,l),Og(n,s,r,i,l),Ng(s,r,i,l),aa(n,s,r,e,t,i,a)}function bg(n,e,t){if(!n)return[new Tn(0,0,e==Ka?1:0)];if(e==qn&&!t.length&&!Rg.test(n))return Hf(n.length);if(t.length)for(;n.length>be.length;)be[be.length]=256;let i=[],s=e==qn?0:1;return la(n,s,s,t,0,n.length,i),i}function Hf(n){return[new Tn(0,n,0)]}let Wf="";function Cg(n,e,t,i,s){var r;let a=i.head-n.from,l=Tn.find(e,a,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),c=e[l],h=c.side(s,t);if(a==h){let m=l+=s?1:-1;if(m<0||m>=e.length)return null;c=e[l=m],a=c.side(!s,t),h=c.side(s,t)}let f=Qe(n.text,a,c.forward(s,t));(f<c.from||f>c.to)&&(f=h),Wf=n.text.slice(Math.min(a,f),Math.max(a,f));let u=l==(s?e.length-1:0)?null:e[l+(s?1:-1)];return u&&f==h&&u.level+(s?0:1)<c.level?B.cursor(u.side(!s,t)+n.from,u.forward(s,t)?1:-1,u.level):B.cursor(f+n.from,c.forward(s,t)?-1:1,c.level)}function yg(n,e,t){for(let i=e;i<t;i++){let s=Uf(n.charCodeAt(i));if(s==1)return qn;if(s==2||s==4)return Ka}return qn}const Gf=ie.define(),Vf=ie.define(),qf=ie.define(),Yf=ie.define(),ca=ie.define(),jf=ie.define(),Xf=ie.define(),$a=ie.define(),Ja=ie.define(),zf=ie.define({combine:n=>n.some(e=>e)}),Kf=ie.define({combine:n=>n.some(e=>e)}),$f=ie.define();class oi{constructor(e,t="nearest",i="nearest",s=5,r=5,a=!1){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=r,this.isSnapshot=a}map(e){return e.empty?this:new oi(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new oi(B.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const ws=ge.define({map:(n,e)=>n.map(e)}),Jf=ge.define();function dt(n,e,t){let i=n.facet(Yf);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const tn=ie.define({combine:n=>n.length?n[0]:!0});let Lg=0;const Mi=ie.define();class Fe{constructor(e,t,i,s,r){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=s,this.extension=r(this)}static define(e,t){const{eventHandlers:i,eventObservers:s,provide:r,decorations:a}=t||{};return new Fe(Lg++,e,i,s,l=>{let c=[Mi.of(l)];return a&&c.push(Ji.of(h=>{let f=h.plugin(l);return f?a(f):le.none})),r&&c.push(r(l)),c})}static fromClass(e,t){return Fe.define(i=>new e(i),t)}}class ao{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(dt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){dt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){dt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Qf=ie.define(),Qa=ie.define(),Ji=ie.define(),Zf=ie.define(),Za=ie.define(),eu=ie.define();function nc(n,e){let t=n.state.facet(eu);if(!t.length)return t;let i=t.map(r=>r instanceof Function?r(n):r),s=[];return Re.spans(i,e.from,e.to,{point(){},span(r,a,l,c){let h=r-e.from,f=a-e.from,u=s;for(let m=l.length-1;m>=0;m--,c--){let T=l[m].spec.bidiIsolate,N;if(T==null&&(T=yg(e.text,h,f)),c>0&&u.length&&(N=u[u.length-1]).to==h&&N.direction==T)N.to=f,u=N.inner;else{let b={from:h,to:f,direction:T,inner:[]};u.push(b),u=b.inner}}}}),s}const tu=ie.define();function el(n){let e=0,t=0,i=0,s=0;for(let r of n.state.facet(tu)){let a=r(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(i=Math.max(i,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:i,bottom:s}}const Fi=ie.define();class yt{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new yt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,r=0,a=0,l=0;;s++){let c=s==e.length?null:e[s],h=a-l,f=c?c.fromB:1e9;for(;r<t.length&&t[r]<f;){let u=t[r],m=t[r+1],T=Math.max(l,u),N=Math.min(f,m);if(T<=N&&new yt(T+h,N+h,T,N).addToSet(i),m>f)break;r+=2}if(!c)return i;new yt(c.fromA,c.toA,c.fromB,c.toB).addToSet(i),a=c.toA,l=c.toB}}}class dr{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ge.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let s=[];this.changes.iterChangedRanges((r,a,l,c)=>s.push(new yt(r,a,l,c))),this.changedRanges=s}static create(e,t,i){return new dr(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class ic extends Ce{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=le.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Be],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new yt(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:f})=>f<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!Pg(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let r=s>-1?wg(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:f}=this.hasComposition;i=new yt(h,f,e.changes.mapPos(h,-1),e.changes.mapPos(f,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(ne.ie||ne.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,l=this.updateDeco(),c=Dg(a,l,e.changes);return i=yt.extendWithRanges(i,c),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=ne.chrome||ne.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof nn&&a.widget instanceof ra&&r.push(a.dom);s.updateGaps(r)}updateChildren(e,t,i){let s=i?i.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let a=s.length-1;;a--){let l=a>=0?s[a]:null;if(!l)break;let{fromA:c,toA:h,fromB:f,toB:u}=l,m,T,N,b;if(i&&i.range.fromB<u&&i.range.toB>f){let V=Yi.build(this.view.state.doc,f,i.range.fromB,this.decorations,this.dynamicDecorationMap),H=Yi.build(this.view.state.doc,i.range.toB,u,this.decorations,this.dynamicDecorationMap);T=V.breakAtStart,N=V.openStart,b=H.openEnd;let M=this.compositionView(i);H.breakAtStart?M.breakAfter=1:H.content.length&&M.merge(M.length,M.length,H.content[0],!1,H.openStart,0)&&(M.breakAfter=H.content[0].breakAfter,H.content.shift()),V.content.length&&M.merge(0,0,V.content[V.content.length-1],!0,0,V.openEnd)&&V.content.pop(),m=V.content.concat(M).concat(H.content)}else({content:m,breakAtStart:T,openStart:N,openEnd:b}=Yi.build(this.view.state.doc,f,u,this.decorations,this.dynamicDecorationMap));let{i:p,off:L}=r.findPos(h,1),{i:x,off:W}=r.findPos(c,-1);If(this,x,W,p,L,m,T,N,b)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(Jf)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new vt(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new rn(s,[t],t.length);let i=new Be;return i.append(t,0),i}fixCompositionDOM(e){let t=(r,a)=>{a.flags|=8|(a.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(a);let l=Ce.get(r);l&&l!=a&&(l.dom=null),a.setDOM(r)},i=this.childPos(e.range.fromB,1),s=this.children[i.i];t(e.line,s);for(let r=e.marks.length-1;r>=-1;r--)i=s.childPos(i.off,1),s=s.children[i.i],t(r>=0?e.marks[r].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,s=i==this.dom,r=!s&&!(this.view.state.facet(tn)||this.dom.tabIndex>-1)&&Qs(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(s||t||r))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(l.anchor)),h=l.empty?c:this.moveToLine(this.domAtPos(l.head));if(ne.gecko&&l.empty&&!this.hasComposition&&Ig(c)){let u=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(u,c.node.childNodes[c.offset]||null)),c=h=new nt(u,0),a=!0}let f=this.view.observer.selectionRange;(a||!f.focusNode||(!qi(c.node,c.offset,f.anchorNode,f.anchorOffset)||!qi(h.node,h.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,l))&&(this.view.observer.ignore(()=>{ne.android&&ne.chrome&&this.dom.contains(f.focusNode)&&kg(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=$i(this.view.root);if(u)if(l.empty){if(ne.gecko){let m=xg(c.node,c.offset);if(m&&m!=3){let T=(m==1?Cf:yf)(c.node,c.offset);T&&(c=new nt(T.node,T.offset))}}u.collapse(c.node,c.offset),l.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=l.bidiLevel)}else if(u.extend){u.collapse(c.node,c.offset);try{u.extend(h.node,h.offset)}catch{}}else{let m=document.createRange();l.anchor>l.head&&([c,h]=[h,c]),m.setEnd(h.node,h.offset),m.setStart(c.node,c.offset),u.removeAllRanges(),u.addRange(m)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(c,h)),this.impreciseAnchor=c.precise?null:new nt(f.anchorNode,f.anchorOffset),this.impreciseHead=h.precise?null:new nt(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&qi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=$i(e.root),{anchorNode:s,anchorOffset:r}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let a=Be.find(this,t.head);if(!a)return;let l=a.posAtStart;if(t.head==l||t.head==l+a.length)return;let c=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!c||!h||c.bottom>h.top)return;let f=this.domAtPos(t.head+t.assoc);i.collapse(f.node,f.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&i.collapse(s,r)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let s=e.offset;!i&&s<t.childNodes.length;s++){let r=Ce.get(t.childNodes[s]);r instanceof Be&&(i=r.domAtPos(0))}for(let s=e.offset-1;!i&&s>=0;s--){let r=Ce.get(t.childNodes[s]);r instanceof Be&&(i=r.domAtPos(r.length))}return i?new nt(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=Ce.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof Be)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,s=0;for(let r=this.length,a=this.children.length-1;a>=0;a--){let l=this.children[a],c=r-l.breakAfter,h=c-l.length;if(c<e)break;if(h<=e&&(h<e||l.covers(-1))&&(c>e||l.covers(1))&&(!i||l instanceof Be&&!(i instanceof Be&&t>=0)))i=l,s=h;else if(i&&h==e&&c==e&&l instanceof nn&&Math.abs(t)<2){if(l.deco.startSide<0)break;a&&(i=null)}r=h}return i?i.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),s=this.children[t];if(!(s instanceof Be))return null;for(;s.children.length;){let{i:l,off:c}=s.childPos(i,1);for(;;l++){if(l==s.children.length)return null;if((s=s.children[l]).length)break}i=c}if(!(s instanceof vt))return null;let r=Qe(s.text,i);if(r==i)return null;let a=Vn(s.dom,i,r).getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(l==a.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,r=this.view.contentDOM.clientWidth,a=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,c=this.view.textDirection==xe.LTR;for(let h=0,f=0;f<this.children.length;f++){let u=this.children[f],m=h+u.length;if(m>s)break;if(h>=i){let T=u.dom.getBoundingClientRect();if(t.push(T.height),a){let N=u.dom.lastChild,b=N?fi(N):[];if(b.length){let p=b[b.length-1],L=c?p.right-T.left:T.right-p.left;L>l&&(l=L,this.minWidth=r,this.minWidthFrom=h,this.minWidthTo=m)}}}h=m+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?xe.RTL:xe.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Be){let a=r.measureTextSize();if(a)return a}let e=document.createElement("div"),t,i,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=fi(e.firstChild)[0];t=e.getBoundingClientRect().height,i=r?r.width/27:7,s=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Lf(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let r=s==t.viewports.length?null:t.viewports[s],a=r?r.from-1:this.length;if(a>i){let l=(t.lineBlockAt(a).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(le.replace({widget:new ra(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!r)break;i=r.to+1}return le.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Ji).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,s=this.view.state.facet(Zf).map((r,a)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(s.length&&(this.dynamicDecorationMap[e++]=i,t.push(Re.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet($f))try{if(h(this.view,e.range,e))return!0}catch(f){dt(this.view.state,f,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let r=el(this.view),a={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:c}=this.view.scrollDOM;cg(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==xe.LTR)}}function Ig(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function nu(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=Cf(t.focusNode,t.focusOffset),s=yf(t.focusNode,t.focusOffset),r=i||s;if(s&&i&&s.node!=i.node){let l=Ce.get(s.node);if(!l||l instanceof vt&&l.text!=s.node.nodeValue)r=s;else if(n.docView.lastCompositionAfterCursor){let c=Ce.get(i.node);!c||c instanceof vt&&c.text!=i.node.nodeValue||(r=s)}}if(n.docView.lastCompositionAfterCursor=r!=i,!r)return null;let a=e-r.offset;return{from:a,to:a+r.node.nodeValue.length,node:r.node}}function wg(n,e,t){let i=nu(n,t);if(!i)return null;let{node:s,from:r,to:a}=i,l=s.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(i.from,i.to)!=l)return null;let c=e.invertedDesc,h=new yt(c.mapPos(r),c.mapPos(a),r,a),f=[];for(let u=s.parentNode;;u=u.parentNode){let m=Ce.get(u);if(m instanceof rn)f.push({node:u,deco:m.mark});else{if(m instanceof Be||u.nodeName=="DIV"&&u.parentNode==n.contentDOM)return{range:h,text:s,marks:f,line:u};if(u!=n.contentDOM)f.push({node:u,deco:new fs({inclusive:!0,attributes:Eg(u),tagName:u.tagName.toLowerCase()})});else return null}}}function xg(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let vg=class{constructor(){this.changes=[]}compareRange(e,t){Zs(e,t,this.changes)}comparePoint(e,t){Zs(e,t,this.changes)}boundChange(e){Zs(e,e,this.changes)}};function Dg(n,e,t){let i=new vg;return Re.compare(n,e,t,i),i.changes}function kg(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Pg(n,e){let t=!1;return e&&n.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(t=!0)}),t}function Mg(n,e,t=1){let i=n.charCategorizer(e),s=n.doc.lineAt(e),r=e-s.from;if(s.length==0)return B.cursor(e);r==0?t=1:r==s.length&&(t=-1);let a=r,l=r;t<0?a=Qe(s.text,r,!1):l=Qe(s.text,r);let c=i(s.text.slice(a,l));for(;a>0;){let h=Qe(s.text,a,!1);if(i(s.text.slice(h,a))!=c)break;a=h}for(;l<s.length;){let h=Qe(s.text,l);if(i(s.text.slice(l,h))!=c)break;l=h}return B.range(a+s.from,l+s.from)}function Fg(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function Ug(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function lo(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function sc(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function rc(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function ha(n,e,t){let i,s,r,a,l=!1,c,h,f,u;for(let N=n.firstChild;N;N=N.nextSibling){let b=fi(N);for(let p=0;p<b.length;p++){let L=b[p];s&&lo(s,L)&&(L=sc(rc(L,s.bottom),s.top));let x=Fg(e,L),W=Ug(t,L);if(x==0&&W==0)return N.nodeType==3?oc(N,e,t):ha(N,e,t);if(!i||a>W||a==W&&r>x){i=N,s=L,r=x,a=W;let V=W?t<L.top?-1:1:x?e<L.left?-1:1:0;l=!V||(V>0?p<b.length-1:p>0)}x==0?t>L.bottom&&(!f||f.bottom<L.bottom)?(c=N,f=L):t<L.top&&(!u||u.top>L.top)&&(h=N,u=L):f&&lo(f,L)?f=rc(f,L.bottom):u&&lo(u,L)&&(u=sc(u,L.top))}}if(f&&f.bottom>=t?(i=c,s=f):u&&u.top<=t&&(i=h,s=u),!i)return{node:n,offset:0};let m=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return oc(i,m,t);if(l&&i.contentEditable!="false")return ha(i,m,t);let T=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:T}}function oc(n,e,t){let i=n.nodeValue.length,s=-1,r=1e9,a=0;for(let l=0;l<i;l++){let c=Vn(n,l,l+1).getClientRects();for(let h=0;h<c.length;h++){let f=c[h];if(f.top==f.bottom)continue;a||(a=e-f.left);let u=(f.top>t?f.top-t:t-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&u<r){let m=e>=(f.left+f.right)/2,T=m;if((ne.chrome||ne.gecko)&&Vn(n,l).getBoundingClientRect().left==f.right&&(T=!m),u<=0)return{node:n,offset:l+(T?1:0)};s=l+(T?1:0),r=u}}}return{node:n,offset:s>-1?s:a>0?n.nodeValue.length:0}}function iu(n,e,t,i=-1){var s,r;let a=n.contentDOM.getBoundingClientRect(),l=a.top+n.viewState.paddingTop,c,{docHeight:h}=n.viewState,{x:f,y:u}=e,m=u-l;if(m<0)return 0;if(m>h)return n.state.doc.length;for(let V=n.viewState.heightOracle.textHeight/2,H=!1;c=n.elementAtHeight(m),c.type!=rt.Text;)for(;m=i>0?c.bottom+V:c.top-V,!(m>=0&&m<=h);){if(H)return t?null:0;H=!0,i=-i}u=l+m;let T=c.from;if(T<n.viewport.from)return n.viewport.from==0?0:t?null:ac(n,a,c,f,u);if(T>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:ac(n,a,c,f,u);let N=n.dom.ownerDocument,b=n.root.elementFromPoint?n.root:N,p=b.elementFromPoint(f,u);p&&!n.contentDOM.contains(p)&&(p=null),p||(f=Math.max(a.left+1,Math.min(a.right-1,f)),p=b.elementFromPoint(f,u),p&&!n.contentDOM.contains(p)&&(p=null));let L,x=-1;if(p&&((s=n.docView.nearest(p))===null||s===void 0?void 0:s.isEditable)!=!1){if(N.caretPositionFromPoint){let V=N.caretPositionFromPoint(f,u);V&&({offsetNode:L,offset:x}=V)}else if(N.caretRangeFromPoint){let V=N.caretRangeFromPoint(f,u);V&&({startContainer:L,startOffset:x}=V,(!n.contentDOM.contains(L)||ne.safari&&Bg(L,x,f)||ne.chrome&&Hg(L,x,f))&&(L=void 0))}L&&(x=Math.min(jt(L),x))}if(!L||!n.docView.dom.contains(L)){let V=Be.find(n.docView,T);if(!V)return m>c.top+c.height/2?c.to:c.from;({node:L,offset:x}=ha(V.dom,f,u))}let W=n.docView.nearest(L);if(!W)return null;if(W.isWidget&&((r=W.dom)===null||r===void 0?void 0:r.nodeType)==1){let V=W.dom.getBoundingClientRect();return e.y<V.top||e.y<=V.bottom&&e.x<=(V.left+V.right)/2?W.posAtStart:W.posAtEnd}else return W.localPosFromDOM(L,x)+W.posAtStart}function ac(n,e,t,i,s){let r=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,c=Math.floor((s-t.top-(n.defaultLineHeight-l)*.5)/l);r+=c*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+$o(a,r,n.state.tabSize)}function Bg(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let s=n.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Vn(n,i-1,i).getBoundingClientRect().left>t}function Hg(n,e,t){if(e!=0)return!1;for(let s=n;;){let r=s.parentNode;if(!r||r.nodeType!=1||r.firstChild!=s)return!1;if(r.classList.contains("cm-line"))break;s=r}let i=n.nodeType==1?n.getBoundingClientRect():Vn(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function fa(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==rt.Text))return i}return t}function Wg(n,e,t,i){let s=fa(n,e.head),r=!i||s.type!=rt.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(r){let a=n.dom.getBoundingClientRect(),l=n.textDirectionAt(s.from),c=n.posAtCoords({x:t==(l==xe.LTR)?a.right-1:a.left+1,y:(r.top+r.bottom)/2});if(c!=null)return B.cursor(c,t?-1:1)}return B.cursor(t?s.to:s.from,t?-1:1)}function lc(n,e,t,i){let s=n.state.doc.lineAt(e.head),r=n.bidiSpans(s),a=n.textDirectionAt(s.from);for(let l=e,c=null;;){let h=Cg(s,r,a,l,t),f=Wf;if(!h){if(s.number==(t?n.state.doc.lines:1))return l;f=`
`,s=n.state.doc.line(s.number+(t?1:-1)),r=n.bidiSpans(s),h=n.visualLineSide(s,!t)}if(c){if(!c(f))return l}else{if(!i)return h;c=i(f)}l=h}}function Gg(n,e,t){let i=n.state.charCategorizer(e),s=i(t);return r=>{let a=i(r);return s==De.Space&&(s=a),s==a}}function Vg(n,e,t,i){let s=e.head,r=t?1:-1;if(s==(t?n.state.doc.length:0))return B.cursor(s,e.assoc);let a=e.goalColumn,l,c=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(s,e.assoc||-1),f=n.documentTop;if(h)a==null&&(a=h.left-c.left),l=r<0?h.top:h.bottom;else{let T=n.viewState.lineBlockAt(s);a==null&&(a=Math.min(c.right-c.left,n.defaultCharacterWidth*(s-T.from))),l=(r<0?T.top:T.bottom)+f}let u=c.left+a,m=i??n.viewState.heightOracle.textHeight>>1;for(let T=0;;T+=10){let N=l+(m+T)*r,b=iu(n,{x:u,y:N},!1,r);if(N<c.top||N>c.bottom||(r<0?b<s:b>s)){let p=n.docView.coordsForChar(b),L=!p||N<p.top?-1:1;return B.cursor(b,L,void 0,a)}}}function er(n,e,t){for(;;){let i=0;for(let s of n)s.between(e-1,e+1,(r,a,l)=>{if(e>r&&e<a){let c=i||t||(e-r<a-e?-1:1);e=c<0?r:a,i=c}});if(!i)return e}}function co(n,e,t){let i=er(n.state.facet(Za).map(s=>s(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:B.cursor(i,i<t.from?1:-1)}const Ui="￿";class qg{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ae.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ui}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let r=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==t)break;let l=Ce.get(s),c=Ce.get(a);(l&&c?l.breakAfter:(l?l.breakAfter:fr(s))||fr(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>r)&&this.lineBreak(),s=a}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,a=1,l;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(l=s.exec(t))&&(r=l.index,a=l[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),a>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=a-1);i=r+a}}readNode(e){if(e.cmIgnore)return;let t=Ce.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Yg(e,i.node,i.offset)?t:0))}}function Yg(n,e,t){for(;;){if(!e||t<jt(e))return!1;if(e==n)return!0;t=Gn(e)+1,e=e.parentNode}}class cc{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class jg{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=r||a?[]:Kg(e),c=new qg(l,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=$g(l,this.bounds.from)}else{let l=e.observer.selectionRange,c=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!Zo(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),h=a&&a.node==l.anchorNode&&a.offset==l.anchorOffset||!Zo(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),f=e.viewport;if((ne.ios||ne.chrome)&&e.state.selection.main.empty&&c!=h&&(f.from>0||f.to<e.state.doc.length)){let u=Math.min(c,h),m=Math.max(c,h),T=f.from-u,N=f.to-m;(T==0||T==1||u==0)&&(N==0||N==-1||m==e.state.doc.length)&&(c=0,h=e.state.doc.length)}this.newSel=B.single(h,c)}}}function su(n,e){let t,{newSel:i}=e,s=n.state.selection.main,r=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:l}=e.bounds,c=s.from,h=null;(r===8||ne.android&&e.text.length<l-a)&&(c=s.to,h="end");let f=zg(n.state.doc.sliceString(a,l,Ui),e.text,c-a,h);f&&(ne.chrome&&r==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==Ui+Ui&&f.toB--,t={from:a+f.from,to:a+f.toA,insert:_e.of(e.text.slice(f.from,f.toB).split(Ui))})}else i&&(!n.hasFocus&&n.state.facet(tn)||i.main.eq(s))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!s.empty&&i&&i.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:(ne.mac||ne.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=B.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:_e.of([" "])}):ne.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=B.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:_e.of([" "])}),t)return tl(n,t,i,r);if(i&&!i.main.eq(s)){let a=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:a,userEvent:l}),!0}else return!1}function tl(n,e,t,i=-1){if(ne.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(ne.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ri(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&ri(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&ri(n.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,l=()=>a||(a=Xg(n,e,t));return n.state.facet(jf).some(c=>c(n,e.from,e.to,r,l))||n.dispatch(l()),!0}function Xg(n,e,t){let i,s=n.state,r=s.selection.main;if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let l=r.from<e.from?s.sliceDoc(r.from,e.from):"",c=r.to>e.to?s.sliceDoc(e.to,r.to):"";i=s.replaceSelection(n.state.toText(l+e.insert.sliceString(0,void 0,n.state.lineBreak)+c))}else{let l=s.changes(e),c=t&&t.main.to<=l.newLength?t.main:void 0;if(s.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let h=n.state.sliceDoc(e.from,e.to),f,u=t&&nu(n,t.main.head);if(u){let N=e.insert.length-(e.to-e.from);f={from:u.from,to:u.to-N}}else f=n.state.doc.lineAt(r.head);let m=r.to-e.to,T=r.to-r.from;i=s.changeByRange(N=>{if(N.from==r.from&&N.to==r.to)return{changes:l,range:c||N.map(l)};let b=N.to-m,p=b-h.length;if(N.to-N.from!=T||n.state.sliceDoc(p,b)!=h||N.to>=f.from&&N.from<=f.to)return{range:N};let L=s.changes({from:p,to:b,insert:e.insert}),x=N.to-r.to;return{changes:L,range:c?B.range(Math.max(0,c.anchor+x),Math.max(0,c.head+x)):N.map(L)}})}else i={changes:l,selection:c&&s.selection.replaceRange(c)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:a,scrollIntoView:!0})}function zg(n,e,t,i){let s=Math.min(n.length,e.length),r=0;for(;r<s&&n.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==s&&n.length==e.length)return null;let a=n.length,l=e.length;for(;a>0&&l>0&&n.charCodeAt(a-1)==e.charCodeAt(l-1);)a--,l--;if(i=="end"){let c=Math.max(0,r-Math.min(a,l));t-=a+c-r}if(a<r&&n.length<e.length){let c=t<=r&&t>=a?r-t:0;r-=c,l=r+(l-a),a=r}else if(l<r){let c=t<=r&&t>=l?r-t:0;r-=c,a=r+(a-l),l=r}return{from:r,toA:a,toB:l}}function Kg(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:r}=n.observer.selectionRange;return t&&(e.push(new cc(t,i)),(s!=t||r!=i)&&e.push(new cc(s,r))),e}function $g(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?B.single(t+e,i+e):null}class Jg{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ne.safari&&e.contentDOM.addEventListener("input",()=>null),ne.gecko&&dE(e.contentDOM.ownerDocument)}handleEvent(e){!rE(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,t);for(let s of i.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Qg(e),i=this.handlers,s=this.view.contentDOM;for(let r in t)if(r!="scroll"){let a=!t[r].handlers.length,l=i[r];l&&a!=!l.handlers.length&&(s.removeEventListener(r,this.handleEvent),l=null),l||s.addEventListener(r,this.handleEvent,{passive:a})}for(let r in i)r!="scroll"&&!t[r]&&s.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&ou.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),ne.android&&ne.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return ne.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=ru.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Zg.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ri(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ne.safari&&!ne.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function hc(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(s){dt(t.state,s)}}}function Qg(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let s=i.spec;if(s&&s.domEventHandlers)for(let r in s.domEventHandlers){let a=s.domEventHandlers[r];a&&t(r).handlers.push(hc(i.value,a))}if(s&&s.domEventObservers)for(let r in s.domEventObservers){let a=s.domEventObservers[r];a&&t(r).observers.push(hc(i.value,a))}}for(let i in Dt)t(i).handlers.push(Dt[i]);for(let i in It)t(i).observers.push(It[i]);return e}const ru=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Zg="dthko",ou=[16,17,18,20,91,92,224,225],xs=6;function vs(n){return Math.max(0,n)*.7+8}function eE(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class tE{constructor(e,t,i,s){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=hg(e.contentDOM),this.atoms=e.state.facet(Za).map(a=>a(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ae.allowMultipleSelections)&&nE(e,t),this.dragging=sE(e,t)&&cu(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&eE(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,s=0,r=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=el(this.view);e.clientX-c.left<=s+xs?t=-vs(s-e.clientX):e.clientX+c.right>=a-xs&&(t=vs(e.clientX-a)),e.clientY-c.top<=r+xs?i=-vs(r-e.clientY):e.clientY+c.bottom>=l-xs&&(i=vs(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],r=null;if(s.empty){let a=er(this.atoms,s.from,0);a!=s.from&&(r=B.cursor(a,-1))}else{let a=er(this.atoms,s.from,-1),l=er(this.atoms,s.to,1);(a!=s.from||l!=s.to)&&(r=B.range(s.from==s.anchor?a:l,s.from==s.head?a:l))}r&&(t||(t=e.ranges.slice()),t[i]=r)}return t?B.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function nE(n,e){let t=n.state.facet(Gf);return t.length?t[0](e):ne.mac?e.metaKey:e.ctrlKey}function iE(n,e){let t=n.state.facet(Vf);return t.length?t[0](e):ne.mac?!e.altKey:!e.ctrlKey}function sE(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=$i(n.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let r=0;r<s.length;r++){let a=s[r];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function rE(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Ce.get(t))&&i.ignoreEvent(e))return!1;return!0}const Dt=Object.create(null),It=Object.create(null),au=ne.ie&&ne.ie_version<15||ne.ios&&ne.webkit_version<604;function oE(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),lu(n,t.value)},50)}function Wr(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function lu(n,e){e=Wr(n.state,$a,e);let{state:t}=n,i,s=1,r=t.toText(e),a=r.lines==t.selection.ranges.length;if(ua!=null&&t.selection.ranges.every(c=>c.empty)&&ua==r.toString()){let c=-1;i=t.changeByRange(h=>{let f=t.doc.lineAt(h.from);if(f.from==c)return{range:h};c=f.from;let u=t.toText((a?r.line(s++).text:e)+t.lineBreak);return{changes:{from:f.from,insert:u},range:B.cursor(h.from+u.length)}})}else a?i=t.changeByRange(c=>{let h=r.line(s++);return{changes:{from:c.from,to:c.to,insert:h.text},range:B.cursor(c.from+h.length)}}):i=t.replaceSelection(r);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}It.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Dt.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);It.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};It.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Dt.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(qf))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=cE(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new tE(n,e,t,i)),i&&n.observer.ignore(()=>{Of(n.contentDOM);let r=n.root.activeElement;r&&!r.contains(n.contentDOM)&&r.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function fc(n,e,t,i){if(i==1)return B.cursor(e,t);if(i==2)return Mg(n.state,e,t);{let s=Be.find(n.docView,e),r=n.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:r.from,l=s?s.posAtEnd:r.to;return l<n.state.doc.length&&l==r.to&&l++,B.range(a,l)}}let uc=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function aE(n,e,t,i){let s=Be.find(n.docView,e);if(!s)return 1;let r=e-s.posAtStart;if(r==0)return 1;if(r==s.length)return-1;let a=s.coordsAt(r,-1);if(a&&uc(t,i,a))return-1;let l=s.coordsAt(r,1);return l&&uc(t,i,l)?1:a&&a.bottom>=i?-1:1}function dc(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:aE(n,t,e.clientX,e.clientY)}}const lE=ne.ie&&ne.ie_version<=11;let pc=null,mc=0,gc=0;function cu(n){if(!lE)return n.detail;let e=pc,t=gc;return pc=n,gc=Date.now(),mc=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(mc+1)%3:1}function cE(n,e){let t=dc(n,e),i=cu(e),s=n.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),s=s.map(r.changes))},get(r,a,l){let c=dc(n,r),h,f=fc(n,c.pos,c.bias,i);if(t.pos!=c.pos&&!a){let u=fc(n,t.pos,t.bias,i),m=Math.min(u.from,f.from),T=Math.max(u.to,f.to);f=m<f.from?B.range(m,T):B.range(T,m)}return a?s.replaceRange(s.main.extend(f.from,f.to)):l&&i==1&&s.ranges.length>1&&(h=hE(s,c.pos))?h:l?s.addRange(f):B.create([f])}}}function hE(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:s}=n.ranges[t];if(i<=e&&s>=e)return B.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Dt.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let r=s.posAtStart,a=r+s.length;(r>=t.to||a<=t.from)&&(t=B.range(r,a))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Wr(n.state,Ja,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Dt.dragend=n=>(n.inputState.draggedContent=null,!1);function Ec(n,e,t,i){if(t=Wr(n.state,$a,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=n.inputState,a=i&&r&&iE(n,e)?{from:r.from,to:r.to}:null,l={from:s,insert:t},c=n.state.changes(a?[a,l]:l);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(s,-1),head:c.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Dt.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),s=0,r=()=>{++s==t.length&&Ec(n,e,i.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[a]=l.result),r()},l.readAsText(t[a])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Ec(n,e,i,!0),!0}return!1};Dt.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=au?null:e.clipboardData;return t?(lu(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(oE(n),!1)};function fE(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function uE(n){let e=[],t=[],i=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:r}of n.selection.ranges){let a=n.doc.lineAt(r);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),s=a.number}i=!0}return{text:Wr(n,Ja,e.join(n.lineBreak)),ranges:t,linewise:i}}let ua=null;Dt.copy=Dt.cut=(n,e)=>{let{text:t,ranges:i,linewise:s}=uE(n.state);if(!t&&!s)return!1;ua=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=au?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",t),!0):(fE(n,t),!1)};const hu=Xt.define();function fu(n,e){let t=[];for(let i of n.facet(Xf)){let s=i(n,e);s&&t.push(s)}return t?n.update({effects:t,annotations:hu.of(!0)}):null}function uu(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=fu(n.state,e);t?n.dispatch(t):n.update([])}},10)}It.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),uu(n)};It.blur=n=>{n.observer.clearSelectionRange(),uu(n)};It.compositionstart=It.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};It.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,ne.chrome&&ne.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};It.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Dt.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let r=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(r&&a.length){let l=a[0],c=n.posAtDOM(l.startContainer,l.startOffset),h=n.posAtDOM(l.endContainer,l.endOffset);return tl(n,{from:c,to:h,insert:n.state.toText(r)},null),!0}}let s;if(ne.chrome&&ne.android&&(s=ru.find(r=>r.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>r+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return ne.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),ne.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>It.compositionend(n,e),20),!1};const Tc=new Set;function dE(n){Tc.has(n)||(Tc.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const Ac=["pre-wrap","normal","pre-line","break-spaces"];let pi=!1;function Sc(){pi=!1}class pE{constructor(e){this.lineWrapping=e,this.doc=_e.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Ac.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,r,a){let l=Ac.indexOf(e)>-1,c=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=s,this.lineLength=r,c){this.heightSamples={};for(let h=0;h<a.length;h++){let f=a[h];f<0?h++:this.heightSamples[Math.floor(f*10)]=!0}}return c}}class mE{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Gt{constructor(e,t,i,s,r){this.from=e,this.length=t,this.top=i,this.height=s,this._content=r}get type(){return typeof this._content=="number"?rt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof On?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Gt(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var we=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(we||(we={}));const tr=.001;class ot{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>tr&&(pi=!0),this.height=e)}replace(e,t,i){return ot.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let r=this,a=i.doc;for(let l=s.length-1;l>=0;l--){let{fromA:c,toA:h,fromB:f,toB:u}=s[l],m=r.lineAt(c,we.ByPosNoHeight,i.setDoc(t),0,0),T=m.to>=h?m:r.lineAt(h,we.ByPosNoHeight,i,0,0);for(u+=T.to-h,h=T.to;l>0&&m.from<=s[l-1].toA;)c=s[l-1].fromA,f=s[l-1].fromB,l--,c<m.from&&(m=r.lineAt(c,we.ByPosNoHeight,i,0,0));f+=m.from-c,c=m.from;let N=nl.build(i.setDoc(a),e,f,u);r=pr(r,r.replace(c,h,N))}return r.updateHeight(i,0)}static empty(){return new At(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,r=0;for(;;)if(t==i)if(s>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,s-=l.size}else if(r>s*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(s<r){let l=e[t++];l&&(s+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,i++),new gE(ot.of(e.slice(0,t)),a,ot.of(e.slice(i)))}}function pr(n,e){return n==e?n:(n.constructor!=e.constructor&&(pi=!0),e)}ot.prototype.size=1;class du extends ot{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,s){return new Gt(s,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,s,r){return this.blockAt(0,i,s,r)}forEachLine(e,t,i,s,r,a){e<=r+this.length&&t>=r&&a(this.blockAt(0,i,s,r))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class At extends du{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,s){return new Gt(s,this.length,i,this.height,this.breaks)}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof At||s instanceof $e&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof $e?s=new At(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):ot.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class $e extends ot{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,r=s-i+1,a,l=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*r);a=c/r,this.length>r+1&&(l=(this.height-c)/(this.length-r-1))}else a=this.height/r;return{firstLine:i,lastLine:s,perLine:a,perChar:l}}blockAt(e,t,i,s){let{firstLine:r,lastLine:a,perLine:l,perChar:c}=this.heightMetrics(t,s);if(t.lineWrapping){let h=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),f=t.doc.lineAt(h),u=l+f.length*c,m=Math.max(i,e-u/2);return new Gt(f.from,f.length,m,u,0)}else{let h=Math.max(0,Math.min(a-r,Math.floor((e-i)/l))),{from:f,length:u}=t.doc.line(r+h);return new Gt(f,u,i+l*h,l,0)}}lineAt(e,t,i,s,r){if(t==we.ByHeight)return this.blockAt(e,i,s,r);if(t==we.ByPosNoHeight){let{from:T,to:N}=i.doc.lineAt(e);return new Gt(T,N-T,0,0,0)}let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,r),h=i.doc.lineAt(e),f=l+h.length*c,u=h.number-a,m=s+l*u+c*(h.from-r-u);return new Gt(h.from,h.length,Math.max(s,Math.min(m,s+this.height-f)),f,0)}forEachLine(e,t,i,s,r,a){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:l,perLine:c,perChar:h}=this.heightMetrics(i,r);for(let f=e,u=s;f<=t;){let m=i.doc.lineAt(f);if(f==e){let N=m.number-l;u+=c*N+h*(e-r-N)}let T=c+h*m.length;a(new Gt(m.from,m.length,u,T,0)),u+=T,f=m.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let r=i[i.length-1];r instanceof $e?i[i.length-1]=new $e(r.length+s):i.push(null,new $e(s-1))}if(e>0){let r=i[0];r instanceof $e?i[0]=new $e(e+r.length):i.unshift(new $e(e-1),null)}return ot.of(i)}decomposeLeft(e,t){t.push(new $e(e-1),null)}decomposeRight(e,t){t.push(null,new $e(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let r=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],l=Math.max(t,s.from),c=-1;for(s.from>t&&a.push(new $e(s.from-t-1).updateHeight(e,t));l<=r&&s.more;){let f=e.doc.lineAt(l).length;a.length&&a.push(null);let u=s.heights[s.index++];c==-1?c=u:Math.abs(u-c)>=tr&&(c=-2);let m=new At(f,u);m.outdated=!1,a.push(m),l+=f+1}l<=r&&a.push(null,new $e(r-l).updateHeight(e,l));let h=ot.of(a);return(c<0||Math.abs(h.height-this.height)>=tr||Math.abs(c-this.heightMetrics(e,t).perLine)>=tr)&&(pi=!0),pr(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class gE extends ot{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,r,s+this.left.length+this.break)}lineAt(e,t,i,s,r){let a=s+this.left.height,l=r+this.left.length+this.break,c=t==we.ByHeight?e<a:e<l,h=c?this.left.lineAt(e,t,i,s,r):this.right.lineAt(e,t,i,a,l);if(this.break||(c?h.to<l:h.from>l))return h;let f=t==we.ByPosNoHeight?we.ByPosNoHeight:we.ByPos;return c?h.join(this.right.lineAt(l,f,i,a,l)):this.left.lineAt(l,f,i,s,r).join(h)}forEachLine(e,t,i,s,r,a){let l=s+this.left.height,c=r+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,s,r,a),t>=c&&this.right.forEachLine(e,t,i,l,c,a);else{let h=this.lineAt(c,we.ByPos,i,s,r);e<h.from&&this.left.forEachLine(e,h.from-1,i,s,r,a),h.to>=e&&h.from<=t&&a(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,c,a)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let r=[];e>0&&this.decomposeLeft(e,r);let a=r.length;for(let l of i)r.push(l);if(e>0&&Rc(r,a-1),t<this.length){let l=r.length;this.decomposeRight(t,r),Rc(r,l)}return ot.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ot.of(this.break?[e,null,t]:[e,t]):(this.left=pr(this.left,e),this.right=pr(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:r,right:a}=this,l=t+r.length+this.break,c=null;return s&&s.from<=t+r.length&&s.more?c=r=r.updateHeight(e,t,i,s):r.updateHeight(e,t,i),s&&s.from<=l+a.length&&s.more?c=a=a.updateHeight(e,l,i,s):a.updateHeight(e,l,i),c?this.balanced(r,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Rc(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof $e&&(i=n[e+1])instanceof $e&&n.splice(e-1,3,new $e(t.length+1+i.length))}const EE=5;class nl{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof At?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new At(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;i.block?this.addBlock(new du(a,s,i)):(a||r||s>=EE)&&this.addLineDeco(s,r,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new At(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new $e(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof At)return e;let t=new At(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof At)&&!this.isCovered?this.nodes.push(new At(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof At&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let r=new nl(i,e);return Re.spans(t,i,s,r,0),r.finish(i)}}function TE(n,e,t){let i=new AE;return Re.compare(n,e,t,i,0),i.changes}class AE{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&Zs(e,t,this.changes,5)}}function SE(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,s=i.defaultView||window,r=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),l=Math.max(0,t.top),c=Math.min(s.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let f=h,u=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&u.overflow!="visible"){let m=f.getBoundingClientRect();r=Math.max(r,m.left),a=Math.min(a,m.right),l=Math.max(l,m.top),c=Math.min(h==n.parentNode?s.innerHeight:c,m.bottom)}h=u.position=="absolute"||u.position=="fixed"?f.offsetParent:f.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:r-t.left,right:Math.max(r,a)-t.left,top:l-(t.top+e),bottom:Math.max(l,c)-(t.top+e)}}function RE(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class ho{constructor(e,t,i,s){this.from=e,this.to=t,this.size=i,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],r=t[i];if(s.from!=r.from||s.to!=r.to||s.size!=r.size)return!1}return!0}draw(e,t){return le.replace({widget:new _E(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class _E extends an{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class _c{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Oc,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=xe.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Qa).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new pE(t),this.stateDeco=e.facet(Ji).filter(i=>typeof i!="function"),this.heightMap=ot.empty().applyChanges(this.stateDeco,_e.empty,this.heightOracle.setDoc(e.doc),[new yt(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=le.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:r,to:a})=>s>=r&&s<=a)){let{from:r,to:a}=this.lineBlockAt(s);e.push(new Ds(r,a))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Oc:new il(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Bi(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Ji).filter(f=>typeof f!="function");let s=e.changedRanges,r=yt.extendWithRanges(s,TE(i,this.stateDeco,e?e.changes:Ge.empty(this.state.doc.length))),a=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Sc(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=a||pi)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let c=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let h=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Kf)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?xe.RTL:xe.LTR;let a=this.heightOracle.mustRefreshForWrapping(r),l=t.getBoundingClientRect(),c=a||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,f=0;if(l.width&&l.height){let{scaleX:V,scaleY:H}=_f(t,l);(V>.005&&Math.abs(this.scaleX-V)>.005||H>.005&&Math.abs(this.scaleY-H)>.005)&&(this.scaleX=V,this.scaleY=H,h|=16,a=c=!0)}let u=(parseInt(i.paddingTop)||0)*this.scaleY,m=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=m)&&(this.paddingTop=u,this.paddingBottom=m,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let T=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=T&&(this.scrollAnchorHeight=-1,this.scrollTop=T),this.scrolledToBottom=bf(e.scrollDOM);let N=(this.printing?RE:SE)(t,this.paddingTop),b=N.top-this.pixelViewport.top,p=N.bottom-this.pixelViewport.bottom;this.pixelViewport=N;let L=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(L!=this.inView&&(this.inView=L,L&&(c=!0)),!this.inView&&!this.scrollTarget)return 0;let x=l.width;if((this.contentDOMWidth!=x||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),c){let V=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(V)&&(a=!0),a||s.lineWrapping&&Math.abs(x-this.contentDOMWidth)>s.charWidth){let{lineHeight:H,charWidth:M,textHeight:q}=e.docView.measureTextSize();a=H>0&&s.refresh(r,H,M,q,x/M,V),a&&(e.docView.minWidth=0,h|=16)}b>0&&p>0?f=Math.max(b,p):b<0&&p<0&&(f=Math.min(b,p)),Sc();for(let H of this.viewports){let M=H.from==this.viewport.from?V:e.docView.measureVisibleLineHeights(H);this.heightMap=(a?ot.empty().applyChanges(this.stateDeco,_e.empty,this.heightOracle,[new yt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new mE(H.from,M))}pi&&(h|=2)}let W=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return W&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),h|=this.updateForViewport()),(h&2||W)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,r=this.heightOracle,{visibleTop:a,visibleBottom:l}=this,c=new Ds(s.lineAt(a-i*1e3,we.ByHeight,r,0,0).from,s.lineAt(l+(1-i)*1e3,we.ByHeight,r,0,0).to);if(t){let{head:h}=t.range;if(h<c.from||h>c.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=s.lineAt(h,we.ByPos,r,0,0),m;t.y=="center"?m=(u.top+u.bottom)/2-f/2:t.y=="start"||t.y=="nearest"&&h<c.from?m=u.top:m=u.bottom-f,c=new Ds(s.lineAt(m-1e3/2,we.ByHeight,r,0,0).from,s.lineAt(m+f+1e3/2,we.ByHeight,r,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Ds(this.heightMap.lineAt(i,we.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,we.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,we.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,we.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:l}=this;return(e==0||s<=a-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&s>a-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new ho(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,r=s>>1,a=s<<1;if(this.defaultTextDirection!=xe.LTR&&!i)return[];let l=[],c=(f,u,m,T)=>{if(u-f<r)return;let N=this.state.selection.main,b=[N.from];N.empty||b.push(N.to);for(let L of b)if(L>f&&L<u){c(f,L-10,m,T),c(L+10,u,m,T);return}let p=NE(e,L=>L.from>=m.from&&L.to<=m.to&&Math.abs(L.from-f)<r&&Math.abs(L.to-u)<r&&!b.some(x=>L.from<x&&L.to>x));if(!p){if(u<m.to&&t&&i&&t.visibleRanges.some(W=>W.from<=u&&W.to>=u)){let W=t.moveToLineBoundary(B.cursor(u),!1,!0).head;W>f&&(u=W)}let L=this.gapSize(m,f,u,T),x=i||L<2e6?L:2e6;p=new ho(f,u,L,x)}l.push(p)},h=f=>{if(f.length<a||f.type!=rt.Text)return;let u=OE(f.from,f.to,this.stateDeco);if(u.total<a)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,T,N;if(i){let b=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,p,L;if(m!=null){let x=Ps(u,m),W=((this.visibleBottom-this.visibleTop)/2+b)/f.height;p=x-W,L=x+W}else p=(this.visibleTop-f.top-b)/f.height,L=(this.visibleBottom-f.top+b)/f.height;T=ks(u,p),N=ks(u,L)}else{let b=u.total*this.heightOracle.charWidth,p=s*this.heightOracle.charWidth,L=0;if(b>2e6)for(let M of e)M.from>=f.from&&M.from<f.to&&M.size!=M.displaySize&&M.from*this.heightOracle.charWidth+L<this.pixelViewport.left&&(L=M.size-M.displaySize);let x=this.pixelViewport.left+L,W=this.pixelViewport.right+L,V,H;if(m!=null){let M=Ps(u,m),q=((W-x)/2+p)/b;V=M-q,H=M+q}else V=(x-p)/b,H=(W+p)/b;T=ks(u,V),N=ks(u,H)}T>f.from&&c(f.from,T,f,u),N<f.to&&c(N,f.to,f,u)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(h):h(f);return l}gapSize(e,t,i,s){let r=Ps(s,i)-Ps(s,t);return this.heightOracle.lineWrapping?e.height*r:s.total*this.heightOracle.charWidth*r}updateLineGaps(e){ho.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=le.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Re.spans(t,this.viewport.from,this.viewport.to,{span(r,a){i.push({from:r,to:a})},point(){}},20);let s=0;if(i.length!=this.visibleRanges.length)s=12;else for(let r=0;r<i.length&&!(s&8);r++){let a=this.visibleRanges[r],l=i[r];(a.from!=l.from||a.to!=l.to)&&(s|=4,e&&e.mapPos(a.from,-1)==l.from&&e.mapPos(a.to,1)==l.to||(s|=8))}return this.visibleRanges=i,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Bi(this.heightMap.lineAt(e,we.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Bi(this.heightMap.lineAt(this.scaler.fromDOM(e),we.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Bi(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ds{constructor(e,t){this.from=e,this.to=t}}function OE(n,e,t){let i=[],s=n,r=0;return Re.spans(t,n,e,{span(){},point(a,l){a>s&&(i.push({from:s,to:a}),r+=a-s),s=l}},20),s<e&&(i.push({from:s,to:e}),r+=e-s),{total:r,ranges:i}}function ks({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let s=0;;s++){let{from:r,to:a}=e[s],l=a-r;if(i<=l)return r+i;i-=l}}function Ps(n,e){let t=0;for(let{from:i,to:s}of n.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/n.total}function NE(n,e){for(let t of n)if(e(t))return t}const Oc={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class il{constructor(e,t,i){let s=0,r=0,a=0;this.viewports=i.map(({from:l,to:c})=>{let h=t.lineAt(l,we.ByPos,e,0,0).top,f=t.lineAt(c,we.ByPos,e,0,0).bottom;return s+=f-h,{from:l,to:c,top:h,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let l of this.viewports)l.domTop=a+(l.top-r)*this.scale,a=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return s+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,s=r.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-s)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,s=r.domBottom}}eq(e){return e instanceof il?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function Bi(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new Gt(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(s=>Bi(s,e)):n._content)}const Ms=ie.define({combine:n=>n.join(" ")}),da=ie.define({combine:n=>n.indexOf(!0)>-1}),pa=Rn.newName(),pu=Rn.newName(),mu=Rn.newName(),gu={"&light":"."+pu,"&dark":"."+mu};function ma(n,e,t){return new Rn(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+i}})}const bE=ma("."+pa,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},gu),CE={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},fo=ne.ie&&ne.ie_version<=11;class yE{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new fg,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(ne.ie&&ne.ie_version<=11||ne.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(ne.chrome&&ne.chrome_version<126)&&(this.editContext=new IE(e),e.state.facet(tn)&&(e.contentDOM.editContext=this.editContext.editContext)),fo&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(tn)?i.root.activeElement!=this.dom:!Qs(this.dom,s))return;let r=s.anchorNode&&i.docView.nearest(s.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ne.ie&&ne.ie_version<=11||ne.android&&ne.chrome)&&!i.state.selection.main.empty&&s.focusNode&&qi(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=$i(e.root);if(!t)return!1;let i=ne.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&LE(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let s=Qs(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&dg(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,CE),fo&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),fo&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let s=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&ri(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let r of e){let a=this.readMutation(r);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:i}=a:(t=Math.min(a.from,t),i=Math.max(a.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Qs(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new jg(this.view,e,t,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,s=su(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Nc(t,e.previousSibling||e.target.previousSibling,-1),s=Nc(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(tn)!=e.state.facet(tn)&&(e.view.contentDOM.editContext=e.state.facet(tn)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Nc(n,e,t){for(;e;){let i=Ce.get(e);if(i&&i.parent==n)return i;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function bc(n,e){let t=e.startContainer,i=e.startOffset,s=e.endContainer,r=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return qi(a.node,a.offset,s,r)&&([t,i,s,r]=[s,r,t,i]),{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:r}}function LE(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return bc(n,s)}let t=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?bc(n,t):null}class IE{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:s}=e.state.selection.main,r=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:r,drifted:!1});let l={from:r,to:a,insert:_e.of(i.text.split(`
`))};if(l.from==this.from&&s<this.from?l.from=s:l.to==this.to&&s>this.to&&(l.to=s),!(l.from==l.to&&!l.insert.length)){if(this.pendingContextChange=l,!e.state.readOnly){let c=this.to-this.from+(l.to-l.from+l.insert.length);tl(e,l,B.single(this.toEditorPos(i.selectionStart,c),this.toEditorPos(i.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))}},this.handlers.characterboundsupdate=i=>{let s=[],r=null;for(let a=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);a<l;a++){let c=e.coordsForChar(a);r=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||r||new DOMRect,s.push(r)}t.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let r of i.getTextFormats()){let a=r.underlineStyle,l=r.underlineThickness;if(a!="None"&&l!="None"){let c=this.toEditorPos(r.rangeStart),h=this.toEditorPos(r.rangeEnd);if(c<h){let f=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;s.push(le.mark({attributes:{style:f}}).range(c,h))}}}e.dispatch({effects:Jf.of(le.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=$i(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((r,a,l,c,h)=>{if(i)return;let f=h.length-(a-r);if(s&&a>=s.to)if(s.from==r&&s.to==a&&s.insert.eq(h)){s=this.pendingContextChange=null,t+=f,this.to+=f;return}else s=null,this.revertPending(e.state);if(r+=t,a+=t,a<=this.from)this.from+=f,this.to+=f;else if(r<this.to){if(r<this.from||a>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(a),h.toString()),this.to+=f}t+=f}),s&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Q{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(r=>i(r,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||ug(e.parent)||document,this.viewState=new _c(e.state||Ae.create(e)),e.scrollTo&&e.scrollTo.is(ws)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Mi).map(s=>new ao(s));for(let s of this.plugins)s.update(this);this.observer=new yE(this),this.inputState=new Jg(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ic(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ve?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,s,r=this.state;for(let m of e){if(m.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=m.state}if(this.destroyed){this.viewState.state=r;return}let a=this.hasFocus,l=0,c=null;e.some(m=>m.annotation(hu))?(this.inputState.notifiedFocused=a,l=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,c=fu(r,a),c||(l=1));let h=this.observer.delayedAndroidKey,f=null;if(h?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(f=null)):this.observer.clear(),r.facet(Ae.phrases)!=this.state.facet(Ae.phrases))return this.setState(r);s=dr.create(this,r,e),s.flags|=l;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(u&&(u=u.map(m.changes)),m.scrollIntoView){let{main:T}=m.state.selection;u=new oi(T.empty?T:B.cursor(T.head,T.head>T.anchor?-1:1))}for(let T of m.effects)T.is(ws)&&(u=T.value.clip(this.state))}this.viewState.update(s,u),this.bidiCache=mr.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Fi)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Ms)!=s.state.facet(Ms)&&(this.viewState.mustMeasureContent=!0),(t||i||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let m of this.state.facet(ca))try{m(s)}catch(T){dt(this.state,T,"update listener")}(c||f)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),f&&!su(this,f)&&h.force&&ri(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new _c(e),this.plugins=e.facet(Mi).map(i=>new ao(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new ic(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Mi),i=e.state.facet(Mi);if(t!=i){let s=[];for(let r of i){let a=t.indexOf(r);if(a<0)s.push(new ao(r));else{let l=this.plugins[a];l.mustUpdate=e,s.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){dt(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(a<0)if(bf(i))r=-1,a=this.viewState.heightMap.height;else{let T=this.viewState.scrollAnchorAt(s);r=T.from,a=T.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];c&4||([this.measureRequests,h]=[h,this.measureRequests]);let f=h.map(T=>{try{return T.read(this)}catch(N){return dt(this.state,N),Cc}}),u=dr.create(this,this.state,[]),m=!1;u.flags|=c,t?t.flags|=c:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),m=this.docView.update(u),m&&this.docViewUpdate());for(let T=0;T<h.length;T++)if(f[T]!=Cc)try{let N=h[T];N.write&&N.write(f[T],this)}catch(N){dt(this.state,N)}if(m&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let N=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-a;if(N>1||N<-1){s=s+N,i.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(ca))l(t)}get themeClasses(){return pa+" "+(this.state.facet(da)?mu:pu)+" "+this.state.facet(Ms)}updateAttrs(){let e=yc(this,Qf,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(tn)?"true":"false",class:"cm-content",style:`${ne.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),yc(this,Qa,t);let i=this.observer.ignore(()=>{let s=sa(this.contentDOM,this.contentAttrs,t),r=sa(this.dom,this.editorAttrs,e);return s||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(Q.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Fi);let e=this.state.facet(Q.cspNonce);Rn.mount(this.root,this.styleModules.concat(bE).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return co(this,e,lc(this,e,t,i))}moveByGroup(e,t){return co(this,e,lc(this,e,t,i=>Gg(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),r=i[t?i.length-1:0];return B.cursor(r.side(t,s)+e.from,r.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,i=!0){return Wg(this,e,t,i)}moveVertically(e,t,i){return co(this,e,Vg(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),iu(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),r=this.bidiSpans(s),a=r[Tn.find(r,e-s.from,-1,t)];return hs(i,a.dir==xe.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(zf)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>wE)return Hf(e.length);let t=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||Bf(r.isolates,i=nc(this,e))))return r.order;i||(i=nc(this,e));let s=bg(e.text,t,i);return this.bidiCache.push(new mr(e.from,e.to,t,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ne.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Of(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return ws.of(new oi(typeof e=="number"?B.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return ws.of(new oi(B.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Fe.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Fe.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Rn.newName(),s=[Ms.of(i),Fi.of(ma(`.${i}`,e))];return t&&t.dark&&s.push(da.of(!0)),s}static baseTheme(e){return jn.lowest(Fi.of(ma("."+pa,e,gu)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&Ce.get(i)||Ce.get(e);return((t=s?.rootView)===null||t===void 0?void 0:t.view)||null}}Q.styleModule=Fi;Q.inputHandler=jf;Q.clipboardInputFilter=$a;Q.clipboardOutputFilter=Ja;Q.scrollHandler=$f;Q.focusChangeEffect=Xf;Q.perLineTextDirection=zf;Q.exceptionSink=Yf;Q.updateListener=ca;Q.editable=tn;Q.mouseSelectionStyle=qf;Q.dragMovesSelection=Vf;Q.clickAddsSelectionRange=Gf;Q.decorations=Ji;Q.outerDecorations=Zf;Q.atomicRanges=Za;Q.bidiIsolatedRanges=eu;Q.scrollMargins=tu;Q.darkTheme=da;Q.cspNonce=ie.define({combine:n=>n.length?n[0]:""});Q.contentAttributes=Qa;Q.editorAttributes=Qf;Q.lineWrapping=Q.contentAttributes.of({class:"cm-lineWrapping"});Q.announce=ge.define();const wE=4096,Cc={};class mr{constructor(e,t,i,s,r,a){this.from=e,this.to=t,this.dir=i,this.isolates=s,this.fresh=r,this.order=a}static update(e,t){if(t.empty&&!e.some(r=>r.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:xe.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let a=e[r];a.dir==s&&!t.touchesRange(a.from,a.to)&&i.push(new mr(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i}}function yc(n,e,t){for(let i=n.state.facet(e),s=i.length-1;s>=0;s--){let r=i[s],a=typeof r=="function"?r(n):r;a&&ia(a,t)}return t}const xE=ne.mac?"mac":ne.windows?"win":ne.linux?"linux":"key";function vE(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,r,a,l;for(let c=0;c<t.length-1;++c){const h=t[c];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))s=!0;else if(/^(c|ctrl|control)$/i.test(h))r=!0;else if(/^s(hift)?$/i.test(h))a=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+h)}return s&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function Fs(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const DE=jn.default(Q.domEventHandlers({keydown(n,e){return Tu(Eu(e.state),n,e,"editor")}})),ds=ie.define({enables:DE}),Lc=new WeakMap;function Eu(n){let e=n.facet(ds),t=Lc.get(e);return t||Lc.set(e,t=ME(e.reduce((i,s)=>i.concat(s),[]))),t}function kE(n,e,t){return Tu(Eu(n.state),e,n,t)}let mn=null;const PE=4e3;function ME(n,e=xE){let t=Object.create(null),i=Object.create(null),s=(a,l)=>{let c=i[a];if(c==null)i[a]=l;else if(c!=l)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},r=(a,l,c,h,f)=>{var u,m;let T=t[a]||(t[a]=Object.create(null)),N=l.split(/ (?!$)/).map(L=>vE(L,e));for(let L=1;L<N.length;L++){let x=N.slice(0,L).join(" ");s(x,!0),T[x]||(T[x]={preventDefault:!0,stopPropagation:!1,run:[W=>{let V=mn={view:W,prefix:x,scope:a};return setTimeout(()=>{mn==V&&(mn=null)},PE),!0}]})}let b=N.join(" ");s(b,!1);let p=T[b]||(T[b]={preventDefault:!1,stopPropagation:!1,run:((m=(u=T._any)===null||u===void 0?void 0:u.run)===null||m===void 0?void 0:m.slice())||[]});c&&p.run.push(c),h&&(p.preventDefault=!0),f&&(p.stopPropagation=!0)};for(let a of n){let l=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let h of l){let f=t[h]||(t[h]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=a;for(let m in f)f[m].run.push(T=>u(T,ga))}let c=a[e]||a.key;if(c)for(let h of l)r(h,c,a.run,a.preventDefault,a.stopPropagation),a.shift&&r(h,"Shift-"+c,a.shift,a.preventDefault,a.stopPropagation)}return t}let ga=null;function Tu(n,e,t,i){ga=e;let s=ag(e),r=ht(s,0),a=Wt(r)==s.length&&s!=" ",l="",c=!1,h=!1,f=!1;mn&&mn.view==t&&mn.scope==i&&(l=mn.prefix+" ",ou.indexOf(e.keyCode)<0&&(h=!0,mn=null));let u=new Set,m=p=>{if(p){for(let L of p.run)if(!u.has(L)&&(u.add(L),L(t)))return p.stopPropagation&&(f=!0),!0;p.preventDefault&&(p.stopPropagation&&(f=!0),h=!0)}return!1},T=n[i],N,b;return T&&(m(T[l+Fs(s,e,!a)])?c=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ne.windows&&e.ctrlKey&&e.altKey)&&(N=_n[e.keyCode])&&N!=s?(m(T[l+Fs(N,e,!0)])||e.shiftKey&&(b=Ki[e.keyCode])!=s&&b!=N&&m(T[l+Fs(b,e,!1)]))&&(c=!0):a&&e.shiftKey&&m(T[l+Fs(s,e,!0)])&&(c=!0),!c&&m(T._any)&&(c=!0)),h&&(c=!0),c&&f&&e.stopPropagation(),ga=null,c}class ps{constructor(e,t,i,s,r){this.className=e,this.left=t,this.top=i,this.width=s,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let r=Au(e);return[new ps(t,s.left-r.left,s.top-r.top,null,s.bottom-s.top)]}else return FE(e,t,i)}}function Au(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==xe.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function Ic(n,e,t,i){let s=n.coordsAtPos(e,t*2);if(!s)return i;let r=n.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,l=n.posAtCoords({x:r.left+1,y:a}),c=n.posAtCoords({x:r.right-1,y:a});return l==null||c==null?i:{from:Math.max(i.from,Math.min(l,c)),to:Math.min(i.to,Math.max(l,c))}}function FE(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),r=n.textDirection==xe.LTR,a=n.contentDOM,l=a.getBoundingClientRect(),c=Au(n),h=a.querySelector(".cm-line"),f=h&&window.getComputedStyle(h),u=l.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),m=l.right-(f?parseInt(f.paddingRight):0),T=fa(n,i),N=fa(n,s),b=T.type==rt.Text?T:null,p=N.type==rt.Text?N:null;if(b&&(n.lineWrapping||T.widgetLineBreaks)&&(b=Ic(n,i,1,b)),p&&(n.lineWrapping||N.widgetLineBreaks)&&(p=Ic(n,s,-1,p)),b&&p&&b.from==p.from&&b.to==p.to)return x(W(t.from,t.to,b));{let H=b?W(t.from,null,b):V(T,!1),M=p?W(null,t.to,p):V(N,!0),q=[];return(b||T).to<(p||N).from-(b&&p?1:0)||T.widgetLineBreaks>1&&H.bottom+n.defaultLineHeight/2<M.top?q.push(L(u,H.bottom,m,M.top)):H.bottom<M.top&&n.elementAtHeight((H.bottom+M.top)/2).type==rt.Text&&(H.bottom=M.top=(H.bottom+M.top)/2),x(H).concat(q).concat(x(M))}function L(H,M,q,se){return new ps(e,H-c.left,M-c.top,q-H,se-M)}function x({top:H,bottom:M,horizontal:q}){let se=[];for(let z=0;z<q.length;z+=2)se.push(L(q[z],H,q[z+1],M));return se}function W(H,M,q){let se=1e9,z=-1e9,Y=[];function te(de,Te,ye,Ne,ke){let Oe=n.coordsAtPos(de,de==q.to?-2:2),We=n.coordsAtPos(ye,ye==q.from?2:-2);!Oe||!We||(se=Math.min(Oe.top,We.top,se),z=Math.max(Oe.bottom,We.bottom,z),ke==xe.LTR?Y.push(r&&Te?u:Oe.left,r&&Ne?m:We.right):Y.push(!r&&Ne?u:We.left,!r&&Te?m:Oe.right))}let K=H??q.from,fe=M??q.to;for(let de of n.visibleRanges)if(de.to>K&&de.from<fe)for(let Te=Math.max(de.from,K),ye=Math.min(de.to,fe);;){let Ne=n.state.doc.lineAt(Te);for(let ke of n.bidiSpans(Ne)){let Oe=ke.from+Ne.from,We=ke.to+Ne.from;if(Oe>=ye)break;We>Te&&te(Math.max(Oe,Te),H==null&&Oe<=K,Math.min(We,ye),M==null&&We>=fe,ke.dir)}if(Te=Ne.to+1,Te>=ye)break}return Y.length==0&&te(K,H==null,fe,M==null,n.textDirection),{top:se,bottom:z,horizontal:Y}}function V(H,M){let q=l.top+(M?H.top:H.bottom);return{top:q,bottom:q,horizontal:[]}}}function UE(n,e){return n.constructor==e.constructor&&n.eq(e)}class BE{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(nr)!=e.state.facet(nr)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(nr);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!UE(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[i].constructor&&s.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const nr=ie.define();function Su(n){return[Fe.define(e=>new BE(e,n)),nr.of(n)]}const Ru=!(ne.ios&&ne.webkit&&ne.webkit_version<534),Qi=ie.define({combine(n){return zt(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function HE(n={}){return[Qi.of(n),WE,GE,VE,Kf.of(!0)]}function _u(n){return n.startState.facet(Qi)!=n.state.facet(Qi)}const WE=Su({above:!0,markers(n){let{state:e}=n,t=e.facet(Qi),i=[];for(let s of e.selection.ranges){let r=s==e.selection.main;if(s.empty?!r||Ru:t.drawRangeCursor){let a=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=s.empty?s:B.cursor(s.head,s.head>s.anchor?-1:1);for(let c of ps.forRange(n,a,l))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=_u(n);return t&&wc(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){wc(e.state,n)},class:"cm-cursorLayer"});function wc(n,e){e.style.animationDuration=n.facet(Qi).cursorBlinkRate+"ms"}const GE=Su({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:ps.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||_u(n)},class:"cm-selectionLayer"}),Ea={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Ru&&(Ea[".cm-line"].caretColor=Ea[".cm-content"].caretColor="transparent !important");const VE=jn.highest(Q.theme(Ea)),Ou=ge.define({map(n,e){return n==null?null:e.mapPos(n)}}),Hi=Ze.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(Ou)?i.value:t,n)}}),qE=Fe.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Hi);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Hi)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Hi),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Hi)!=n&&this.view.dispatch({effects:Ou.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function YE(){return[Hi,qE]}function xc(n,e,t,i,s){e.lastIndex=0;for(let r=n.iterRange(t,i),a=t,l;!r.next().done;a+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)s(a+l.index,l)}function jE(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:s,to:r}of t)s=Math.max(n.state.doc.lineAt(s).from,s-e),r=Math.min(n.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=r:i.push({from:s,to:r});return i}class XE{constructor(e){const{regexp:t,decoration:i,decorate:s,boundary:r,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(l,c,h,f)=>s(f,h,h+l[0].length,l,c);else if(typeof i=="function")this.addMatch=(l,c,h,f)=>{let u=i(l,c,h);u&&f(h,h+l[0].length,u)};else if(i)this.addMatch=(l,c,h,f)=>f(h,h+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=a}createDeco(e){let t=new sn,i=t.add.bind(t);for(let{from:s,to:r}of jE(e,this.maxLength))xc(e.state.doc,this.regexp,s,r,(a,l)=>this.addMatch(l,e,a,i));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((r,a,l,c)=>{c>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),s=Math.max(c,s))}),e.viewportMoved||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let r of e.visibleRanges){let a=Math.max(r.from,i),l=Math.min(r.to,s);if(l>a){let c=e.state.doc.lineAt(a),h=c.to<l?e.state.doc.lineAt(l):c,f=Math.max(r.from,c.from),u=Math.min(r.to,h.to);if(this.boundary){for(;a>c.from;a--)if(this.boundary.test(c.text[a-1-c.from])){f=a;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){u=l;break}}let m=[],T,N=(b,p,L)=>m.push(L.range(b,p));if(c==h)for(this.regexp.lastIndex=f-c.from;(T=this.regexp.exec(c.text))&&T.index<u-c.from;)this.addMatch(T,e,T.index+c.from,N);else xc(e.state.doc,this.regexp,f,u,(b,p)=>this.addMatch(p,e,b,N));t=t.update({filterFrom:f,filterTo:u,filter:(b,p)=>b<f||p>u,add:m})}}return t}}const Ta=/x/.unicode!=null?"gu":"g",zE=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,Ta),KE={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let uo=null;function $E(){var n;if(uo==null&&typeof document<"u"&&document.body){let e=document.body.style;uo=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return uo||!1}const ir=ie.define({combine(n){let e=zt(n,{render:null,specialChars:zE,addSpecialChars:null});return(e.replaceTabs=!$E())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Ta)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Ta)),e}});function JE(n={}){return[ir.of(n),QE()]}let vc=null;function QE(){return vc||(vc=Fe.fromClass(class{constructor(n){this.view=n,this.decorations=le.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(ir)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new XE({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,r=ht(e[0],0);if(r==9){let a=s.lineAt(i),l=t.state.tabSize,c=Ti(a.text,l,i-a.from);return le.replace({widget:new nT((l-c%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=le.replace({widget:new tT(n,r)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(ir);n.startState.facet(ir)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const ZE="•";function eT(n){return n>=32?ZE:n==10?"␤":String.fromCharCode(9216+n)}class tT extends an{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=eT(this.code),i=e.state.phrase("Control character")+" "+(KE[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let r=document.createElement("span");return r.textContent=t,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class nT extends an{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function iT(){return rT}const sT=le.line({class:"cm-activeLine"}),rT=Fe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let s=n.lineBlockAt(i.head);s.from>e&&(t.push(sT.range(s.from)),e=s.from)}return le.set(t)}},{decorations:n=>n.decorations});class oT extends an{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?fi(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),s=hs(t[0],i.direction!="rtl"),r=parseInt(i.lineHeight);return s.bottom-s.top>r*1.5?{left:s.left,right:s.right,top:s.top,bottom:s.top+r}:s}ignoreEvent(){return!1}}function aT(n){return Fe.fromClass(class{constructor(e){this.view=e,this.placeholder=n?le.set([le.widget({widget:new oT(n),side:1}).range(0)]):le.none}get decorations(){return this.view.state.doc.length?le.none:this.placeholder}},{decorations:e=>e.decorations})}const Aa=2e3;function lT(n,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),r=[];if(e.off>Aa||t.off>Aa||e.col<0||t.col<0){let a=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let c=i;c<=s;c++){let h=n.doc.line(c);h.length<=l&&r.push(B.range(h.from+a,h.to+l))}}else{let a=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let c=i;c<=s;c++){let h=n.doc.line(c),f=$o(h.text,a,n.tabSize,!0);if(f<0)r.push(B.cursor(h.to));else{let u=$o(h.text,l,n.tabSize);r.push(B.range(h.from+f,h.from+u))}}}return r}function cT(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function Dc(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),s=t-i.from,r=s>Aa?-1:s==i.length?cT(n,e.clientX):Ti(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:r,off:s}}function hT(n,e){let t=Dc(n,e),i=n.state.selection;return t?{update(s){if(s.docChanged){let r=s.changes.mapPos(s.startState.doc.line(t.line).from),a=s.state.doc.lineAt(r);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},i=i.map(s.changes)}},get(s,r,a){let l=Dc(n,s);if(!l)return i;let c=lT(n.state,t,l);return c.length?a?B.create(c.concat(i.ranges)):B.create(c):i}}:null}function fT(n){let e=t=>t.altKey&&t.button==0;return Q.mouseSelectionStyle.of((t,i)=>e(i)?hT(t,i):null)}const uT={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},dT={style:"cursor: crosshair"};function pT(n={}){let[e,t]=uT[n.key||"Alt"],i=Fe.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[i,Q.contentAttributes.of(s=>{var r;return!((r=s.plugin(i))===null||r===void 0)&&r.isDown?dT:null})]}const Ii="-10000px";class Nu{constructor(e,t,i,s){this.facet=t,this.createTooltipView=i,this.removeTooltipView=s,this.input=e.state.facet(t),this.tooltips=this.input.filter(a=>a);let r=null;this.tooltipViews=this.tooltips.map(a=>r=i(a,r))}update(e,t){var i;let s=e.state.facet(this.facet),r=s.filter(c=>c);if(s===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let a=[],l=t?[]:null;for(let c=0;c<r.length;c++){let h=r[c],f=-1;if(h){for(let u=0;u<this.tooltips.length;u++){let m=this.tooltips[u];m&&m.create==h.create&&(f=u)}if(f<0)a[c]=this.createTooltipView(h,c?a[c-1]:null),l&&(l[c]=!!h.above);else{let u=a[c]=this.tooltipViews[f];l&&(l[c]=t[f]),u.update&&u.update(e)}}}for(let c of this.tooltipViews)a.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return t&&(l.forEach((c,h)=>t[h]=c),t.length=l.length),this.input=s,this.tooltips=r,this.tooltipViews=a,!0}}function mT(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const po=ie.define({combine:n=>{var e,t,i;return{position:ne.ios?"absolute":((e=n.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||mT}}}),kc=new WeakMap,sl=Fe.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(po);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Nu(n,rl,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(po);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",t.dom.appendChild(s)}return t.dom.style.position=this.position,t.dom.style.top=Ii,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(ne.gecko)t=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Ii&&r.style.left=="0px"){let a=r.getBoundingClientRect();t=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(t||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(n=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),s=el(this.view);return{visible:{left:i.left+s.left,top:i.top+s.top,right:i.right-s.right,bottom:i.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,a)=>{let l=this.manager.tooltipViews[a];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(po).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:i,scaleX:s,scaleY:r}=n,a=[];for(let l=0;l<this.manager.tooltips.length;l++){let c=this.manager.tooltips[l],h=this.manager.tooltipViews[l],{dom:f}=h,u=n.pos[l],m=n.size[l];if(!u||c.clip!==!1&&(u.bottom<=Math.max(t.top,i.top)||u.top>=Math.min(t.bottom,i.bottom)||u.right<Math.max(t.left,i.left)-.1||u.left>Math.min(t.right,i.right)+.1)){f.style.top=Ii;continue}let T=c.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,N=T?7:0,b=m.right-m.left,p=(e=kc.get(h))!==null&&e!==void 0?e:m.bottom-m.top,L=h.offset||ET,x=this.view.textDirection==xe.LTR,W=m.width>i.right-i.left?x?i.left:i.right-m.width:x?Math.max(i.left,Math.min(u.left-(T?14:0)+L.x,i.right-b)):Math.min(Math.max(i.left,u.left-b+(T?14:0)-L.x),i.right-b),V=this.above[l];!c.strictSide&&(V?u.top-p-N-L.y<i.top:u.bottom+p+N+L.y>i.bottom)&&V==i.bottom-u.bottom>u.top-i.top&&(V=this.above[l]=!V);let H=(V?u.top-i.top:i.bottom-u.bottom)-N;if(H<p&&h.resize!==!1){if(H<this.view.defaultLineHeight){f.style.top=Ii;continue}kc.set(h,p),f.style.height=(p=H)/r+"px"}else f.style.height&&(f.style.height="");let M=V?u.top-p-N-L.y:u.bottom+N+L.y,q=W+b;if(h.overlap!==!0)for(let se of a)se.left<q&&se.right>W&&se.top<M+p&&se.bottom>M&&(M=V?se.top-p-2-N:se.bottom+N+2);if(this.position=="absolute"?(f.style.top=(M-n.parent.top)/r+"px",Pc(f,(W-n.parent.left)/s)):(f.style.top=M/r+"px",Pc(f,W/s)),T){let se=u.left+(x?L.x:-L.x)-(W+14-7);T.style.left=se/s+"px"}h.overlap!==!0&&a.push({left:W,top:M,right:q,bottom:M+p}),f.classList.toggle("cm-tooltip-above",V),f.classList.toggle("cm-tooltip-below",!V),h.positioned&&h.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Ii}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Pc(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const gT=Q.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ET={x:0,y:0},rl=ie.define({enables:[sl,gT]}),gr=ie.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class Gr{static create(e){return new Gr(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Nu(e,gr,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(t===void 0)t=s;else if(t!==s)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const TT=rl.compute([gr],n=>{let e=n.facet(gr);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:Gr.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class AT{constructor(e,t,i,s,r){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let s,r=1;if(i instanceof En)s=i.posAtStart;else{if(s=e.posAtCoords(t),s==null)return;let l=e.coordsAtPos(s);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(s)).find(f=>f.from<=s&&f.to>=s),h=c&&c.dir==xe.RTL?-1:1;r=t.x<l.left?-h:h}let a=this.source(e,s,r);if(a?.then){let l=this.pending={pos:s};a.then(c=>{this.pending==l&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>dt(e.state,c,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(sl),t=e?e.manager.tooltips.findIndex(i=>i.create==Gr.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:r}=this;if(s.length&&r&&!ST(r.dom,e)||this.pending){let{pos:a}=s[0]||this.pending,l=(i=(t=s[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:a;(a==l?this.view.posAtCoords(this.lastMove)!=a:!RT(this.view,a,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Us=4;function ST(n,e){let{left:t,right:i,top:s,bottom:r}=n.getBoundingClientRect(),a;if(a=n.querySelector(".cm-tooltip-arrow")){let l=a.getBoundingClientRect();s=Math.min(l.top,s),r=Math.max(l.bottom,r)}return e.clientX>=t-Us&&e.clientX<=i+Us&&e.clientY>=s-Us&&e.clientY<=r+Us}function RT(n,e,t,i,s,r){let a=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(a.left>i||a.right<i||a.top>s||Math.min(a.bottom,l)<s)return!1;let c=n.posAtCoords({x:i,y:s},!1);return c>=e&&c<=t}function _T(n,e={}){let t=ge.define(),i=Ze.define({create(){return[]},update(s,r){if(s.length&&(e.hideOnChange&&(r.docChanged||r.selection)?s=[]:e.hideOn&&(s=s.filter(a=>!e.hideOn(r,a))),r.docChanged)){let a=[];for(let l of s){let c=r.changes.mapPos(l.pos,-1,st.TrackDel);if(c!=null){let h=Object.assign(Object.create(null),l);h.pos=c,h.end!=null&&(h.end=r.changes.mapPos(h.end)),a.push(h)}}s=a}for(let a of r.effects)a.is(t)&&(s=a.value),a.is(OT)&&(s=[]);return s},provide:s=>gr.from(s)});return{active:i,extension:[i,Fe.define(s=>new AT(s,n,i,t,e.hoverTime||300)),TT]}}function bu(n,e){let t=n.plugin(sl);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const OT=ge.define(),Mc=ie.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Zi(n,e){let t=n.plugin(Cu),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const Cu=Fe.fromClass(class{constructor(n){this.input=n.state.facet(es),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(Mc);this.top=new Bs(n,!0,e.topContainer),this.bottom=new Bs(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(Mc);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Bs(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Bs(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(es);if(t!=this.input){let i=t.filter(c=>c),s=[],r=[],a=[],l=[];for(let c of i){let h=this.specs.indexOf(c),f;h<0?(f=c(n.view),l.push(f)):(f=this.panels[h],f.update&&f.update(n)),s.push(f),(f.top?r:a).push(f)}this.specs=i,this.panels=s,this.top.sync(r),this.bottom.sync(a);for(let c of l)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Q.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Bs{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Fc(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Fc(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Fc(n){let e=n.nextSibling;return n.remove(),e}const es=ie.define({enables:Cu});class on extends Wn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}on.prototype.elementClass="";on.prototype.toDOM=void 0;on.prototype.mapMode=st.TrackBefore;on.prototype.startSide=on.prototype.endSide=-1;on.prototype.point=!0;const sr=ie.define(),NT=ie.define(),bT={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Re.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},ji=ie.define();function CT(n){return[yu(),ji.of(Object.assign(Object.assign({},bT),n))]}const Uc=ie.define({combine:n=>n.some(e=>e)});function yu(n){return[yT]}const yT=Fe.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(ji).map(e=>new Hc(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Uc),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Uc)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Re.iter(this.view.state.facet(sr),this.view.viewport.from),i=[],s=this.gutters.map(r=>new LT(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let a=!0;for(let l of r.type)if(l.type==rt.Text&&a){Sa(t,i,l.from);for(let c of s)c.line(this.view,l,i);a=!1}else if(l.widget)for(let c of s)c.widget(this.view,l)}else if(r.type==rt.Text){Sa(t,i,r.from);for(let a of s)a.line(this.view,r,i)}else if(r.widget)for(let a of s)a.widget(this.view,r);for(let r of s)r.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(ji),t=n.state.facet(ji),i=n.docChanged||n.heightChanged||n.viewportChanged||!Re.eq(n.startState.facet(sr),n.state.facet(sr),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(i=!0);else{i=!0;let s=[];for(let r of t){let a=e.indexOf(r);a<0?s.push(new Hc(this.view,r)):(this.gutters[a].update(n),s.push(this.gutters[a]))}for(let r of this.gutters)r.dom.remove(),s.indexOf(r)<0&&r.destroy();for(let r of s)this.dom.appendChild(r.dom);this.gutters=s}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>Q.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==xe.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function Bc(n){return Array.isArray(n)?n:[n]}function Sa(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class LT{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Re.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:s}=this,r=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let l=new Lu(e,a,r,i);s.elements.push(l),s.dom.appendChild(l.dom)}else s.elements[this.i].update(e,a,r,i);this.height=t.bottom,this.i++}line(e,t,i){let s=[];Sa(this.cursor,s,t.from),i.length&&(s=s.concat(i));let r=this.gutter.config.lineMarker(e,t,s);r&&s.unshift(r);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),s=i?[i]:null;for(let r of e.state.facet(NT)){let a=r(e,t.widget,t);a&&(s||(s=[])).push(a)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Hc{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let r=s.target,a;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let c=r.getBoundingClientRect();a=(c.top+c.bottom)/2}else a=s.clientY;let l=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[i](e,l,s)&&s.preventDefault()});this.markers=Bc(t.markers(e)),t.initialSpacer&&(this.spacer=new Lu(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Bc(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!Re.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Lu{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),IT(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let r=0,a=0;;){let l=a,c=r<t.length?t[r++]:null,h=!1;if(c){let f=c.elementClass;f&&(i+=" "+f);for(let u=a;u<this.markers.length;u++)if(this.markers[u].compare(c)){l=u,h=!0;break}}else l=this.markers.length;for(;a<l;){let f=this.markers[a++];if(f.toDOM){f.destroy(s);let u=s.nextSibling;s.remove(),s=u}}if(!c)break;c.toDOM&&(h?s=s.nextSibling:this.dom.insertBefore(c.toDOM(e),s)),h&&a++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function IT(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const wT=ie.define(),xT=ie.define(),ti=ie.define({combine(n){return zt(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let r=i[s],a=t[s];i[s]=r?(l,c,h)=>r(l,c,h)||a(l,c,h):a}return i}})}});class mo extends on{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function go(n,e){return n.state.facet(ti).formatNumber(e,n.state)}const vT=ji.compute([ti],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(wT)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new mo(go(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let s of e.state.facet(xT)){let r=s(e,t,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(ti)!=e.state.facet(ti),initialSpacer(e){return new mo(go(e,Wc(e.state.doc.lines)))},updateSpacer(e,t){let i=go(t.view,Wc(t.view.state.doc.lines));return i==e.number?e:new mo(i)},domEventHandlers:n.facet(ti).domEventHandlers}));function DT(n={}){return[ti.of(n),yu(),vT]}function Wc(n){let e=9;for(;e<n;)e=e*10+9;return e}const kT=new class extends on{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},PT=sr.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.head).from;s>t&&(t=s,e.push(kT.range(s)))}return Re.of(e)});function MT(){return PT}const Iu=1024;let FT=0;class Eo{constructor(e,t){this.from=e,this.to=t}}class Ee{constructor(e={}){this.id=FT++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=mt.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Ee.closedBy=new Ee({deserialize:n=>n.split(" ")});Ee.openedBy=new Ee({deserialize:n=>n.split(" ")});Ee.group=new Ee({deserialize:n=>n.split(" ")});Ee.isolate=new Ee({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Ee.contextHash=new Ee({perNode:!0});Ee.lookAhead=new Ee({perNode:!0});Ee.mounted=new Ee({perNode:!0});class Er{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Ee.mounted.id]}}const UT=Object.create(null);class mt{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):UT,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new mt(e.name||"",t,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(s)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ee.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(Ee.group),r=-1;r<(s?s.length:0);r++){let a=t[r<0?i.name:s[r]];if(a)return a}}}}mt.none=new mt("",Object.create(null),0,8);class ol{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let r of e){let a=r(i);a&&(s||(s=Object.assign({},i.props)),s[a[0].id]=a[1])}t.push(s?new mt(i.name,s,i.id,i.flags):i)}return new ol(t)}}const Hs=new WeakMap,Gc=new WeakMap;var Ye;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Ye||(Ye={}));class He{constructor(e,t,i,s,r){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,r&&r.length){this.props=Object.create(null);for(let[a,l]of r)this.props[typeof a=="number"?a:a.id]=l}}toString(){let e=Er.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new _a(this.topNode,e)}cursorAt(e,t=0,i=0){let s=Hs.get(this)||this.topNode,r=new _a(s);return r.moveTo(e,t),Hs.set(this,r._tree),r}get topNode(){return new Lt(this,0,0,null)}resolve(e,t=0){let i=ts(Hs.get(this)||this.topNode,e,t,!1);return Hs.set(this,i),i}resolveInner(e,t=0){let i=ts(Gc.get(this)||this.topNode,e,t,!0);return Gc.set(this,i),i}resolveStack(e,t=0){return WT(this,e,t)}iterate(e){let{enter:t,leave:i,from:s=0,to:r=this.length}=e,a=e.mode||0,l=(a&Ye.IncludeAnonymous)>0;for(let c=this.cursor(a|Ye.IncludeAnonymous);;){let h=!1;if(c.from<=r&&c.to>=s&&(!l&&c.type.isAnonymous||t(c)!==!1)){if(c.firstChild())continue;h=!0}for(;h&&i&&(l||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:cl(mt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new He(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new He(mt.none,t,i,s)))}static build(e){return GT(e)}}He.empty=new He(mt.none,[],[],0);class al{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new al(this.buffer,this.index)}}class Nn{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return mt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],r=s.name;if(/\W/.test(r)&&!s.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return r+"("+a.join(",")+")"}findChild(e,t,i,s,r){let{buffer:a}=this,l=-1;for(let c=e;c!=t&&!(wu(r,s,a[c+1],a[c+2])&&(l=c,i>0));c=a[c+3]);return l}slice(e,t,i){let s=this.buffer,r=new Uint16Array(t-e),a=0;for(let l=e,c=0;l<t;){r[c++]=s[l++],r[c++]=s[l++]-i;let h=r[c++]=s[l++]-i;r[c++]=s[l++]-e,a=Math.max(a,h)}return new Nn(r,a,this.set)}}function wu(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function ts(n,e,t,i){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!i&&n instanceof Lt&&n.index<0?null:n.parent;if(!a)return n;n=a}let r=i?0:Ye.IgnoreOverlays;if(i)for(let a=n,l=a.parent;l;a=l,l=a.parent)a instanceof Lt&&a.index<0&&((s=l.enter(e,t,r))===null||s===void 0?void 0:s.from)!=a.from&&(n=l);for(;;){let a=n.enter(e,t,r);if(!a)return n;n=a}}class xu{cursor(e=0){return new _a(this,e)}getChild(e,t=null,i=null){let s=Vc(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return Vc(this,e,t,i)}resolve(e,t=0){return ts(this,e,t,!1)}resolveInner(e,t=0){return ts(this,e,t,!0)}matchContext(e){return Ra(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(i=t,t=s.prevSibling):t=s}return i}get node(){return this}get next(){return this.parent}}class Lt extends xu{constructor(e,t,i,s){super(),this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,r=0){for(let a=this;;){for(let{children:l,positions:c}=a._tree,h=t>0?l.length:-1;e!=h;e+=t){let f=l[e],u=c[e]+a.from;if(wu(s,i,u,u+f.length)){if(f instanceof Nn){if(r&Ye.ExcludeBuffers)continue;let m=f.findChild(0,f.buffer.length,t,i-u,s);if(m>-1)return new An(new BT(a,f,e,u),null,m)}else if(r&Ye.IncludeAnonymous||!f.type.isAnonymous||ll(f)){let m;if(!(r&Ye.IgnoreMounts)&&(m=Er.get(f))&&!m.overlay)return new Lt(m.tree,u,e,a);let T=new Lt(f,u,e,a);return r&Ye.IncludeAnonymous||!T.type.isAnonymous?T:T.nextChild(t<0?f.children.length-1:0,t,i,s)}}}if(r&Ye.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&Ye.IgnoreOverlays)&&(s=Er.get(this._tree))&&s.overlay){let r=e-this.from;for(let{from:a,to:l}of s.overlay)if((t>0?a<=r:a<r)&&(t<0?l>=r:l>r))return new Lt(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Vc(n,e,t,i){let s=n.cursor(),r=[];if(!s.firstChild())return r;if(t!=null){for(let a=!1;!a;)if(a=s.type.is(t),!s.nextSibling())return r}for(;;){if(i!=null&&s.type.is(i))return r;if(s.type.is(e)&&r.push(s.node),!s.nextSibling())return i==null?r:[]}}function Ra(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class BT{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class An extends xu{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return r<0?null:new An(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Ye.ExcludeBuffers)return null;let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new An(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new An(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new An(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,r=i.buffer[this.index+3];if(r>s){let a=i.buffer[this.index+1];e.push(i.slice(s,r,a)),t.push(0)}return new He(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function vu(n){if(!n.length)return null;let e=0,t=n[0];for(let r=1;r<n.length;r++){let a=n[r];(a.from>t.from||a.to<t.to)&&(t=a,e=r)}let i=t instanceof Lt&&t.index<0?null:t.parent,s=n.slice();return i?s[e]=i:s.splice(e,1),new HT(s,t)}class HT{constructor(e,t){this.heads=e,this.node=t}get next(){return vu(this.heads)}}function WT(n,e,t){let i=n.resolveInner(e,t),s=null;for(let r=i instanceof Lt?i:i.context.parent;r;r=r.parent)if(r.index<0){let a=r.parent;(s||(s=[i])).push(a.resolve(e,t)),r=a}else{let a=Er.get(r.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let l=new Lt(a.tree,a.overlay[0].from+r.from,-1,r);(s||(s=[i])).push(ts(l,e,t,!1))}}return s?vu(s):i}class _a{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Lt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof Lt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,r=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Ye.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ye.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ye.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(s.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let r=t+e,a=e<0?-1:i._tree.children.length;r!=a;r+=e){let l=i._tree.children[r];if(this.mode&Ye.IncludeAnonymous||l instanceof Nn||!l.type.isAnonymous||ll(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,r=this.stack.length;r>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,i=r+1;break e}s=this.stack[--r]}for(let s=i;s<this.stack.length;s++)t=new An(this.buffer,t,this.stack[s]);return this.bufferNode=new An(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return Ra(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,r=this.stack.length-1;s>=0;r--){if(r<0)return Ra(this._tree,e,s);let a=i[t.buffer[this.stack[r]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function ll(n){return n.children.some(e=>e instanceof Nn||!e.type.isAnonymous||ll(e))}function GT(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=Iu,reused:r=[],minRepeatType:a=i.types.length}=n,l=Array.isArray(t)?new al(t,t.length):t,c=i.types,h=0,f=0;function u(H,M,q,se,z,Y){let{id:te,start:K,end:fe,size:de}=l,Te=f,ye=h;for(;de<0;)if(l.next(),de==-1){let at=r[te];q.push(at),se.push(K-H);return}else if(de==-3){h=te;return}else if(de==-4){f=te;return}else throw new RangeError(`Unrecognized record size: ${de}`);let Ne=c[te],ke,Oe,We=K-H;if(fe-K<=s&&(Oe=p(l.pos-M,z))){let at=new Uint16Array(Oe.size-Oe.skip),ze=l.pos-Oe.size,Rt=at.length;for(;l.pos>ze;)Rt=L(Oe.start,at,Rt);ke=new Nn(at,fe-Oe.start,i),We=Oe.start-H}else{let at=l.pos-de;l.next();let ze=[],Rt=[],$t=te>=a?te:-1,cn=0,Xn=fe;for(;l.pos>at;)$t>=0&&l.id==$t&&l.size>=0?(l.end<=Xn-s&&(N(ze,Rt,K,cn,l.end,Xn,$t,Te,ye),cn=ze.length,Xn=l.end),l.next()):Y>2500?m(K,at,ze,Rt):u(K,at,ze,Rt,$t,Y+1);if($t>=0&&cn>0&&cn<ze.length&&N(ze,Rt,K,cn,K,Xn,$t,Te,ye),ze.reverse(),Rt.reverse(),$t>-1&&cn>0){let Ts=T(Ne,ye);ke=cl(Ne,ze,Rt,0,ze.length,0,fe-K,Ts,Ts)}else ke=b(Ne,ze,Rt,fe-K,Te-fe,ye)}q.push(ke),se.push(We)}function m(H,M,q,se){let z=[],Y=0,te=-1;for(;l.pos>M;){let{id:K,start:fe,end:de,size:Te}=l;if(Te>4)l.next();else{if(te>-1&&fe<te)break;te<0&&(te=de-s),z.push(K,fe,de),Y++,l.next()}}if(Y){let K=new Uint16Array(Y*4),fe=z[z.length-2];for(let de=z.length-3,Te=0;de>=0;de-=3)K[Te++]=z[de],K[Te++]=z[de+1]-fe,K[Te++]=z[de+2]-fe,K[Te++]=Te;q.push(new Nn(K,z[2]-fe,i)),se.push(fe-H)}}function T(H,M){return(q,se,z)=>{let Y=0,te=q.length-1,K,fe;if(te>=0&&(K=q[te])instanceof He){if(!te&&K.type==H&&K.length==z)return K;(fe=K.prop(Ee.lookAhead))&&(Y=se[te]+K.length+fe)}return b(H,q,se,z,Y,M)}}function N(H,M,q,se,z,Y,te,K,fe){let de=[],Te=[];for(;H.length>se;)de.push(H.pop()),Te.push(M.pop()+q-z);H.push(b(i.types[te],de,Te,Y-z,K-Y,fe)),M.push(z-q)}function b(H,M,q,se,z,Y,te){if(Y){let K=[Ee.contextHash,Y];te=te?[K].concat(te):[K]}if(z>25){let K=[Ee.lookAhead,z];te=te?[K].concat(te):[K]}return new He(H,M,q,se,te)}function p(H,M){let q=l.fork(),se=0,z=0,Y=0,te=q.end-s,K={size:0,start:0,skip:0};e:for(let fe=q.pos-H;q.pos>fe;){let de=q.size;if(q.id==M&&de>=0){K.size=se,K.start=z,K.skip=Y,Y+=4,se+=4,q.next();continue}let Te=q.pos-de;if(de<0||Te<fe||q.start<te)break;let ye=q.id>=a?4:0,Ne=q.start;for(q.next();q.pos>Te;){if(q.size<0)if(q.size==-3)ye+=4;else break e;else q.id>=a&&(ye+=4);q.next()}z=Ne,se+=de,Y+=ye}return(M<0||se==H)&&(K.size=se,K.start=z,K.skip=Y),K.size>4?K:void 0}function L(H,M,q){let{id:se,start:z,end:Y,size:te}=l;if(l.next(),te>=0&&se<a){let K=q;if(te>4){let fe=l.pos-(te-4);for(;l.pos>fe;)q=L(H,M,q)}M[--q]=K,M[--q]=Y-H,M[--q]=z-H,M[--q]=se}else te==-3?h=se:te==-4&&(f=se);return q}let x=[],W=[];for(;l.pos>0;)u(n.start||0,n.bufferStart||0,x,W,-1,0);let V=(e=n.length)!==null&&e!==void 0?e:x.length?W[0]+x[0].length:0;return new He(c[n.topID],x.reverse(),W.reverse(),V)}const qc=new WeakMap;function rr(n,e){if(!n.isAnonymous||e instanceof Nn||e.type!=n)return 1;let t=qc.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof He)){t=1;break}t+=rr(n,i)}qc.set(e,t)}return t}function cl(n,e,t,i,s,r,a,l,c){let h=0;for(let N=i;N<s;N++)h+=rr(n,e[N]);let f=Math.ceil(h*1.5/8),u=[],m=[];function T(N,b,p,L,x){for(let W=p;W<L;){let V=W,H=b[W],M=rr(n,N[W]);for(W++;W<L;W++){let q=rr(n,N[W]);if(M+q>=f)break;M+=q}if(W==V+1){if(M>f){let q=N[V];T(q.children,q.positions,0,q.children.length,b[V]+x);continue}u.push(N[V])}else{let q=b[W-1]+N[W-1].length-H;u.push(cl(n,N,b,V,W,H,q,null,c))}m.push(H+x-r)}}return T(e,t,i,s,0),(l||c)(u,m,a)}class Bn{constructor(e,t,i,s,r=!1,a=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(r?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new Bn(0,e.length,e,0,!1,i)];for(let r of t)r.to>e.length&&s.push(r);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],r=1,a=e.length?e[0]:null;for(let l=0,c=0,h=0;;l++){let f=l<t.length?t[l]:null,u=f?f.fromA:1e9;if(u-c>=i)for(;a&&a.from<u;){let m=a;if(c>=m.from||u<=m.to||h){let T=Math.max(m.from,c)-h,N=Math.min(m.to,u)-h;m=T>=N?null:new Bn(T,N,m.tree,m.offset+h,l>0,!!f)}if(m&&s.push(m),a.to>u)break;a=r<e.length?e[r++]:null}if(!f)break;c=f.toA,h=f.toA-f.toB}return s}}class Du{startParse(e,t,i){return typeof e=="string"&&(e=new VT(e)),i=i?i.length?i.map(s=>new Eo(s.from,s.to)):[new Eo(0,0)]:[new Eo(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let r=s.advance();if(r)return r}}}class VT{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ee({perNode:!0});let qT=0;class Ot{constructor(e,t,i,s){this.name=e,this.set=t,this.base=i,this.modified=s,this.id=qT++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof Ot&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let s=new Ot(i,[],null,[]);if(s.set.push(s),t)for(let r of t.set)s.set.push(r);return s}static defineModifier(e){let t=new Tr(e);return i=>i.modified.indexOf(t)>-1?i:Tr.get(i.base||i,i.modified.concat(t).sort((s,r)=>s.id-r.id))}}let YT=0;class Tr{constructor(e){this.name=e,this.instances=[],this.id=YT++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&jT(t,l.modified));if(i)return i;let s=[],r=new Ot(e.name,s,e,t);for(let l of t)l.instances.push(r);let a=XT(t);for(let l of e.set)if(!l.modified.length)for(let c of a)s.push(Tr.get(l,c));return r}}function jT(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function XT(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function ku(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let r=[],a=2,l=s;for(let u=0;;){if(l=="..."&&u>0&&u+3==s.length){a=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!m)throw new RangeError("Invalid path: "+s);if(r.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),u+=m[0].length,u==s.length)break;let T=s[u++];if(u==s.length&&T=="!"){a=0;break}if(T!="/")throw new RangeError("Invalid path: "+s);l=s.slice(u)}let c=r.length-1,h=r[c];if(!h)throw new RangeError("Invalid path: "+s);let f=new Ar(i,a,c>0?r.slice(0,c):null);e[h]=f.sort(e[h])}}return Pu.add(e)}const Pu=new Ee;class Ar{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ar.empty=new Ar([],2,null);function Mu(n,e){let t=Object.create(null);for(let r of n)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let a of r.tag)t[a.id]=r.class;let{scope:i,all:s=null}=e||{};return{style:r=>{let a=s;for(let l of r)for(let c of l.set){let h=t[c.id];if(h){a=a?a+" "+h:h;break}}return a},scope:i}}function zT(n,e){let t=null;for(let i of n){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function KT(n,e,t,i=0,s=n.length){let r=new $T(i,Array.isArray(e)?e:[e],t);r.highlightRange(n.cursor(),i,s,"",r.highlighters),r.flush(s)}class $T{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,r){let{type:a,from:l,to:c}=e;if(l>=i||c<=t)return;a.isTop&&(r=this.highlighters.filter(T=>!T.scope||T.scope(a)));let h=s,f=JT(e)||Ar.empty,u=zT(r,f.tags);if(u&&(h&&(h+=" "),h+=u,f.mode==1&&(s+=(s?" ":"")+u)),this.startSpan(Math.max(t,l),h),f.opaque)return;let m=e.tree&&e.tree.prop(Ee.mounted);if(m&&m.overlay){let T=e.node.enter(m.overlay[0].from+l,1),N=this.highlighters.filter(p=>!p.scope||p.scope(m.tree.type)),b=e.firstChild();for(let p=0,L=l;;p++){let x=p<m.overlay.length?m.overlay[p]:null,W=x?x.from+l:c,V=Math.max(t,L),H=Math.min(i,W);if(V<H&&b)for(;e.from<H&&(this.highlightRange(e,V,H,s,r),this.startSpan(Math.min(H,e.to),h),!(e.to>=W||!e.nextSibling())););if(!x||W>i)break;L=x.to+l,L>t&&(this.highlightRange(T.cursor(),Math.max(t,x.from+l),Math.min(i,L),"",N),this.startSpan(Math.min(i,L),h))}b&&e.parent()}else if(e.firstChild()){m&&(s="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,r),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function JT(n){let e=n.type.prop(Pu);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const $=Ot.define,Ws=$(),un=$(),Yc=$(un),jc=$(un),dn=$(),Gs=$(dn),To=$(dn),Bt=$(),Ln=$(Bt),Ft=$(),Ut=$(),Oa=$(),wi=$(Oa),Vs=$(),w={comment:Ws,lineComment:$(Ws),blockComment:$(Ws),docComment:$(Ws),name:un,variableName:$(un),typeName:Yc,tagName:$(Yc),propertyName:jc,attributeName:$(jc),className:$(un),labelName:$(un),namespace:$(un),macroName:$(un),literal:dn,string:Gs,docString:$(Gs),character:$(Gs),attributeValue:$(Gs),number:To,integer:$(To),float:$(To),bool:$(dn),regexp:$(dn),escape:$(dn),color:$(dn),url:$(dn),keyword:Ft,self:$(Ft),null:$(Ft),atom:$(Ft),unit:$(Ft),modifier:$(Ft),operatorKeyword:$(Ft),controlKeyword:$(Ft),definitionKeyword:$(Ft),moduleKeyword:$(Ft),operator:Ut,derefOperator:$(Ut),arithmeticOperator:$(Ut),logicOperator:$(Ut),bitwiseOperator:$(Ut),compareOperator:$(Ut),updateOperator:$(Ut),definitionOperator:$(Ut),typeOperator:$(Ut),controlOperator:$(Ut),punctuation:Oa,separator:$(Oa),bracket:wi,angleBracket:$(wi),squareBracket:$(wi),paren:$(wi),brace:$(wi),content:Bt,heading:Ln,heading1:$(Ln),heading2:$(Ln),heading3:$(Ln),heading4:$(Ln),heading5:$(Ln),heading6:$(Ln),contentSeparator:$(Bt),list:$(Bt),quote:$(Bt),emphasis:$(Bt),strong:$(Bt),link:$(Bt),monospace:$(Bt),strikethrough:$(Bt),inserted:$(),deleted:$(),changed:$(),invalid:$(),meta:Vs,documentMeta:$(Vs),annotation:$(Vs),processingInstruction:$(Vs),definition:Ot.defineModifier("definition"),constant:Ot.defineModifier("constant"),function:Ot.defineModifier("function"),standard:Ot.defineModifier("standard"),local:Ot.defineModifier("local"),special:Ot.defineModifier("special")};for(let n in w){let e=w[n];e instanceof Ot&&(e.name=n)}Mu([{tag:w.link,class:"tok-link"},{tag:w.heading,class:"tok-heading"},{tag:w.emphasis,class:"tok-emphasis"},{tag:w.strong,class:"tok-strong"},{tag:w.keyword,class:"tok-keyword"},{tag:w.atom,class:"tok-atom"},{tag:w.bool,class:"tok-bool"},{tag:w.url,class:"tok-url"},{tag:w.labelName,class:"tok-labelName"},{tag:w.inserted,class:"tok-inserted"},{tag:w.deleted,class:"tok-deleted"},{tag:w.literal,class:"tok-literal"},{tag:w.string,class:"tok-string"},{tag:w.number,class:"tok-number"},{tag:[w.regexp,w.escape,w.special(w.string)],class:"tok-string2"},{tag:w.variableName,class:"tok-variableName"},{tag:w.local(w.variableName),class:"tok-variableName tok-local"},{tag:w.definition(w.variableName),class:"tok-variableName tok-definition"},{tag:w.special(w.variableName),class:"tok-variableName2"},{tag:w.definition(w.propertyName),class:"tok-propertyName tok-definition"},{tag:w.typeName,class:"tok-typeName"},{tag:w.namespace,class:"tok-namespace"},{tag:w.className,class:"tok-className"},{tag:w.macroName,class:"tok-macroName"},{tag:w.propertyName,class:"tok-propertyName"},{tag:w.operator,class:"tok-operator"},{tag:w.comment,class:"tok-comment"},{tag:w.meta,class:"tok-meta"},{tag:w.invalid,class:"tok-invalid"},{tag:w.punctuation,class:"tok-punctuation"}]);var Ao;const ni=new Ee;function QT(n){return ie.define({combine:n?e=>e.concat(n):void 0})}const ZT=new Ee;class xt{constructor(e,t,i=[],s=""){this.data=e,this.name=s,Ae.prototype.hasOwnProperty("tree")||Object.defineProperty(Ae.prototype,"tree",{get(){return Xe(this)}}),this.parser=t,this.extension=[bn.of(this),Ae.languageData.of((r,a,l)=>{let c=Xc(r,a,l),h=c.type.prop(ni);if(!h)return[];let f=r.facet(h),u=c.type.prop(ZT);if(u){let m=c.resolve(a-c.from,l);for(let T of u)if(T.test(m,r)){let N=r.facet(T.facet);return T.type=="replace"?N:N.concat(f)}}return f})].concat(i)}isActiveAt(e,t,i=-1){return Xc(e,t,i).type.prop(ni)==this.data}findRegions(e){let t=e.facet(bn);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(r,a)=>{if(r.prop(ni)==this.data){i.push({from:a,to:a+r.length});return}let l=r.prop(Ee.mounted);if(l){if(l.tree.prop(ni)==this.data){if(l.overlay)for(let c of l.overlay)i.push({from:c.from+a,to:c.to+a});else i.push({from:a,to:a+r.length});return}else if(l.overlay){let c=i.length;if(s(l.tree,l.overlay[0].from+a),i.length>c)return}}for(let c=0;c<r.children.length;c++){let h=r.children[c];h instanceof He&&s(h,r.positions[c]+a)}};return s(Xe(e),0),i}get allowsNesting(){return!0}}xt.setState=ge.define();function Xc(n,e,t){let i=n.facet(bn),s=Xe(n).topNode;if(!i||i.allowsNesting)for(let r=s;r;r=r.enter(e,t,Ye.ExcludeBuffers))r.type.isTop&&(s=r);return s}class Sr extends xt{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=QT(e.languageData);return new Sr(t,e.parser.configure({props:[ni.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Sr(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Xe(n){let e=n.field(xt.state,!1);return e?e.tree:He.empty}class eA{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let xi=null;class Rr{constructor(e,t,i=[],s,r,a,l,c){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=r,this.viewport=a,this.skipped=l,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Rr(e,t,[],He.empty,0,i,[],null)}startParse(){return this.parser.startParse(new eA(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=He.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Bn.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Bn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=xi;xi=this;try{return e()}finally{xi=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=zc(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:r,viewport:a,skipped:l}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((h,f,u,m)=>c.push({fromA:h,toA:f,fromB:u,toB:m})),i=Bn.applyChanges(i,c),s=He.empty,r=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let f=e.mapPos(h.from,1),u=e.mapPos(h.to,-1);f<u&&l.push({from:f,to:u})}}}return new Rr(this.parser,t,i,s,r,a,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:r}=this.skipped[i];s<e.to&&r>e.from&&(this.fragments=zc(this.fragments,s,r),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Du{createParse(t,i,s){let r=s[0].from,a=s[s.length-1].to;return{parsedPos:r,advance(){let c=xi;if(c){for(let h of s)c.tempSkipped.push(h);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=a,new He(mt.none,[],[],a-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return xi}}function zc(n,e,t){return Bn.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class mi{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new mi(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Rr.create(e.facet(bn).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new mi(i)}}xt.state=Ze.define({create:mi.init,update(n,e){for(let t of e.effects)if(t.is(xt.setState))return t.value;return e.startState.facet(bn)!=e.state.facet(bn)?mi.init(e.state):n.apply(e)}});let Fu=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Fu=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const So=typeof navigator<"u"&&(!((Ao=navigator.scheduling)===null||Ao===void 0)&&Ao.isInputPending)?()=>navigator.scheduling.isInputPending():null,tA=Fe.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(xt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(xt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Fu(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,r=i.field(xt.state);if(r.tree==r.context.tree&&r.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!So?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<s&&i.doc.length>s+1e3,c=r.context.work(()=>So&&So()||Date.now()>a,s+(l?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:xt.setState.of(new mi(r.context))})),this.chunkBudget>0&&!(c&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>dt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),bn=ie.define({combine(n){return n.length?n[0]:null},enables:n=>[xt.state,tA,Q.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class nA{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const iA=ie.define(),Vr=ie.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function _r(n){let e=n.facet(Vr);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function ns(n,e){let t="",i=n.tabSize,s=n.facet(Vr)[0];if(s=="	"){for(;e>=i;)t+="	",e-=i;s=" "}for(let r=0;r<e;r++)t+=s;return t}function hl(n,e){n instanceof Ae&&(n=new qr(n));for(let i of n.state.facet(iA)){let s=i(n,e);if(s!==void 0)return s}let t=Xe(n.state);return t.length>=e?sA(n,t,e):null}class qr{constructor(e,t={}){this.state=e,this.options=t,this.unit=_r(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:r}=this.options;return s!=null&&s>=i.from&&s<=i.to?r&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),r=this.countColumn(i,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(r+=a-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,t=e.length){return Ti(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let a=r(s);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Uu=new Ee;function sA(n,e,t){let i=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=i.node){let r=[];for(let a=s;a&&!(a.from==i.node.from&&a.type==i.node.type);a=a.parent)r.push(a);for(let a=r.length-1;a>=0;a--)i={node:r[a],next:i}}return Bu(i,n,t)}function Bu(n,e,t){for(let i=n;i;i=i.next){let s=oA(i.node);if(s)return s(fl.create(e,t,i))}return 0}function rA(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function oA(n){let e=n.type.prop(Uu);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Ee.closedBy))){let s=n.lastChild,r=s&&i.indexOf(s.name)>-1;return a=>hA(a,!0,1,void 0,r&&!rA(a)?s.from:void 0)}return n.parent==null?aA:null}function aA(){return 0}class fl extends qr{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new fl(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(lA(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Bu(this.context.next,this.base,this.pos)}}function lA(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function cA(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,r=n.state.doc.lineAt(t.from),a=s==null||s<=r.from?r.to:Math.min(r.to,s);for(let l=t.to;;){let c=e.childAfter(l);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=a)return null;let h=/^ */.exec(r.text.slice(t.to-r.from))[0].length;return{from:t.from,to:t.to+h}}l=c.to}}function hA(n,e,t,i,s){let r=n.textAfter,a=r.match(/^\s*/)[0].length,l=i&&r.slice(a,a+i.length)==i||s==n.pos+a,c=cA(n);return c?l?n.column(c.from):n.column(c.to):n.baseIndent+(l?0:n.unit*t)}function fA({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const uA=200;function dA(){return Ae.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,s=t.lineAt(i);if(i>s.from+uA)return n;let r=t.sliceString(s.from,i);if(!e.some(h=>h.test(r)))return n;let{state:a}=n,l=-1,c=[];for(let{head:h}of a.selection.ranges){let f=a.doc.lineAt(h);if(f.from==l)continue;l=f.from;let u=hl(a,f.from);if(u==null)continue;let m=/^\s*/.exec(f.text)[0],T=ns(a,u);m!=T&&c.push({from:f.from,to:f.from+m.length,insert:T})}return c.length?[n,{changes:c,sequential:!0}]:n})}const pA=ie.define(),Hu=new Ee;function mA(n,e,t){let i=Xe(n);if(i.length<t)return null;let s=i.resolveStack(t,1),r=null;for(let a=s;a;a=a.next){let l=a.node;if(l.to<=t||l.from>t)continue;if(r&&l.from<e)break;let c=l.type.prop(Hu);if(c&&(l.to<i.length-50||i.length==n.doc.length||!gA(l))){let h=c(l,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(r=h)}}return r}function gA(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Or(n,e,t){for(let i of n.facet(pA)){let s=i(n,e,t);if(s)return s}return mA(n,e,t)}function Wu(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const Yr=ge.define({map:Wu}),ms=ge.define({map:Wu});function Gu(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Yn=Ze.define({create(){return le.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(Yr)&&!EA(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Yu),s=i?le.replace({widget:new NA(i(e.state,t.value))}):Kc;n=n.update({add:[s.range(t.value.from,t.value.to)]})}else t.is(ms)&&(n=n.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(s,r)=>{s<i&&r>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(s,r)=>r<=i||s>=i}))}return n},provide:n=>Q.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,s)=>{t.push(i,s)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],s=n[t++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(Kc.range(i,s))}return le.set(e,!0)}});function Nr(n,e,t){var i;let s=null;return(i=n.field(Yn,!1))===null||i===void 0||i.between(e,t,(r,a)=>{(!s||s.from>r)&&(s={from:r,to:a})}),s}function EA(n,e,t){let i=!1;return n.between(e,e,(s,r)=>{s==e&&r==t&&(i=!0)}),i}function Vu(n,e){return n.field(Yn,!1)?e:e.concat(ge.appendConfig.of(ju()))}const TA=n=>{for(let e of Gu(n)){let t=Or(n.state,e.from,e.to);if(t)return n.dispatch({effects:Vu(n.state,[Yr.of(t),qu(n,t)])}),!0}return!1},AA=n=>{if(!n.state.field(Yn,!1))return!1;let e=[];for(let t of Gu(n)){let i=Nr(n.state,t.from,t.to);i&&e.push(ms.of(i),qu(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function qu(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,s=n.state.doc.lineAt(e.to).number;return Q.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${s}.`)}const SA=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let s=n.lineBlockAt(i),r=Or(e,s.from,s.to);r&&t.push(Yr.of(r)),i=(r?n.lineBlockAt(r.to):s).to+1}return t.length&&n.dispatch({effects:Vu(n.state,t)}),!!t.length},RA=n=>{let e=n.state.field(Yn,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,s)=>{t.push(ms.of({from:i,to:s}))}),n.dispatch({effects:t}),!0},_A=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:TA},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:AA},{key:"Ctrl-Alt-[",run:SA},{key:"Ctrl-Alt-]",run:RA}],OA={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Yu=ie.define({combine(n){return zt(n,OA)}});function ju(n){return[Yn,yA]}function Xu(n,e){let{state:t}=n,i=t.facet(Yu),s=a=>{let l=n.lineBlockAt(n.posAtDOM(a.target)),c=Nr(n.state,l.from,l.to);c&&n.dispatch({effects:ms.of(c)}),a.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,s,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=s,r}const Kc=le.replace({widget:new class extends an{toDOM(n){return Xu(n,null)}}});class NA extends an{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Xu(e,this.value)}}const bA={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ro extends on{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function CA(n={}){let e=Object.assign(Object.assign({},bA),n),t=new Ro(e,!0),i=new Ro(e,!1),s=Fe.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(bn)!=a.state.facet(bn)||a.startState.field(Yn,!1)!=a.state.field(Yn,!1)||Xe(a.startState)!=Xe(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let l=new sn;for(let c of a.viewportLineBlocks){let h=Nr(a.state,c.from,c.to)?i:Or(a.state,c.from,c.to)?t:null;h&&l.add(c.from,c.from,h)}return l.finish()}}),{domEventHandlers:r}=e;return[s,CT({class:"cm-foldGutter",markers(a){var l;return((l=a.plugin(s))===null||l===void 0?void 0:l.markers)||Re.empty},initialSpacer(){return new Ro(e,!1)},domEventHandlers:Object.assign(Object.assign({},r),{click:(a,l,c)=>{if(r.click&&r.click(a,l,c))return!0;let h=Nr(a.state,l.from,l.to);if(h)return a.dispatch({effects:ms.of(h)}),!0;let f=Or(a.state,l.from,l.to);return f?(a.dispatch({effects:Yr.of(f)}),!0):!1}})}),ju()]}const yA=Q.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ai{constructor(e,t){this.specs=e;let i;function s(l){let c=Rn.newName();return(i||(i=Object.create(null)))["."+c]=l,c}const r=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof xt?l=>l.prop(ni)==a.data:a?l=>l==a:void 0,this.style=Mu(e.map(l=>({tag:l.tag,class:l.class||s(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new Rn(i):null,this.themeType=t.themeType}static define(e,t){return new Ai(e,t||{})}}const Na=ie.define(),zu=ie.define({combine(n){return n.length?[n[0]]:null}});function _o(n){let e=n.facet(Na);return e.length?e:n.facet(zu)}function ul(n,e){let t=[IA],i;return n instanceof Ai&&(n.module&&t.push(Q.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(zu.of(n)):i?t.push(Na.computeN([Q.darkTheme],s=>s.facet(Q.darkTheme)==(i=="dark")?[n]:[])):t.push(Na.of(n)),t}class LA{constructor(e){this.markCache=Object.create(null),this.tree=Xe(e.state),this.decorations=this.buildDeco(e,_o(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Xe(e.state),i=_o(e.state),s=i!=_o(e.startState),{viewport:r}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!s&&t.type==this.tree.type&&a>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return le.none;let i=new sn;for(let{from:s,to:r}of e.visibleRanges)KT(this.tree,t,(a,l,c)=>{i.add(a,l,this.markCache[c]||(this.markCache[c]=le.mark({class:c})))},s,r);return i.finish()}}const IA=jn.high(Fe.fromClass(LA,{decorations:n=>n.decorations})),wA=Ai.define([{tag:w.meta,color:"#404740"},{tag:w.link,textDecoration:"underline"},{tag:w.heading,textDecoration:"underline",fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strong,fontWeight:"bold"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.keyword,color:"#708"},{tag:[w.atom,w.bool,w.url,w.contentSeparator,w.labelName],color:"#219"},{tag:[w.literal,w.inserted],color:"#164"},{tag:[w.string,w.deleted],color:"#a11"},{tag:[w.regexp,w.escape,w.special(w.string)],color:"#e40"},{tag:w.definition(w.variableName),color:"#00f"},{tag:w.local(w.variableName),color:"#30a"},{tag:[w.typeName,w.namespace],color:"#085"},{tag:w.className,color:"#167"},{tag:[w.special(w.variableName),w.macroName],color:"#256"},{tag:w.definition(w.propertyName),color:"#00c"},{tag:w.comment,color:"#940"},{tag:w.invalid,color:"#f00"}]),xA=Q.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Ku=1e4,$u="()[]{}",Ju=ie.define({combine(n){return zt(n,{afterCursor:!0,brackets:$u,maxScanDistance:Ku,renderMatch:kA})}}),vA=le.mark({class:"cm-matchingBracket"}),DA=le.mark({class:"cm-nonmatchingBracket"});function kA(n){let e=[],t=n.matched?vA:DA;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const PA=Ze.define({create(){return le.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(Ju);for(let s of e.state.selection.ranges){if(!s.empty)continue;let r=Vt(e.state,s.head,-1,i)||s.head>0&&Vt(e.state,s.head-1,1,i)||i.afterCursor&&(Vt(e.state,s.head,1,i)||s.head<e.state.doc.length&&Vt(e.state,s.head+1,-1,i));r&&(t=t.concat(i.renderMatch(r,e.state)))}return le.set(t,!0)},provide:n=>Q.decorations.from(n)}),MA=[PA,xA];function FA(n={}){return[Ju.of(n),MA]}const UA=new Ee;function ba(n,e,t){let i=n.prop(e<0?Ee.openedBy:Ee.closedBy);if(i)return i;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function Ca(n){let e=n.type.prop(UA);return e?e(n.node):n}function Vt(n,e,t,i={}){let s=i.maxScanDistance||Ku,r=i.brackets||$u,a=Xe(n),l=a.resolveInner(e,t);for(let c=l;c;c=c.parent){let h=ba(c.type,t,r);if(h&&c.from<c.to){let f=Ca(c);if(f&&(t>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return BA(n,e,t,c,f,h,r)}}return HA(n,e,t,a,l.type,s,r)}function BA(n,e,t,i,s,r,a){let l=i.parent,c={from:s.from,to:s.to},h=0,f=l?.cursor();if(f&&(t<0?f.childBefore(i.from):f.childAfter(i.to)))do if(t<0?f.to<=i.from:f.from>=i.to){if(h==0&&r.indexOf(f.type.name)>-1&&f.from<f.to){let u=Ca(f);return{start:c,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(ba(f.type,t,a))h++;else if(ba(f.type,-t,a)){if(h==0){let u=Ca(f);return{start:c,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}h--}}while(t<0?f.prevSibling():f.nextSibling());return{start:c,matched:!1}}function HA(n,e,t,i,s,r,a){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=a.indexOf(l);if(c<0||c%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},f=n.doc.iterRange(e,t>0?n.doc.length:0),u=0;for(let m=0;!f.next().done&&m<=r;){let T=f.value;t<0&&(m+=T.length);let N=e+m*t;for(let b=t>0?0:T.length-1,p=t>0?T.length:-1;b!=p;b+=t){let L=a.indexOf(T[b]);if(!(L<0||i.resolveInner(N+b,1).type!=s))if(L%2==0==t>0)u++;else{if(u==1)return{start:h,end:{from:N+b,to:N+b+1},matched:L>>1==c>>1};u--}}t>0&&(m+=T.length)}return f.done?{start:h,matched:!1}:null}const WA=Object.create(null),$c=[mt.none],Jc=[],Qc=Object.create(null),GA=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])GA[n]=VA(WA,e);function Oo(n,e){Jc.indexOf(n)>-1||(Jc.push(n),console.warn(e))}function VA(n,e){let t=[];for(let l of e.split(" ")){let c=[];for(let h of l.split(".")){let f=n[h]||w[h];f?typeof f=="function"?c.length?c=c.map(f):Oo(h,`Modifier ${h} used at start of tag`):c.length?Oo(h,`Tag ${h} used as modifier`):c=Array.isArray(f)?f:[f]:Oo(h,`Unknown highlighting tag ${h}`)}for(let h of c)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+t.map(l=>l.id),r=Qc[s];if(r)return r.id;let a=Qc[s]=mt.define({id:$c.length,name:i,props:[ku({[i]:t})]});return $c.push(a),a.id}xe.RTL,xe.LTR;const qA=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=pl(n.state,t.from);return i.line?YA(n):i.block?XA(n):!1};function dl(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(i(t.update(s)),!0):!1}}const YA=dl($A,0),jA=dl(Qu,0),XA=dl((n,e)=>Qu(n,e,KA(e)),0);function pl(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const vi=50;function zA(n,{open:e,close:t},i,s){let r=n.sliceDoc(i-vi,i),a=n.sliceDoc(s,s+vi),l=/\s*$/.exec(r)[0].length,c=/^\s*/.exec(a)[0].length,h=r.length-l;if(r.slice(h-e.length,h)==e&&a.slice(c,c+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:s+c,margin:c&&1}};let f,u;s-i<=2*vi?f=u=n.sliceDoc(i,s):(f=n.sliceDoc(i,i+vi),u=n.sliceDoc(s-vi,s));let m=/^\s*/.exec(f)[0].length,T=/\s*$/.exec(u)[0].length,N=u.length-T-t.length;return f.slice(m,m+e.length)==e&&u.slice(N,N+t.length)==t?{open:{pos:i+m+e.length,margin:/\s/.test(f.charAt(m+e.length))?1:0},close:{pos:s-T-t.length,margin:/\s/.test(u.charAt(N-1))?1:0}}:null}function KA(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),s=t.to<=i.to?i:n.doc.lineAt(t.to);s.from>i.from&&s.from==t.to&&(s=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function Qu(n,e,t=e.selection.ranges){let i=t.map(r=>pl(e,r.from).block);if(!i.every(r=>r))return null;let s=t.map((r,a)=>zA(e,i[a],r.from,r.to));if(n!=2&&!s.every(r=>r))return{changes:e.changes(t.map((r,a)=>s[a]?[]:[{from:r.from,insert:i[a].open+" "},{from:r.to,insert:" "+i[a].close}]))};if(n!=1&&s.some(r=>r)){let r=[];for(let a=0,l;a<s.length;a++)if(l=s[a]){let c=i[a],{open:h,close:f}=l;r.push({from:h.pos-c.open.length,to:h.pos+h.margin},{from:f.pos-f.margin,to:f.pos+c.close.length})}return{changes:r}}return null}function $A(n,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:r,to:a}of t){let l=i.length,c=1e9,h=pl(e,r).line;if(h){for(let f=r;f<=a;){let u=e.doc.lineAt(f);if(u.from>s&&(r==a||a>u.from)){s=u.from;let m=/^\s*/.exec(u.text)[0].length,T=m==u.length,N=u.text.slice(m,m+h.length)==h?m:-1;m<u.text.length&&m<c&&(c=m),i.push({line:u,comment:N,token:h,indent:m,empty:T,single:!1})}f=u.to+1}if(c<1e9)for(let f=l;f<i.length;f++)i[f].indent<i[f].line.text.length&&(i[f].indent=c);i.length==l+1&&(i[l].single=!0)}}if(n!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:c,indent:h,empty:f,single:u}of i)(u||!f)&&r.push({from:l.from+h,insert:c+" "});let a=e.changes(r);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:a,comment:l,token:c}of i)if(l>=0){let h=a.from+l,f=h+c.length;a.text[f-a.from]==" "&&f++,r.push({from:h,to:f})}return{changes:r}}return null}const ya=Xt.define(),JA=Xt.define(),QA=ie.define(),Zu=ie.define({combine(n){return zt(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,s)=>e(i,s)||t(i,s)})}}),ed=Ze.define({create(){return qt.empty},update(n,e){let t=e.state.facet(Zu),i=e.annotation(ya);if(i){let c=pt.fromTransaction(e,i.selection),h=i.side,f=h==0?n.undone:n.done;return c?f=br(f,f.length,t.minDepth,c):f=id(f,e.startState.selection),new qt(h==0?i.rest:f,h==0?f:i.rest)}let s=e.annotation(JA);if((s=="full"||s=="before")&&(n=n.isolate()),e.annotation(Ve.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let r=pt.fromTransaction(e),a=e.annotation(Ve.time),l=e.annotation(Ve.userEvent);return r?n=n.addChanges(r,a,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,a,l,t.newGroupDelay)),(s=="full"||s=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new qt(n.done.map(pt.fromJSON),n.undone.map(pt.fromJSON))}});function ZA(n={}){return[ed,Zu.of(n),Q.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?td:e.inputType=="historyRedo"?La:null;return i?(e.preventDefault(),i(t)):!1}})]}function jr(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(ed,!1);if(!s)return!1;let r=s.pop(n,t,e);return r?(i(r),!0):!1}}const td=jr(0,!1),La=jr(1,!1),eS=jr(0,!0),tS=jr(1,!0);class pt{constructor(e,t,i,s,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=r}setSelAfter(e){return new pt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new pt(e.changes&&Ge.fromJSON(e.changes),[],e.mapped&&Yt.fromJSON(e.mapped),e.startSelection&&B.fromJSON(e.startSelection),e.selectionsAfter.map(B.fromJSON))}static fromTransaction(e,t){let i=Nt;for(let s of e.startState.facet(QA)){let r=s(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new pt(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Nt)}static selection(e){return new pt(void 0,Nt,void 0,void 0,e)}}function br(n,e,t,i){let s=e+1>t+20?e-t-1:0,r=n.slice(s,e);return r.push(i),r}function nS(n,e){let t=[],i=!1;return n.iterChangedRanges((s,r)=>t.push(s,r)),e.iterChangedRanges((s,r,a,l)=>{for(let c=0;c<t.length;){let h=t[c++],f=t[c++];l>=h&&a<=f&&(i=!0)}}),i}function iS(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function nd(n,e){return n.length?e.length?n.concat(e):n:e}const Nt=[],sS=200;function id(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-sS));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),br(n,n.length-1,1e9,t.setSelAfter(i)))}else return[pt.selection([e])]}function rS(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function No(n,e){if(!n.length)return n;let t=n.length,i=Nt;for(;t;){let s=oS(n[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let r=n.slice(0,t);return r[t-1]=s,r}else e=s.mapped,t--,i=s.selectionsAfter}return i.length?[pt.selection(i)]:Nt}function oS(n,e,t){let i=nd(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):Nt,t);if(!n.changes)return pt.selection(i);let s=n.changes.map(e),r=e.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(r):r;return new pt(s,ge.mapEffects(n.effects,e),a,n.startSelection.map(r),i)}const aS=/^(input\.type|delete)($|\.)/;class qt{constructor(e,t,i=0,s=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new qt(this.done,this.undone):this}addChanges(e,t,i,s,r){let a=this.done,l=a[a.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||aS.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(r,nS(l.changes,e.changes))||i=="input.type.compose")?a=br(a,a.length-1,s.minDepth,new pt(e.changes.compose(l.changes),nd(ge.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Nt)):a=br(a,a.length,s.minDepth,e),new qt(a,Nt,t,i)}addSelection(e,t,i,s){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:Nt;return r.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&iS(r[r.length-1],e)?this:new qt(id(this.done,e),this.undone,t,i)}addMapping(e){return new qt(No(this.done,e),No(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let r=s[s.length-1],a=r.selectionsAfter[0]||t.selection;if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:ya.of({side:e,rest:rS(s),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=s.length==1?Nt:s.slice(0,s.length-1);return r.mapped&&(l=No(l,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:ya.of({side:e,rest:l,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}qt.empty=new qt(Nt,Nt);const lS=[{key:"Mod-z",run:td,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:La,preventDefault:!0},{linux:"Ctrl-Shift-z",run:La,preventDefault:!0},{key:"Mod-u",run:eS,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:tS,preventDefault:!0}];function Si(n,e){return B.create(n.ranges.map(e),n.mainIndex)}function Kt(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function kt({state:n,dispatch:e},t){let i=Si(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Kt(n,i)),!0)}function Xr(n,e){return B.cursor(e?n.to:n.from)}function sd(n,e){return kt(n,t=>t.empty?n.moveByChar(t,e):Xr(t,e))}function it(n){return n.textDirectionAt(n.state.selection.main.head)==xe.LTR}const rd=n=>sd(n,!it(n)),od=n=>sd(n,it(n));function ad(n,e){return kt(n,t=>t.empty?n.moveByGroup(t,e):Xr(t,e))}const cS=n=>ad(n,!it(n)),hS=n=>ad(n,it(n));function fS(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function zr(n,e,t){let i=Xe(n).resolveInner(e.head),s=t?Ee.closedBy:Ee.openedBy;for(let c=e.head;;){let h=t?i.childAfter(c):i.childBefore(c);if(!h)break;fS(n,h,s)?i=h:c=t?h.to:h.from}let r=i.type.prop(s),a,l;return r&&(a=t?Vt(n,i.from,1):Vt(n,i.to,-1))&&a.matched?l=t?a.end.to:a.end.from:l=t?i.to:i.from,B.cursor(l,t?-1:1)}const uS=n=>kt(n,e=>zr(n.state,e,!it(n))),dS=n=>kt(n,e=>zr(n.state,e,it(n)));function ld(n,e){return kt(n,t=>{if(!t.empty)return Xr(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const cd=n=>ld(n,!1),hd=n=>ld(n,!0);function fd(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,s;if(e){for(let r of n.state.facet(Q.scrollMargins)){let a=r(n);a?.top&&(t=Math.max(a?.top,t)),a?.bottom&&(i=Math.max(a?.bottom,i))}s=n.scrollDOM.clientHeight-t-i}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function ud(n,e){let t=fd(n),{state:i}=n,s=Si(i.selection,a=>a.empty?n.moveVertically(a,e,t.height):Xr(a,e));if(s.eq(i.selection))return!1;let r;if(t.selfScroll){let a=n.coordsAtPos(i.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),c=l.top+t.marginTop,h=l.bottom-t.marginBottom;a&&a.top>c&&a.bottom<h&&(r=Q.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-c}))}return n.dispatch(Kt(i,s),{effects:r}),!0}const Zc=n=>ud(n,!1),Ia=n=>ud(n,!0);function Cn(n,e,t){let i=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let r=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(s=B.cursor(i.from+r))}return s}const pS=n=>kt(n,e=>Cn(n,e,!0)),mS=n=>kt(n,e=>Cn(n,e,!1)),gS=n=>kt(n,e=>Cn(n,e,!it(n))),ES=n=>kt(n,e=>Cn(n,e,it(n))),TS=n=>kt(n,e=>B.cursor(n.lineBlockAt(e.head).from,1)),AS=n=>kt(n,e=>B.cursor(n.lineBlockAt(e.head).to,-1));function SS(n,e,t){let i=!1,s=Si(n.selection,r=>{let a=Vt(n,r.head,-1)||Vt(n,r.head,1)||r.head>0&&Vt(n,r.head-1,1)||r.head<n.doc.length&&Vt(n,r.head+1,-1);if(!a||!a.end)return r;i=!0;let l=a.start.from==r.head?a.end.to:a.end.from;return B.cursor(l)});return i?(e(Kt(n,s)),!0):!1}const RS=({state:n,dispatch:e})=>SS(n,e);function wt(n,e){let t=Si(n.state.selection,i=>{let s=e(i);return B.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Kt(n.state,t)),!0)}function dd(n,e){return wt(n,t=>n.moveByChar(t,e))}const pd=n=>dd(n,!it(n)),md=n=>dd(n,it(n));function gd(n,e){return wt(n,t=>n.moveByGroup(t,e))}const _S=n=>gd(n,!it(n)),OS=n=>gd(n,it(n)),NS=n=>wt(n,e=>zr(n.state,e,!it(n))),bS=n=>wt(n,e=>zr(n.state,e,it(n)));function Ed(n,e){return wt(n,t=>n.moveVertically(t,e))}const Td=n=>Ed(n,!1),Ad=n=>Ed(n,!0);function Sd(n,e){return wt(n,t=>n.moveVertically(t,e,fd(n).height))}const eh=n=>Sd(n,!1),th=n=>Sd(n,!0),CS=n=>wt(n,e=>Cn(n,e,!0)),yS=n=>wt(n,e=>Cn(n,e,!1)),LS=n=>wt(n,e=>Cn(n,e,!it(n))),IS=n=>wt(n,e=>Cn(n,e,it(n))),wS=n=>wt(n,e=>B.cursor(n.lineBlockAt(e.head).from)),xS=n=>wt(n,e=>B.cursor(n.lineBlockAt(e.head).to)),nh=({state:n,dispatch:e})=>(e(Kt(n,{anchor:0})),!0),ih=({state:n,dispatch:e})=>(e(Kt(n,{anchor:n.doc.length})),!0),sh=({state:n,dispatch:e})=>(e(Kt(n,{anchor:n.selection.main.anchor,head:0})),!0),rh=({state:n,dispatch:e})=>(e(Kt(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),vS=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),DS=({state:n,dispatch:e})=>{let t=Kr(n).map(({from:i,to:s})=>B.range(i,Math.min(s+1,n.doc.length)));return e(n.update({selection:B.create(t),userEvent:"select"})),!0},kS=({state:n,dispatch:e})=>{let t=Si(n.selection,i=>{let s=Xe(n),r=s.resolveStack(i.from,1);if(i.empty){let a=s.resolveStack(i.from,-1);a.node.from>=r.node.from&&a.node.to<=r.node.to&&(r=a)}for(let a=r;a;a=a.next){let{node:l}=a;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&a.next)return B.range(l.to,l.from)}return i});return t.eq(n.selection)?!1:(e(Kt(n,t)),!0)},PS=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=B.create([t.main]):t.main.empty||(i=B.create([B.cursor(t.main.head)])),i?(e(Kt(n,i)),!0):!1};function gs(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,s=i.changeByRange(r=>{let{from:a,to:l}=r;if(a==l){let c=e(r);c<a?(t="delete.backward",c=qs(n,c,!1)):c>a&&(t="delete.forward",c=qs(n,c,!0)),a=Math.min(a,c),l=Math.max(l,c)}else a=qs(n,a,!1),l=qs(n,l,!0);return a==l?{range:r}:{changes:{from:a,to:l},range:B.cursor(a,a<r.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(i.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Q.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function qs(n,e,t){if(n instanceof Q)for(let i of n.state.facet(Q.atomicRanges).map(s=>s(n)))i.between(e,e,(s,r)=>{s<e&&r>e&&(e=t?r:s)});return e}const Rd=(n,e,t)=>gs(n,i=>{let s=i.from,{state:r}=n,a=r.doc.lineAt(s),l,c;if(t&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(l=a.text.slice(0,s-a.from))){if(l[l.length-1]=="	")return s-1;let h=Ti(l,r.tabSize),f=h%_r(r)||_r(r);for(let u=0;u<f&&l[l.length-1-u]==" ";u++)s--;c=s}else c=Qe(a.text,s-a.from,e,e)+a.from,c==s&&a.number!=(e?r.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(c-a.from,s-a.from))&&(c=Qe(a.text,c-a.from,!1,!1)+a.from);return c}),wa=n=>Rd(n,!1,!0),_d=n=>Rd(n,!0,!1),Od=(n,e)=>gs(n,t=>{let i=t.head,{state:s}=n,r=s.doc.lineAt(i),a=s.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==t.head&&r.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let c=Qe(r.text,i-r.from,e)+r.from,h=r.text.slice(Math.min(i,c)-r.from,Math.max(i,c)-r.from),f=a(h);if(l!=null&&f!=l)break;(h!=" "||i!=t.head)&&(l=f),i=c}return i}),Nd=n=>Od(n,!1),MS=n=>Od(n,!0),FS=n=>gs(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),US=n=>gs(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),BS=n=>gs(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),HS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:_e.of(["",""])},range:B.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},WS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let s=i.from,r=n.doc.lineAt(s),a=s==r.from?s-1:Qe(r.text,s-r.from,!1)+r.from,l=s==r.to?s+1:Qe(r.text,s-r.from,!0)+r.from;return{changes:{from:a,to:l,insert:n.doc.slice(s,l).append(n.doc.slice(a,s))},range:B.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Kr(n){let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.from),r=n.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=n.doc.lineAt(i.to-1)),t>=s.number){let a=e[e.length-1];a.to=r.to,a.ranges.push(i)}else e.push({from:s.from,to:r.to,ranges:[i]});t=r.number+1}return e}function bd(n,e,t){if(n.readOnly)return!1;let i=[],s=[];for(let r of Kr(n)){if(t?r.to==n.doc.length:r.from==0)continue;let a=n.doc.lineAt(t?r.to+1:r.from-1),l=a.length+1;if(t){i.push({from:r.to,to:a.to},{from:r.from,insert:a.text+n.lineBreak});for(let c of r.ranges)s.push(B.range(Math.min(n.doc.length,c.anchor+l),Math.min(n.doc.length,c.head+l)))}else{i.push({from:a.from,to:r.from},{from:r.to,insert:n.lineBreak+a.text});for(let c of r.ranges)s.push(B.range(c.anchor-l,c.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:B.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const GS=({state:n,dispatch:e})=>bd(n,e,!1),VS=({state:n,dispatch:e})=>bd(n,e,!0);function Cd(n,e,t){if(n.readOnly)return!1;let i=[];for(let s of Kr(n))t?i.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):i.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const qS=({state:n,dispatch:e})=>Cd(n,e,!1),YS=({state:n,dispatch:e})=>Cd(n,e,!0),jS=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Kr(e).map(({from:s,to:r})=>(s>0?s--:r<e.doc.length&&r++,{from:s,to:r}))),i=Si(e.selection,s=>{let r;if(n.lineWrapping){let a=n.lineBlockAt(s.head),l=n.coordsAtPos(s.head,s.assoc||1);l&&(r=a.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,r)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function XS(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Xe(n).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),r;return i&&s&&i.to<=e&&s.from>=e&&(r=i.type.prop(Ee.closedBy))&&r.indexOf(s.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const oh=yd(!1),zS=yd(!0);function yd(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:r,to:a}=s,l=e.doc.lineAt(r),c=!n&&r==a&&XS(e,r);n&&(r=a=(a<=l.to?l:e.doc.lineAt(a)).to);let h=new qr(e,{simulateBreak:r,simulateDoubleBreak:!!c}),f=hl(h,r);for(f==null&&(f=Ti(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));a<l.to&&/\s/.test(l.text[a-l.from]);)a++;c?{from:r,to:a}=c:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let u=["",ns(e,f)];return c&&u.push(ns(e,h.lineIndent(l.from,-1))),{changes:{from:r,to:a,insert:_e.of(u)},range:B.cursor(r+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function ml(n,e){let t=-1;return n.changeByRange(i=>{let s=[];for(let a=i.from;a<=i.to;){let l=n.doc.lineAt(a);l.number>t&&(i.empty||i.to>l.from)&&(e(l,s,i),t=l.number),a=l.to+1}let r=n.changes(s);return{changes:s,range:B.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const KS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new qr(n,{overrideIndentation:r=>{let a=t[r];return a??-1}}),s=ml(n,(r,a,l)=>{let c=hl(i,r.from);if(c==null)return;/\S/.test(r.text)||(c=0);let h=/^\s*/.exec(r.text)[0],f=ns(n,c);(h!=f||l.from<r.from+h.length)&&(t[r.from]=c,a.push({from:r.from,to:r.from+h.length,insert:f}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},Ld=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(ml(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Vr)})}),{userEvent:"input.indent"})),!0),Id=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(ml(n,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let r=Ti(s,n.tabSize),a=0,l=ns(n,Math.max(0,r-_r(n)));for(;a<s.length&&a<l.length&&s.charCodeAt(a)==l.charCodeAt(a);)a++;i.push({from:t.from+a,to:t.from+s.length,insert:l.slice(a)})}),{userEvent:"delete.dedent"})),!0),$S=n=>(n.setTabFocusMode(),!0),JS=[{key:"Ctrl-b",run:rd,shift:pd,preventDefault:!0},{key:"Ctrl-f",run:od,shift:md},{key:"Ctrl-p",run:cd,shift:Td},{key:"Ctrl-n",run:hd,shift:Ad},{key:"Ctrl-a",run:TS,shift:wS},{key:"Ctrl-e",run:AS,shift:xS},{key:"Ctrl-d",run:_d},{key:"Ctrl-h",run:wa},{key:"Ctrl-k",run:FS},{key:"Ctrl-Alt-h",run:Nd},{key:"Ctrl-o",run:HS},{key:"Ctrl-t",run:WS},{key:"Ctrl-v",run:Ia}],QS=[{key:"ArrowLeft",run:rd,shift:pd,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cS,shift:_S,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:gS,shift:LS,preventDefault:!0},{key:"ArrowRight",run:od,shift:md,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:hS,shift:OS,preventDefault:!0},{mac:"Cmd-ArrowRight",run:ES,shift:IS,preventDefault:!0},{key:"ArrowUp",run:cd,shift:Td,preventDefault:!0},{mac:"Cmd-ArrowUp",run:nh,shift:sh},{mac:"Ctrl-ArrowUp",run:Zc,shift:eh},{key:"ArrowDown",run:hd,shift:Ad,preventDefault:!0},{mac:"Cmd-ArrowDown",run:ih,shift:rh},{mac:"Ctrl-ArrowDown",run:Ia,shift:th},{key:"PageUp",run:Zc,shift:eh},{key:"PageDown",run:Ia,shift:th},{key:"Home",run:mS,shift:yS,preventDefault:!0},{key:"Mod-Home",run:nh,shift:sh},{key:"End",run:pS,shift:CS,preventDefault:!0},{key:"Mod-End",run:ih,shift:rh},{key:"Enter",run:oh,shift:oh},{key:"Mod-a",run:vS},{key:"Backspace",run:wa,shift:wa},{key:"Delete",run:_d},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Nd},{key:"Mod-Delete",mac:"Alt-Delete",run:MS},{mac:"Mod-Backspace",run:US},{mac:"Mod-Delete",run:BS}].concat(JS.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),wd=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:uS,shift:NS},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:dS,shift:bS},{key:"Alt-ArrowUp",run:GS},{key:"Shift-Alt-ArrowUp",run:qS},{key:"Alt-ArrowDown",run:VS},{key:"Shift-Alt-ArrowDown",run:YS},{key:"Escape",run:PS},{key:"Mod-Enter",run:zS},{key:"Alt-l",mac:"Ctrl-l",run:DS},{key:"Mod-i",run:kS,preventDefault:!0},{key:"Mod-[",run:Id},{key:"Mod-]",run:Ld},{key:"Mod-Alt-\\",run:KS},{key:"Shift-Mod-k",run:jS},{key:"Shift-Mod-\\",run:RS},{key:"Mod-/",run:qA},{key:"Alt-A",run:jA},{key:"Ctrl-m",mac:"Shift-Alt-m",run:$S}].concat(QS),ZS={key:"Tab",run:Ld,shift:Id};function Ie(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];typeof s=="string"?n.setAttribute(i,s):s!=null&&(n[i]=s)}e++}for(;e<arguments.length;e++)xd(n,arguments[e]);return n}function xd(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)xd(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const ah=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class gi{constructor(e,t,i=0,s=e.length,r,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=r?l=>r(ah(l)):ah,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ht(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=qa(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Wt(e);let s=this.normalize(t);if(s.length)for(let r=0,a=i;;r++){let l=s.charCodeAt(r),c=this.match(l,a,this.bufferPos+this.bufferStart);if(r==s.length-1){if(c)return this.value=c,this;break}a==i&&r<t.length&&t.charCodeAt(r)==l&&a++}}}match(e,t,i){let s=null;for(let r=0;r<this.matches.length;r+=2){let a=this.matches[r],l=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?s={from:this.matches[r+1],to:i}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:t,to:i}:this.matches.push(1,t)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(gi.prototype[Symbol.iterator]=function(){return this});const vd={from:-1,to:-1,match:/.*/.exec("")},gl="gm"+(/x/.unicode==null?"":"u");class Dd{constructor(e,t,i,s=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=vd,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new kd(e,t,i,s,r);this.re=new RegExp(t,gl+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let a=e.lineAt(s);this.curLineStart=a.from,this.matchPos=Cr(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=Cr(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const bo=new WeakMap;class ai{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=bo.get(e);if(!s||s.from>=i||s.to<=t){let l=new ai(t,e.sliceString(t,i));return bo.set(e,l),l}if(s.from==t&&s.to==i)return s;let{text:r,from:a}=s;return a>t&&(r=e.sliceString(t,a)+r,a=t),s.to<i&&(r+=e.sliceString(s.to,i)),bo.set(e,new ai(a,r)),new ai(t,r.slice(t-a,i-a))}}class kd{constructor(e,t,i,s,r){this.text=e,this.to=r,this.done=!1,this.value=vd,this.matchPos=Cr(e,s),this.re=new RegExp(t,gl+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=ai.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,s=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this.matchPos=Cr(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ai.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Dd.prototype[Symbol.iterator]=kd.prototype[Symbol.iterator]=function(){return this});function eR(n){try{return new RegExp(n,gl),!0}catch{return!1}}function Cr(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function xa(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=Ie("input",{class:"cm-textfield",name:"line",value:e}),i=Ie("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),n.dispatch({effects:yr.of(!1)}),n.focus()):r.keyCode==13&&(r.preventDefault(),s())},onsubmit:r=>{r.preventDefault(),s()}},Ie("label",n.state.phrase("Go to line"),": ",t)," ",Ie("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function s(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:a}=n,l=a.doc.lineAt(a.selection.main.head),[,c,h,f,u]=r,m=f?+f.slice(1):0,T=h?+h:l.number;if(h&&u){let p=T/100;c&&(p=p*(c=="-"?-1:1)+l.number/a.doc.lines),T=Math.round(a.doc.lines*p)}else h&&c&&(T=T*(c=="-"?-1:1)+l.number);let N=a.doc.line(Math.max(1,Math.min(a.doc.lines,T))),b=B.cursor(N.from+Math.max(0,Math.min(m,N.length)));n.dispatch({effects:[yr.of(!1),Q.scrollIntoView(b.from,{y:"center"})],selection:b}),n.focus()}return{dom:i}}const yr=ge.define(),lh=Ze.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(yr)&&(n=t.value);return n},provide:n=>es.from(n,e=>e?xa:null)}),tR=n=>{let e=Zi(n,xa);if(!e){let t=[yr.of(!0)];n.state.field(lh,!1)==null&&t.push(ge.appendConfig.of([lh,nR])),n.dispatch({effects:t}),e=Zi(n,xa)}return e&&e.dom.querySelector("input").select(),!0},nR=Q.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),iR={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},sR=ie.define({combine(n){return zt(n,iR,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function rR(n){return[hR,cR]}const oR=le.mark({class:"cm-selectionMatch"}),aR=le.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function ch(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=De.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=De.Word)}function lR(n,e,t,i){return n(e.sliceDoc(t,t+1))==De.Word&&n(e.sliceDoc(i-1,i))==De.Word}const cR=Fe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(sR),{state:t}=n,i=t.selection;if(i.ranges.length>1)return le.none;let s=i.main,r,a=null;if(s.empty){if(!e.highlightWordAroundCursor)return le.none;let c=t.wordAt(s.head);if(!c)return le.none;a=t.charCategorizer(s.head),r=t.sliceDoc(c.from,c.to)}else{let c=s.to-s.from;if(c<e.minSelectionLength||c>200)return le.none;if(e.wholeWords){if(r=t.sliceDoc(s.from,s.to),a=t.charCategorizer(s.head),!(ch(a,t,s.from,s.to)&&lR(a,t,s.from,s.to)))return le.none}else if(r=t.sliceDoc(s.from,s.to),!r)return le.none}let l=[];for(let c of n.visibleRanges){let h=new gi(t.doc,r,c.from,c.to);for(;!h.next().done;){let{from:f,to:u}=h.value;if((!a||ch(a,t,f,u))&&(s.empty&&f<=s.from&&u>=s.to?l.push(aR.range(f,u)):(f>=s.to||u<=s.from)&&l.push(oR.range(f,u)),l.length>e.maxMatches))return le.none}}return le.set(l)}},{decorations:n=>n.decorations}),hR=Q.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),fR=({state:n,dispatch:e})=>{let{selection:t}=n,i=B.create(t.ranges.map(s=>n.wordAt(s.head)||B.cursor(s.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function uR(n,e){let{main:t,ranges:i}=n.selection,s=n.wordAt(t.head),r=s&&s.from==t.from&&s.to==t.to;for(let a=!1,l=new gi(n.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(a)return null;l=new gi(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(c=>c.from==l.value.from))continue;if(r){let c=n.wordAt(l.value.from);if(!c||c.from!=l.value.from||c.to!=l.value.to)continue}return l.value}}const dR=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(r=>r.from===r.to))return fR({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(r=>n.sliceDoc(r.from,r.to)!=i))return!1;let s=uR(n,i);return s?(e(n.update({selection:n.selection.addRange(B.range(s.from,s.to),!1),effects:Q.scrollIntoView(s.to)})),!0):!1},Ri=ie.define({combine(n){return zt(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new bR(e),scrollToMatch:e=>Q.scrollIntoView(e)})}});class Pd{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||eR(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ER(this):new mR(this)}getCursor(e,t=0,i){let s=e.doc?e:Ae.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?Zn(this,s,t,i):Qn(this,s,t,i)}}class Md{constructor(e){this.spec=e}}function Qn(n,e,t,i){return new gi(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:s=>s.toLowerCase(),n.wholeWord?pR(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function pR(n,e){return(t,i,s,r)=>((r>t||r+s.length<i)&&(r=Math.max(0,t-2),s=n.sliceString(r,Math.min(n.length,i+2))),(e(Lr(s,t-r))!=De.Word||e(Ir(s,t-r))!=De.Word)&&(e(Ir(s,i-r))!=De.Word||e(Lr(s,i-r))!=De.Word))}class mR extends Md{constructor(e){super(e)}nextMatch(e,t,i){let s=Qn(this.spec,e,i,e.doc.length).nextOverlapping();if(s.done){let r=Math.min(e.doc.length,t+this.spec.unquoted.length);s=Qn(this.spec,e,0,r).nextOverlapping()}return s.done||s.value.from==t&&s.value.to==i?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let r=Math.max(t,s-1e4-this.spec.unquoted.length),a=Qn(this.spec,e,r,s),l=null;for(;!a.nextOverlapping().done;)l=a.value;if(l)return l;if(r==t)return null;s-=1e4}}prevMatch(e,t,i){let s=this.prevMatchInRange(e,0,t);return s||(s=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=t||s.to!=i)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Qn(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let r=Qn(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}function Zn(n,e,t,i){return new Dd(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?gR(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Lr(n,e){return n.slice(Qe(n,e,!1),e)}function Ir(n,e){return n.slice(e,Qe(n,e))}function gR(n){return(e,t,i)=>!i[0].length||(n(Lr(i.input,i.index))!=De.Word||n(Ir(i.input,i.index))!=De.Word)&&(n(Ir(i.input,i.index+i[0].length))!=De.Word||n(Lr(i.input,i.index+i[0].length))!=De.Word)}class ER extends Md{nextMatch(e,t,i){let s=Zn(this.spec,e,i,e.doc.length).next();return s.done&&(s=Zn(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let r=Math.max(t,i-s*1e4),a=Zn(this.spec,e,r,i),l=null;for(;!a.next().done;)l=a.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=Zn(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let r=Zn(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}const is=ge.define(),El=ge.define(),Sn=Ze.define({create(n){return new Co(va(n).create(),null)},update(n,e){for(let t of e.effects)t.is(is)?n=new Co(t.value.create(),n.panel):t.is(El)&&(n=new Co(n.query,t.value?Tl:null));return n},provide:n=>es.from(n,e=>e.panel)});class Co{constructor(e,t){this.query=e,this.panel=t}}const TR=le.mark({class:"cm-searchMatch"}),AR=le.mark({class:"cm-searchMatch cm-searchMatch-selected"}),SR=Fe.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Sn))}update(n){let e=n.state.field(Sn);(e!=n.startState.field(Sn)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return le.none;let{view:t}=this,i=new sn;for(let s=0,r=t.visibleRanges,a=r.length;s<a;s++){let{from:l,to:c}=r[s];for(;s<a-1&&c>r[s+1].from-2*250;)c=r[++s].to;n.highlight(t.state,l,c,(h,f)=>{let u=t.state.selection.ranges.some(m=>m.from==h&&m.to==f);i.add(h,f,u?AR:TR)})}return i.finish()}},{decorations:n=>n.decorations});function Es(n){return e=>{let t=e.state.field(Sn,!1);return t&&t.query.spec.valid?n(e,t):Bd(e)}}const wr=Es((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let s=B.single(i.from,i.to),r=n.state.facet(Ri);return n.dispatch({selection:s,effects:[Al(n,i),r.scrollToMatch(s.main,n)],userEvent:"select.search"}),Ud(n),!0}),xr=Es((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,s=e.prevMatch(t,i,i);if(!s)return!1;let r=B.single(s.from,s.to),a=n.state.facet(Ri);return n.dispatch({selection:r,effects:[Al(n,s),a.scrollToMatch(r.main,n)],userEvent:"select.search"}),Ud(n),!0}),RR=Es((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:B.create(t.map(i=>B.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),_R=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,r=[],a=0;for(let l=new gi(n.doc,n.sliceDoc(i,s));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(a=r.length),r.push(B.range(l.value.from,l.value.to))}return e(n.update({selection:B.create(r,a),userEvent:"select.search.matches"})),!0},hh=Es((n,{query:e})=>{let{state:t}=n,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,i,i);if(!r)return!1;let a=r,l=[],c,h,f=[];if(a.from==i&&a.to==s&&(h=t.toText(e.getReplacement(a)),l.push({from:a.from,to:a.to,insert:h}),a=e.nextMatch(t,a.from,a.to),f.push(Q.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),a){let u=l.length==0||l[0].from>=r.to?0:r.to-r.from-h.length;c=B.single(a.from-u,a.to-u),f.push(Al(n,a)),f.push(t.facet(Ri).scrollToMatch(c.main,n))}return n.dispatch({changes:l,selection:c,effects:f,userEvent:"input.replace"}),!0}),OR=Es((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(s=>{let{from:r,to:a}=s;return{from:r,to:a,insert:e.getReplacement(s)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Q.announce.of(i),userEvent:"input.replace.all"}),!0});function Tl(n){return n.state.facet(Ri).createPanel(n)}function va(n,e){var t,i,s,r,a;let l=n.selection.main,c=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!c)return e;let h=n.facet(Ri);return new Pd({search:((t=e?.literal)!==null&&t!==void 0?t:h.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(s=e?.literal)!==null&&s!==void 0?s:h.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:h.regexp,wholeWord:(a=e?.wholeWord)!==null&&a!==void 0?a:h.wholeWord})}function Fd(n){let e=Zi(n,Tl);return e&&e.dom.querySelector("[main-field]")}function Ud(n){let e=Fd(n);e&&e==n.root.activeElement&&e.select()}const Bd=n=>{let e=n.state.field(Sn,!1);if(e&&e.panel){let t=Fd(n);if(t&&t!=n.root.activeElement){let i=va(n.state,e.query.spec);i.valid&&n.dispatch({effects:is.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[El.of(!0),e?is.of(va(n.state,e.query.spec)):ge.appendConfig.of(yR)]});return!0},Hd=n=>{let e=n.state.field(Sn,!1);if(!e||!e.panel)return!1;let t=Zi(n,Tl);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:El.of(!1)}),!0},NR=[{key:"Mod-f",run:Bd,scope:"editor search-panel"},{key:"F3",run:wr,shift:xr,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:wr,shift:xr,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Hd,scope:"editor search-panel"},{key:"Mod-Shift-l",run:_R},{key:"Mod-Alt-g",run:tR},{key:"Mod-d",run:dR,preventDefault:!0}];class bR{constructor(e){this.view=e;let t=this.query=e.state.field(Sn).query.spec;this.commit=this.commit.bind(this),this.searchField=Ie("input",{value:t.search,placeholder:Et(e,"Find"),"aria-label":Et(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ie("input",{value:t.replace,placeholder:Et(e,"Replace"),"aria-label":Et(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ie("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ie("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ie("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(s,r,a){return Ie("button",{class:"cm-button",name:s,onclick:r,type:"button"},a)}this.dom=Ie("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>wr(e),[Et(e,"next")]),i("prev",()=>xr(e),[Et(e,"previous")]),i("select",()=>RR(e),[Et(e,"all")]),Ie("label",null,[this.caseField,Et(e,"match case")]),Ie("label",null,[this.reField,Et(e,"regexp")]),Ie("label",null,[this.wordField,Et(e,"by word")]),...e.state.readOnly?[]:[Ie("br"),this.replaceField,i("replace",()=>hh(e),[Et(e,"replace")]),i("replaceAll",()=>OR(e),[Et(e,"replace all")])],Ie("button",{name:"close",onclick:()=>Hd(e),"aria-label":Et(e,"close"),type:"button"},["×"])])}commit(){let e=new Pd({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:is.of(e)}))}keydown(e){kE(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?xr:wr)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),hh(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(is)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ri).top}}function Et(n,e){return n.state.phrase(e)}const Ys=30,js=/[\s\.,:;?!]/;function Al(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),s=n.state.doc.lineAt(t).to,r=Math.max(i.from,e-Ys),a=Math.min(s,t+Ys),l=n.state.sliceDoc(r,a);if(r!=i.from){for(let c=0;c<Ys;c++)if(!js.test(l[c+1])&&js.test(l[c])){l=l.slice(c);break}}if(a!=s){for(let c=l.length-1;c>l.length-Ys;c--)if(!js.test(l[c-1])&&js.test(l[c])){l=l.slice(0,c);break}}return Q.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${i.number}.`)}const CR=Q.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),yR=[Sn,jn.low(SR),CR];class Wd{constructor(e,t,i,s){this.state=e,this.pos=t,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Xe(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),r=s.search(Vd(e,!1));return r<0?null:{from:i+r,to:this.pos,text:s.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function fh(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function LR(n){let e=Object.create(null),t=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let r=1;r<s.length;r++)t[s[r]]=!0}let i=fh(e)+fh(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Gd(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:LR(e);return s=>{let r=s.matchBefore(i);return r||s.explicit?{from:r?r.from:s.pos,options:e,validFor:t}:null}}function IR(n,e){return t=>{for(let i=Xe(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(n.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class uh{constructor(e,t,i,s){this.completion=e,this.source=t,this.match=i,this.score=s}}function Hn(n){return n.selection.main.from}function Vd(n,e){var t;let{source:i}=n,s=e&&i[0]!="^",r=i[i.length-1]!="$";return!s&&!r?n:new RegExp(`${s?"^":""}(?:${i})${r?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const qd=Xt.define();function wR(n,e,t,i){let{main:s}=n.selection,r=t-s.from,a=i-s.from;return Object.assign(Object.assign({},n.changeByRange(l=>{if(l!=s&&t!=i&&n.sliceDoc(l.from+r,l.from+a)!=n.sliceDoc(t,i))return{range:l};let c=n.toText(e);return{changes:{from:l.from+r,to:i==s.from?l.to:l.from+a,insert:c},range:B.cursor(l.from+r+c.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const dh=new WeakMap;function xR(n){if(!Array.isArray(n))return n;let e=dh.get(n);return e||dh.set(n,e=Gd(n)),e}const vr=ge.define(),ss=ge.define();class vR{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=ht(e,t),s=Wt(i);this.chars.push(i);let r=e.slice(t,t+s),a=r.toUpperCase();this.folded.push(ht(a==r?r.toLowerCase():a,0)),t+=s}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:r,byWord:a}=this;if(t.length==1){let x=ht(e,0),W=Wt(x),V=W==e.length?0:-100;if(x!=t[0])if(x==i[0])V+=-200;else return null;return this.ret(V,[0,W])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=t.length,h=0;if(l<0){for(let x=0,W=Math.min(e.length,200);x<W&&h<c;){let V=ht(e,x);(V==t[h]||V==i[h])&&(s[h++]=x),x+=Wt(V)}if(h<c)return null}let f=0,u=0,m=!1,T=0,N=-1,b=-1,p=/[a-z]/.test(e),L=!0;for(let x=0,W=Math.min(e.length,200),V=0;x<W&&u<c;){let H=ht(e,x);l<0&&(f<c&&H==t[f]&&(r[f++]=x),T<c&&(H==t[T]||H==i[T]?(T==0&&(N=x),b=x+1,T++):T=0));let M,q=H<255?H>=48&&H<=57||H>=97&&H<=122?2:H>=65&&H<=90?1:0:(M=qa(H))!=M.toLowerCase()?1:M!=M.toUpperCase()?2:0;(!x||q==1&&p||V==0&&q!=0)&&(t[u]==H||i[u]==H&&(m=!0)?a[u++]=x:a.length&&(L=!1)),V=q,x+=Wt(H)}return u==c&&a[0]==0&&L?this.result(-100+(m?-200:0),a,e):T==c&&N==0?this.ret(-200-e.length+(b==e.length?0:-100),[0,b]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):T==c?this.ret(-900-e.length,[N,b]):u==c?this.result(-100+(m?-200:0)+-700+(L?0:-1100),a,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,i){let s=[],r=0;for(let a of t){let l=a+(this.astral?Wt(ht(i,a)):1);r&&s[r-1]==a?s[r-1]=l:(s[r++]=a,s[r++]=l)}return this.ret(e-i.length,s)}}class DR{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const je=ie.define({combine(n){return zt(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:kR,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>ph(e(i),t(i)),optionClass:(e,t)=>i=>ph(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function ph(n,e){return n?e?n+" "+e:n:e}function kR(n,e,t,i,s,r){let a=n.textDirection==xe.RTL,l=a,c=!1,h="top",f,u,m=e.left-s.left,T=s.right-e.right,N=i.right-i.left,b=i.bottom-i.top;if(l&&m<Math.min(N,T)?l=!1:!l&&T<Math.min(N,m)&&(l=!0),N<=(l?m:T))f=Math.max(s.top,Math.min(t.top,s.bottom-b))-e.top,u=Math.min(400,l?m:T);else{c=!0,u=Math.min(400,(a?e.right:s.right-e.left)-30);let x=s.bottom-e.bottom;x>=b||x>e.top?f=t.bottom-e.top:(h="bottom",f=e.bottom-t.top)}let p=(e.bottom-e.top)/r.offsetHeight,L=(e.right-e.left)/r.offsetWidth;return{style:`${h}: ${f/p}px; max-width: ${u/L}px`,class:"cm-completionInfo-"+(c?a?"left-narrow":"right-narrow":l?"left":"right")}}function PR(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s,r){let a=document.createElement("span");a.className="cm-completionLabel";let l=t.displayLabel||t.label,c=0;for(let h=0;h<r.length;){let f=r[h++],u=r[h++];f>c&&a.appendChild(document.createTextNode(l.slice(c,f)));let m=a.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(l.slice(f,u))),m.className="cm-completionMatchedText",c=u}return c<l.length&&a.appendChild(document.createTextNode(l.slice(c))),a},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function yo(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class MR{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let s=e.state.field(t),{options:r,selected:a}=s.open,l=e.state.facet(je);this.optionContent=PR(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=yo(r.length,a,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:h}=e.state.field(t).open;for(let f=c.target,u;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(u=/-(\d+)$/.exec(f.id))&&+u[1]<h.length){this.applyCompletion(e,h[+u[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(je).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:ss.of(null)})}),this.showOptions(r,s.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:r,selected:a,disabled:l}=i.open;(!s.open||s.open.options!=r)&&(this.range=yo(r.length,a,e.state.facet(je).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((t=s.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=yo(t.options.length,t.selected,this.view.state.facet(je).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let r=typeof s=="string"?document.createTextNode(s):s(i);if(!r)return;"then"in r?r.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>dt(this.view.state,a,"completion info")):this.addInfoPane(r,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:r}=e;i.appendChild(s),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&UR(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),r=this.space;if(!r){let a=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:a.innerWidth,bottom:a.innerHeight}}return s.top>Math.min(r.bottom,t.bottom)-10||s.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(je).positionInfo(this.view,t,s,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));let r=null;for(let a=i.from;a<i.to;a++){let{completion:l,match:c}=e[a],{section:h}=l;if(h){let m=typeof h=="string"?h:h.name;if(m!=r&&(a>i.from||i.from==0))if(r=m,typeof h!="string"&&h.header)s.appendChild(h.header(h));else{let T=s.appendChild(document.createElement("completion-section"));T.textContent=m}}const f=s.appendChild(document.createElement("li"));f.id=t+"-"+a,f.setAttribute("role","option");let u=this.optionClass(l);u&&(f.className=u);for(let m of this.optionContent){let T=m(l,this.view.state,this.view,c);T&&f.appendChild(T)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function FR(n,e){return t=>new MR(t,n,e)}function UR(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),s=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/s:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/s)}function mh(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function BR(n,e){let t=[],i=null,s=h=>{t.push(h);let{section:f}=h.completion;if(f){i||(i=[]);let u=typeof f=="string"?f:f.name;i.some(m=>m.name==u)||i.push(typeof f=="string"?{name:u}:f)}},r=e.facet(je);for(let h of n)if(h.hasResult()){let f=h.result.getMatch;if(h.result.filter===!1)for(let u of h.result.options)s(new uh(u,h.source,f?f(u):[],1e9-t.length));else{let u=e.sliceDoc(h.from,h.to),m,T=r.filterStrict?new DR(u):new vR(u);for(let N of h.result.options)if(m=T.match(N.label)){let b=N.displayLabel?f?f(N,m.matched):[]:m.matched;s(new uh(N,h.source,b,m.score+(N.boost||0)))}}}if(i){let h=Object.create(null),f=0,u=(m,T)=>{var N,b;return((N=m.rank)!==null&&N!==void 0?N:1e9)-((b=T.rank)!==null&&b!==void 0?b:1e9)||(m.name<T.name?-1:1)};for(let m of i.sort(u))f-=1e5,h[m.name]=f;for(let m of t){let{section:T}=m.completion;T&&(m.score+=h[typeof T=="string"?T:T.name])}}let a=[],l=null,c=r.compareCompletions;for(let h of t.sort((f,u)=>u.score-f.score||c(f.completion,u.completion))){let f=h.completion;!l||l.label!=f.label||l.detail!=f.detail||l.type!=null&&f.type!=null&&l.type!=f.type||l.apply!=f.apply||l.boost!=f.boost?a.push(h):mh(h.completion)>mh(l)&&(a[a.length-1]=h),l=h.completion}return a}class ii{constructor(e,t,i,s,r,a){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=r,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ii(this.options,gh(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,s,r,a){if(s&&!a&&e.some(h=>h.isPending))return s.setDisabled();let l=BR(e,t);if(!l.length)return s&&e.some(h=>h.isPending)?s.setDisabled():null;let c=t.facet(je).selectOnOpen?0:-1;if(s&&s.selected!=c&&s.selected!=-1){let h=s.options[s.selected].completion;for(let f=0;f<l.length;f++)if(l[f].completion==h){c=f;break}}return new ii(l,gh(i,c),{pos:e.reduce((h,f)=>f.hasResult()?Math.min(h,f.from):h,1e8),create:YR,above:r.aboveCursor},s?s.timestamp:Date.now(),c,!1)}map(e){return new ii(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new ii(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Dr{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Dr(VR,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(je),r=(i.override||t.languageDataAt("autocomplete",Hn(t)).map(xR)).map(c=>(this.active.find(f=>f.source==c)||new bt(c,this.active.some(f=>f.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((c,h)=>c==this.active[h])&&(r=this.active);let a=this.open,l=e.effects.some(c=>c.is(Sl));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||r.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!HR(r,this.active)||l?a=ii.build(r,t,this.id,a,i,l):a&&a.disabled&&!r.some(c=>c.isPending)&&(a=null),!a&&r.every(c=>!c.isPending)&&r.some(c=>c.hasResult())&&(r=r.map(c=>c.hasResult()?new bt(c.source,0):c));for(let c of e.effects)c.is(jd)&&(a=a&&a.setSelected(c.value,this.id));return r==this.active&&a==this.open?this:new Dr(r,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?WR:GR}}function HR(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let s=t==n.length,r=i==e.length;if(s||r)return s==r;if(n[t++].result!=e[i++].result)return!1}}const WR={"aria-autocomplete":"list"},GR={};function gh(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const VR=[];function Yd(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(qd);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class bt{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=Yd(e,t),s=this;(i&8||i&16&&this.touches(e))&&(s=new bt(s.source,0)),i&4&&s.state==0&&(s=new bt(this.source,1)),s=s.updateFor(e,i);for(let r of e.effects)if(r.is(vr))s=new bt(s.source,1,r.value);else if(r.is(ss))s=new bt(s.source,0);else if(r.is(Sl))for(let a of r.value)a.source==s.source&&(s=a);return s}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Hn(e.state))}}class li extends bt{constructor(e,t,i,s,r,a){super(e,3,t),this.limit=i,this.result=s,this.from=r,this.to=a}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let r=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),l=Hn(e.state);if(l>a||!s||t&2&&(Hn(e.startState)==this.from||l<this.limit))return new bt(this.source,t&4?1:0);let c=e.changes.mapPos(this.limit);return qR(s.validFor,e.state,r,a)?new li(this.source,this.explicit,c,s,r,a):s.update&&(s=s.update(s,r,a,new Wd(e.state,l,!1)))?new li(this.source,this.explicit,c,s,s.from,(i=s.to)!==null&&i!==void 0?i:Hn(e.state)):new bt(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new li(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new bt(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function qR(n,e,t,i){if(!n)return!1;let s=e.sliceDoc(t,i);return typeof n=="function"?n(s,t,i,e):Vd(n,!0).test(s)}const Sl=ge.define({map(n,e){return n.map(t=>t.map(e))}}),jd=ge.define(),ut=Ze.define({create(){return Dr.start()},update(n,e){return n.update(e)},provide:n=>[rl.from(n,e=>e.tooltip),Q.contentAttributes.from(n,e=>e.attrs)]});function Rl(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(ut).active.find(s=>s.source==e.source);return i instanceof li?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},wR(n.state,t,i.from,i.to)),{annotations:qd.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}const YR=FR(ut,Rl);function Xs(n,e="option"){return t=>{let i=t.state.field(ut,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(je).interactionDelay)return!1;let s=1,r;e=="page"&&(r=bu(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,l=i.open.selected>-1?i.open.selected+s*(n?1:-1):n?0:a-1;return l<0?l=e=="page"?0:a-1:l>=a&&(l=e=="page"?a-1:0),t.dispatch({effects:jd.of(l)}),!0}}const jR=n=>{let e=n.state.field(ut,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(je).interactionDelay?!1:Rl(n,e.open.options[e.open.selected])},Eh=n=>n.state.field(ut,!1)?(n.dispatch({effects:vr.of(!0)}),!0):!1,XR=n=>{let e=n.state.field(ut,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:ss.of(null)}),!0)};class zR{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const KR=50,$R=1e3,JR=Fe.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(ut).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(ut),t=n.state.facet(je);if(!n.selectionSet&&!n.docChanged&&n.startState.field(ut)==e)return;let i=n.transactions.some(r=>{let a=Yd(r,t);return a&8||(r.selection||r.docChanged)&&!(a&3)});for(let r=0;r<this.running.length;r++){let a=this.running[r];if(i||a.context.abortOnDocChange&&n.docChanged||a.updates.length+n.transactions.length>KR&&Date.now()-a.time>$R){for(let l of a.context.abortListeners)try{l()}catch(c){dt(this.view.state,c)}a.context.abortListeners=null,this.running.splice(r--,1)}else a.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(r=>r.effects.some(a=>a.is(vr)))&&(this.pendingStart=!0);let s=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(a=>a.active.source==r.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let r of n.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(ut);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(je).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Hn(e),i=new Wd(e,t,n.explicit,this.view),s=new zR(n,i);this.running.push(s),Promise.resolve(n.source(i)).then(r=>{s.context.aborted||(s.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:ss.of(null)}),dt(this.view.state,r)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(je).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(je),i=this.view.state.field(ut);for(let s=0;s<this.running.length;s++){let r=this.running[s];if(r.done===void 0)continue;if(this.running.splice(s--,1),r.done){let l=Hn(r.updates.length?r.updates[0].startState:this.view.state),c=Math.min(l,r.done.from+(r.active.explicit?0:1)),h=new li(r.active.source,r.active.explicit,c,r.done,r.done.from,(n=r.done.to)!==null&&n!==void 0?n:l);for(let f of r.updates)h=h.update(f,t);if(h.hasResult()){e.push(h);continue}}let a=i.active.find(l=>l.source==r.active.source);if(a&&a.isPending)if(r.done==null){let l=new bt(r.active.source,0);for(let c of r.updates)l=l.update(c,t);l.isPending||e.push(l)}else this.startQuery(a)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:Sl.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(ut,!1);if(e&&e.tooltip&&this.view.state.facet(je).closeOnBlur){let t=e.open&&bu(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:ss.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:vr.of(!1)}),20),this.composing=0}}}),QR=typeof navigator=="object"&&/Win/.test(navigator.platform),ZR=jn.highest(Q.domEventHandlers({keydown(n,e){let t=e.state.field(ut,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(QR&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],s=t.active.find(a=>a.source==i.source),r=i.completion.commitCharacters||s.result.commitCharacters;return r&&r.indexOf(n.key)>-1&&Rl(e,i),!1}})),e0=Q.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),rs={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Un=ge.define({map(n,e){let t=e.mapPos(n,-1,st.TrackAfter);return t??void 0}}),_l=new class extends Wn{};_l.startSide=1;_l.endSide=-1;const Xd=Ze.define({create(){return Re.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Un)&&(n=n.update({add:[_l.range(t.value,t.value+1)]}));return n}});function t0(){return[i0,Xd]}const Lo="()[]{}<>";function zd(n){for(let e=0;e<Lo.length;e+=2)if(Lo.charCodeAt(e)==n)return Lo.charAt(e+1);return qa(n<128?n:n+1)}function Kd(n,e){return n.languageDataAt("closeBrackets",e)[0]||rs}const n0=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),i0=Q.inputHandler.of((n,e,t,i)=>{if((n0?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let s=n.state.selection.main;if(i.length>2||i.length==2&&Wt(ht(i,0))==1||e!=s.from||t!=s.to)return!1;let r=o0(n.state,i);return r?(n.dispatch(r),!0):!1}),s0=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=Kd(n,n.selection.main.head).brackets||rs.brackets,s=null,r=n.changeByRange(a=>{if(a.empty){let l=a0(n.doc,a.head);for(let c of i)if(c==l&&$r(n.doc,a.head)==zd(ht(c,0)))return{changes:{from:a.head-c.length,to:a.head+c.length},range:B.cursor(a.head-c.length)}}return{range:s=a}});return s||e(n.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},r0=[{key:"Backspace",run:s0}];function o0(n,e){let t=Kd(n,n.selection.main.head),i=t.brackets||rs.brackets;for(let s of i){let r=zd(ht(s,0));if(e==s)return r==s?h0(n,s,i.indexOf(s+s+s)>-1,t):l0(n,s,r,t.before||rs.before);if(e==r&&$d(n,n.selection.main.from))return c0(n,s,r)}return null}function $d(n,e){let t=!1;return n.field(Xd).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function $r(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Wt(ht(t,0)))}function a0(n,e){let t=n.sliceString(e-2,e);return Wt(ht(t,0))==t.length?t:t.slice(1)}function l0(n,e,t,i){let s=null,r=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:Un.of(a.to+e.length),range:B.range(a.anchor+e.length,a.head+e.length)};let l=$r(n.doc,a.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:a.head},effects:Un.of(a.head+e.length),range:B.cursor(a.head+e.length)}:{range:s=a}});return s?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function c0(n,e,t){let i=null,s=n.changeByRange(r=>r.empty&&$r(n.doc,r.head)==t?{changes:{from:r.head,to:r.head+t.length,insert:t},range:B.cursor(r.head+t.length)}:i={range:r});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function h0(n,e,t,i){let s=i.stringPrefixes||rs.stringPrefixes,r=null,a=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Un.of(l.to+e.length),range:B.range(l.anchor+e.length,l.head+e.length)};let c=l.head,h=$r(n.doc,c),f;if(h==e){if(Th(n,c))return{changes:{insert:e+e,from:c},effects:Un.of(c+e.length),range:B.cursor(c+e.length)};if($d(n,c)){let m=t&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+m.length,insert:m},range:B.cursor(c+m.length)}}}else{if(t&&n.sliceDoc(c-2*e.length,c)==e+e&&(f=Ah(n,c-2*e.length,s))>-1&&Th(n,f))return{changes:{insert:e+e+e+e,from:c},effects:Un.of(c+e.length),range:B.cursor(c+e.length)};if(n.charCategorizer(c)(h)!=De.Word&&Ah(n,c,s)>-1&&!f0(n,c,e,s))return{changes:{insert:e+e,from:c},effects:Un.of(c+e.length),range:B.cursor(c+e.length)}}return{range:r=l}});return r?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function Th(n,e){let t=Xe(n).resolveInner(e+1);return t.parent&&t.from==e}function f0(n,e,t,i){let s=Xe(n).resolveInner(e,-1),r=i.reduce((a,l)=>Math.max(a,l.length),0);for(let a=0;a<5;a++){let l=n.sliceDoc(s.from,Math.min(s.to,s.from+t.length+r)),c=l.indexOf(t);if(!c||c>-1&&i.indexOf(l.slice(0,c))>-1){let f=s.firstChild;for(;f&&f.from==s.from&&f.to-f.from>t.length+c;){if(n.sliceDoc(f.to-t.length,f.to)==t)return!1;f=f.firstChild}return!0}let h=s.to==e&&s.parent;if(!h)break;s=h}return!1}function Ah(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=De.Word)return e;for(let s of t){let r=e-s.length;if(n.sliceDoc(r,e)==s&&i(n.sliceDoc(r-1,r))!=De.Word)return r}return-1}function u0(n={}){return[ZR,ut,je.of(n),JR,d0,e0]}const Jd=[{key:"Ctrl-Space",run:Eh},{mac:"Alt-`",run:Eh},{key:"Escape",run:XR},{key:"ArrowDown",run:Xs(!0)},{key:"ArrowUp",run:Xs(!1)},{key:"PageDown",run:Xs(!0,"page")},{key:"PageUp",run:Xs(!1,"page")},{key:"Enter",run:jR}],d0=jn.highest(ds.computeN([je],n=>n.facet(je).defaultKeymap?[Jd]:[]));class Sh{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Mn{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=e,r=i.facet(os).markerFilter;r&&(s=r(s,i));let a=e.slice().sort((u,m)=>u.from-m.from||u.to-m.to),l=new sn,c=[],h=0;for(let u=0;;){let m=u==a.length?null:a[u];if(!m&&!c.length)break;let T,N;for(c.length?(T=h,N=c.reduce((p,L)=>Math.min(p,L.to),m&&m.from>T?m.from:1e8)):(T=m.from,N=m.to,c.push(m),u++);u<a.length;){let p=a[u];if(p.from==T&&(p.to>p.from||p.to==T))c.push(p),u++,N=Math.min(p.to,N);else{N=Math.min(p.from,N);break}}let b=C0(c);if(c.some(p=>p.from==p.to||p.from==p.to-1&&i.doc.lineAt(p.from).to==p.from))l.add(T,T,le.widget({widget:new _0(b),diagnostics:c.slice()}));else{let p=c.reduce((L,x)=>x.markClass?L+" "+x.markClass:L,"");l.add(T,N,le.mark({class:"cm-lintRange cm-lintRange-"+b+p,diagnostics:c.slice(),inclusiveEnd:c.some(L=>L.to>N)}))}h=N;for(let p=0;p<c.length;p++)c[p].to<=h&&c.splice(p--,1)}let f=l.finish();return new Mn(f,t,Ei(f))}}function Ei(n,e=null,t=0){let i=null;return n.between(t,1e9,(s,r,{spec:a})=>{if(!(e&&a.diagnostics.indexOf(e)<0))if(!i)i=new Sh(s,r,e||a.diagnostics[0]);else{if(a.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new Sh(i.from,r,i.diagnostic)}}),i}function p0(n,e){let t=e.pos,i=e.end||t,s=n.state.facet(os).hideOn(n,t,i);if(s!=null)return s;let r=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(a=>a.is(Qd))||n.changes.touchesRange(r.from,Math.max(r.to,i)))}function m0(n,e){return n.field(St,!1)?e:e.concat(ge.appendConfig.of(y0))}const Qd=ge.define(),Ol=ge.define(),Zd=ge.define(),St=Ze.define({create(){return new Mn(le.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,s=n.panel;if(n.selected){let r=e.changes.mapPos(n.selected.from,1);i=Ei(t,n.selected.diagnostic,r)||Ei(t,null,r)}!t.size&&s&&e.state.facet(os).autoPanel&&(s=null),n=new Mn(t,s,i)}for(let t of e.effects)if(t.is(Qd)){let i=e.state.facet(os).autoPanel?t.value.length?as.open:null:n.panel;n=Mn.init(t.value,i,e.state)}else t.is(Ol)?n=new Mn(n.diagnostics,t.value?as.open:null,n.selected):t.is(Zd)&&(n=new Mn(n.diagnostics,n.panel,t.value));return n},provide:n=>[es.from(n,e=>e.panel),Q.decorations.from(n,e=>e.diagnostics)]}),g0=le.mark({class:"cm-lintRange cm-lintRange-active"});function E0(n,e,t){let{diagnostics:i}=n.state.field(St),s,r=-1,a=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(c,h,{spec:f})=>{if(e>=c&&e<=h&&(c==h||(e>c||t>0)&&(e<h||t<0)))return s=f.diagnostics,r=c,a=h,!1});let l=n.state.facet(os).tooltipFilter;return s&&l&&(s=l(s,n.state)),s?{pos:r,end:a,above:n.state.doc.lineAt(r).to<a,create(){return{dom:T0(n,s)}}}:null}function T0(n,e){return Ie("ul",{class:"cm-tooltip-lint"},e.map(t=>tp(n,t,!1)))}const A0=n=>{let e=n.state.field(St,!1);(!e||!e.panel)&&n.dispatch({effects:m0(n.state,[Ol.of(!0)])});let t=Zi(n,as.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Rh=n=>{let e=n.state.field(St,!1);return!e||!e.panel?!1:(n.dispatch({effects:Ol.of(!1)}),!0)},S0=n=>{let e=n.state.field(St,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},R0=[{key:"Mod-Shift-m",run:A0,preventDefault:!0},{key:"F8",run:S0}],os=ie.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},zt(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function ep(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(r=>r.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function tp(n,e,t){var i;let s=t?ep(e.actions):[];return Ie("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ie("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,a)=>{let l=!1,c=m=>{if(m.preventDefault(),l)return;l=!0;let T=Ei(n.state.field(St).diagnostics,e);T&&r.apply(n,T.from,T.to)},{name:h}=r,f=s[a]?h.indexOf(s[a]):-1,u=f<0?h:[h.slice(0,f),Ie("u",h.slice(f,f+1)),h.slice(f+1)];return Ie("button",{type:"button",class:"cm-diagnosticAction",onclick:c,onmousedown:c,"aria-label":` Action: ${h}${f<0?"":` (access key "${s[a]})"`}.`},u)}),e.source&&Ie("div",{class:"cm-diagnosticSource"},e.source))}class _0 extends an{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Ie("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class _h{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=tp(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class as{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)Rh(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],a=ep(r.actions);for(let l=0;l<a.length;l++)if(a[l].toUpperCase().charCodeAt(0)==s.keyCode){let c=Ei(this.view.state.field(St).diagnostics,r);c&&r.actions[l].apply(e,c.from,c.to)}}else return;s.preventDefault()},i=s=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(s.target)&&this.moveSelection(r)};this.list=Ie("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Ie("div",{class:"cm-panel-lint"},this.list,Ie("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Rh(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(St).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(St),i=0,s=!1,r=null,a=new Set;for(e.between(0,this.view.state.doc.length,(l,c,{spec:h})=>{for(let f of h.diagnostics){if(a.has(f))continue;a.add(f);let u=-1,m;for(let T=i;T<this.items.length;T++)if(this.items[T].diagnostic==f){u=T;break}u<0?(m=new _h(this.view,f),this.items.splice(i,0,m),s=!0):(m=this.items[u],u>i&&(this.items.splice(i,u-i),s=!0)),t&&m.diagnostic==t.diagnostic?m.dom.hasAttribute("aria-selected")||(m.dom.setAttribute("aria-selected","true"),r=m):m.dom.hasAttribute("aria-selected")&&m.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new _h(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:c})=>{let h=c.height/this.list.offsetHeight;l.top<c.top?this.list.scrollTop-=(c.top-l.top)/h:l.bottom>c.bottom&&(this.list.scrollTop+=(l.bottom-c.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(St),i=Ei(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Zd.of(i)})}static open(e){return new as(e)}}function O0(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function zs(n){return O0(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const N0=Q.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:zs("#d11")},".cm-lintRange-warning":{backgroundImage:zs("orange")},".cm-lintRange-info":{backgroundImage:zs("#999")},".cm-lintRange-hint":{backgroundImage:zs("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function b0(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function C0(n){let e="hint",t=1;for(let i of n){let s=b0(i.severity);s>t&&(t=s,e=i.severity)}return e}const y0=[St,Q.decorations.compute([St],n=>{let{selected:e,panel:t}=n.field(St);return!e||!t||e.from==e.to?le.none:le.set([g0.range(e.from,e.to)])}),_T(E0,{hideOn:p0}),N0];var Oh=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,i=[];e.closeBracketsKeymap!==!1&&(i=i.concat(r0)),e.defaultKeymap!==!1&&(i=i.concat(wd)),e.searchKeymap!==!1&&(i=i.concat(NR)),e.historyKeymap!==!1&&(i=i.concat(lS)),e.foldKeymap!==!1&&(i=i.concat(_A)),e.completionKeymap!==!1&&(i=i.concat(Jd)),e.lintKeymap!==!1&&(i=i.concat(R0));var s=[];return e.lineNumbers!==!1&&s.push(DT()),e.highlightActiveLineGutter!==!1&&s.push(MT()),e.highlightSpecialChars!==!1&&s.push(JE()),e.history!==!1&&s.push(ZA()),e.foldGutter!==!1&&s.push(CA()),e.drawSelection!==!1&&s.push(HE()),e.dropCursor!==!1&&s.push(YE()),e.allowMultipleSelections!==!1&&s.push(Ae.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&s.push(dA()),e.syntaxHighlighting!==!1&&s.push(ul(wA,{fallback:!0})),e.bracketMatching!==!1&&s.push(FA()),e.closeBrackets!==!1&&s.push(t0()),e.autocompletion!==!1&&s.push(u0()),e.rectangularSelection!==!1&&s.push(fT()),t!==!1&&s.push(pT()),e.highlightActiveLine!==!1&&s.push(iT()),e.highlightSelectionMatches!==!1&&s.push(rR()),e.tabSize&&typeof e.tabSize=="number"&&s.push(Vr.of(" ".repeat(e.tabSize))),s.concat([ds.of(i.flat())]).filter(Boolean)};const L0="#e5c07b",Nh="#e06c75",I0="#56b6c2",w0="#ffffff",or="#abb2bf",Da="#7d8799",x0="#61afef",v0="#98c379",bh="#d19a66",D0="#c678dd",k0="#21252b",Ch="#2c313a",yh="#282c34",Io="#353a42",P0="#3E4451",Lh="#528bff",M0=Q.theme({"&":{color:or,backgroundColor:yh},".cm-content":{caretColor:Lh},".cm-cursor, .cm-dropCursor":{borderLeftColor:Lh},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:P0},".cm-panels":{backgroundColor:k0,color:or},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:yh,color:Da,border:"none"},".cm-activeLineGutter":{backgroundColor:Ch},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Io},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Io,borderBottomColor:Io},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Ch,color:or}}},{dark:!0}),F0=Ai.define([{tag:w.keyword,color:D0},{tag:[w.name,w.deleted,w.character,w.propertyName,w.macroName],color:Nh},{tag:[w.function(w.variableName),w.labelName],color:x0},{tag:[w.color,w.constant(w.name),w.standard(w.name)],color:bh},{tag:[w.definition(w.name),w.separator],color:or},{tag:[w.typeName,w.className,w.number,w.changed,w.annotation,w.modifier,w.self,w.namespace],color:L0},{tag:[w.operator,w.operatorKeyword,w.url,w.escape,w.regexp,w.link,w.special(w.string)],color:I0},{tag:[w.meta,w.comment],color:Da},{tag:w.strong,fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.link,color:Da,textDecoration:"underline"},{tag:w.heading,fontWeight:"bold",color:Nh},{tag:[w.atom,w.bool,w.special(w.variableName)],color:bh},{tag:[w.processingInstruction,w.string,w.inserted],color:v0},{tag:w.invalid,color:w0}]),U0=[M0,ul(F0)];var B0=Q.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),H0=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:i=!0,readOnly:s=!1,theme:r="light",placeholder:a="",basicSetup:l=!0}=e,c=[];switch(t&&c.unshift(ds.of([ZS])),l&&(typeof l=="boolean"?c.unshift(Oh()):c.unshift(Oh(l))),a&&c.unshift(aT(a)),r){case"light":c.push(B0);break;case"dark":c.push(U0);break;case"none":break;default:c.push(r);break}return i===!1&&c.push(Q.editable.of(!1)),s&&c.push(Ae.readOnly.of(!0)),[...c]},W0=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),Ih=Xt.define(),G0=[];function V0(n){var{value:e,selection:t,onChange:i,onStatistics:s,onCreateEditor:r,onUpdate:a,extensions:l=G0,autoFocus:c,theme:h="light",height:f=null,minHeight:u=null,maxHeight:m=null,width:T=null,minWidth:N=null,maxWidth:b=null,placeholder:p="",editable:L=!0,readOnly:x=!1,indentWithTab:W=!0,basicSetup:V=!0,root:H,initialState:M}=n,[q,se]=pe.useState(),[z,Y]=pe.useState(),[te,K]=pe.useState(),fe=Q.theme({"&":{height:f,minHeight:u,maxHeight:m,width:T,minWidth:N,maxWidth:b},"& .cm-scroller":{height:"100% !important"}}),de=Q.updateListener.of(Ne=>{if(Ne.docChanged&&typeof i=="function"&&!Ne.transactions.some(We=>We.annotation(Ih))){var ke=Ne.state.doc,Oe=ke.toString();i(Oe,Ne)}s&&s(W0(Ne))}),Te=H0({theme:h,editable:L,readOnly:x,placeholder:p,indentWithTab:W,basicSetup:V}),ye=[de,fe,...Te];return a&&typeof a=="function"&&ye.push(Q.updateListener.of(a)),ye=ye.concat(l),pe.useEffect(()=>{if(q&&!te){var Ne={doc:e,selection:t,extensions:ye},ke=M?Ae.fromJSON(M.json,Ne,M.fields):Ae.create(Ne);if(K(ke),!z){var Oe=new Q({state:ke,parent:q,root:H});Y(Oe),r&&r(Oe,ke)}}return()=>{z&&(K(void 0),Y(void 0))}},[q,te]),pe.useEffect(()=>se(n.container),[n.container]),pe.useEffect(()=>()=>{z&&(z.destroy(),Y(void 0))},[z]),pe.useEffect(()=>{c&&z&&z.focus()},[c,z]),pe.useEffect(()=>{z&&z.dispatch({effects:ge.reconfigure.of(ye)})},[h,l,f,u,m,T,N,b,p,L,x,W,V,i,a]),pe.useEffect(()=>{if(e!==void 0){var Ne=z?z.state.doc.toString():"";z&&e!==Ne&&z.dispatch({changes:{from:0,to:Ne.length,insert:e||""},annotations:[Ih.of(!0)]})}},[e,z]),{state:te,setState:K,view:z,setView:Y,container:q,setContainer:se}}var q0=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],np=pe.forwardRef((n,e)=>{var{className:t,value:i="",selection:s,extensions:r=[],onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:h,autoFocus:f,theme:u="light",height:m,minHeight:T,maxHeight:N,width:b,minWidth:p,maxWidth:L,basicSetup:x,placeholder:W,indentWithTab:V,editable:H,readOnly:M,root:q,initialState:se}=n,z=Um(n,q0),Y=pe.useRef(null),{state:te,view:K,container:fe}=V0({container:Y.current,root:q,value:i,autoFocus:f,theme:u,height:m,minHeight:T,maxHeight:N,width:b,minWidth:p,maxWidth:L,basicSetup:x,placeholder:W,indentWithTab:V,editable:H,readOnly:M,selection:s,onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:h,extensions:r,initialState:se});if(pe.useImperativeHandle(e,()=>({editor:Y.current,state:te,view:K}),[Y,fe,te,K]),typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var de=typeof u=="string"?"cm-theme-"+u:"cm-theme";return Z.jsx("div",Va({ref:Y,className:""+de+(t?" "+t:"")},z))});np.displayName="CodeMirror";var wh={};class kr{constructor(e,t,i,s,r,a,l,c,h,f=0,u){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=r,this.score=a,this.buffer=l,this.bufferBase=c,this.curContext=h,this.lookAhead=f,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new kr(e,[],t,i,i,0,[],0,s?new xh(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:r}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let l=r.dynamicPrecedence(s);if(l&&(this.score+=l),i==0){this.pushState(r.getGoto(this.state,s,!0),this.reducePos),s<r.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),h=c?this.stack[c-2]:this.p.ranges[0].from,f=this.reducePos-h;f>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=f));let u=c?this.stack[c-1]:0,m=this.bufferBase+this.buffer.length-u;if(s<r.minRepeatTerm||e&131072){let T=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,h,T,m+4,!0)}if(e&262144)this.state=this.stack[c];else{let T=this.stack[c-3];this.state=r.getGoto(T,s,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(s,h)}storeNode(e,t,i,s=4,r=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,l=this.buffer.length;if(l==0&&a.parent&&(l=a.bufferBase-a.parent.bufferBase,a=a.parent),l>0&&a.buffer[l-4]==0&&a.buffer[l-1]>-1){if(t==i)return;if(a.buffer[l-2]>=t){a.buffer[l-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,t,i,s);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0){let l=!1;for(let c=a;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){l=!0;break}if(l)for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=i,this.buffer[a+3]=s}}shift(e,t,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=s,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,s,4);else{let r=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(r,1)||(this.reducePos=s)),this.pushState(r,i),this.shiftContext(t,i),t<=a.maxNode&&this.buffer.push(t,i,s,4)}}apply(e,t,i,s){e&65536?this.reduce(e):this.shift(e,t,i,s)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new kr(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Y0(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let r=0,a;r<t.length;r+=2)(a=t[r+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[r],a);if(this.stack.length<120)for(let r=0;s.length<8&&r<t.length;r+=2){let a=t[r+1];s.some((l,c)=>c&1&&l==a)||s.push(t[r],a)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let r=t[s+1];if(r==this.state)continue;let a=this.split();a.pushState(r,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,i.push(a)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,s=t&65535,r=this.stack.length-i*3;if(r<0||e.getGoto(this.stack[r],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(s,r)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let l=(a>>19)-r;if(l>1){let c=a&65535,h=this.stack.length-l*3;if(h>=0&&e.getGoto(this.stack[h],c,!1)>=0)return l<<19|65536|c}}else{let l=i(a,r+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new xh(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class xh{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Y0{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class Pr{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Pr(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Pr(this.stack,this.pos,this.index)}}function Ks(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,s=0;i<n.length;){let r=0;for(;;){let a=n.charCodeAt(i++),l=!1;if(a==126){r=65535;break}a>=92&&a--,a>=34&&a--;let c=a-32;if(c>=46&&(c-=46,l=!0),r+=c,l)break;r*=46}t?t[s++]=r:t=new e(r)}return t}class ar{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const vh=new ar;class j0{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=vh,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,r=this.pos+e;for(;r<i.from;){if(!s)return null;let a=this.ranges[--s];r-=i.from-a.to,i=a}for(;t<0?r>i.to:r>=i.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];r+=a.from-i.to,i=a}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let r=this.resolveOffset(e,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let a=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=vh,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class ci{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;z0(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}ci.prototype.contextual=ci.prototype.fallback=ci.prototype.extend=!1;ci.prototype.fallback=ci.prototype.extend=!1;class X0{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function z0(n,e,t,i,s,r){let a=0,l=1<<i,{dialect:c}=t.p.parser;e:for(;l&n[a];){let h=n[a+1];for(let T=a+3;T<h;T+=2)if((n[T+1]&l)>0){let N=n[T];if(c.allows(N)&&(e.token.value==-1||e.token.value==N||K0(N,e.token.value,s,r))){e.acceptToken(N);break}}let f=e.next,u=0,m=n[a+2];if(e.next<0&&m>u&&n[h+m*3-3]==65535){a=n[h+m*3-1];continue e}for(;u<m;){let T=u+m>>1,N=h+T+(T<<1),b=n[N],p=n[N+1]||65536;if(f<b)m=T;else if(f>=p)u=T+1;else{a=n[N+2],e.advance();continue e}}break}}function Dh(n,e,t){for(let i=e,s;(s=n[i])!=65535;i++)if(s==t)return i-e;return-1}function K0(n,e,t,i){let s=Dh(t,i,e);return s<0||Dh(t,i,n)<s}const Tt=typeof process<"u"&&wh&&/\bparse\b/.test(wh.LOG);let wo=null;function kh(n,e,t){let i=n.cursor(Ye.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class $0{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?kh(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?kh(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[s],a=this.start[t]+i.positions[s];if(a>e)return this.nextStart=a,null;if(r instanceof He){if(a==e){if(a<this.safeFrom)return null;let l=a+r.length;if(l<=this.safeTo){let c=r.prop(Ee.lookAhead);if(!c||l+c<this.fragment.to)return r}}this.index[t]++,a+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+r.length}}}class J0{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new ar)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:r}=s,a=s.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,c=0;for(let h=0;h<r.length;h++){if(!(1<<h&a))continue;let f=r[h],u=this.tokens[h];if(!(i&&!f.fallback)&&((f.contextual||u.start!=e.pos||u.mask!=a||u.context!=l)&&(this.updateCachedToken(u,f,e),u.mask=a,u.context=l),u.lookAhead>u.end+25&&(c=Math.max(u.lookAhead,c)),u.value!=0)){let m=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!f.extend&&(i=u,t>m))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new ar,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new ar,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:r}=i.p;for(let a=0;a<r.specialized.length;a++)if(r.specialized[a]==e.value){let l=r.specializers[a](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let r=0;r<s;r+=3)if(this.actions[r]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:r}=e,{parser:a}=e.p,{data:l}=a;for(let c=0;c<2;c++)for(let h=a.stateSlot(r,c?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=en(l,h+2);else{s==0&&l[h+1]==2&&(s=this.putAction(en(l,h+2),t,i,s));break}l[h]==t&&(s=this.putAction(en(l,h+1),t,i,s))}return s}}class Q0{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new j0(t,s),this.tokens=new J0(e,this.stream),this.topTerm=e.top[1];let{from:r}=s[0];this.stacks=[kr.start(this,e.top[0],r)],this.fragments=i.length&&this.stream.end-r>e.bufferLength*4?new $0(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,r;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let l=e[a];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{s||(s=[],r=[]),s.push(l);let c=this.tokens.getMainToken(l);r.push(c.value,c.end)}}break}}if(!i.length){let a=s&&e_(s);if(a)return Tt&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw Tt&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,r,i);if(a)return Tt&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(i.length>a)for(i.sort((l,c)=>c.score-l.score);i.length>a;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let a=0;a<i.length-1;a++){let l=i[a];for(let c=a+1;c<i.length;c++){let h=i[c];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)i.splice(c--,1);else{i.splice(a--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let a=1;a<i.length;a++)i[a].pos<this.minStackPos&&(this.minStackPos=i[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:r}=this,a=Tt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,f=h?e.curContext.hash:0;for(let u=this.fragments.nodeAt(s);u;){let m=this.parser.nodeSet.types[u.type.id]==u.type?r.getGoto(e.state,u.type.id):-1;if(m>-1&&u.length&&(!h||(u.prop(Ee.contextHash)||0)==f))return e.useNode(u,m),Tt&&console.log(a+this.stackID(e)+` (via reuse of ${r.getName(u.type.id)})`),!0;if(!(u instanceof He)||u.children.length==0||u.positions[0]>0)break;let T=u.children[0];if(T instanceof He&&u.positions[0]==0)u=T;else break}}let l=r.stateSlot(e.state,4);if(l>0)return e.reduce(l),Tt&&console.log(a+this.stackID(e)+` (via always-reduce ${r.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let h=0;h<c.length;){let f=c[h++],u=c[h++],m=c[h++],T=h==c.length||!i,N=T?e:e.split(),b=this.tokens.mainToken;if(N.apply(f,u,b?b.start:N.pos,m),Tt&&console.log(a+this.stackID(N)+` (via ${f&65536?`reduce of ${r.getName(f&65535)}`:"shift"} for ${r.getName(u)} @ ${s}${N==e?"":", split"})`),T)return!0;N.pos>s?t.push(N):i.push(N)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Ph(e,t),!0}}runRecovery(e,t,i){let s=null,r=!1;for(let a=0;a<e.length;a++){let l=e[a],c=t[a<<1],h=t[(a<<1)+1],f=Tt?this.stackID(l)+" -> ":"";if(l.deadEnd&&(r||(r=!0,l.restart(),Tt&&console.log(f+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let u=l.split(),m=f;for(let T=0;u.forceReduce()&&T<10&&(Tt&&console.log(m+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));T++)Tt&&(m=this.stackID(u)+" -> ");for(let T of l.recoverByInsert(c))Tt&&console.log(f+this.stackID(T)+" (via recover-insert)"),this.advanceFully(T,i);this.stream.end>l.pos?(h==l.pos&&(h++,c=0),l.recoverByDelete(c,h),Tt&&console.log(f+this.stackID(l)+` (via recover-delete ${this.parser.getName(c)})`),Ph(l,i)):(!s||s.score<l.score)&&(s=l)}return s}stackToTree(e){return e.close(),He.build({buffer:Pr.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(wo||(wo=new WeakMap)).get(e);return t||wo.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Ph(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class Z0{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class Mr extends Du{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),s=[];for(let l=0;l<t.length;l++)s.push([]);function r(l,c,h){s[l].push([c,c.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let c=l[0];typeof c=="string"&&(c=Ee[c]);for(let h=1;h<l.length;){let f=l[h++];if(f>=0)r(f,c,l[h++]);else{let u=l[h+-f];for(let m=-f;m>0;m--)r(l[h++],c,u);h++}}}this.nodeSet=new ol(t.map((l,c)=>mt.define({name:c>=this.minRepeatTerm?void 0:l,id:c,props:s[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Iu;let a=Ks(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(Mh),this.states=Ks(e.states,Uint32Array),this.data=Ks(e.stateData),this.goto=Ks(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new ci(a,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new Q0(this,e,t,i);for(let r of this.wrappers)s=r(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let r=s[t+1];;){let a=s[r++],l=a&1,c=s[r++];if(l&&i)return c;for(let h=r+(a>>1);r<h;r++)if(s[r]==e)return c;if(l)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let r=this.stateSlot(e,s?2:1),a;;r+=3){if((a=i[r])==65535)if(i[r+1]==1)a=i[r=en(i,r+2)];else{if(i[r+1]==2)return en(i,r+2);break}if(a==t||a==0)return en(i,r+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),s=i?t(i):void 0;for(let r=this.stateSlot(e,1);s==null;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=en(this.data,r+2);else break;s=t(en(this.data,r+1))}return s}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=en(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];t.some((r,a)=>a&1&&r==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(Mr.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(r=>r.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let r=e.specializers.find(l=>l.from==i.external);if(!r)return i;let a=Object.assign(Object.assign({},i),{external:r.to});return t.specializers[s]=Mh(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let r of e.split(" ")){let a=t.indexOf(r);a>=0&&(i[a]=!0)}let s=null;for(let r=0;r<t.length;r++)if(!i[r])for(let a=this.dialects[t[r]],l;(l=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[l]=1;return new Z0(e,i,s)}static deserialize(e){return new Mr(e)}}function en(n,e){return n[e]|n[e+1]<<16}function e_(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Mh(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const t_=36,Fh=1,n_=2,Kn=3,xo=4,i_=5,s_=6,r_=7,o_=8,a_=9,l_=10,c_=11,h_=12,f_=13,u_=14,d_=15,p_=16,m_=17,Uh=18,g_=19,ip=20,sp=21,Bh=22,E_=23,T_=24;function ka(n){return n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57}function A_(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function kn(n,e,t){for(let i=!1;;){if(n.next<0)return;if(n.next==e&&!i){n.advance();return}i=t&&!i&&n.next==92,n.advance()}}function S_(n,e){e:for(;;){if(n.next<0)return;if(n.next==36){n.advance();for(let t=0;t<e.length;t++){if(n.next!=e.charCodeAt(t))continue e;n.advance()}if(n.next==36){n.advance();return}}else n.advance()}}function R_(n,e){let t="[{<(".indexOf(String.fromCharCode(e)),i=t<0?e:"]}>)".charCodeAt(t);for(;;){if(n.next<0)return;if(n.next==i&&n.peek(1)==39){n.advance(2);return}n.advance()}}function Pa(n,e){for(;!(n.next!=95&&!ka(n.next));)e!=null&&(e+=String.fromCharCode(n.next)),n.advance();return e}function __(n){if(n.next==39||n.next==34||n.next==96){let e=n.next;n.advance(),kn(n,e,!1)}else Pa(n)}function Hh(n,e){for(;n.next==48||n.next==49;)n.advance();e&&n.next==e&&n.advance()}function Wh(n,e){for(;;){if(n.next==46){if(e)break;e=!0}else if(n.next<48||n.next>57)break;n.advance()}if(n.next==69||n.next==101)for(n.advance(),(n.next==43||n.next==45)&&n.advance();n.next>=48&&n.next<=57;)n.advance()}function Gh(n){for(;!(n.next<0||n.next==10);)n.advance()}function In(n,e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)==n)return!0;return!1}const vo=` 	\r
`;function rp(n,e,t){let i=Object.create(null);i.true=i.false=i_,i.null=i.unknown=s_;for(let s of n.split(" "))s&&(i[s]=ip);for(let s of e.split(" "))s&&(i[s]=sp);for(let s of(t||"").split(" "))s&&(i[s]=T_);return i}const op="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",ap="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",Ma={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:rp(ap,op)};function O_(n,e,t,i){let s={};for(let r in Ma)s[r]=(n.hasOwnProperty(r)?n:Ma)[r];return e&&(s.words=rp(e,t||"",i)),s}function lp(n){return new X0(e=>{var t;let{next:i}=e;if(e.advance(),In(i,vo)){for(;In(e.next,vo);)e.advance();e.acceptToken(t_)}else if(i==36&&n.doubleDollarQuotedStrings){let s=Pa(e,"");e.next==36&&(e.advance(),S_(e,s),e.acceptToken(Kn))}else if(i==39||i==34&&n.doubleQuotedStrings)kn(e,i,n.backslashEscapes),e.acceptToken(Kn);else if(i==35&&n.hashComments||i==47&&e.next==47&&n.slashComments)Gh(e),e.acceptToken(Fh);else if(i==45&&e.next==45&&(!n.spaceAfterDashes||e.peek(1)==32))Gh(e),e.acceptToken(Fh);else if(i==47&&e.next==42){e.advance();for(let s=1;;){let r=e.next;if(e.next<0)break;if(e.advance(),r==42&&e.next==47){if(s--,e.advance(),!s)break}else r==47&&e.next==42&&(s++,e.advance())}e.acceptToken(n_)}else if((i==101||i==69)&&e.next==39)e.advance(),kn(e,39,!0),e.acceptToken(Kn);else if((i==110||i==78)&&e.next==39&&n.charSetCasts)e.advance(),kn(e,39,n.backslashEscapes),e.acceptToken(Kn);else if(i==95&&n.charSetCasts)for(let s=0;;s++){if(e.next==39&&s>1){e.advance(),kn(e,39,n.backslashEscapes),e.acceptToken(Kn);break}if(!ka(e.next))break;e.advance()}else if(n.plsqlQuotingMechanism&&(i==113||i==81)&&e.next==39&&e.peek(1)>0&&!In(e.peek(1),vo)){let s=e.peek(1);e.advance(2),R_(e,s),e.acceptToken(Kn)}else if(i==40)e.acceptToken(r_);else if(i==41)e.acceptToken(o_);else if(i==123)e.acceptToken(a_);else if(i==125)e.acceptToken(l_);else if(i==91)e.acceptToken(c_);else if(i==93)e.acceptToken(h_);else if(i==59)e.acceptToken(f_);else if(n.unquotedBitLiterals&&i==48&&e.next==98)e.advance(),Hh(e),e.acceptToken(Bh);else if((i==98||i==66)&&(e.next==39||e.next==34)){const s=e.next;e.advance(),n.treatBitsAsBytes?(kn(e,s,n.backslashEscapes),e.acceptToken(E_)):(Hh(e,s),e.acceptToken(Bh))}else if(i==48&&(e.next==120||e.next==88)||(i==120||i==88)&&e.next==39){let s=e.next==39;for(e.advance();A_(e.next);)e.advance();s&&e.next==39&&e.advance(),e.acceptToken(xo)}else if(i==46&&e.next>=48&&e.next<=57)Wh(e,!0),e.acceptToken(xo);else if(i==46)e.acceptToken(u_);else if(i>=48&&i<=57)Wh(e,!1),e.acceptToken(xo);else if(In(i,n.operatorChars)){for(;In(e.next,n.operatorChars);)e.advance();e.acceptToken(d_)}else if(In(i,n.specialVar))e.next==i&&e.advance(),__(e),e.acceptToken(m_);else if(In(i,n.identifierQuotes))kn(e,i,!1),e.acceptToken(g_);else if(i==58||i==44)e.acceptToken(p_);else if(ka(i)){let s=Pa(e,String.fromCharCode(i));e.acceptToken(e.next==46||e.peek(-s.length-1)==46?Uh:(t=n.words[s.toLowerCase()])!==null&&t!==void 0?t:Uh)}})}const cp=lp(Ma),N_=Mr.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:"⚠ LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,cp],topRules:{Script:[0,25]},tokenPrec:0});function Fa(n){let e=n.cursor().moveTo(n.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function ls(n,e){let t=n.sliceString(e.from,e.to),i=/^([`'"])(.*)\1$/.exec(t);return i?i[2]:t}function Fr(n){return n&&(n.name=="Identifier"||n.name=="QuotedIdentifier")}function b_(n,e){if(e.name=="CompositeIdentifier"){let t=[];for(let i=e.firstChild;i;i=i.nextSibling)Fr(i)&&t.push(ls(n,i));return t}return[ls(n,e)]}function Vh(n,e){for(let t=[];;){if(!e||e.name!=".")return t;let i=Fa(e);if(!Fr(i))return t;t.unshift(ls(n,i)),e=Fa(i)}}function C_(n,e){let t=Xe(n).resolveInner(e,-1),i=L_(n.doc,t);return t.name=="Identifier"||t.name=="QuotedIdentifier"||t.name=="Keyword"?{from:t.from,quoted:t.name=="QuotedIdentifier"?n.doc.sliceString(t.from,t.from+1):null,parents:Vh(n.doc,Fa(t)),aliases:i}:t.name=="."?{from:e,quoted:null,parents:Vh(n.doc,t),aliases:i}:{from:e,quoted:null,parents:[],empty:!0,aliases:i}}const y_=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function L_(n,e){let t;for(let s=e;!t;s=s.parent){if(!s)return null;s.name=="Statement"&&(t=s)}let i=null;for(let s=t.firstChild,r=!1,a=null;s;s=s.nextSibling){let l=s.name=="Keyword"?n.sliceString(s.from,s.to).toLowerCase():null,c=null;if(!r)r=l=="from";else if(l=="as"&&a&&Fr(s.nextSibling))c=ls(n,s.nextSibling);else{if(l&&y_.has(l))break;a&&Fr(s)&&(c=ls(n,s))}c&&(i||(i=Object.create(null)),i[c]=b_(n,a)),a=/Identifier$/.test(s.name)?s:null}return i}function I_(n,e){return n?e.map(t=>Object.assign(Object.assign({},t),{label:t.label[0]==n?t.label:n+t.label+n,apply:void 0})):e}const w_=/^\w*$/,x_=/^[`'"]?\w*[`'"]?$/;function qh(n){return n.self&&typeof n.self.label=="string"}class Nl{constructor(e,t){this.idQuote=e,this.idCaseInsensitive=t,this.list=[],this.children=void 0}child(e){let t=this.children||(this.children=Object.create(null)),i=t[e];return i||(e&&!this.list.some(s=>s.label==e)&&this.list.push(Yh(e,"type",this.idQuote,this.idCaseInsensitive)),t[e]=new Nl(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let t=this.list.findIndex(i=>i.label==e.label);t>-1?this.list[t]=e:this.list.push(e)}addCompletions(e){for(let t of e)this.addCompletion(typeof t=="string"?Yh(t,"property",this.idQuote,this.idCaseInsensitive):t)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):qh(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let t of Object.keys(e)){let i=e[t],s=null,r=t.replace(/\\?\./g,l=>l=="."?"\0":l).split("\0"),a=this;qh(i)&&(s=i.self,i=i.children);for(let l=0;l<r.length;l++)s&&l==r.length-1&&a.addCompletion(s),a=a.child(r[l].replace(/\\\./g,"."));a.addNamespace(i)}}}function Yh(n,e,t,i){return new RegExp("^[a-z_][a-z_\\d]*$",i?"i":"").test(n)?{label:n,type:e}:{label:n,type:e,apply:t+n+t}}function v_(n,e,t,i,s,r){var a;let l=((a=r?.spec.identifierQuotes)===null||a===void 0?void 0:a[0])||'"',c=new Nl(l,!!r?.spec.caseInsensitiveIdentifiers),h=s?c.child(s):null;return c.addNamespace(n),e&&(h||c).addCompletions(e),t&&c.addCompletions(t),h&&c.addCompletions(h.list),i&&c.addCompletions((h||c).child(i).list),f=>{let{parents:u,from:m,quoted:T,empty:N,aliases:b}=C_(f.state,f.pos);if(N&&!f.explicit)return null;b&&u.length==1&&(u=b[u[0]]||u);let p=c;for(let W of u){for(;!p.children||!p.children[W];)if(p==c&&h)p=h;else if(p==h&&i)p=p.child(i);else return null;let V=p.maybeChild(W);if(!V)return null;p=V}let L=T&&f.state.sliceDoc(f.pos,f.pos+1)==T,x=p.list;return p==c&&b&&(x=x.concat(Object.keys(b).map(W=>({label:W,type:"constant"})))),{from:m,to:L?f.pos+1:void 0,options:I_(T,x),validFor:T?x_:w_}}}function D_(n){return n==sp?"type":n==ip?"keyword":"variable"}function k_(n,e,t){let i=Object.keys(n).map(s=>t(e?s.toUpperCase():s,D_(n[s])));return IR(["QuotedIdentifier","SpecialVar","String","LineComment","BlockComment","."],Gd(i))}let P_=N_.configure({props:[Uu.add({Statement:fA()}),Hu.add({Statement(n,e){return{from:Math.min(n.from+100,e.doc.lineAt(n.from).to),to:n.to}},BlockComment(n){return{from:n.from+2,to:n.to-2}}}),ku({Keyword:w.keyword,Type:w.typeName,Builtin:w.standard(w.name),Bits:w.number,Bytes:w.string,Bool:w.bool,Null:w.null,Number:w.number,String:w.string,Identifier:w.name,QuotedIdentifier:w.special(w.string),SpecialVar:w.special(w.name),LineComment:w.lineComment,BlockComment:w.blockComment,Operator:w.operator,"Semi Punctuation":w.punctuation,"( )":w.paren,"{ }":w.brace,"[ ]":w.squareBracket})]});class Jr{constructor(e,t,i){this.dialect=e,this.language=t,this.spec=i}get extension(){return this.language.extension}static define(e){let t=O_(e,e.keywords,e.types,e.builtin),i=Sr.define({name:"sql",parser:P_.configure({tokenizers:[{from:cp,to:lp(t)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new Jr(t,i,e)}}function M_(n,e){return{label:n,type:e,boost:-1}}function F_(n,e=!1,t){return k_(n.dialect.words,e,M_)}function U_(n){return n.schema?v_(n.schema,n.tables,n.schemas,n.defaultTable,n.defaultSchema,n.dialect||B_):()=>null}const B_=Jr.define({}),hp=Jr.define({charSetCasts:!0,doubleDollarQuotedStrings:!0,operatorChars:"+-*/<>=~!@#%^&|`?",specialVar:"",keywords:ap+"abort abs absent access according ada admin aggregate alias also always analyse analyze array_agg array_max_cardinality asensitive assert assignment asymmetric atomic attach attribute attributes avg backward base64 begin_frame begin_partition bernoulli bit_length blocked bom cache called cardinality catalog_name ceil ceiling chain char_length character_length character_set_catalog character_set_name character_set_schema characteristics characters checkpoint class class_origin cluster coalesce cobol collation_catalog collation_name collation_schema collect column_name columns command_function command_function_code comment comments committed concurrently condition_number configuration conflict connection_name constant constraint_catalog constraint_name constraint_schema contains content control conversion convert copy corr cost covar_pop covar_samp csv cume_dist current_catalog current_row current_schema cursor_name database datalink datatype datetime_interval_code datetime_interval_precision db debug defaults defined definer degree delimiter delimiters dense_rank depends derived detach detail dictionary disable discard dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue document dump dynamic_function dynamic_function_code element elsif empty enable encoding encrypted end_frame end_partition endexec enforced enum errcode error event every exclude excluding exclusive exp explain expression extension extract family file filter final first_value flag floor following force foreach fortran forward frame_row freeze fs functions fusion generated granted greatest groups handler header hex hierarchy hint id ignore ilike immediately immutable implementation implicit import include including increment indent index indexes info inherit inherits inline insensitive instance instantiable instead integrity intersection invoker isnull key_member key_type label lag last_value lead leakproof least length library like_regex link listen ln load location lock locked log logged lower mapping matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text min minvalue mod mode more move multiset mumps name namespace nfc nfd nfkc nfkd nil normalize normalized nothing notice notify notnull nowait nth_value ntile nullable nullif nulls number occurrences_regex octet_length octets off offset oids operator options ordering others over overlay overriding owned owner parallel parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partition pascal passing passthrough password percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding prepared print_strict_params procedural procedures program publication query quote raise range rank reassign recheck recovery refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex rename repeatable replace replica requiring reset respect restart restore result_oid returned_cardinality returned_length returned_octet_length returned_sqlstate returning reverse routine_catalog routine_name routine_schema routines row_count row_number rowtype rule scale schema_name schemas scope scope_catalog scope_name scope_schema security selective self sensitive sequence sequences serializable server server_name setof share show simple skip slice snapshot source specific_name sqlcode sqlerror sqrt stable stacked standalone statement statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time table_name tables tablesample tablespace temp template ties token top_level_count transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex trigger_catalog trigger_name trigger_schema trim trim_array truncate trusted type types uescape unbounded uncommitted unencrypted unlink unlisten unlogged unnamed untyped upper uri use_column use_variable user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema vacuum valid validate validator value_of var_pop var_samp varbinary variable_conflict variadic verbose version versioning views volatile warning whitespace width_bucket window within wrapper xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate yes",types:op+"bigint int8 bigserial serial8 varbit bool box bytea cidr circle precision float8 inet int4 json jsonb line lseg macaddr macaddr8 money numeric pg_lsn point polygon float4 int2 smallserial serial2 serial serial4 text timetz timestamptz tsquery tsvector txid_snapshot uuid xml"}),H_="E",W_="b",G_="i",V_="a",q_="e",Y_="r",j_="S",X_="f",z_="T",K_="n",$_="a",J_="d",Q_="s",Jt="r",wn="i",Z_="S",Di="t",ki="v",_t="m",Do="c",Qt="f",ct="p",Zt="I";function eO(n,e,t,i,s=!1,r=null,a=1,l=c=>`https://www.postgresql.org/docs/current/${c}.html`){let c=!1;function h(){c=!0,i=()=>{}}function f(){if(c)throw new Error("cancelled")}async function u(){const m=n.match(/^\\([?hdzsl]\S*)(.*)/);if(!m)return i(`unsupported command: ${n}`),!1;let[,T,N]=m;if(T=T.replace(/^lo_list/,"dl"),T=T.replace(/^z/,"dp"),T==="?")return i(oO),!1;if(T==="h"){const O=(N??"").trim().toUpperCase().replace(/\s+/g," ");if(O==="")return i(`Available help:
`+Pi.map(R=>R[0]).join(`
`)),!1;{let R=O==="*"?Pi:Pi.filter(E=>E[0]===O);if(R.length===0&&(R=Pi.filter(E=>E[0].startsWith(O))),R.length===0){const E=O.split(" ");for(let g=E.length;g>0;g--){const S=E.slice(0,g).join(" ");if(R=Pi.filter(d=>d[0].startsWith(S)),R.length>0)break}}if(R.length===0)return i(`No help available for "${N.trim()}".
Try \\h with no arguments to see available help.`),!1;for(const E of R){const g={};ee(g),E[3](g),i(`Command:     ${E[0]}
Description: ${E[1]}
Syntax:
${g.data}

URL: ${l(E[2])}

`)}return!1}}const b=async(O,R=!1)=>{f(),s&&!R&&i(`/******** QUERY *********/
${O}
/************************/`);const E=await t(O);return f(),E};let p;try{if(!r){const g=await b("SHOW server_version_num",!0);r=parseInt(g.rows[0][0],10)}p={sversion:r,db:{dbName:e,sversion:r,std_strings:a,status:0,encoding:6},popt:{topt:{default_footer:!0},nullPrint:""}};const O=[N,0];await(T[0]==="d"?at(O,!0,T):T[0]==="s"?T[1]==="f"||T[1]==="v"?fe(O,!0,T,T[1]==="f"):0:T[0]==="l"?We(O,!0,T):0)===0&&i(`invalid command \\${T}`);let R,E=[];for(;R=Dn(O,0,null,!0);)E.push(et('\\%s: extra argument "%s" ignored',T,R));E.length>0&&i(E.join(`
`))}catch(O){return i("ERROR:  "+O.message),c?null:!1}function L(O,...R){i(et(O,...R))}function x(O,R,E,g,S,d,y,F,P,I){let X={},j={},G;if(ee(X),G=W(p.db,O,R,E,g,S,d,y,F,X,j),j=j.value,P&&(P.value=G),j>=I)return L("improper qualified name (too many dotted names): %s",R),!1;if(I>1&&j==I-1){if(Kh(p.db)==null)return L("You are currently not connected to a database."),!1;if(re(Kh(p.db),X.data)!=0)return L("cross-database references are not implemented: %s",R),!1}return!0}function W(O,R,E,g,S,d,y,F,P,I,X){let j={},G={},ce=!1;return X||(X={}),X.value=0,E==null?(P&&(C(R,g?"  AND ":"WHERE "),g=!0,ce=!0,_(R,`%s
`,P)),ce):(ee(j),ee(G),V(fp(O),d?I:null,d?j:null,G,E,S,!0,X),y&&G.len>2&&re(G.data,"^(.*)$")!=0&&(C(R,g?"  AND ":"WHERE "),g=!0,ce=!0,F?(_(R,"(%s OPERATOR(pg_catalog.~) ",y),Jn(R,G.data,O),Wi(O)>=12e4&&C(R," COLLATE pg_catalog.default"),_(R,`
        OR %s OPERATOR(pg_catalog.~) `,F),Jn(R,G.data,O),Wi(O)>=12e4&&C(R," COLLATE pg_catalog.default"),C(R,`)
`)):(_(R,"%s OPERATOR(pg_catalog.~) ",y),Jn(R,G.data,O),Wi(O)>=12e4&&C(R," COLLATE pg_catalog.default"),Le(R,`
`))),d&&j.len>2?re(j.data,"^(.*)$")!=0&&d&&(C(R,g?"  AND ":"WHERE "),g=!0,ce=!0,_(R,"%s OPERATOR(pg_catalog.~) ",d),Jn(R,j.data,O),Wi(O)>=12e4&&C(R," COLLATE pg_catalog.default"),Le(R,`
`)):P&&(C(R,g?"  AND ":"WHERE "),g=!0,ce=!0,_(R,`%s
`,P)),ce)}function V(O,R,E,g,S,d,y,F){let P=[{},{},{}],I=0,X={},j={},G={},ce,oe,Pt;$n(S),$n(g),$n(!R||E),$n(F),F.value=0,ce=!1,Pt=S,R?G=2:E?G=1:G=0,j=P[I],oe=!0,ee(X),ee(j),C(j,"^(");let qe=0,he;for(;(he=Pt[qe])!=null;)he=='"'?(ce&&Pt[qe+1]=='"'?(Le(j,'"'),oe&&Le(X,'"'),qe++):ce=!ce,qe++):!ce&&iO(he)?(Le(j,Ua(he)),oe&&Le(X,Ua(he)),qe++):!ce&&he=="*"?(C(j,".*"),oe&&Le(X,"*"),qe++):!ce&&he=="?"?(Le(j,"."),oe&&Le(X,"?"),qe++):!ce&&he=="."?(oe=!1,F.value++,I<G?(C(j,")$"),j=P[++I],ee(j),C(j,"^("),qe++):(Le(j,he),qe++)):he=="$"?(C(j,"\\$"),oe&&Le(X,"$"),qe++):(((ce||d)&&Pe("|*+?()[]{}.^$\\",he)!=null||he=="["&&Pt[qe+1]=="]")&&Le(j,"\\"),oe&&Le(X,he),Le(j,he),qe++);C(j,")$"),C(g,j.data),j=P[--I],E&&I>=0&&(C(E,j.data),j=P[--I]),R&&I>=0&&C(R,X.data)}function H(O){let R;switch(O){case 21:case 23:case 20:case 700:case 701:case 1700:case 26:case 28:case 5069:case 29:case 790:R="r";break;default:R="l";break}return R}function M(O,R,E,g,S){let d={},y,F,P;for(q(d,R.topt,R.title,up(O),me(O)),$n(R.translate_columns==null||R.translate_columns==null||R.n_translate_columns>=d.ncolumns),y=0;y<d.ncolumns;y++)se(d,dp(O,y),R.translate_header,H(rO(O,y)));for(F=0;F<d.nrows;F++)for(P=0;P<d.ncolumns;P++){let I,X;Ke(O,F,P)?I=R.nullPrint?R.nullPrint:"":(I=D(O,F,P),d.aligns[P]=="r"&&R.topt.numericLocale&&(I=format_numeric_locale(I))),X=R.translate_columns&&R.translate_columns[P],z(d,I,X)}if(R.footers)for(let I of R.footers)Y(d,I);K(d)}function q(O,R,E,g,S){O.opt=R,O.title=E,O.ncolumns=g,O.nrows=S,O.headers=[],O.cells=[],O.footers=null,O.aligns=[]}function se(O,R,E,g){E&&(R=o(R)),O.headers.push(R),O.header=R,O.aligns.push(g),O.align=g}function z(O,R,E,g){E&&(R=o(R)),O.cells.push(R),O.cell=R}function Y(O,R){O.footers==null&&(O.footers=[]),O.footers.push(R),O.footer=R}function te(O,R){O.footers&&O.footers.pop(),Y(O,R)}function K(O,R,E,g){i({...O})}async function fe(O,R,E,g){let S=2,d=Pe(E,"+")!=null,y={},F,P={value:0},I=g?0:1;return ee(y),F=Dn(O,4),F?await Te(I,F,P)&&await ye(I,P.value,y)?d?de(y.data,g):i(y.data):S=5:(L(g?"function name is required":"view name is required"),S=5),S}function de(O,R){let E=R,g=0,S="";O=O.trimEnd().split(`
`);for(let d of O)E&&(ei(d,"AS ",3)==0||ei(d,"BEGIN ",6)==0||ei(d,"RETURN ",7)==0)&&(E=!1),E||g++,E?S+=et(`        %s
`,d):S+=et(`%-7d %s
`,g,d);i(S)}async function Te(O,R,E){let g=!0,S={};ee(S);let d;switch(O){case 0:C(S,"SELECT "),Jn(S,R,p.db),_(S,"::pg_catalog.%s::pg_catalog.oid",Pe(R,"(")!==null?"regprocedure":"regproc");break;case 1:C(S,"SELECT "),Jn(S,R,p.db),C(S,"::pg_catalog.regclass::pg_catalog.oid");break}try{d=await b(S.data),d&&me(d)==1?E.value=ko(D(d,0,0)):(L("Error when querying"),g=!1)}catch(y){L("ERROR:  "+y.message),g=!1}return g}async function ye(O,R,E){let g=!0,S={};ee(S);let d;switch(O){case 0:k(S,"SELECT pg_catalog.pg_get_functiondef(%u)",R);break;case 1:p.sversion>=90400?k(S,"SELECT nspname, relname, relkind, pg_catalog.pg_get_viewdef(c.oid, true), pg_catalog.array_remove(pg_catalog.array_remove(c.reloptions,'check_option=local'),'check_option=cascaded') AS reloptions, CASE WHEN 'check_option=local' = ANY (c.reloptions) THEN 'LOCAL'::text WHEN 'check_option=cascaded' = ANY (c.reloptions) THEN 'CASCADED'::text ELSE NULL END AS checkoption FROM pg_catalog.pg_class c LEFT JOIN pg_catalog.pg_namespace n ON c.relnamespace = n.oid WHERE c.oid = %u",R):k(S,"SELECT nspname, relname, relkind, pg_catalog.pg_get_viewdef(c.oid, true), c.reloptions AS reloptions, NULL AS checkoption FROM pg_catalog.pg_class c LEFT JOIN pg_catalog.pg_namespace n ON c.relnamespace = n.oid WHERE c.oid = %u",R);break}if(d=await b(S.data),d&&me(d)==1){switch(Po(E),O){case 0:C(E,D(d,0,0));break;case 1:let y=D(d,0,0),F=D(d,0,1),P=D(d,0,2),I=D(d,0,3),X=D(d,0,4),j=D(d,0,5);switch(P[0]){case ki:C(E,"CREATE OR REPLACE VIEW ");break;default:L('"%s.%s" is not a view',y,F),g=!1;break}_(E,"%s.",Oe(y)),C(E,Oe(F)),X!=null&&pn(X)>2&&(C(E,`
 WITH (`),Ne(E,X,"",p.encoding,p.db.standard_strings)||(L("could not parse reloptions array"),g=!1),Le(E,")")),_(E,` AS
%s`,I),E.len>0&&E.data[E.len-1]==";"&&(E.data=E.data.slice(0,E.len-1)),j&&j[0]!=null&&_(E,`
 WITH %s CHECK OPTION`,j);break}E.len>0&&E.data[E.len-1]!=`
`&&Le(E,`
`)}else L("Error when querying"),g=!1;return g}function Ne(O,R,E,g,S){let d=[],y={},F;if(!ke(R,d,y))return!1;for(y=y.value,F=0;F<y;F++){let P=d[F],[I,X]=P.split("=");X??(X=""),F>0&&C(O,", "),_(O,"%s%s=",E,Oe(I)),re(Oe(X),X)==0?C(O,X):Ba(O,X,g,S)}return!0}function ke(O,R,E){let g,S,d;if(g=pn(O),E.value=0,g<2||O[0]!="{"||O[g-1]!="}")return!1;let y=0;for(y++,d=0;O[y]!="}";){if(O[y]==null)return!1;for(S="";O[y]!="}"&&O[y]!=",";){if(O[y]==null)return!1;if(O[y]!='"')S+=O[y++];else{for(y++;O[y]!='"';){if(O[y]==null||O[y]=="\\"&&(y++,O[y]==null))return!1;S+=O[y++]}y++}}R[d]=S,O[y]==","&&y++,d++}return O[y+1]&&O[y+1]!=null?!1:(E.value=d,!0)}function Oe(O){let R={};ee(R);let E=!1;return O[0]>="a"&&O[0]<="z"||O[0]=="_"?/[^a-z0-9_]/.test(O)&&(E=!0):E=!0,E||new Set(["all","analyse","analyze","and","any","array","as","asc","asymmetric","authorization","between","bigint","binary","bit","boolean","both","case","cast","char","character","check","coalesce","collate","collation","column","concurrently","constraint","create","cross","current_catalog","current_date","current_role","current_schema","current_time","current_timestamp","current_user","dec","decimal","default","deferrable","desc","distinct","do","else","end","except","exists","extract","false","fetch","float","for","foreign","freeze","from","full","grant","greatest","group","grouping","having","ilike","in","initially","inner","inout","int","integer","intersect","interval","into","is","isnull","join","json","json_array","json_arrayagg","json_object","json_objectagg","json_scalar","json_serialize","lateral","leading","least","left","like","limit","localtime","localtimestamp","national","natural","nchar","none","normalize","not","notnull","null","nullif","numeric","offset","on","only","or","order","out","outer","overlaps","overlay","placing","position","precision","primary","real","references","returning","right","row","select","session_user","setof","similar","smallint","some","substring","symmetric","system_user","table","tablesample","then","time","timestamp","to","trailing","treat","trim","true","union","unique","user","using","values","varchar","variadic","verbose","when","where","window","with","xmlattributes","xmlconcat","xmlelement","xmlexists","xmlforest","xmlnamespaces","xmlparse","xmlpi","xmlroot","xmlserialize","xmltable"]).has(O)&&(E=!0),E?(Le(R,'"'),Le(R,O.replace(/"/g,'""')),Le(R,'"')):C(R,O),R.data}async function We(O,R,E){let g,S,d;return S=Dn(O,0),d=Pe(E,"+")!=null,g=await Rt(S,d),g?2:5}async function at(O,R,E){let g=2,S=!0,d,y,F;switch(d=Dn(O,0),y=Pe(E,"+")!=null,F=Pe(E,"S")!=null,E[1]){case void 0:case"+":case"S":d?S=await Gp(d,y,F):S=await kl("tvmsE",null,y,F);break;case"A":{let P=null;switch(d&&E[2]!=null&&E[2]!="+"&&(P=Dn(O,0)),E[2]){case void 0:case"+":S=await cn(d,y);break;case"c":S=await Sm(d,P,y);break;case"f":S=await Rm(d,P,y);break;case"o":S=await _m(d,P,y);break;case"p":S=await Om(d,P,y);break;default:g=0;break}}break;case"a":S=await $t(d,y,F);break;case"b":S=await Xn(d,y);break;case"c":ei(E,"dconfig",7)==0?S=await $p(d,y):S=await Kp(d,y,F);break;case"C":S=await Zp(d,y);break;case"d":ei(E,"ddp",3)==0?S=await Hp(d):S=await Wp(d,F);break;case"D":S=await zp(d,y,F);break;case"f":switch(E[2]){case void 0:case"+":case"S":case"a":case"n":case"p":case"t":case"w":S=await ze(O,E,d,y,F);break;default:g=0;break}break;case"g":S=await Dl(d,y,F);break;case"l":S=await Nm(y);break;case"L":S=await Xp(d,y,F);break;case"n":S=await tm(d,y,F);break;case"o":S=await ze(O,E,d,y,F);break;case"O":S=await em(d,y,F);break;case"p":S=await Bp(d,F);break;case"P":switch(E[2]){case void 0:case"+":case"t":case"i":case"n":S=await jp(E.slice(2),d,y);break;default:g=0;break}break;case"T":S=await Fp(d,y,F);break;case"t":case"v":case"m":case"i":case"s":case"E":S=await kl(E[1],d,y,F);break;case"r":if(E[2]=="d"&&E[3]=="s"){let P=null;d&&(P=Dn(O,0)),S=await qp(d,P)}else E[2]=="g"?S=await Yp(d,F):g=0;break;case"R":switch(E[2]){case"p":y?S=await Tm(d):S=await Em(d);break;case"s":S=await Am(d,y);break;default:g=0}break;case"u":S=await Dl(d,y,F);break;case"F":switch(E[2]){case void 0:case"+":S=await am(d,y);break;case"p":S=await nm(d,y);break;case"d":S=await rm(d,y);break;case"t":S=await om(d,y);break;default:g=0;break}break;case"e":switch(E[2]){case"s":S=await fm(d,y);break;case"u":S=await um(d,y);break;case"w":S=await hm(d,y);break;case"t":S=await dm(d,y);break;default:g=0;break}break;case"x":y?S=await mm(d):S=await pm(d);break;case"X":S=await Qp(d);break;case"y":S=await Jp(d,y);break;default:g=0}return S||(g=5),g}async function ze(O,R,E,g,S){let d,y=[],F=0;if(E){let P;for(;(P=Dn(O,0))!=null&&(y[F++]=P,!(F>=100)););}return R[1]=="f"?d=await Ts(R.slice(2),E,y,F,g,S):d=await Up(E,y,F,g,S),d}async function Rt(O,R){let E,g={},S=p.popt;return ee(g),k(g,`SELECT
  d.datname as "%s",
  pg_catalog.pg_get_userbyid(d.datdba) as "%s",
  pg_catalog.pg_encoding_to_char(d.encoding) as "%s",
`,A("Name"),A("Owner"),A("Encoding")),p.sversion>=15e4?_(g,`  CASE d.datlocprovider WHEN 'b' THEN 'builtin' WHEN 'c' THEN 'libc' WHEN 'i' THEN 'icu' END AS "%s",
`,A("Locale Provider")):_(g,`  'libc' AS "%s",
`,A("Locale Provider")),_(g,`  d.datcollate as "%s",
  d.datctype as "%s",
`,A("Collate"),A("Ctype")),p.sversion>=17e4?_(g,`  d.datlocale as "%s",
`,A("Locale")):p.sversion>=15e4?_(g,`  d.daticulocale as "%s",
`,A("Locale")):_(g,`  NULL as "%s",
`,A("Locale")),p.sversion>=16e4?_(g,`  d.daticurules as "%s",
`,A("ICU Rules")):_(g,`  NULL as "%s",
`,A("ICU Rules")),C(g,"  "),gt(g,"d.datacl"),R&&_(g,`,
  CASE WHEN pg_catalog.has_database_privilege(d.datname, 'CONNECT')
       THEN pg_catalog.pg_size_pretty(pg_catalog.pg_database_size(d.datname))
       ELSE 'No Access'
  END as "%s",
  t.spcname as "%s",
  pg_catalog.shobj_description(d.oid, 'pg_database') as "%s"`,A("Size"),A("Tablespace"),A("Description")),C(g,`
FROM pg_catalog.pg_database d
`),R&&C(g,`  JOIN pg_catalog.pg_tablespace t on d.dattablespace = t.oid
`),O&&!x(g,O,!1,!1,null,"d.datname",null,null,null,1)||(C(g,"ORDER BY 1;"),E=await b(g.data),!E)?!1:(S.nullPrint=null,S.title=o("List of databases"),S.translate_header=!0,M(E,S,p.queryFout,!1,p.logfile),!0)}async function $t(O,R,E){let g={},S,d=p.popt;return ee(g),k(g,`SELECT n.nspname as "%s",
  p.proname AS "%s",
  pg_catalog.format_type(p.prorettype, NULL) AS "%s",
  CASE WHEN p.pronargs = 0
    THEN CAST('*' AS pg_catalog.text)
    ELSE pg_catalog.pg_get_function_arguments(p.oid)
  END AS "%s",
`,A("Schema"),A("Name"),A("Result data type"),A("Argument data types")),p.sversion>=11e4?_(g,`  pg_catalog.obj_description(p.oid, 'pg_proc') as "%s"
FROM pg_catalog.pg_proc p
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.pronamespace
WHERE p.prokind = 'a'
`,A("Description")):_(g,`  pg_catalog.obj_description(p.oid, 'pg_proc') as "%s"
FROM pg_catalog.pg_proc p
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.pronamespace
WHERE p.proisagg
`,A("Description")),!E&&!O&&C(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(g,O,!0,!1,"n.nspname","p.proname",null,"pg_catalog.pg_function_is_visible(p.oid)",null,3)||(C(g,"ORDER BY 1, 2, 4;"),S=await b(g.data),!S)?!1:(d.nullPrint=null,d.title=o("List of aggregate functions"),d.translate_header=!0,M(S,d,p.queryFout,!1,p.logfile),!0)}async function cn(O,R){let E={},g,S=p.popt,d=[!1,!0,!1,!1];return p.sversion<90600?(L("The server (version %s) does not support access methods.",fn(p.sversion,!1,void 0)),!0):(ee(E),k(E,`SELECT amname AS "%s",
  CASE amtype WHEN 'i' THEN '%s' WHEN 't' THEN '%s' END AS "%s"`,A("Name"),A("Index"),A("Table"),A("Type")),R&&_(E,`,
  amhandler AS "%s",
  pg_catalog.obj_description(oid, 'pg_am') AS "%s"`,A("Handler"),A("Description")),C(E,`
FROM pg_catalog.pg_am
`),!x(E,O,!1,!1,null,"amname",null,null,null,1)||(C(E,"ORDER BY 1;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of access methods"),S.translate_header=!0,S.translate_columns=d,S.n_translate_columns=Ue(d),M(g,S,p.queryFout,!1,p.logfile),!0))}async function Xn(O,R){let E={},g,S=p.popt;return ee(E),k(E,`SELECT spcname AS "%s",
  pg_catalog.pg_get_userbyid(spcowner) AS "%s",
  pg_catalog.pg_tablespace_location(oid) AS "%s"`,A("Name"),A("Owner"),A("Location")),R&&(C(E,`,
  `),gt(E,"spcacl"),_(E,`,
  spcoptions AS "%s",
  pg_catalog.pg_size_pretty(pg_catalog.pg_tablespace_size(oid)) AS "%s",
  pg_catalog.shobj_description(oid, 'pg_tablespace') AS "%s"`,A("Options"),A("Size"),A("Description"))),C(E,`
FROM pg_catalog.pg_tablespace
`),!x(E,O,!1,!1,null,"spcname",null,null,null,1)||(C(E,"ORDER BY 1;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of tablespaces"),S.translate_header=!0,M(g,S,p.queryFout,!1,p.logfile),!0)}async function Ts(O,R,E,g,S,d){let y=Pe(O,"a")!=null,F=Pe(O,"n")!=null,P=Pe(O,"p")!=null,I=Pe(O,"t")!=null,X=Pe(O,"w")!=null,j,G={},ce,oe=p.popt,Pt=[!1,!1,!1,!1,!0,!0,!0,!1,!0,!1,!1,!1,!1],qe=[!1,!1,!1,!1,!0,!0,!1,!0,!1,!1,!1,!1];if(pn(O)!=tO(O,"anptwS+"))return L("\\df only takes [anptwS+] as options"),!0;if(P&&p.sversion<11e4)return L('\\df does not take a "%c" option with server version %s',"p",fn(p.sversion,!1,void 0)),!0;!y&&!F&&!P&&!I&&!X&&(y=F=I=X=!0,p.sversion>=11e4&&(P=!0)),ee(G),k(G,`SELECT n.nspname as "%s",
  p.proname as "%s",
`,A("Schema"),A("Name")),p.sversion>=11e4?_(G,`  pg_catalog.pg_get_function_result(p.oid) as "%s",
  pg_catalog.pg_get_function_arguments(p.oid) as "%s",
 CASE p.prokind
  WHEN 'a' THEN '%s'
  WHEN 'w' THEN '%s'
  WHEN 'p' THEN '%s'
  ELSE '%s'
 END as "%s"`,A("Result data type"),A("Argument data types"),A("agg"),A("window"),A("proc"),A("func"),A("Type")):_(G,`  pg_catalog.pg_get_function_result(p.oid) as "%s",
  pg_catalog.pg_get_function_arguments(p.oid) as "%s",
 CASE
  WHEN p.proisagg THEN '%s'
  WHEN p.proiswindow THEN '%s'
  WHEN p.prorettype = 'pg_catalog.trigger'::pg_catalog.regtype THEN '%s'
  ELSE '%s'
 END as "%s"`,A("Result data type"),A("Argument data types"),A("agg"),A("window"),A("trigger"),A("func"),A("Type")),S&&(_(G,`,
 CASE
  WHEN p.provolatile = 'i' THEN '%s'
  WHEN p.provolatile = 's' THEN '%s'
  WHEN p.provolatile = 'v' THEN '%s'
 END as "%s"`,A("immutable"),A("stable"),A("volatile"),A("Volatility")),p.sversion>=90600&&_(G,`,
 CASE
  WHEN p.proparallel = 'r' THEN '%s'
  WHEN p.proparallel = 's' THEN '%s'
  WHEN p.proparallel = 'u' THEN '%s'
 END as "%s"`,A("restricted"),A("safe"),A("unsafe"),A("Parallel")),_(G,`,
 pg_catalog.pg_get_userbyid(p.proowner) as "%s",
 CASE WHEN prosecdef THEN '%s' ELSE '%s' END AS "%s"`,A("Owner"),A("definer"),A("invoker"),A("Security")),C(G,`,
 `),gt(G,"p.proacl"),_(G,`,
 l.lanname as "%s"`,A("Language")),_(G,`,
 CASE WHEN l.lanname IN ('internal', 'c') THEN p.prosrc END as "%s"`,A("Internal name")),_(G,`,
 pg_catalog.obj_description(p.oid, 'pg_proc') as "%s"`,A("Description"))),C(G,`
FROM pg_catalog.pg_proc p
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.pronamespace
`);for(let he=0;he<g;he++)_(G,`     LEFT JOIN pg_catalog.pg_type t%d ON t%d.oid = p.proargtypes[%d]
     LEFT JOIN pg_catalog.pg_namespace nt%d ON nt%d.oid = t%d.typnamespace
`,he,he,he,he,he,he);if(S&&C(G,`     LEFT JOIN pg_catalog.pg_language l ON l.oid = p.prolang
`),j=!1,!(F&&y&&P&&I&&X))if(F)y||(j?C(G,"      AND "):(C(G,"WHERE "),j=!0),p.sversion>=11e4?C(G,`p.prokind <> 'a'
`):C(G,`NOT p.proisagg
`)),!P&&p.sversion>=11e4&&(j?C(G,"      AND "):(C(G,"WHERE "),j=!0),C(G,`p.prokind <> 'p'
`)),I||(j?C(G,"      AND "):(C(G,"WHERE "),j=!0),C(G,`p.prorettype <> 'pg_catalog.trigger'::pg_catalog.regtype
`)),X||(j?C(G,"      AND "):(C(G,"WHERE "),j=!0),p.sversion>=11e4?C(G,`p.prokind <> 'w'
`):C(G,`NOT p.proiswindow
`));else{let he=!1;C(G,`WHERE (
       `),j=!0,y&&(p.sversion>=11e4?C(G,`p.prokind = 'a'
`):C(G,`p.proisagg
`),he=!0),I&&(he&&C(G,"       OR "),C(G,`p.prorettype = 'pg_catalog.trigger'::pg_catalog.regtype
`),he=!0),P&&(he&&C(G,"       OR "),C(G,`p.prokind = 'p'
`),he=!0),X&&(he&&C(G,"       OR "),p.sversion>=11e4?C(G,`p.prokind = 'w'
`):C(G,`p.proiswindow
`)),C(G,`      )
`)}if(!x(G,R,j,!1,"n.nspname","p.proname",null,"pg_catalog.pg_function_is_visible(p.oid)",null,3))return!1;for(let he=0;he<g;he++)if(re(E[he],"-")!=0){let _i,Oi,Ni,bi;if(_i=et("nt%d.nspname",he),Oi=et("t%d.typname",he),Ni=et("pg_catalog.format_type(t%d.oid, NULL)",he),bi=et("pg_catalog.pg_type_is_visible(t%d.oid)",he),!x(G,eo(E[he]),!0,!1,_i,Oi,Ni,bi,null,3))return!1}else _(G,`  AND t%d.typname IS NULL
`,he);return!d&&!R&&C(G,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),C(G,"ORDER BY 1, 2, 4;"),ce=await b(G.data),ce?(oe.nullPrint=null,oe.title=o("List of functions"),oe.translate_header=!0,p.sversion>=90600?(oe.translate_columns=Pt,oe.n_translate_columns=Ue(Pt)):(oe.translate_columns=qe,oe.n_translate_columns=Ue(qe)),M(ce,oe,p.queryFout,!1,p.logfile),!0):!1}async function Fp(O,R,E){let g={},S,d=p.popt;return ee(g),k(g,`SELECT n.nspname as "%s",
  pg_catalog.format_type(t.oid, NULL) AS "%s",
`,A("Schema"),A("Name")),R&&(_(g,`  t.typname AS "%s",
  CASE WHEN t.typrelid != 0
      THEN CAST('tuple' AS pg_catalog.text)
    WHEN t.typlen < 0
      THEN CAST('var' AS pg_catalog.text)
    ELSE CAST(t.typlen AS pg_catalog.text)
  END AS "%s",
  pg_catalog.array_to_string(
      ARRAY(
          SELECT e.enumlabel
          FROM pg_catalog.pg_enum e
          WHERE e.enumtypid = t.oid
          ORDER BY e.enumsortorder
      ),
      E'\\n'
  ) AS "%s",
  pg_catalog.pg_get_userbyid(t.typowner) AS "%s",
`,A("Internal name"),A("Size"),A("Elements"),A("Owner")),gt(g,"t.typacl"),C(g,`,
  `)),_(g,`  pg_catalog.obj_description(t.oid, 'pg_type') as "%s"
`,A("Description")),C(g,`FROM pg_catalog.pg_type t
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace
`),C(g,"WHERE (t.typrelid = 0 "),C(g,`OR (SELECT c.relkind = 'c' FROM pg_catalog.pg_class c WHERE c.oid = t.typrelid))
`),(O==null||lr(O,"[]")==null)&&C(g,`  AND NOT EXISTS(SELECT 1 FROM pg_catalog.pg_type el WHERE el.oid = t.typelem AND el.typarray = t.oid)
`),!E&&!O&&C(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(g,eo(O),!0,!1,"n.nspname","t.typname","pg_catalog.format_type(t.oid, NULL)","pg_catalog.pg_type_is_visible(t.oid)",null,3)||(C(g,"ORDER BY 1, 2;"),S=await b(g.data),!S)?!1:(d.nullPrint=null,d.title=o("List of data types"),d.translate_header=!0,M(S,d,p.queryFout,!1,p.logfile),!0)}function eo(O){let R=["decimal","numeric","float","double precision","int","integer","bool[]","boolean[]","decimal[]","numeric[]","float[]","double precision[]","float4[]","real[]","float8[]","double precision[]","int[]","integer[]","int2[]","smallint[]","int4[]","integer[]","int8[]","bigint[]","time[]","time without time zone[]","timetz[]","time with time zone[]","timestamp[]","timestamp without time zone[]","timestamptz[]","timestamp with time zone[]","varbit[]","bit varying[]","varchar[]","character varying[]",null];if(O==null)return null;for(let E=0;R[E]!=null;E+=2)if(sO(O,R[E])==0)return R[E+1];return O}async function Up(O,R,E,g,S){let d={},y,F=p.popt;if(ee(d),k(d,`SELECT n.nspname as "%s",
  o.oprname AS "%s",
  CASE WHEN o.oprkind='l' THEN NULL ELSE pg_catalog.format_type(o.oprleft, NULL) END AS "%s",
  CASE WHEN o.oprkind='r' THEN NULL ELSE pg_catalog.format_type(o.oprright, NULL) END AS "%s",
  pg_catalog.format_type(o.oprresult, NULL) AS "%s",
`,A("Schema"),A("Name"),A("Left arg type"),A("Right arg type"),A("Result type")),g&&_(d,`  o.oprcode AS "%s",
`,A("Function")),_(d,`  coalesce(pg_catalog.obj_description(o.oid, 'pg_operator'),
           pg_catalog.obj_description(o.oprcode, 'pg_proc')) AS "%s"
FROM pg_catalog.pg_operator o
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = o.oprnamespace
`,A("Description")),E>=2?(E=2,C(d,`     LEFT JOIN pg_catalog.pg_type t0 ON t0.oid = o.oprleft
     LEFT JOIN pg_catalog.pg_namespace nt0 ON nt0.oid = t0.typnamespace
     LEFT JOIN pg_catalog.pg_type t1 ON t1.oid = o.oprright
     LEFT JOIN pg_catalog.pg_namespace nt1 ON nt1.oid = t1.typnamespace
`)):E==1&&C(d,`     LEFT JOIN pg_catalog.pg_type t0 ON t0.oid = o.oprright
     LEFT JOIN pg_catalog.pg_namespace nt0 ON nt0.oid = t0.typnamespace
`),!S&&!O&&C(d,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(d,O,!S&&!O,!0,"n.nspname","o.oprname",null,"pg_catalog.pg_operator_is_visible(o.oid)",null,3))return!1;E==1&&C(d,`  AND o.oprleft = 0
`);for(let P=0;P<E;P++)if(re(R[P],"-")!=0){let I,X,j,G;if(I=et("nt%d.nspname",P),X=et("t%d.typname",P),j=et("pg_catalog.format_type(t%d.oid, NULL)",P),G=et("pg_catalog.pg_type_is_visible(t%d.oid)",P),!x(d,eo(R[P]),!0,!1,I,X,j,G,null,3))return!1}else _(d,`  AND t%d.typname IS NULL
`,P);return C(d,"ORDER BY 1, 2, 3, 4;"),y=await b(d.data),y?(F.nullPrint=null,F.title=o("List of operators"),F.translate_header=!0,M(y,F,p.queryFout,!1,p.logfile),!0):!1}async function Bp(O,R){let E={},g,S=p.popt,d=[!1,!1,!0,!1,!1,!1];return ee(E),k(E,`SELECT n.nspname as "%s",
  c.relname as "%s",
  CASE c.relkind WHEN 'r' THEN '%s' WHEN 'v' THEN '%s' WHEN 'm' THEN '%s' WHEN 'S' THEN '%s' WHEN 'f' THEN '%s' WHEN 'p' THEN '%s' END as "%s",
  `,A("Schema"),A("Name"),A("table"),A("view"),A("materialized view"),A("sequence"),A("foreign table"),A("partitioned table"),A("Type")),gt(E,"c.relacl"),_(E,`,
  pg_catalog.array_to_string(ARRAY(
    SELECT attname || E':\\n  ' || pg_catalog.array_to_string(attacl, E'\\n  ')
    FROM pg_catalog.pg_attribute a
    WHERE attrelid = c.oid AND NOT attisdropped AND attacl IS NOT NULL
  ), E'\\n') AS "%s"`,A("Column privileges")),p.sversion>=90500&&p.sversion<1e5&&_(E,`,
  pg_catalog.array_to_string(ARRAY(
    SELECT polname
    || CASE WHEN polcmd != '*' THEN
           E' (' || polcmd::pg_catalog.text || E'):'
       ELSE E':'
       END
    || CASE WHEN polqual IS NOT NULL THEN
           E'\\n  (u): ' || pg_catalog.pg_get_expr(polqual, polrelid)
       ELSE E''
       END
    || CASE WHEN polwithcheck IS NOT NULL THEN
           E'\\n  (c): ' || pg_catalog.pg_get_expr(polwithcheck, polrelid)
       ELSE E''
       END    || CASE WHEN polroles <> '{0}' THEN
           E'\\n  to: ' || pg_catalog.array_to_string(
               ARRAY(
                   SELECT rolname
                   FROM pg_catalog.pg_roles
                   WHERE oid = ANY (polroles)
                   ORDER BY 1
               ), E', ')
       ELSE E''
       END
    FROM pg_catalog.pg_policy pol
    WHERE polrelid = c.oid), E'\\n')
    AS "%s"`,A("Policies")),p.sversion>=1e5&&_(E,`,
  pg_catalog.array_to_string(ARRAY(
    SELECT polname
    || CASE WHEN NOT polpermissive THEN
       E' (RESTRICTIVE)'
       ELSE '' END
    || CASE WHEN polcmd != '*' THEN
           E' (' || polcmd::pg_catalog.text || E'):'
       ELSE E':'
       END
    || CASE WHEN polqual IS NOT NULL THEN
           E'\\n  (u): ' || pg_catalog.pg_get_expr(polqual, polrelid)
       ELSE E''
       END
    || CASE WHEN polwithcheck IS NOT NULL THEN
           E'\\n  (c): ' || pg_catalog.pg_get_expr(polwithcheck, polrelid)
       ELSE E''
       END    || CASE WHEN polroles <> '{0}' THEN
           E'\\n  to: ' || pg_catalog.array_to_string(
               ARRAY(
                   SELECT rolname
                   FROM pg_catalog.pg_roles
                   WHERE oid = ANY (polroles)
                   ORDER BY 1
               ), E', ')
       ELSE E''
       END
    FROM pg_catalog.pg_policy pol
    WHERE polrelid = c.oid), E'\\n')
    AS "%s"`,A("Policies")),C(E,`
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
WHERE c.relkind IN ('r','v','m','S','f','p')
`),!R&&!O&&C(E,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(E,O,!0,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(C(E,"ORDER BY 1, 2;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,k(E,o("Access privileges")),S.title=E.data,S.translate_header=!0,S.translate_columns=d,S.n_translate_columns=Ue(d),M(g,S,p.queryFout,!1,p.logfile),!0)}async function Hp(O){let R={},E,g=p.popt,S=[!1,!1,!0,!1];return ee(R),k(R,`SELECT pg_catalog.pg_get_userbyid(d.defaclrole) AS "%s",
  n.nspname AS "%s",
  CASE d.defaclobjtype WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' END AS "%s",
  `,A("Owner"),A("Schema"),Y_,A("table"),j_,A("sequence"),X_,A("function"),z_,A("type"),K_,A("schema"),A("Type")),gt(R,"d.defaclacl"),C(R,`
FROM pg_catalog.pg_default_acl d
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = d.defaclnamespace
`),!x(R,O,!1,!1,null,"n.nspname","pg_catalog.pg_get_userbyid(d.defaclrole)",null,null,3)||(C(R,"ORDER BY 1, 2, 3;"),E=await b(R.data),!E)?!1:(g.nullPrint=null,k(R,o("Default access privileges")),g.title=R.data,g.translate_header=!0,g.translate_columns=S,g.n_translate_columns=Ue(S),M(E,g,p.queryFout,!1,p.logfile),!0)}async function Wp(O,R){let E={},g,S=p.popt,d=[!1,!1,!0,!1];return ee(E),_(E,`SELECT DISTINCT tt.nspname AS "%s", tt.name AS "%s", tt.object AS "%s", d.description AS "%s"
FROM (
`,A("Schema"),A("Name"),A("Object"),A("Description")),_(E,`  SELECT pgc.oid as oid, pgc.tableoid AS tableoid,
  n.nspname as nspname,
  CAST(pgc.conname AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_constraint pgc
    JOIN pg_catalog.pg_class c ON c.oid = pgc.conrelid
    LEFT JOIN pg_catalog.pg_namespace n     ON n.oid = c.relnamespace
`,A("table constraint")),!R&&!O&&C(E,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(E,O,!R&&!O,!1,"n.nspname","pgc.conname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(_(E,`UNION ALL
  SELECT pgc.oid as oid, pgc.tableoid AS tableoid,
  n.nspname as nspname,
  CAST(pgc.conname AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_constraint pgc
    JOIN pg_catalog.pg_type t ON t.oid = pgc.contypid
    LEFT JOIN pg_catalog.pg_namespace n     ON n.oid = t.typnamespace
`,A("domain constraint")),!R&&!O&&C(E,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(E,O,!R&&!O,!1,"n.nspname","pgc.conname",null,"pg_catalog.pg_type_is_visible(t.oid)",null,3))||(_(E,`UNION ALL
  SELECT o.oid as oid, o.tableoid as tableoid,
  n.nspname as nspname,
  CAST(o.opcname AS pg_catalog.text) as name,
  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_opclass o
    JOIN pg_catalog.pg_am am ON o.opcmethod = am.oid
    JOIN pg_catalog.pg_namespace n ON n.oid = o.opcnamespace
`,A("operator class")),!R&&!O&&C(E,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(E,O,!0,!1,"n.nspname","o.opcname",null,"pg_catalog.pg_opclass_is_visible(o.oid)",null,3))||(_(E,`UNION ALL
  SELECT opf.oid as oid, opf.tableoid as tableoid,
  n.nspname as nspname,
  CAST(opf.opfname AS pg_catalog.text) AS name,
  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_opfamily opf
    JOIN pg_catalog.pg_am am ON opf.opfmethod = am.oid
    JOIN pg_catalog.pg_namespace n ON opf.opfnamespace = n.oid
`,A("operator family")),!R&&!O&&C(E,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(E,O,!0,!1,"n.nspname","opf.opfname",null,"pg_catalog.pg_opfamily_is_visible(opf.oid)",null,3))||(_(E,`UNION ALL
  SELECT r.oid as oid, r.tableoid as tableoid,
  n.nspname as nspname,
  CAST(r.rulename AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_rewrite r
       JOIN pg_catalog.pg_class c ON c.oid = r.ev_class
       LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
  WHERE r.rulename != '_RETURN'
`,A("rule")),!R&&!O&&C(E,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(E,O,!0,!1,"n.nspname","r.rulename",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3))||(_(E,`UNION ALL
  SELECT t.oid as oid, t.tableoid as tableoid,
  n.nspname as nspname,
  CAST(t.tgname AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_trigger t
       JOIN pg_catalog.pg_class c ON c.oid = t.tgrelid
       LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
`,A("trigger")),!R&&!O&&C(E,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(E,O,!R&&!O,!1,"n.nspname","t.tgname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3))||(C(E,`) AS tt
  JOIN pg_catalog.pg_description d ON (tt.oid = d.objoid AND tt.tableoid = d.classoid AND d.objsubid = 0)
`),C(E,"ORDER BY 1, 2, 3;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("Object descriptions"),S.translate_header=!0,S.translate_columns=d,S.n_translate_columns=Ue(d),M(g,S,p.queryFout,!1,p.logfile),!0)}async function Gp(O,R,E){let g={},S,d;if(ee(g),k(g,`SELECT c.oid,
  n.nspname,
  c.relname
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
`),!E&&!O&&C(g,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(g,O,!E&&!O,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(C(g,"ORDER BY 2, 3;"),S=await b(g.data),!S))return!1;if(me(S)==0)return p.quiet||(O?L('Did not find any relation named "%s".',O):L("Did not find any relations.")),!1;for(d=0;d<me(S);d++){let y,F,P;if(y=D(S,d,0),F=D(S,d,1),P=D(S,d,2),!await Vp(F,P,y,R)||c)return!1}return!0}async function Vp(O,R,E,g){let S=!1,d={},y=null,F=p.popt.topt,P={},I,X=null,j=[],G={},ce={},oe,Pt=-1,qe=-1,he=-1,_i=-1,Oi=-1,Ni=-1,bi=-1,As=-1,Ss=-1,Rs=-1,_s=-1,Os=-1,Ns=-1,bs=-1,no,U={},Cs=!1;if(F.default_footer=!1,F.expanded=!1,ee(d),ee(G),ee(ce),p.sversion>=12e4?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, c.relrowsecurity, c.relforcerowsecurity, false AS relhasoids, c.relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident, am.amname
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
LEFT JOIN pg_catalog.pg_am am ON (c.relam = am.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",E):p.sversion>=1e5?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, c.relrowsecurity, c.relforcerowsecurity, c.relhasoids, c.relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",E):p.sversion>=90500?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, c.relrowsecurity, c.relforcerowsecurity, c.relhasoids, false as relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",E):p.sversion>=90400?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, false, false, c.relhasoids, false as relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",E):k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, false, false, c.relhasoids, false as relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",E),y=await b(d.data),!y)return S;if(me(y)==0)return p.quiet||L("Did not find any relation with OID %s.",E),S;if(U.checks=jh(D(y,0,0)),U.relkind=D(y,0,1),U.hasindex=re(D(y,0,2),"t")==0,U.hasrules=re(D(y,0,3),"t")==0,U.hastriggers=re(D(y,0,4),"t")==0,U.rowsecurity=re(D(y,0,5),"t")==0,U.forcerowsecurity=re(D(y,0,6),"t")==0,U.hasoids=re(D(y,0,7),"t")==0,U.ispartition=re(D(y,0,8),"t")==0,U.reloptions=xn(D(y,0,9)),U.tablespace=ko(D(y,0,10)),U.reloftype=re(D(y,0,11),"")!=0?xn(D(y,0,11)):null,U.relpersistence=D(y,0,12),U.relreplident=p.sversion>=90400?D(y,0,13):"d",p.sversion>=12e4?U.relam=Ke(y,0,14)?null:xn(D(y,0,14)):U.relam=null,y=null,U.relkind==Z_){let v=null,J=p.popt,ae=[null,null];if(p.sversion>=1e5?(k(d,`SELECT pg_catalog.format_type(seqtypid, NULL) AS "%s",
       seqstart AS "%s",
       seqmin AS "%s",
       seqmax AS "%s",
       seqincrement AS "%s",
       CASE WHEN seqcycle THEN '%s' ELSE '%s' END AS "%s",
       seqcache AS "%s"
`,A("Type"),A("Start"),A("Minimum"),A("Maximum"),A("Increment"),A("yes"),A("no"),A("Cycles?"),A("Cache")),_(d,`FROM pg_catalog.pg_sequence
WHERE seqrelid = '%s';`,E)):(k(d,`SELECT 'bigint' AS "%s",
       start_value AS "%s",
       min_value AS "%s",
       max_value AS "%s",
       increment_by AS "%s",
       CASE WHEN is_cycled THEN '%s' ELSE '%s' END AS "%s",
       cache_value AS "%s"
`,A("Type"),A("Start"),A("Minimum"),A("Maximum"),A("Increment"),A("yes"),A("no"),A("Cycles?"),A("Cache")),_(d,"FROM %s",Oe(O)),_(d,".%s;",Oe(R))),y=await b(d.data),!y)return S;if(k(d,`SELECT pg_catalog.quote_ident(nspname) || '.' ||
   pg_catalog.quote_ident(relname) || '.' ||
   pg_catalog.quote_ident(attname),
   d.deptype
FROM pg_catalog.pg_class c
INNER JOIN pg_catalog.pg_depend d ON c.oid=d.refobjid
INNER JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
INNER JOIN pg_catalog.pg_attribute a ON (
 a.attrelid=c.oid AND
 a.attnum=d.refobjsubid)
WHERE d.classid='pg_catalog.pg_class'::pg_catalog.regclass
 AND d.refclassid='pg_catalog.pg_class'::pg_catalog.regclass
 AND d.objid='%s'
 AND d.deptype IN ('a', 'i')`,E),v=await b(d.data),v){if(me(v)==1)switch(D(v,0,1)[0]){case"a":ae[0]=Mo(o("Owned by: %s"),D(v,0,0));break;case"i":ae[0]=Mo(o("Sequence for identity column: %s"),D(v,0,0));break}}else return S;return U.relpersistence=="u"?k(G,o('Unlogged sequence "%s.%s"'),O,R):k(G,o('Sequence "%s.%s"'),O,R),J.footers=ae,J.topt.default_footer=!1,J.title=G.data,J.translate_header=!0,M(y,J,p.queryFout,!1,p.logfile),S=!0,S}if((U.relkind==Jt||U.relkind==ki||U.relkind==_t||U.relkind==Qt||U.relkind==Do||U.relkind==ct)&&(Cs=!0),oe=0,k(d,"SELECT a.attname"),Pt=oe++,C(d,`,
  pg_catalog.format_type(a.atttypid, a.atttypmod)`),qe=oe++,Cs&&(C(d,`,
  (SELECT pg_catalog.pg_get_expr(d.adbin, d.adrelid, true)
   FROM pg_catalog.pg_attrdef d
   WHERE d.adrelid = a.attrelid AND d.adnum = a.attnum AND a.atthasdef),
  a.attnotnull`),he=oe++,_i=oe++,C(d,`,
  (SELECT c.collname FROM pg_catalog.pg_collation c, pg_catalog.pg_type t
   WHERE c.oid = a.attcollation AND t.oid = a.atttypid AND a.attcollation <> t.typcollation) AS attcollation`),Oi=oe++,p.sversion>=1e5?C(d,`,
  a.attidentity`):C(d,`,
  ''::pg_catalog.char AS attidentity`),Ni=oe++,p.sversion>=12e4?C(d,`,
  a.attgenerated`):C(d,`,
  ''::pg_catalog.char AS attgenerated`),bi=oe++),(U.relkind==wn||U.relkind==Zt)&&(p.sversion>=11e4&&(_(d,`,
  CASE WHEN a.attnum <= (SELECT i.indnkeyatts FROM pg_catalog.pg_index i WHERE i.indexrelid = '%s') THEN '%s' ELSE '%s' END AS is_key`,E,A("yes"),A("no")),As=oe++),C(d,`,
  pg_catalog.pg_get_indexdef(a.attrelid, a.attnum, TRUE) AS indexdef`),Ss=oe++),U.relkind==Qt&&(C(d,`,
  CASE WHEN attfdwoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT pg_catalog.quote_ident(option_name) || ' ' || pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(attfdwoptions)), ', ') || ')' END AS attfdwoptions`),Rs=oe++),g&&(C(d,`,
  a.attstorage`),_s=oe++,p.sversion>=14e4&&!p.hide_compression&&(U.relkind==Jt||U.relkind==ct||U.relkind==_t)&&(C(d,`,
  a.attcompression AS attcompression`),Os=oe++),(U.relkind==Jt||U.relkind==wn||U.relkind==Zt||U.relkind==_t||U.relkind==Qt||U.relkind==ct)&&(C(d,`,
  CASE WHEN a.attstattarget=-1 THEN NULL ELSE a.attstattarget END AS attstattarget`),Ns=oe++),(U.relkind==Jt||U.relkind==ki||U.relkind==_t||U.relkind==Qt||U.relkind==Do||U.relkind==ct)&&(C(d,`,
  pg_catalog.col_description(a.attrelid, a.attnum)`),bs=oe++)),C(d,`
FROM pg_catalog.pg_attribute a`),_(d,`
WHERE a.attrelid = '%s' AND a.attnum > 0 AND NOT a.attisdropped`,E),C(d,`
ORDER BY a.attnum;`),y=await b(d.data),!y)return S;switch(no=me(y),U.relkind){case Jt:U.relpersistence=="u"?k(G,o('Unlogged table "%s.%s"'),O,R):k(G,o('Table "%s.%s"'),O,R);break;case ki:k(G,o('View "%s.%s"'),O,R);break;case _t:U.relpersistence=="u"?k(G,o('Unlogged materialized view "%s.%s"'),O,R):k(G,o('Materialized view "%s.%s"'),O,R);break;case wn:U.relpersistence=="u"?k(G,o('Unlogged index "%s.%s"'),O,R):k(G,o('Index "%s.%s"'),O,R);break;case Zt:U.relpersistence=="u"?k(G,o('Unlogged partitioned index "%s.%s"'),O,R):k(G,o('Partitioned index "%s.%s"'),O,R);break;case Di:k(G,o('TOAST table "%s.%s"'),O,R);break;case Do:k(G,o('Composite type "%s.%s"'),O,R);break;case Qt:k(G,o('Foreign table "%s.%s"'),O,R);break;case ct:U.relpersistence=="u"?k(G,o('Unlogged partitioned table "%s.%s"'),O,R):k(G,o('Partitioned table "%s.%s"'),O,R);break;default:k(G,'?%c? "%s.%s"',U.relkind,O,R);break}for(oe=0,j[oe++]=A("Column"),j[oe++]=A("Type"),Cs&&(j[oe++]=A("Collation"),j[oe++]=A("Nullable"),j[oe++]=A("Default")),As>=0&&(j[oe++]=A("Key?")),Ss>=0&&(j[oe++]=A("Definition")),Rs>=0&&(j[oe++]=A("FDW options")),_s>=0&&(j[oe++]=A("Storage")),Os>=0&&(j[oe++]=A("Compression")),Ns>=0&&(j[oe++]=A("Stats target")),bs>=0&&(j[oe++]=A("Description")),$n(oe<=Ue(j)),q(P,F,G.data,oe,no),I=0;I<oe;I++)se(P,j[I],!0,"l");for(I=0;I<no;I++){if(z(P,D(y,I,Pt),!1),z(P,D(y,I,qe),!1),Cs){let v,J,ae;z(P,D(y,I,Oi),!1),z(P,re(D(y,I,_i),"t")==0?"not null":"",!1),v=D(y,I,Ni),J=D(y,I,bi),v[0]==$_?ae="generated always as identity":v[0]==J_?ae="generated by default as identity":J[0]==Q_?ae=Mo("generated always as (%s) stored",D(y,I,he)):ae=D(y,I,he),z(P,ae,!1)}if(As>=0&&z(P,D(y,I,As),!0),Ss>=0&&z(P,D(y,I,Ss),!1),Rs>=0&&z(P,D(y,I,Rs),!1),_s>=0){let v=D(y,I,_s);z(P,v[0]=="p"?"plain":v[0]=="m"?"main":v[0]=="x"?"extended":v[0]=="e"?"external":"???",!1)}if(Os>=0){let v=D(y,I,Os);z(P,v[0]=="p"?"pglz":v[0]=="l"?"lz4":v[0]==null?"":"???",!1)}Ns>=0&&z(P,D(y,I,Ns),!1),bs>=0&&z(P,D(y,I,bs),!1)}if(U.ispartition){let v;if(k(d,`SELECT inhparent::pg_catalog.regclass,
  pg_catalog.pg_get_expr(c.relpartbound, c.oid),
  `),C(d,p.sversion>=14e4?"inhdetachpending":"false as inhdetachpending"),g&&C(d,`,
  pg_catalog.pg_get_partition_constraintdef(c.oid)`),_(d,`
FROM pg_catalog.pg_class c JOIN pg_catalog.pg_inherits i ON c.oid = inhrelid
WHERE c.oid = '%s';`,E),v=await b(d.data),!v)return S;if(me(v)>0){let J=D(v,0,0),ae=D(v,0,1),ue=D(v,0,2);if(k(ce,o("Partition of: %s %s%s"),J,ae,re(ue,"t")==0?" DETACH PENDING":""),Y(P,ce.data),g){let Se=null;Ke(v,0,3)||(Se=D(v,0,3)),Se==null||Se[0]==null?k(ce,o("No partition constraint")):k(ce,o("Partition constraint: %s"),Se),Y(P,ce.data)}}}if(U.relkind==ct){let v;if(k(d,"SELECT pg_catalog.pg_get_partkeydef('%s'::pg_catalog.oid);",E),v=await b(d.data),!v)return S;if(me(v)==1){let J=D(v,0,0);k(ce,o("Partition key: %s"),J),Y(P,ce.data)}}if(U.relkind==Di){let v;if(k(d,`SELECT n.nspname, c.relname
FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
WHERE reltoastrelid = '%s';`,E),v=await b(d.data),!v)return S;if(me(v)==1){let J=D(v,0,0),ae=D(v,0,1);k(ce,o('Owning table: "%s.%s"'),J,ae),Y(P,ce.data)}}if(U.relkind==wn||U.relkind==Zt){let v;if(k(d,`SELECT i.indisunique, i.indisprimary, i.indisclustered, i.indisvalid,
  (NOT i.indimmediate) AND EXISTS (SELECT 1 FROM pg_catalog.pg_constraint WHERE conrelid = i.indrelid AND conindid = i.indexrelid AND contype IN ('p','u','x') AND condeferrable) AS condeferrable,
  (NOT i.indimmediate) AND EXISTS (SELECT 1 FROM pg_catalog.pg_constraint WHERE conrelid = i.indrelid AND conindid = i.indexrelid AND contype IN ('p','u','x') AND condeferred) AS condeferred,
`),p.sversion>=90400?C(d,`i.indisreplident,
`):C(d,`false AS indisreplident,
`),p.sversion>=15e4?C(d,`i.indnullsnotdistinct,
`):C(d,`false AS indnullsnotdistinct,
`),_(d,`  a.amname, c2.relname, pg_catalog.pg_get_expr(i.indpred, i.indrelid, true)
FROM pg_catalog.pg_index i, pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_am a
WHERE i.indexrelid = c.oid AND c.oid = '%s' AND c.relam = a.oid
AND i.indrelid = c2.oid;`,E),v=await b(d.data),v){if(me(v)!=1)return S;{let J=D(v,0,0),ae=D(v,0,1),ue=D(v,0,2),Se=D(v,0,3),ve=D(v,0,4),hn=D(v,0,5),lt=D(v,0,6),Ci=D(v,0,7),bm=D(v,0,8),Cm=D(v,0,9),Ml=D(v,0,10);re(ae,"t")==0?k(ce,o("primary key, ")):re(J,"t")==0?(k(ce,o("unique")),re(Ci,"t")==0&&C(ce,o(" nulls not distinct")),C(ce,o(", "))):Po(ce),_(ce,"%s, ",bm),_(ce,o('for table "%s.%s"'),O,Cm),pn(Ml)&&_(ce,o(", predicate (%s)"),Ml),re(ue,"t")==0&&C(ce,o(", clustered")),re(Se,"t")!=0&&C(ce,o(", invalid")),re(ve,"t")==0&&C(ce,o(", deferrable")),re(hn,"t")==0&&C(ce,o(", initially deferred")),re(lt,"t")==0&&C(ce,o(", replica identity")),Y(P,ce.data),U.relkind==wn&&await to(P,U.relkind,U.tablespace,!0)}}else return S}else if(U.relkind==Jt||U.relkind==_t||U.relkind==Qt||U.relkind==ct||U.relkind==Zt||U.relkind==Di){let v=null,J=0;if(U.hasindex){if(k(d,`SELECT c2.relname, i.indisprimary, i.indisunique, i.indisclustered, i.indisvalid, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true),
  pg_catalog.pg_get_constraintdef(con.oid, true), contype, condeferrable, condeferred`),p.sversion>=90400?C(d,", i.indisreplident"):C(d,", false AS indisreplident"),C(d,", c2.reltablespace"),_(d,`
FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
  LEFT JOIN pg_catalog.pg_constraint con ON (conrelid = i.indrelid AND conindid = i.indexrelid AND contype IN ('p','u','x'))
WHERE c.oid = '%s' AND c.oid = i.indrelid AND i.indexrelid = c2.oid
ORDER BY i.indisprimary DESC, c2.relname;`,E),v=await b(d.data),v)J=me(v);else return S;if(J>0)for(Y(P,o("Indexes:")),I=0;I<J;I++){if(k(d,'    "%s"',D(v,I,0)),re(D(v,I,7),"x")==0)_(d," %s",D(v,I,6));else{let ae,ue;re(D(v,I,1),"t")==0?C(d," PRIMARY KEY,"):re(D(v,I,2),"t")==0&&(re(D(v,I,7),"u")==0?C(d," UNIQUE CONSTRAINT,"):C(d," UNIQUE,")),ae=D(v,I,5),ue=lr(ae," USING "),ue!=null&&(ae=ae.slice(ue+7)),_(d," %s",ae),re(D(v,I,8),"t")==0&&C(d," DEFERRABLE"),re(D(v,I,9),"t")==0&&C(d," INITIALLY DEFERRED")}re(D(v,I,3),"t")==0&&C(d," CLUSTER"),re(D(v,I,4),"t")!=0&&C(d," INVALID"),re(D(v,I,10),"t")==0&&C(d," REPLICA IDENTITY"),Y(P,d.data),await to(P,wn,ko(D(v,I,11)),!1)}}if(U.checks){if(k(d,`SELECT r.conname, pg_catalog.pg_get_constraintdef(r.oid, true)
FROM pg_catalog.pg_constraint r
WHERE r.conrelid = '%s' AND r.contype = 'c'
ORDER BY 1;`,E),v=await b(d.data),v)J=me(v);else return S;if(J>0)for(Y(P,o("Check constraints:")),I=0;I<J;I++)k(d,'    "%s" %s',D(v,I,0),D(v,I,1)),Y(P,d.data)}if(U.hastriggers||U.relkind==ct){if(p.sversion>=12e4&&(U.ispartition||U.relkind==ct)?k(d,`SELECT conrelid = '%s'::pg_catalog.regclass AS sametable,
       conname,
       pg_catalog.pg_get_constraintdef(oid, true) AS condef,
       conrelid::pg_catalog.regclass AS ontable
  FROM pg_catalog.pg_constraint,
       pg_catalog.pg_partition_ancestors('%s')
 WHERE conrelid = relid AND contype = 'f' AND conparentid = 0
ORDER BY sametable DESC, conname;`,E,E):(k(d,`SELECT true as sametable, conname,
  pg_catalog.pg_get_constraintdef(r.oid, true) as condef,
  conrelid::pg_catalog.regclass AS ontable
FROM pg_catalog.pg_constraint r
WHERE r.conrelid = '%s' AND r.contype = 'f'
`,E),p.sversion>=12e4&&C(d,`     AND conparentid = 0
`),C(d,"ORDER BY conname")),v=await b(d.data),v)J=me(v);else return S;if(J>0){let ae=vn(v,"sametable"),ue=vn(v,"conname"),Se=vn(v,"condef"),ve=vn(v,"ontable");for(Y(P,o("Foreign-key constraints:")),I=0;I<J;I++)re(D(v,I,ae),"f")==0?k(d,'    TABLE "%s" CONSTRAINT "%s" %s',D(v,I,ve),D(v,I,ue),D(v,I,Se)):k(d,'    "%s" %s',D(v,I,ue),D(v,I,Se)),Y(P,d.data)}}if(U.hastriggers||U.relkind==ct){if(p.sversion>=12e4?k(d,`SELECT conname, conrelid::pg_catalog.regclass AS ontable,
       pg_catalog.pg_get_constraintdef(oid, true) AS condef
  FROM pg_catalog.pg_constraint c
 WHERE confrelid IN (SELECT pg_catalog.pg_partition_ancestors('%s')
                     UNION ALL VALUES ('%s'::pg_catalog.regclass))
       AND contype = 'f' AND conparentid = 0
ORDER BY conname;`,E,E):k(d,`SELECT conname, conrelid::pg_catalog.regclass AS ontable,
       pg_catalog.pg_get_constraintdef(oid, true) AS condef
  FROM pg_catalog.pg_constraint
 WHERE confrelid = %s AND contype = 'f'
ORDER BY conname;`,E),v=await b(d.data),v)J=me(v);else return S;if(J>0){let ae=vn(v,"conname"),ue=vn(v,"ontable"),Se=vn(v,"condef");for(Y(P,o("Referenced by:")),I=0;I<J;I++)k(d,'    TABLE "%s" CONSTRAINT "%s" %s',D(v,I,ue),D(v,I,ae),D(v,I,Se)),Y(P,d.data)}}if(p.sversion>=90500){if(k(d,"SELECT pol.polname,"),p.sversion>=1e5?C(d,` pol.polpermissive,
`):C(d,` 't' as polpermissive,
`),_(d,`  CASE WHEN pol.polroles = '{0}' THEN NULL ELSE pg_catalog.array_to_string(array(select rolname from pg_catalog.pg_roles where oid = any (pol.polroles) order by 1),',') END,
  pg_catalog.pg_get_expr(pol.polqual, pol.polrelid),
  pg_catalog.pg_get_expr(pol.polwithcheck, pol.polrelid),
  CASE pol.polcmd
    WHEN 'r' THEN 'SELECT'
    WHEN 'a' THEN 'INSERT'
    WHEN 'w' THEN 'UPDATE'
    WHEN 'd' THEN 'DELETE'
    END AS cmd
FROM pg_catalog.pg_policy pol
WHERE pol.polrelid = '%s' ORDER BY 1;`,E),v=await b(d.data),v)J=me(v);else return S;for(U.rowsecurity&&!U.forcerowsecurity&&J>0&&Y(P,o("Policies:")),U.rowsecurity&&U.forcerowsecurity&&J>0&&Y(P,o("Policies (forced row security enabled):")),U.rowsecurity&&!U.forcerowsecurity&&J==0&&Y(P,o("Policies (row security enabled): (none)")),U.rowsecurity&&U.forcerowsecurity&&J==0&&Y(P,o("Policies (forced row security enabled): (none)")),!U.rowsecurity&&J>0&&Y(P,o("Policies (row security disabled):")),I=0;I<J;I++)k(d,'    POLICY "%s"',D(v,I,0)),D(v,I,1)=="f"&&C(d," AS RESTRICTIVE"),Ke(v,I,5)||_(d," FOR %s",D(v,I,5)),Ke(v,I,2)||_(d,`
      TO %s`,D(v,I,2)),Ke(v,I,3)||_(d,`
      USING (%s)`,D(v,I,3)),Ke(v,I,4)||_(d,`
      WITH CHECK (%s)`,D(v,I,4)),Y(P,d.data)}if(p.sversion>=14e4){if(k(d,`SELECT oid, stxrelid::pg_catalog.regclass, stxnamespace::pg_catalog.regnamespace::pg_catalog.text AS nsp, stxname,
pg_catalog.pg_get_statisticsobjdef_columns(oid) AS columns,
  'd' = any(stxkind) AS ndist_enabled,
  'f' = any(stxkind) AS deps_enabled,
  'm' = any(stxkind) AS mcv_enabled,
stxstattarget
FROM pg_catalog.pg_statistic_ext
WHERE stxrelid = '%s'
ORDER BY nsp, stxname;`,E),v=await b(d.data),v)J=me(v);else return S;if(J>0)for(Y(P,o("Statistics objects:")),I=0;I<J;I++){let ae=!1,ue,Se,ve,hn,lt;ue=re(D(v,I,5),"t")==0,Se=re(D(v,I,6),"t")==0,ve=re(D(v,I,7),"t")==0,k(d,"    "),_(d,'"%s.%s"',D(v,I,2),D(v,I,3)),hn=ue&&Se&&ve,lt=ue||Se||ve,lt&&!hn&&(C(d," ("),ue&&(C(d,"ndistinct"),ae=!0),Se&&(_(d,"%sdependencies",ae?", ":""),ae=!0),ve&&_(d,"%smcv",ae?", ":""),Le(d,")")),_(d," ON %s FROM %s",D(v,I,4),D(v,I,1)),!Ke(v,I,8)&&re(D(v,I,8),"-1")!=0&&_(d,"; STATISTICS %s",D(v,I,8)),Y(P,d.data)}}else if(p.sversion>=1e5){if(k(d,`SELECT oid, stxrelid::pg_catalog.regclass, stxnamespace::pg_catalog.regnamespace AS nsp, stxname,
  (SELECT pg_catalog.string_agg(pg_catalog.quote_ident(attname),', ')
   FROM pg_catalog.unnest(stxkeys) s(attnum)
   JOIN pg_catalog.pg_attribute a ON (stxrelid = a.attrelid AND
        a.attnum = s.attnum AND NOT attisdropped)) AS columns,
  'd' = any(stxkind) AS ndist_enabled,
  'f' = any(stxkind) AS deps_enabled,
  'm' = any(stxkind) AS mcv_enabled,
`),p.sversion>=13e4?C(d,`  stxstattarget
`):C(d,`  -1 AS stxstattarget
`),_(d,`FROM pg_catalog.pg_statistic_ext
WHERE stxrelid = '%s'
ORDER BY 1;`,E),v=await b(d.data),v)J=me(v);else return S;if(J>0)for(Y(P,o("Statistics objects:")),I=0;I<J;I++){let ae=!1;k(d,"    "),_(d,'"%s.%s" (',D(v,I,2),D(v,I,3)),re(D(v,I,5),"t")==0&&(C(d,"ndistinct"),ae=!0),re(D(v,I,6),"t")==0&&(_(d,"%sdependencies",ae?", ":""),ae=!0),re(D(v,I,7),"t")==0&&_(d,"%smcv",ae?", ":""),_(d,") ON %s FROM %s",D(v,I,4),D(v,I,1)),re(D(v,I,8),"-1")!=0&&_(d,"; STATISTICS %s",D(v,I,8)),Y(P,d.data)}}if(U.hasrules&&U.relkind!=_t){if(k(d,`SELECT r.rulename, trim(trailing ';' from pg_catalog.pg_get_ruledef(r.oid, true)), ev_enabled
FROM pg_catalog.pg_rewrite r
WHERE r.ev_class = '%s' ORDER BY 1;`,E),v=await b(d.data),v)J=me(v);else return S;if(J>0){let ae,ue;for(ue=0;ue<4;ue++)for(ae=!1,I=0;I<J;I++){let Se,ve=!1;switch(ue){case 0:D(v,I,2)=="O"&&(ve=!0);break;case 1:D(v,I,2)=="D"&&(ve=!0);break;case 2:D(v,I,2)=="A"&&(ve=!0);break;case 3:D(v,I,2)=="R"&&(ve=!0);break}if(ve){if(!ae){switch(ue){case 0:k(d,o("Rules:"));break;case 1:k(d,o("Disabled rules:"));break;case 2:k(d,o("Rules firing always:"));break;case 3:k(d,o("Rules firing on replica only:"));break}Y(P,d.data),ae=!0}Se=D(v,I,1),Se=Se.slice(12),k(d,"    %s",Se),Y(P,d.data)}}}}if(p.sversion>=1e5){if(p.sversion>=15e4?k(d,`SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
     JOIN pg_catalog.pg_publication_namespace pn ON p.oid = pn.pnpubid
     JOIN pg_catalog.pg_class pc ON pc.relnamespace = pn.pnnspid
WHERE pc.oid ='%s' and pg_catalog.pg_relation_is_publishable('%s')
UNION
SELECT pubname
     , pg_get_expr(pr.prqual, c.oid)
     , (CASE WHEN pr.prattrs IS NOT NULL THEN
         (SELECT string_agg(attname, ', ')
           FROM pg_catalog.generate_series(0, pg_catalog.array_upper(pr.prattrs::pg_catalog.int2[], 1)) s,
                pg_catalog.pg_attribute
          WHERE attrelid = pr.prrelid AND attnum = prattrs[s])
        ELSE NULL END) FROM pg_catalog.pg_publication p
     JOIN pg_catalog.pg_publication_rel pr ON p.oid = pr.prpubid
     JOIN pg_catalog.pg_class c ON c.oid = pr.prrelid
WHERE pr.prrelid = '%s'
UNION
SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
WHERE p.puballtables AND pg_catalog.pg_relation_is_publishable('%s')
ORDER BY 1;`,E,E,E,E):k(d,`SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
JOIN pg_catalog.pg_publication_rel pr ON p.oid = pr.prpubid
WHERE pr.prrelid = '%s'
UNION ALL
SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
WHERE p.puballtables AND pg_catalog.pg_relation_is_publishable('%s')
ORDER BY 1;`,E,E),v=await b(d.data),v)J=me(v);else return S;for(J>0&&Y(P,o("Publications:")),I=0;I<J;I++)k(d,'    "%s"',D(v,I,0)),Ke(v,I,2)||_(d," (%s)",D(v,I,2)),Ke(v,I,1)||_(d," WHERE %s",D(v,I,1)),Y(P,d.data)}}if((U.relkind==ki||U.relkind==_t)&&g){let v;if(k(d,"SELECT pg_catalog.pg_get_viewdef('%s'::pg_catalog.oid, true);",E),v=await b(d.data),!v)return S;me(v)>0&&(X=xn(D(v,0,0)))}if(X){let v=null;if(Y(P,o("View definition:")),Y(P,X),U.hasrules){if(k(d,`SELECT r.rulename, trim(trailing ';' from pg_catalog.pg_get_ruledef(r.oid, true))
FROM pg_catalog.pg_rewrite r
WHERE r.ev_class = '%s' AND r.rulename != '_RETURN' ORDER BY 1;`,E),v=await b(d.data),!v)return S;if(me(v)>0)for(Y(P,o("Rules:")),I=0;I<me(v);I++){let J;J=D(v,I,1),J=J.slice(12),k(d," %s",J),Y(P,d.data)}}}if(U.hastriggers){let v,J;if(k(d,`SELECT t.tgname, pg_catalog.pg_get_triggerdef(t.oid, true), t.tgenabled, t.tgisinternal,
`),p.sversion>=13e4?C(d,`  CASE WHEN t.tgparentid != 0 THEN
    (SELECT u.tgrelid::pg_catalog.regclass
     FROM pg_catalog.pg_trigger AS u,
          pg_catalog.pg_partition_ancestors(t.tgrelid) WITH ORDINALITY AS a(relid, depth)
     WHERE u.tgname = t.tgname AND u.tgrelid = a.relid
           AND u.tgparentid = 0
     ORDER BY a.depth LIMIT 1)
  END AS parent
`):C(d,`  NULL AS parent
`),_(d,`FROM pg_catalog.pg_trigger t
WHERE t.tgrelid = '%s' AND `,E),p.sversion>=11e4&&p.sversion<15e4?C(d,`(NOT t.tgisinternal OR (t.tgisinternal AND t.tgenabled = 'D') 
    OR EXISTS (SELECT 1 FROM pg_catalog.pg_depend WHERE objid = t.oid 
        AND refclassid = 'pg_catalog.pg_trigger'::pg_catalog.regclass))`):C(d,"(NOT t.tgisinternal OR (t.tgisinternal AND t.tgenabled = 'D'))"),C(d,`
ORDER BY 1;`),v=await b(d.data),v)J=me(v);else return S;if(J>0){let ae,ue;for(ue=0;ue<=4;ue++)for(ae=!1,I=0;I<J;I++){let Se,ve,hn,lt,Ci;switch(lt=D(v,I,2),Ci=D(v,I,3),Se=!1,ue){case 0:(lt=="O"||lt=="t")&&(Se=!0);break;case 1:(lt=="D"||lt=="f")&&Ci=="f"&&(Se=!0);break;case 2:(lt=="D"||lt=="f")&&Ci=="t"&&(Se=!0);break;case 3:lt=="A"&&(Se=!0);break;case 4:lt=="R"&&(Se=!0);break}if(Se!=!1){if(ae==!1){switch(ue){case 0:k(d,o("Triggers:"));break;case 1:k(d,o("Disabled user triggers:"));break;case 2:k(d,o("Disabled internal triggers:"));break;case 3:k(d,o("Triggers firing always:"));break;case 4:k(d,o("Triggers firing on replica only:"));break}Y(P,d.data),ae=!0}ve=D(v,I,1),hn=lr(ve," TRIGGER "),hn!=null&&(ve=ve.slice(hn+9)),k(d,"    %s",ve),Ke(v,I,4)||_(d,", ON TABLE %s",D(v,I,4)),Y(P,d.data)}}}}if(U.relkind==Jt||U.relkind==_t||U.relkind==Qt||U.relkind==ct||U.relkind==Zt||U.relkind==Di){let v,J,ae;if(v=U.relkind==ct||U.relkind==Zt,U.relkind==Qt){let ue;if(k(d,`SELECT s.srvname,
  pg_catalog.array_to_string(ARRAY(
    SELECT pg_catalog.quote_ident(option_name) || ' ' || pg_catalog.quote_literal(option_value)
    FROM pg_catalog.pg_options_to_table(ftoptions)),  ', ')
FROM pg_catalog.pg_foreign_table f,
     pg_catalog.pg_foreign_server s
WHERE f.ftrelid = '%s' AND s.oid = f.ftserver;`,E),J=await b(d.data),J){if(me(J)!=1)return S}else return S;k(d,o("Server: %s"),D(J,0,0)),Y(P,d.data),ue=D(J,0,1),ue&&ue[0]!=null&&(k(d,o("FDW options: (%s)"),ue),Y(P,d.data))}if(k(d,`SELECT c.oid::pg_catalog.regclass
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhparent AND i.inhrelid = '%s'
  AND c.relkind != 'p' AND c.relkind != 'I'
ORDER BY inhseqno;`,E),J=await b(d.data),J){let ue=o("Inherits"),Se=zh(ue,pn(ue),p.encoding);for(ae=me(J),I=0;I<ae;I++)I==0?k(d,"%s: %s",ue,D(J,I,0)):k(d,"%*s  %s",Se,"",D(J,I,0)),I<ae-1&&Le(d,","),Y(P,d.data)}else return S;if(p.sversion>=14e4?k(d,`SELECT c.oid::pg_catalog.regclass, c.relkind, inhdetachpending, pg_catalog.pg_get_expr(c.relpartbound, c.oid)
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhrelid AND i.inhparent = '%s'
ORDER BY pg_catalog.pg_get_expr(c.relpartbound, c.oid) = 'DEFAULT', c.oid::pg_catalog.regclass::pg_catalog.text;`,E):p.sversion>=1e5?k(d,`SELECT c.oid::pg_catalog.regclass, c.relkind, false AS inhdetachpending, pg_catalog.pg_get_expr(c.relpartbound, c.oid)
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhrelid AND i.inhparent = '%s'
ORDER BY pg_catalog.pg_get_expr(c.relpartbound, c.oid) = 'DEFAULT', c.oid::pg_catalog.regclass::pg_catalog.text;`,E):k(d,`SELECT c.oid::pg_catalog.regclass, c.relkind, false AS inhdetachpending, NULL
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhrelid AND i.inhparent = '%s'
ORDER BY c.oid::pg_catalog.regclass::pg_catalog.text;`,E),J=await b(d.data),!J)return S;if(ae=me(J),v&&ae==0)k(d,o("Number of partitions: %d"),ae),Y(P,d.data);else if(!g)ae>0&&(v?k(d,o("Number of partitions: %d (Use \\d+ to list them.)"),ae):k(d,o("Number of child tables: %d (Use \\d+ to list them.)"),ae),Y(P,d.data));else{let ue=o(v?"Partitions":"Child tables"),Se=zh(ue,pn(ue),p.encoding);for(I=0;I<ae;I++){let ve=D(J,I,1);I==0?k(d,"%s: %s",ue,D(J,I,0)):k(d,"%*s  %s",Se,"",D(J,I,0)),Ke(J,I,3)||_(d," %s",D(J,I,3)),ve==ct||ve==Zt?C(d,", PARTITIONED"):ve==Qt&&C(d,", FOREIGN"),re(D(J,I,2),"t")==0&&C(d," (DETACH PENDING)"),I<ae-1&&Le(d,","),Y(P,d.data)}}if(U.reloftype&&(k(d,o("Typed table of type: %s"),U.reloftype),Y(P,d.data)),g&&(U.relkind==Jt||U.relkind==_t)&&U.relreplident!="i"&&(re(O,"pg_catalog")!=0&&U.relreplident!="d"||re(O,"pg_catalog")==0&&U.relreplident!="n")){let ue=o("Replica Identity");k(d,"%s: %s",ue,U.relreplident=="f"?"FULL":U.relreplident=="n"?"NOTHING":"???"),Y(P,d.data)}g&&U.relkind!=_t&&U.hasoids&&Y(P,o("Has OIDs: yes")),await to(P,U.relkind,U.tablespace,!0),g&&U.relam!=null&&!p.hide_tableam&&(k(d,o("Access method: %s"),U.relam),Y(P,d.data))}if(g&&U.reloptions&&U.reloptions[0]!=null){let v=o("Options");k(d,"%s: %s",v,U.reloptions),Y(P,d.data)}return K(P,p.queryFout,!1,p.logfile),S=!0,S}async function to(O,R,E,g){if((R==Jt||R==_t||R==wn||R==ct||R==Zt||R==Di)&&E!=0){let S=null,d={};if(ee(d),k(d,`SELECT spcname FROM pg_catalog.pg_tablespace
WHERE oid = '%u';`,E),S=await b(d.data),!S)return;me(S)>0&&(g?(k(d,o('Tablespace: "%s"'),D(S,0,0)),Y(O,d.data)):(k(d,"%s",O.footer),_(d,o(', tablespace "%s"'),D(S,0,0)),te(O,d.data)))}}async function Dl(O,R,E){let g={},S,d={},y=p.popt.topt,F=2,P=0,I,X,j="l",G;if(y.default_footer=!1,ee(g),k(g,`SELECT r.rolname, r.rolsuper, r.rolinherit,
  r.rolcreaterole, r.rolcreatedb, r.rolcanlogin,
  r.rolconnlimit, r.rolvaliduntil`),R&&(C(g,`
, pg_catalog.shobj_description(r.oid, 'pg_authid') AS description`),F++),C(g,`
, r.rolreplication`),p.sversion>=90500&&C(g,`
, r.rolbypassrls`),C(g,`
FROM pg_catalog.pg_roles r
`),!E&&!O&&C(g,`WHERE r.rolname !~ '^pg_'
`),!x(g,O,!1,!1,null,"r.rolname",null,null,null,1)||(C(g,"ORDER BY 1;"),S=await b(g.data),!S))return!1;for(P=me(S),G=[],q(d,y,o("List of roles"),F,P),se(d,A("Role name"),!0,j),se(d,A("Attributes"),!0,j),R&&se(d,A("Description"),!0,j),I=0;I<P;I++)z(d,D(S,I,0),!1),Po(g),re(D(S,I,1),"t")==0&&yn(g,o("Superuser")),re(D(S,I,2),"t")!=0&&yn(g,o("No inheritance")),re(D(S,I,3),"t")==0&&yn(g,o("Create role")),re(D(S,I,4),"t")==0&&yn(g,o("Create DB")),re(D(S,I,5),"t")!=0&&yn(g,o("Cannot login")),re(D(S,I,R?9:8),"t")==0&&yn(g,o("Replication")),p.sversion>=90500&&re(D(S,I,R?10:9),"t")==0&&yn(g,o("Bypass RLS")),X=jh(D(S,I,6)),X>=0&&(g.len>0&&Le(g,`
`),X==0?C(g,o("No connections")):_(g,ngettext("%d connection","%d connections",X),X)),re(D(S,I,7),"")!=0&&(g.len>0&&Le(g,`
`),C(g,o("Password valid until ")),C(g,D(S,I,7))),G[I]=xn(g.data),z(d,G[I],!1),R&&z(d,D(S,I,8),!1);return K(d,p.queryFout,!1,p.logfile),!0}function yn(O,R){O.len>0&&C(O,", "),C(O,R)}async function qp(O,R){let E={},g,S=p.popt,d={};return ee(E),k(E,`SELECT rolname AS "%s", datname AS "%s",
pg_catalog.array_to_string(setconfig, E'\\n') AS "%s"
FROM pg_catalog.pg_db_role_setting s
LEFT JOIN pg_catalog.pg_database d ON d.oid = setdatabase
LEFT JOIN pg_catalog.pg_roles r ON r.oid = setrole
`,A("Role"),A("Database"),A("Settings")),!x(E,O,!1,!1,null,"r.rolname",null,null,d,1)||!x(E,R,d.value,!1,null,"d.datname",null,null,null,1)||(C(E,"ORDER BY 1, 2;"),g=await b(E.data),!g)?!1:(me(g)==0&&!p.quiet?O&&R?L('Did not find any settings for role "%s" and database "%s".',O,R):O?L('Did not find any settings for role "%s".',O):L("Did not find any settings."):(S.nullPrint=null,S.title=o("List of settings"),S.translate_header=!0,M(g,S,p.queryFout,!1,p.logfile)),!0)}async function Yp(O,R){let E={},g,S=p.popt;return ee(E),k(E,`SELECT m.rolname AS "%s", r.rolname AS "%s",
  pg_catalog.concat_ws(', ',
`,A("Role name"),A("Member of")),p.sversion>=16e4?C(E,`    CASE WHEN pam.admin_option THEN 'ADMIN' END,
    CASE WHEN pam.inherit_option THEN 'INHERIT' END,
    CASE WHEN pam.set_option THEN 'SET' END
`):C(E,`    CASE WHEN pam.admin_option THEN 'ADMIN' END,
    CASE WHEN m.rolinherit THEN 'INHERIT' END,
    'SET'
`),_(E,`  ) AS "%s",
  g.rolname AS "%s"
`,A("Options"),A("Grantor")),C(E,`FROM pg_catalog.pg_roles m
     JOIN pg_catalog.pg_auth_members pam ON (pam.member = m.oid)
     LEFT JOIN pg_catalog.pg_roles r ON (pam.roleid = r.oid)
     LEFT JOIN pg_catalog.pg_roles g ON (pam.grantor = g.oid)
`),!R&&!O&&C(E,`WHERE m.rolname !~ '^pg_'
`),!x(E,O,!1,!1,null,"m.rolname",null,null,null,1)||(C(E,`ORDER BY 1, 2, 4;
`),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of role grants"),S.translate_header=!0,M(g,S,p.queryFout,!1,p.logfile),!0)}async function kl(O,R,E,g){let S=Pe(O,"t")!=null,d=Pe(O,"i")!=null,y=Pe(O,"v")!=null,F=Pe(O,"m")!=null,P=Pe(O,"s")!=null,I=Pe(O,"E")!=null,X={},j,G=p.popt,ce,oe=[!1,!1,!0,!1,!1,!1,!1,!1,!1];return S||d||y||F||P||I||(S=y=F=P=I=!0),ee(X),k(X,`SELECT n.nspname as "%s",
  c.relname as "%s",
  CASE c.relkind WHEN 'r' THEN '%s' WHEN 'v' THEN '%s' WHEN 'm' THEN '%s' WHEN 'i' THEN '%s' WHEN 'S' THEN '%s' WHEN 't' THEN '%s' WHEN 'f' THEN '%s' WHEN 'p' THEN '%s' WHEN 'I' THEN '%s' END as "%s",
  pg_catalog.pg_get_userbyid(c.relowner) as "%s"`,A("Schema"),A("Name"),A("table"),A("view"),A("materialized view"),A("index"),A("sequence"),A("TOAST table"),A("foreign table"),A("partitioned table"),A("partitioned index"),A("Type"),A("Owner")),ce=4,d&&(_(X,`,
  c2.relname as "%s"`,A("Table")),ce++),E&&(_(X,`,
  CASE c.relpersistence WHEN 'p' THEN '%s' WHEN 't' THEN '%s' WHEN 'u' THEN '%s' END as "%s"`,A("permanent"),A("temporary"),A("unlogged"),A("Persistence")),oe[ce]=!0,p.sversion>=12e4&&!p.hide_tableam&&(S||F||d)&&_(X,`,
  am.amname as "%s"`,A("Access method")),_(X,`,
  pg_catalog.pg_size_pretty(pg_catalog.pg_table_size(c.oid)) as "%s",
  pg_catalog.obj_description(c.oid, 'pg_class') as "%s"`,A("Size"),A("Description"))),C(X,`
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace`),p.sversion>=12e4&&!p.hide_tableam&&(S||F||d)&&C(X,`
     LEFT JOIN pg_catalog.pg_am am ON am.oid = c.relam`),d&&C(X,`
     LEFT JOIN pg_catalog.pg_index i ON i.indexrelid = c.oid
     LEFT JOIN pg_catalog.pg_class c2 ON i.indrelid = c2.oid`),C(X,`
WHERE c.relkind IN (`),S&&(C(X,"'r','p',"),(g||R)&&C(X,"'t',")),y&&C(X,"'v',"),F&&C(X,"'m',"),d&&C(X,"'i','I',"),P&&C(X,"'S',"),(g||R)&&C(X,"'s',"),I&&C(X,"'f',"),C(X,"''"),C(X,`)
`),!g&&!R&&C(X,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname !~ '^pg_toast'
      AND n.nspname <> 'information_schema'
`),!x(X,R,!0,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(C(X,"ORDER BY 1,2;"),j=await b(X.data),!j)?!1:(me(j)==0&&!p.quiet?R?L('Did not find any relation named "%s".',R):L("Did not find any relations."):(G.nullPrint=null,G.title=o("List of relations"),G.translate_header=!0,G.translate_columns=oe,G.n_translate_columns=Ue(oe),M(j,G,p.queryFout,!1,p.logfile)),!0)}async function jp(O,R,E){let g=Pe(O,"t")!=null,S=Pe(O,"i")!=null,d=Pe(O,"n")!=null,y={},F={},P,I=p.popt,X=[!1,!1,!1,!1,!1,!1,!1,!1,!1],j,G=!1;return p.sversion<1e5?(L("The server (version %s) does not support declarative table partitioning.",fn(p.sversion,!1,void 0)),!0):(!g&&!S&&(g=S=!0),S&&!g?j=o("List of partitioned indexes"):g&&!S?j=o("List of partitioned tables"):(j=o("List of partitioned relations"),G=!0),ee(y),k(y,`SELECT n.nspname as "%s",
  c.relname as "%s",
  pg_catalog.pg_get_userbyid(c.relowner) as "%s"`,A("Schema"),A("Name"),A("Owner")),G&&(_(y,`,
  CASE c.relkind WHEN 'p' THEN '%s' WHEN 'I' THEN '%s' END as "%s"`,A("partitioned table"),A("partitioned index"),A("Type")),X[3]=!0),(d||R)&&_(y,`,
  inh.inhparent::pg_catalog.regclass as "%s"`,A("Parent name")),S&&_(y,`,
 c2.oid::pg_catalog.regclass as "%s"`,A("Table")),E&&(d&&_(y,`,
  s.dps as "%s"`,A("Leaf partition size")),_(y,`,
  s.tps as "%s"`,A("Total size")),_(y,`,
  pg_catalog.obj_description(c.oid, 'pg_class') as "%s"`,A("Description"))),C(y,`
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace`),S&&C(y,`
     LEFT JOIN pg_catalog.pg_index i ON i.indexrelid = c.oid
     LEFT JOIN pg_catalog.pg_class c2 ON i.indrelid = c2.oid`),(d||R)&&C(y,`
     LEFT JOIN pg_catalog.pg_inherits inh ON c.oid = inh.inhrelid`),E&&(p.sversion<12e4?C(y,`,
     LATERAL (WITH RECURSIVE d
                AS (SELECT inhrelid AS oid, 1 AS level
                      FROM pg_catalog.pg_inherits
                     WHERE inhparent = c.oid
                    UNION ALL
                    SELECT inhrelid, level + 1
                      FROM pg_catalog.pg_inherits i
                           JOIN d ON i.inhparent = d.oid)
                SELECT pg_catalog.pg_size_pretty(sum(pg_catalog.pg_table_size(d.oid))) AS tps,
                       pg_catalog.pg_size_pretty(sum(
             CASE WHEN d.level = 1 THEN pg_catalog.pg_table_size(d.oid) ELSE 0 END)) AS dps
               FROM d) s`):C(y,`,
     LATERAL (SELECT pg_catalog.pg_size_pretty(sum(
                 CASE WHEN ppt.isleaf AND ppt.level = 1
                      THEN pg_catalog.pg_table_size(ppt.relid) ELSE 0 END)) AS dps,
                     pg_catalog.pg_size_pretty(sum(pg_catalog.pg_table_size(ppt.relid))) AS tps
              FROM pg_catalog.pg_partition_tree(c.oid) ppt) s`)),C(y,`
WHERE c.relkind IN (`),g&&C(y,"'p',"),S&&C(y,"'I',"),C(y,"''"),C(y,`)
`),C(y,!d&&!R?` AND NOT c.relispartition
`:""),R||C(y,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname !~ '^pg_toast'
      AND n.nspname <> 'information_schema'
`),!x(y,R,!0,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(_(y,'ORDER BY "Schema", %s%s"Name";',G?'"Type" DESC, ':"",d||R?'"Parent name" NULLS FIRST, ':""),P=await b(y.data),!P)?!1:(ee(F),C(F,j),I.nullPrint=null,I.title=F.data,I.translate_header=!0,I.translate_columns=X,I.n_translate_columns=Ue(X),M(P,I,p.queryFout,!1,p.logfile),!0))}async function Xp(O,R,E){let g={},S,d=p.popt;return ee(g),k(g,`SELECT l.lanname AS "%s",
       pg_catalog.pg_get_userbyid(l.lanowner) as "%s",
       l.lanpltrusted AS "%s"`,A("Name"),A("Owner"),A("Trusted")),R&&(_(g,`,
       NOT l.lanispl AS "%s",
       l.lanplcallfoid::pg_catalog.regprocedure AS "%s",
       l.lanvalidator::pg_catalog.regprocedure AS "%s",
       l.laninline::pg_catalog.regprocedure AS "%s",
       `,A("Internal language"),A("Call handler"),A("Validator"),A("Inline handler")),gt(g,"l.lanacl")),_(g,`,
       d.description AS "%s"
FROM pg_catalog.pg_language l
LEFT JOIN pg_catalog.pg_description d
  ON d.classoid = l.tableoid AND d.objoid = l.oid
  AND d.objsubid = 0
`,A("Description")),O&&!x(g,O,!1,!1,null,"l.lanname",null,null,null,2)||(!E&&!O&&C(g,`WHERE l.lanplcallfoid != 0
`),C(g,"ORDER BY 1;"),S=await b(g.data),!S)?!1:(d.nullPrint=null,d.title=o("List of languages"),d.translate_header=!0,M(S,d,p.queryFout,!1,p.logfile),!0)}async function zp(O,R,E){let g={},S,d=p.popt;return ee(g),k(g,`SELECT n.nspname as "%s",
       t.typname as "%s",
       pg_catalog.format_type(t.typbasetype, t.typtypmod) as "%s",
       (SELECT c.collname FROM pg_catalog.pg_collation c, pg_catalog.pg_type bt
        WHERE c.oid = t.typcollation AND bt.oid = t.typbasetype AND t.typcollation <> bt.typcollation) as "%s",
       CASE WHEN t.typnotnull THEN 'not null' END as "%s",
       t.typdefault as "%s",
       pg_catalog.array_to_string(ARRAY(
         SELECT pg_catalog.pg_get_constraintdef(r.oid, true) FROM pg_catalog.pg_constraint r WHERE t.oid = r.contypid AND r.contype = 'c' ORDER BY r.conname
       ), ' ') as "%s"`,A("Schema"),A("Name"),A("Type"),A("Collation"),A("Nullable"),A("Default"),A("Check")),R&&(C(g,`,
  `),gt(g,"t.typacl"),_(g,`,
       d.description as "%s"`,A("Description"))),C(g,`
FROM pg_catalog.pg_type t
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace
`),R&&C(g,`     LEFT JOIN pg_catalog.pg_description d ON d.classoid = t.tableoid AND d.objoid = t.oid AND d.objsubid = 0
`),C(g,`WHERE t.typtype = 'd'
`),!E&&!O&&C(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!x(g,O,!0,!1,"n.nspname","t.typname",null,"pg_catalog.pg_type_is_visible(t.oid)",null,3)||(C(g,"ORDER BY 1, 2;"),S=await b(g.data),!S)?!1:(d.nullPrint=null,d.title=o("List of domains"),d.translate_header=!0,M(S,d,p.queryFout,!1,p.logfile),!0)}async function Kp(O,R,E){let g={},S,d=p.popt,y=[!1,!1,!1,!1,!0,!1];return ee(g),k(g,`SELECT n.nspname AS "%s",
       c.conname AS "%s",
       pg_catalog.pg_encoding_to_char(c.conforencoding) AS "%s",
       pg_catalog.pg_encoding_to_char(c.contoencoding) AS "%s",
       CASE WHEN c.condefault THEN '%s'
       ELSE '%s' END AS "%s"`,A("Schema"),A("Name"),A("Source"),A("Destination"),A("yes"),A("no"),A("Default?")),R&&_(g,`,
       d.description AS "%s"`,A("Description")),C(g,`
FROM pg_catalog.pg_conversion c
     JOIN pg_catalog.pg_namespace n ON n.oid = c.connamespace
`),R&&C(g,`LEFT JOIN pg_catalog.pg_description d ON d.classoid = c.tableoid
          AND d.objoid = c.oid AND d.objsubid = 0
`),C(g,`WHERE true
`),!E&&!O&&C(g,`  AND n.nspname <> 'pg_catalog'
  AND n.nspname <> 'information_schema'
`),!x(g,O,!0,!1,"n.nspname","c.conname",null,"pg_catalog.pg_conversion_is_visible(c.oid)",null,3)||(C(g,"ORDER BY 1, 2;"),S=await b(g.data),!S)?!1:(d.nullPrint=null,d.title=o("List of conversions"),d.translate_header=!0,d.translate_columns=y,d.n_translate_columns=Ue(y),M(S,d,p.queryFout,!1,p.logfile),!0)}async function $p(O,R,E){let g={},S,d=p.popt;return ee(g),k(g,'SELECT s.name AS "%s", pg_catalog.current_setting(s.name) AS "%s"',A("Parameter"),A("Value")),R&&(_(g,', s.vartype AS "%s", s.context AS "%s", ',A("Type"),A("Context")),p.sversion>=15e4?gt(g,"p.paracl"):_(g,'NULL AS "%s"',A("Access privileges"))),C(g,`
FROM pg_catalog.pg_settings s
`),R&&p.sversion>=15e4&&C(g,`  LEFT JOIN pg_catalog.pg_parameter_acl p
  ON pg_catalog.lower(s.name) = p.parname
`),O?W(p.db,g,O,!1,!1,null,"pg_catalog.lower(s.name)",null,null,null,null):C(g,`WHERE s.source <> 'default' AND
      s.setting IS DISTINCT FROM s.boot_val
`),C(g,"ORDER BY 1;"),S=await b(g.data),S?(d.nullPrint=null,O?d.title=o("List of configuration parameters"):d.title=o("List of non-default configuration parameters"),d.translate_header=!0,M(S,d,p.queryFout,!1,p.logfile),!0):!1}async function Jp(O,R){let E={},g,S=p.popt,d=[!1,!1,!1,!0,!1,!1,!1];return p.sversion<90300?(L("The server (version %s) does not support event triggers.",fn(p.sversion,!1,void 0)),!0):(ee(E),k(E,`SELECT evtname as "%s", evtevent as "%s", pg_catalog.pg_get_userbyid(e.evtowner) as "%s",
 case evtenabled when 'O' then '%s'  when 'R' then '%s'  when 'A' then '%s'  when 'D' then '%s' end as "%s",
 e.evtfoid::pg_catalog.regproc as "%s", pg_catalog.array_to_string(array(select x from pg_catalog.unnest(evttags) as t(x)), ', ') as "%s"`,A("Name"),A("Event"),A("Owner"),A("enabled"),A("replica"),A("always"),A("disabled"),A("Enabled"),A("Function"),A("Tags")),R&&_(E,`,
pg_catalog.obj_description(e.oid, 'pg_event_trigger') as "%s"`,A("Description")),C(E,`
FROM pg_catalog.pg_event_trigger e `),!x(E,O,!1,!1,null,"evtname",null,null,null,1)||(C(E,"ORDER BY 1"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of event triggers"),S.translate_header=!0,S.translate_columns=d,S.n_translate_columns=Ue(d),M(g,S,p.queryFout,!1,p.logfile),!0))}async function Qp(O){let R={},E,g=p.popt;return p.sversion<1e5?(L("The server (version %s) does not support extended statistics.",fn(p.sversion,!1,void 0)),!0):(ee(R),k(R,`SELECT 
es.stxnamespace::pg_catalog.regnamespace::pg_catalog.text AS "%s", 
es.stxname AS "%s", 
`,A("Schema"),A("Name")),p.sversion>=14e4?_(R,`pg_catalog.format('%%s FROM %%s', 
  pg_catalog.pg_get_statisticsobjdef_columns(es.oid), 
  es.stxrelid::pg_catalog.regclass) AS "%s"`,A("Definition")):_(R,`pg_catalog.format('%%s FROM %%s', 
  (SELECT pg_catalog.string_agg(pg_catalog.quote_ident(a.attname),', ') 
   FROM pg_catalog.unnest(es.stxkeys) s(attnum) 
   JOIN pg_catalog.pg_attribute a 
   ON (es.stxrelid = a.attrelid 
   AND a.attnum = s.attnum 
   AND NOT a.attisdropped)), 
es.stxrelid::pg_catalog.regclass) AS "%s"`,A("Definition")),_(R,`,
CASE WHEN 'd' = any(es.stxkind) THEN 'defined' 
END AS "%s", 
CASE WHEN 'f' = any(es.stxkind) THEN 'defined' 
END AS "%s"`,A("Ndistinct"),A("Dependencies")),p.sversion>=12e4&&_(R,`,
CASE WHEN 'm' = any(es.stxkind) THEN 'defined' 
END AS "%s" `,A("MCV")),C(R,` 
FROM pg_catalog.pg_statistic_ext es 
`),!x(R,O,!1,!1,"es.stxnamespace::pg_catalog.regnamespace::pg_catalog.text","es.stxname",null,"pg_catalog.pg_statistics_obj_is_visible(es.oid)",null,3)||(C(R,"ORDER BY 1, 2;"),E=await b(R.data),!E)?!1:(g.nullPrint=null,g.title=o("List of extended statistics"),g.translate_header=!0,M(E,g,p.queryFout,!1,p.logfile),!0))}async function Zp(O,R){let E={},g,S=p.popt,d=[!1,!1,!1,!0,!1];return ee(E),k(E,`SELECT pg_catalog.format_type(castsource, NULL) AS "%s",
       pg_catalog.format_type(casttarget, NULL) AS "%s",
`,A("Source type"),A("Target type")),_(E,`       CASE WHEN c.castmethod = '%c' THEN '(binary coercible)'
            WHEN c.castmethod = '%c' THEN '(with inout)'
            ELSE p.proname
       END AS "%s",
`,W_,G_,A("Function")),_(E,`       CASE WHEN c.castcontext = '%c' THEN '%s'
            WHEN c.castcontext = '%c' THEN '%s'
            ELSE '%s'
       END AS "%s"`,q_,A("no"),V_,A("in assignment"),A("yes"),A("Implicit?")),R&&_(E,`,
       d.description AS "%s"`,A("Description")),C(E,`
FROM pg_catalog.pg_cast c LEFT JOIN pg_catalog.pg_proc p
     ON c.castfunc = p.oid
     LEFT JOIN pg_catalog.pg_type ts
     ON c.castsource = ts.oid
     LEFT JOIN pg_catalog.pg_namespace ns
     ON ns.oid = ts.typnamespace
     LEFT JOIN pg_catalog.pg_type tt
     ON c.casttarget = tt.oid
     LEFT JOIN pg_catalog.pg_namespace nt
     ON nt.oid = tt.typnamespace
`),R&&C(E,`     LEFT JOIN pg_catalog.pg_description d
     ON d.classoid = c.tableoid AND d.objoid = c.oid AND d.objsubid = 0
`),C(E,"WHERE ( (true"),!x(E,O,!0,!1,"ns.nspname","ts.typname","pg_catalog.format_type(ts.oid, NULL)","pg_catalog.pg_type_is_visible(ts.oid)",null,3)||(C(E,") OR (true"),!x(E,O,!0,!1,"nt.nspname","tt.typname","pg_catalog.format_type(tt.oid, NULL)","pg_catalog.pg_type_is_visible(tt.oid)",null,3))||(C(E,`) )
ORDER BY 1, 2;`),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of casts"),S.translate_header=!0,S.translate_columns=d,S.n_translate_columns=Ue(d),M(g,S,p.queryFout,!1,p.logfile),!0)}async function em(O,R,E){let g={},S,d=p.popt,y=[!1,!1,!1,!1,!1,!1,!1,!0,!1];return ee(g),k(g,`SELECT
  n.nspname AS "%s",
  c.collname AS "%s",
`,A("Schema"),A("Name")),p.sversion>=1e5?_(g,`  CASE c.collprovider WHEN 'd' THEN 'default' WHEN 'b' THEN 'builtin' WHEN 'c' THEN 'libc' WHEN 'i' THEN 'icu' END AS "%s",
`,A("Provider")):_(g,`  'libc' AS "%s",
`,A("Provider")),_(g,`  c.collcollate AS "%s",
  c.collctype AS "%s",
`,A("Collate"),A("Ctype")),p.sversion>=17e4?_(g,`  c.colllocale AS "%s",
`,A("Locale")):p.sversion>=15e4?_(g,`  c.colliculocale AS "%s",
`,A("Locale")):_(g,`  c.collcollate AS "%s",
`,A("Locale")),p.sversion>=16e4?_(g,`  c.collicurules AS "%s",
`,A("ICU Rules")):_(g,`  NULL AS "%s",
`,A("ICU Rules")),p.sversion>=12e4?_(g,`  CASE WHEN c.collisdeterministic THEN '%s' ELSE '%s' END AS "%s"`,A("yes"),A("no"),A("Deterministic?")):_(g,`  '%s' AS "%s"`,A("yes"),A("Deterministic?")),R&&_(g,`,
  pg_catalog.obj_description(c.oid, 'pg_collation') AS "%s"`,A("Description")),C(g,`
FROM pg_catalog.pg_collation c, pg_catalog.pg_namespace n
WHERE n.oid = c.collnamespace
`),!E&&!O&&C(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),C(g,`      AND c.collencoding IN (-1, pg_catalog.pg_char_to_encoding(pg_catalog.getdatabaseencoding()))
`),!x(g,O,!0,!1,"n.nspname","c.collname",null,"pg_catalog.pg_collation_is_visible(c.oid)",null,3)||(C(g,"ORDER BY 1, 2;"),S=await b(g.data),!S)?!1:(d.nullPrint=null,d.title=o("List of collations"),d.translate_header=!0,d.translate_columns=y,d.n_translate_columns=Ue(y),M(S,d,p.queryFout,!1,p.logfile),!0)}async function tm(O,R,E){let g={},S,d=p.popt,y=0,F=null;if(ee(g),k(g,`SELECT n.nspname AS "%s",
  pg_catalog.pg_get_userbyid(n.nspowner) AS "%s"`,A("Name"),A("Owner")),R&&(C(g,`,
  `),gt(g,"n.nspacl"),_(g,`,
  pg_catalog.obj_description(n.oid, 'pg_namespace') AS "%s"`,A("Description"))),C(g,`
FROM pg_catalog.pg_namespace n
`),!E&&!O&&C(g,`WHERE n.nspname !~ '^pg_' AND n.nspname <> 'information_schema'
`),!x(g,O,!E&&!O,!1,null,"n.nspname",null,null,null,2)||(C(g,"ORDER BY 1;"),S=await b(g.data),!S))return!1;if(d.nullPrint=null,d.title=o("List of schemas"),d.translate_header=!0,O&&p.sversion>=15e4){let P,I;if(k(g,`SELECT pubname 
FROM pg_catalog.pg_publication p
     JOIN pg_catalog.pg_publication_namespace pn ON p.oid = pn.pnpubid
     JOIN pg_catalog.pg_namespace n ON n.oid = pn.pnnspid 
WHERE n.nspname = '%s'
ORDER BY 1`,O),P=await b(g.data),P)y=me(P);else return!1;if(y>0){for(F=[],F[0]=xn(o("Publications:")),I=0;I<y;I++)k(g,'    "%s"',D(P,I,0)),F[I+1]=xn(g.data);F[I+1]=null,d.footers=F}}return M(S,d,p.queryFout,!1,p.logfile),!0}async function nm(O,R){let E={},g,S=p.popt;return R?await im(O):(ee(E),k(E,`SELECT
  n.nspname as "%s",
  p.prsname as "%s",
  pg_catalog.obj_description(p.oid, 'pg_ts_parser') as "%s"
FROM pg_catalog.pg_ts_parser p
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.prsnamespace
`,A("Schema"),A("Name"),A("Description")),!x(E,O,!1,!1,"n.nspname","p.prsname",null,"pg_catalog.pg_ts_parser_is_visible(p.oid)",null,3)||(C(E,"ORDER BY 1, 2;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of text search parsers"),S.translate_header=!0,M(g,S,p.queryFout,!1,p.logfile),!0))}async function im(O){let R={},E,g;if(ee(R),k(R,`SELECT p.oid,
  n.nspname,
  p.prsname
FROM pg_catalog.pg_ts_parser p
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.prsnamespace
`),!x(R,O,!1,!1,"n.nspname","p.prsname",null,"pg_catalog.pg_ts_parser_is_visible(p.oid)",null,3)||(C(R,"ORDER BY 1, 2;"),E=await b(R.data),!E))return!1;if(me(E)==0)return p.quiet||(O?L('Did not find any text search parser named "%s".',O):L("Did not find any text search parsers.")),!1;for(g=0;g<me(E);g++){let S,d=null,y;if(S=D(E,g,0),Ke(E,g,1)||(d=D(E,g,1)),y=D(E,g,2),!await sm(S,d,y)||c)return!1}return!0}async function sm(O,R,E){let g={},S,d={},y=p.popt,F=[!0,!1,!1];return ee(g),k(g,`SELECT '%s' AS "%s",
   p.prsstart::pg_catalog.regproc AS "%s",
   pg_catalog.obj_description(p.prsstart, 'pg_proc') as "%s"
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prstoken::pg_catalog.regproc,
   pg_catalog.obj_description(p.prstoken, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prsend::pg_catalog.regproc,
   pg_catalog.obj_description(p.prsend, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prsheadline::pg_catalog.regproc,
   pg_catalog.obj_description(p.prsheadline, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prslextype::pg_catalog.regproc,
   pg_catalog.obj_description(p.prslextype, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s';`,A("Start parse"),A("Method"),A("Function"),A("Description"),O,A("Get next token"),O,A("End parse"),O,A("Get headline"),O,A("Get token types"),O),S=await b(g.data),!S||(y.nullPrint=null,ee(d),R?k(d,o('Text search parser "%s.%s"'),R,E):k(d,o('Text search parser "%s"'),E),y.title=d.data,y.footers=null,y.topt.default_footer=!1,y.translate_header=!0,y.translate_columns=F,y.n_translate_columns=Ue(F),M(S,y,p.queryFout,!1,p.logfile),ee(g),k(g,`SELECT t.alias as "%s",
  t.description as "%s"
FROM pg_catalog.ts_token_type( '%s'::pg_catalog.oid ) as t
ORDER BY 1;`,A("Token name"),A("Description"),O),S=await b(g.data),!S)?!1:(y.nullPrint=null,R?k(d,o('Token types for parser "%s.%s"'),R,E):k(d,o('Token types for parser "%s"'),E),y.title=d.data,y.footers=null,y.topt.default_footer=!0,y.translate_header=!0,y.translate_columns=null,y.n_translate_columns=0,M(S,y,p.queryFout,!1,p.logfile),!0)}async function rm(O,R){let E={},g,S=p.popt;return ee(E),k(E,`SELECT
  n.nspname as "%s",
  d.dictname as "%s",
`,A("Schema"),A("Name")),R&&_(E,`  ( SELECT COALESCE(nt.nspname, '(null)')::pg_catalog.text || '.' || t.tmplname FROM
    pg_catalog.pg_ts_template t
    LEFT JOIN pg_catalog.pg_namespace nt ON nt.oid = t.tmplnamespace
    WHERE d.dicttemplate = t.oid ) AS  "%s",
  d.dictinitoption as "%s",
`,A("Template"),A("Init options")),_(E,`  pg_catalog.obj_description(d.oid, 'pg_ts_dict') as "%s"
`,A("Description")),C(E,`FROM pg_catalog.pg_ts_dict d
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = d.dictnamespace
`),!x(E,O,!1,!1,"n.nspname","d.dictname",null,"pg_catalog.pg_ts_dict_is_visible(d.oid)",null,3)||(C(E,"ORDER BY 1, 2;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of text search dictionaries"),S.translate_header=!0,M(g,S,p.queryFout,!1,p.logfile),!0)}async function om(O,R){let E={},g,S=p.popt;return ee(E),R?k(E,`SELECT
  n.nspname AS "%s",
  t.tmplname AS "%s",
  t.tmplinit::pg_catalog.regproc AS "%s",
  t.tmpllexize::pg_catalog.regproc AS "%s",
  pg_catalog.obj_description(t.oid, 'pg_ts_template') AS "%s"
`,A("Schema"),A("Name"),A("Init"),A("Lexize"),A("Description")):k(E,`SELECT
  n.nspname AS "%s",
  t.tmplname AS "%s",
  pg_catalog.obj_description(t.oid, 'pg_ts_template') AS "%s"
`,A("Schema"),A("Name"),A("Description")),C(E,`FROM pg_catalog.pg_ts_template t
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = t.tmplnamespace
`),!x(E,O,!1,!1,"n.nspname","t.tmplname",null,"pg_catalog.pg_ts_template_is_visible(t.oid)",null,3)||(C(E,"ORDER BY 1, 2;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of text search templates"),S.translate_header=!0,M(g,S,p.queryFout,!1,p.logfile),!0)}async function am(O,R){let E={},g,S=p.popt;return R?await lm(O):(ee(E),k(E,`SELECT
   n.nspname as "%s",
   c.cfgname as "%s",
   pg_catalog.obj_description(c.oid, 'pg_ts_config') as "%s"
FROM pg_catalog.pg_ts_config c
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.cfgnamespace
`,A("Schema"),A("Name"),A("Description")),!x(E,O,!1,!1,"n.nspname","c.cfgname",null,"pg_catalog.pg_ts_config_is_visible(c.oid)",null,3)||(C(E,"ORDER BY 1, 2;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of text search configurations"),S.translate_header=!0,M(g,S,p.queryFout,!1,p.logfile),!0))}async function lm(O){let R={},E,g;if(ee(R),k(R,`SELECT c.oid, c.cfgname,
   n.nspname,
   p.prsname,
   np.nspname as pnspname
FROM pg_catalog.pg_ts_config c
   LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.cfgnamespace,
 pg_catalog.pg_ts_parser p
   LEFT JOIN pg_catalog.pg_namespace np ON np.oid = p.prsnamespace
WHERE  p.oid = c.cfgparser
`),!x(R,O,!0,!1,"n.nspname","c.cfgname",null,"pg_catalog.pg_ts_config_is_visible(c.oid)",null,3)||(C(R,"ORDER BY 3, 2;"),E=await b(R.data),!E))return!1;if(me(E)==0)return p.quiet||(O?L('Did not find any text search configuration named "%s".',O):L("Did not find any text search configurations.")),!1;for(g=0;g<me(E);g++){let S,d,y=null,F,P=null;if(S=D(E,g,0),d=D(E,g,1),Ke(E,g,2)||(y=D(E,g,2)),F=D(E,g,3),Ke(E,g,4)||(P=D(E,g,4)),!await cm(S,y,d,P,F)||c)return!1}return!0}async function cm(O,R,E,g,S){let d={},y={},F,P=p.popt;return ee(d),k(d,`SELECT
  ( SELECT t.alias FROM
    pg_catalog.ts_token_type(c.cfgparser) AS t
    WHERE t.tokid = m.maptokentype ) AS "%s",
  pg_catalog.btrim(
    ARRAY( SELECT mm.mapdict::pg_catalog.regdictionary
           FROM pg_catalog.pg_ts_config_map AS mm
           WHERE mm.mapcfg = m.mapcfg AND mm.maptokentype = m.maptokentype
           ORDER BY mapcfg, maptokentype, mapseqno
    ) :: pg_catalog.text,
  '{}') AS "%s"
FROM pg_catalog.pg_ts_config AS c, pg_catalog.pg_ts_config_map AS m
WHERE c.oid = '%s' AND m.mapcfg = c.oid
GROUP BY m.mapcfg, m.maptokentype, c.cfgparser
ORDER BY 1;`,A("Token"),A("Dictionaries"),O),F=await b(d.data),F?(ee(y),R?_(y,o('Text search configuration "%s.%s"'),R,E):_(y,o('Text search configuration "%s"'),E),g?_(y,o(`
Parser: "%s.%s"`),g,S):_(y,o(`
Parser: "%s"`),S),P.nullPrint=null,P.title=y.data,P.footers=null,P.topt.default_footer=!1,P.translate_header=!0,M(F,P,p.queryFout,!1,p.logfile),!0):!1}async function hm(O,R){let E={},g,S=p.popt;return ee(E),k(E,`SELECT fdw.fdwname AS "%s",
  pg_catalog.pg_get_userbyid(fdw.fdwowner) AS "%s",
  fdw.fdwhandler::pg_catalog.regproc AS "%s",
  fdw.fdwvalidator::pg_catalog.regproc AS "%s"`,A("Name"),A("Owner"),A("Handler"),A("Validator")),R&&(C(E,`,
  `),gt(E,"fdwacl"),_(E,`,
 CASE WHEN fdwoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(fdwoptions)),  ', ') || ')'   END AS "%s",
  d.description AS "%s" `,A("FDW options"),A("Description"))),C(E,`
FROM pg_catalog.pg_foreign_data_wrapper fdw
`),R&&C(E,`LEFT JOIN pg_catalog.pg_description d
       ON d.classoid = fdw.tableoid AND d.objoid = fdw.oid AND d.objsubid = 0
`),!x(E,O,!1,!1,null,"fdwname",null,null,null,1)||(C(E,"ORDER BY 1;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of foreign-data wrappers"),S.translate_header=!0,M(g,S,p.queryFout,!1,p.logfile),!0)}async function fm(O,R){let E={},g,S=p.popt;return ee(E),k(E,`SELECT s.srvname AS "%s",
  pg_catalog.pg_get_userbyid(s.srvowner) AS "%s",
  f.fdwname AS "%s"`,A("Name"),A("Owner"),A("Foreign-data wrapper")),R&&(C(E,`,
  `),gt(E,"s.srvacl"),_(E,`,
  s.srvtype AS "%s",
  s.srvversion AS "%s",
  CASE WHEN srvoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(srvoptions)),  ', ') || ')'   END AS "%s",
  d.description AS "%s"`,A("Type"),A("Version"),A("FDW options"),A("Description"))),C(E,`
FROM pg_catalog.pg_foreign_server s
     JOIN pg_catalog.pg_foreign_data_wrapper f ON f.oid=s.srvfdw
`),R&&C(E,`LEFT JOIN pg_catalog.pg_description d
       ON d.classoid = s.tableoid AND d.objoid = s.oid AND d.objsubid = 0
`),!x(E,O,!1,!1,null,"s.srvname",null,null,null,1)||(C(E,"ORDER BY 1;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of foreign servers"),S.translate_header=!0,M(g,S,p.queryFout,!1,p.logfile),!0)}async function um(O,R){let E={},g,S=p.popt;return ee(E),k(E,`SELECT um.srvname AS "%s",
  um.usename AS "%s"`,A("Server"),A("User name")),R&&_(E,`,
 CASE WHEN umoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(umoptions)),  ', ') || ')'   END AS "%s"`,A("FDW options")),C(E,`
FROM pg_catalog.pg_user_mappings um
`),!x(E,O,!1,!1,null,"um.srvname","um.usename",null,null,1)||(C(E,"ORDER BY 1, 2;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of user mappings"),S.translate_header=!0,M(g,S,p.queryFout,!1,p.logfile),!0)}async function dm(O,R){let E={},g,S=p.popt;return ee(E),k(E,`SELECT n.nspname AS "%s",
  c.relname AS "%s",
  s.srvname AS "%s"`,A("Schema"),A("Table"),A("Server")),R&&_(E,`,
 CASE WHEN ftoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(ftoptions)),  ', ') || ')'   END AS "%s",
  d.description AS "%s"`,A("FDW options"),A("Description")),C(E,`
FROM pg_catalog.pg_foreign_table ft
  INNER JOIN pg_catalog.pg_class c ON c.oid = ft.ftrelid
  INNER JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
  INNER JOIN pg_catalog.pg_foreign_server s ON s.oid = ft.ftserver
`),R&&C(E,`   LEFT JOIN pg_catalog.pg_description d
          ON d.classoid = c.tableoid AND d.objoid = c.oid AND d.objsubid = 0
`),!x(E,O,!1,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(C(E,"ORDER BY 1, 2;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of foreign tables"),S.translate_header=!0,M(g,S,p.queryFout,!1,p.logfile),!0)}async function pm(O){let R={},E,g=p.popt;return ee(R),k(R,`SELECT e.extname AS "%s", e.extversion AS "%s", n.nspname AS "%s", c.description AS "%s"
FROM pg_catalog.pg_extension e LEFT JOIN pg_catalog.pg_namespace n ON n.oid = e.extnamespace LEFT JOIN pg_catalog.pg_description c ON c.objoid = e.oid AND c.classoid = 'pg_catalog.pg_extension'::pg_catalog.regclass
`,A("Name"),A("Version"),A("Schema"),A("Description")),!x(R,O,!1,!1,null,"e.extname",null,null,null,1)||(C(R,"ORDER BY 1;"),E=await b(R.data),!E)?!1:(g.nullPrint=null,g.title=o("List of installed extensions"),g.translate_header=!0,M(E,g,p.queryFout,!1,p.logfile),!0)}async function mm(O){let R={},E,g;if(ee(R),k(R,`SELECT e.extname, e.oid
FROM pg_catalog.pg_extension e
`),!x(R,O,!1,!1,null,"e.extname",null,null,null,1)||(C(R,"ORDER BY 1;"),E=await b(R.data),!E))return!1;if(me(E)==0)return p.quiet||(O?L('Did not find any extension named "%s".',O):L("Did not find any extensions.")),!1;for(g=0;g<me(E);g++){let S,d;if(S=D(E,g,0),d=D(E,g,1),!await gm(S,d)||c)return!1}return!0}async function gm(O,R){let E={},g,S={},d=p.popt;return ee(E),k(E,`SELECT pg_catalog.pg_describe_object(classid, objid, 0) AS "%s"
FROM pg_catalog.pg_depend
WHERE refclassid = 'pg_catalog.pg_extension'::pg_catalog.regclass AND refobjid = '%s' AND deptype = 'e'
ORDER BY 1;`,A("Object description"),R),g=await b(E.data),g?(d.nullPrint=null,ee(S),k(S,o('Objects in extension "%s"'),O),d.title=S.data,d.translate_header=!0,M(g,d,p.queryFout,!1,p.logfile),!0):!1}async function Em(O){let R={},E,g=p.popt,S=[!1,!1,!1,!1,!1,!1,!1,!1];return p.sversion<1e5?(L("The server (version %s) does not support publications.",fn(p.sversion,!1,void 0)),!0):(ee(R),k(R,`SELECT pubname AS "%s",
  pg_catalog.pg_get_userbyid(pubowner) AS "%s",
  puballtables AS "%s",
  pubinsert AS "%s",
  pubupdate AS "%s",
  pubdelete AS "%s"`,A("Name"),A("Owner"),A("All tables"),A("Inserts"),A("Updates"),A("Deletes")),p.sversion>=11e4&&_(R,`,
  pubtruncate AS "%s"`,A("Truncates")),p.sversion>=13e4&&_(R,`,
  pubviaroot AS "%s"`,A("Via root")),C(R,`
FROM pg_catalog.pg_publication
`),!x(R,O,!1,!1,null,"pubname",null,null,null,1)||(C(R,"ORDER BY 1;"),E=await b(R.data),!E)?!1:(g.nullPrint=null,g.title=o("List of publications"),g.translate_header=!0,g.translate_columns=S,g.n_translate_columns=Ue(S),M(E,g,p.queryFout,!1,p.logfile),!0))}async function Pl(O,R,E,g){let S,d=0,y=0;if(S=await b(O.data),S)d=me(S);else return!1;for(d>0&&Y(g,R),y=0;y<d;y++)E?k(O,'    "%s"',D(S,y,0)):(k(O,'    "%s.%s"',D(S,y,0),D(S,y,1)),Ke(S,y,3)||_(O," (%s)",D(S,y,3)),Ke(S,y,2)||_(O," WHERE %s",D(S,y,2))),Y(g,O.data);return!0}async function Tm(O){let R={},E,g,S,d,y={},F={};if(p.sversion<1e5)return L("The server (version %s) does not support publications.",fn(p.sversion,!1,void 0)),!0;if(S=p.sversion>=11e4,d=p.sversion>=13e4,ee(R),k(R,`SELECT oid, pubname,
  pg_catalog.pg_get_userbyid(pubowner) AS owner,
  puballtables, pubinsert, pubupdate, pubdelete`),S&&C(R,", pubtruncate"),d&&C(R,", pubviaroot"),C(R,`
FROM pg_catalog.pg_publication
`),!x(R,O,!1,!1,null,"pubname",null,null,null,1)||(C(R,"ORDER BY 2;"),g=await b(R.data),!g))return!1;if(me(g)==0)return p.quiet||(O?L('Did not find any publication named "%s".',O):L("Did not find any publications.")),!1;for(E=0;E<me(g);E++){let P="l",I=5,X=1,j=D(g,E,0),G=D(g,E,1),ce=re(D(g,E,3),"t")==0,oe=p.popt.topt;if(S&&I++,d&&I++,ee(y),k(y,o("Publication %s"),G),q(F,oe,y.data,I,X),se(F,A("Owner"),!0,P),se(F,A("All tables"),!0,P),se(F,A("Inserts"),!0,P),se(F,A("Updates"),!0,P),se(F,A("Deletes"),!0,P),S&&se(F,A("Truncates"),!0,P),d&&se(F,A("Via root"),!0,P),z(F,D(g,E,2),!1),z(F,D(g,E,3),!1),z(F,D(g,E,4),!1),z(F,D(g,E,5),!1),z(F,D(g,E,6),!1),S&&z(F,D(g,E,7),!1),d&&z(F,D(g,E,8),!1),!ce&&(k(R,"SELECT n.nspname, c.relname"),p.sversion>=15e4?(C(R,", pg_get_expr(pr.prqual, c.oid)"),C(R,`, (CASE WHEN pr.prattrs IS NOT NULL THEN
     pg_catalog.array_to_string(      ARRAY(SELECT attname
              FROM
                pg_catalog.generate_series(0, pg_catalog.array_upper(pr.prattrs::pg_catalog.int2[], 1)) s,
                pg_catalog.pg_attribute
        WHERE attrelid = c.oid AND attnum = prattrs[s]), ', ')
       ELSE NULL END)`)):C(R,", NULL, NULL"),_(R,`
FROM pg_catalog.pg_class c,
     pg_catalog.pg_namespace n,
     pg_catalog.pg_publication_rel pr
WHERE c.relnamespace = n.oid
  AND c.oid = pr.prrelid
  AND pr.prpubid = '%s'
ORDER BY 1,2`,j),!await Pl(R,o("Tables:"),!1,F)||p.sversion>=15e4&&(k(R,`SELECT n.nspname
FROM pg_catalog.pg_namespace n
     JOIN pg_catalog.pg_publication_namespace pn ON n.oid = pn.pnnspid
WHERE pn.pnpubid = '%s'
ORDER BY 1`,j),!await Pl(R,o("Tables from schemas:"),!0,F))))return!1;K(F,p.queryFout,!1,p.logfile)}return!0}async function Am(O,R){let E={},g,S=p.popt,d=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];return p.sversion<1e5?(L("The server (version %s) does not support subscriptions.",fn(p.sversion,!1,void 0)),!0):(ee(E),k(E,`SELECT subname AS "%s"
,  pg_catalog.pg_get_userbyid(subowner) AS "%s"
,  subenabled AS "%s"
,  subpublications AS "%s"
`,A("Name"),A("Owner"),A("Enabled"),A("Publication")),R&&(p.sversion>=14e4&&(_(E,`, subbinary AS "%s"
`,A("Binary")),p.sversion>=16e4?_(E,`, (CASE substream
    WHEN 'f' THEN 'off'
    WHEN 't' THEN 'on'
    WHEN 'p' THEN 'parallel'
   END) AS "%s"
`,A("Streaming")):_(E,`, substream AS "%s"
`,A("Streaming"))),p.sversion>=15e4&&_(E,`, subtwophasestate AS "%s"
, subdisableonerr AS "%s"
`,A("Two-phase commit"),A("Disable on error")),p.sversion>=16e4&&_(E,`, suborigin AS "%s"
, subpasswordrequired AS "%s"
, subrunasowner AS "%s"
`,A("Origin"),A("Password required"),A("Run as owner?")),p.sversion>=17e4&&_(E,`, subfailover AS "%s"
`,A("Failover")),_(E,`,  subsynccommit AS "%s"
,  subconninfo AS "%s"
`,A("Synchronous commit"),A("Conninfo")),p.sversion>=15e4&&_(E,`, subskiplsn AS "%s"
`,A("Skip LSN"))),C(E,`FROM pg_catalog.pg_subscription
WHERE subdbid = (SELECT oid
                 FROM pg_catalog.pg_database
                 WHERE datname = pg_catalog.current_database())`),!x(E,O,!0,!1,null,"subname",null,null,null,1)||(C(E,"ORDER BY 1;"),g=await b(E.data),!g)?!1:(S.nullPrint=null,S.title=o("List of subscriptions"),S.translate_header=!0,S.translate_columns=d,S.n_translate_columns=Ue(d),M(g,S,p.queryFout,!1,p.logfile),!0))}function gt(O,R){_(O,`CASE WHEN pg_catalog.cardinality(%s) = 0 THEN '%s' ELSE pg_catalog.array_to_string(%s, E'\\n') END AS "%s"`,R,A("(none)"),R,A("Access privileges"))}async function Sm(O,R,E){let g={},S,d=p.popt,y=!1,F=[!1,!1,!1,!1,!1,!1,!1];if(ee(g),k(g,`SELECT
  am.amname AS "%s",
  pg_catalog.format_type(c.opcintype, NULL) AS "%s",
  CASE
    WHEN c.opckeytype <> 0 AND c.opckeytype <> c.opcintype
    THEN pg_catalog.format_type(c.opckeytype, NULL)
    ELSE NULL
  END AS "%s",
  CASE
    WHEN pg_catalog.pg_opclass_is_visible(c.oid)
    THEN pg_catalog.format('%%I', c.opcname)
    ELSE pg_catalog.format('%%I.%%I', n.nspname, c.opcname)
  END AS "%s",
  (CASE WHEN c.opcdefault
    THEN '%s'
    ELSE '%s'
  END) AS "%s"`,A("AM"),A("Input type"),A("Storage type"),A("Operator class"),A("yes"),A("no"),A("Default?")),E&&_(g,`,
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(of.oid)
    THEN pg_catalog.format('%%I', of.opfname)
    ELSE pg_catalog.format('%%I.%%I', ofn.nspname, of.opfname)
  END AS "%s",
 pg_catalog.pg_get_userbyid(c.opcowner) AS "%s"
`,A("Operator family"),A("Owner")),C(g,`
FROM pg_catalog.pg_opclass c
  LEFT JOIN pg_catalog.pg_am am on am.oid = c.opcmethod
  LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.opcnamespace
  LEFT JOIN pg_catalog.pg_type t ON t.oid = c.opcintype
  LEFT JOIN pg_catalog.pg_namespace tn ON tn.oid = t.typnamespace
`),E&&C(g,`  LEFT JOIN pg_catalog.pg_opfamily of ON of.oid = c.opcfamily
  LEFT JOIN pg_catalog.pg_namespace ofn ON ofn.oid = of.opfnamespace
`),O){if(y={value:y},!x(g,O,!1,!1,null,"am.amname",null,null,y,1))return!1;y=y.value}return R&&!x(g,R,y,!1,"tn.nspname","t.typname","pg_catalog.format_type(t.oid, NULL)","pg_catalog.pg_type_is_visible(t.oid)",null,3)||(C(g,"ORDER BY 1, 2, 4;"),S=await b(g.data),!S)?!1:(d.nullPrint=null,d.title=o("List of operator classes"),d.translate_header=!0,d.translate_columns=F,d.n_translate_columns=Ue(F),M(S,d,p.queryFout,!1,p.logfile),!0)}async function Rm(O,R,E){let g={},S,d=p.popt,y=!1,F=[!1,!1,!1,!1];if(ee(g),k(g,`SELECT
  am.amname AS "%s",
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(f.oid)
    THEN pg_catalog.format('%%I', f.opfname)
    ELSE pg_catalog.format('%%I.%%I', n.nspname, f.opfname)
  END AS "%s",
  (SELECT
     pg_catalog.string_agg(pg_catalog.format_type(oc.opcintype, NULL), ', ')
   FROM pg_catalog.pg_opclass oc
   WHERE oc.opcfamily = f.oid) "%s"`,A("AM"),A("Operator family"),A("Applicable types")),E&&_(g,`,
  pg_catalog.pg_get_userbyid(f.opfowner) AS "%s"
`,A("Owner")),C(g,`
FROM pg_catalog.pg_opfamily f
  LEFT JOIN pg_catalog.pg_am am on am.oid = f.opfmethod
  LEFT JOIN pg_catalog.pg_namespace n ON n.oid = f.opfnamespace
`),O){if(y={value:y},!x(g,O,!1,!1,null,"am.amname",null,null,y,1))return!1;y=y.value}if(R){if(_(g,`  %s EXISTS (
    SELECT 1
    FROM pg_catalog.pg_type t
    JOIN pg_catalog.pg_opclass oc ON oc.opcintype = t.oid
    LEFT JOIN pg_catalog.pg_namespace tn ON tn.oid = t.typnamespace
    WHERE oc.opcfamily = f.oid
`,y?"AND":"WHERE"),!x(g,R,!0,!1,"tn.nspname","t.typname","pg_catalog.format_type(t.oid, NULL)","pg_catalog.pg_type_is_visible(t.oid)",null,3))return!1;C(g,`  )
`)}return C(g,"ORDER BY 1, 2;"),S=await b(g.data),S?(d.nullPrint=null,d.title=o("List of operator families"),d.translate_header=!0,d.translate_columns=F,d.n_translate_columns=Ue(F),M(S,d,p.queryFout,!1,p.logfile),!0):!1}async function _m(O,R,E){let g={},S,d=p.popt,y=!1,F=[!1,!1,!1,!1,!1,!1];if(ee(g),k(g,`SELECT
  am.amname AS "%s",
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(of.oid)
    THEN pg_catalog.format('%%I', of.opfname)
    ELSE pg_catalog.format('%%I.%%I', nsf.nspname, of.opfname)
  END AS "%s",
  o.amopopr::pg_catalog.regoperator AS "%s"
,  o.amopstrategy AS "%s",
  CASE o.amoppurpose
    WHEN 'o' THEN '%s'
    WHEN 's' THEN '%s'
  END AS "%s"
`,A("AM"),A("Operator family"),A("Operator"),A("Strategy"),A("ordering"),A("search"),A("Purpose")),E&&_(g,`, ofs.opfname AS "%s"
`,A("Sort opfamily")),C(g,`FROM pg_catalog.pg_amop o
  LEFT JOIN pg_catalog.pg_opfamily of ON of.oid = o.amopfamily
  LEFT JOIN pg_catalog.pg_am am ON am.oid = of.opfmethod AND am.oid = o.amopmethod
  LEFT JOIN pg_catalog.pg_namespace nsf ON of.opfnamespace = nsf.oid
`),E&&C(g,`  LEFT JOIN pg_catalog.pg_opfamily ofs ON ofs.oid = o.amopsortfamily
`),O){if(y={value:y},!x(g,O,!1,!1,null,"am.amname",null,null,y,1))return!1;y=y.value}return R&&!x(g,R,y,!1,"nsf.nspname","of.opfname",null,null,null,3)||(C(g,`ORDER BY 1, 2,
  o.amoplefttype = o.amoprighttype DESC,
  pg_catalog.format_type(o.amoplefttype, NULL),
  pg_catalog.format_type(o.amoprighttype, NULL),
  o.amopstrategy;`),S=await b(g.data),!S)?!1:(d.nullPrint=null,d.title=o("List of operators of operator families"),d.translate_header=!0,d.translate_columns=F,d.n_translate_columns=Ue(F),M(S,d,p.queryFout,!1,p.logfile),!0)}async function Om(O,R,E){let g={},S,d=p.popt,y=!1,F=[!1,!1,!1,!1,!1,!1];if(ee(g),k(g,`SELECT
  am.amname AS "%s",
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(of.oid)
    THEN pg_catalog.format('%%I', of.opfname)
    ELSE pg_catalog.format('%%I.%%I', ns.nspname, of.opfname)
  END AS "%s",
  pg_catalog.format_type(ap.amproclefttype, NULL) AS "%s",
  pg_catalog.format_type(ap.amprocrighttype, NULL) AS "%s",
  ap.amprocnum AS "%s"
`,A("AM"),A("Operator family"),A("Registered left type"),A("Registered right type"),A("Number")),E?_(g,`, ap.amproc::pg_catalog.regprocedure AS "%s"
`,A("Function")):_(g,`, p.proname AS "%s"
`,A("Function")),C(g,`FROM pg_catalog.pg_amproc ap
  LEFT JOIN pg_catalog.pg_opfamily of ON of.oid = ap.amprocfamily
  LEFT JOIN pg_catalog.pg_am am ON am.oid = of.opfmethod
  LEFT JOIN pg_catalog.pg_namespace ns ON of.opfnamespace = ns.oid
  LEFT JOIN pg_catalog.pg_proc p ON ap.amproc = p.oid
`),O){if(y={value:y},!x(g,O,!1,!1,null,"am.amname",null,null,y,1))return!1;y=y.value}return R&&!x(g,R,y,!1,"ns.nspname","of.opfname",null,null,null,3)||(C(g,`ORDER BY 1, 2,
  ap.amproclefttype = ap.amprocrighttype DESC,
  3, 4, 5;`),S=await b(g.data),!S)?!1:(d.nullPrint=null,d.title=o("List of support functions of operator families"),d.translate_header=!0,d.translate_columns=F,d.n_translate_columns=Ue(F),M(S,d,p.queryFout,!1,p.logfile),!0)}async function Nm(O){let R={},E,g=p.popt;if(ee(R),k(R,`SELECT oid as "%s",
  pg_catalog.pg_get_userbyid(lomowner) as "%s",
  `,A("ID"),A("Owner")),O&&(gt(R,"lomacl"),C(R,`,
  `)),_(R,`pg_catalog.obj_description(oid, 'pg_largeobject') as "%s"
FROM pg_catalog.pg_largeobject_metadata
ORDER BY oid`,A("Description")),E=await b(R.data),!E)return!1;g.nullPrint=null,g.title=o("Large objects"),g.translate_header=!0,M(E,g,p.queryFout,!1,p.logfile)}return!0}return{promise:u(),cancel:h}}function $n(n){if(!n)throw new Error(`Assertion failed (value: ${n})`)}const A=bl,xn=bl,o=bl;function lr(n,e){const t=n.indexOf(e);return t===-1?null:t}const Pe=lr;function pn(n){return n.length}function ei(n,e,t){if(typeof n!="string"||typeof e!="string")throw new Error("Not a string");return n.length>t&&(n=n.slice(0,t)),e.length>t&&(e=e.slice(0,t)),n<e?-1:n>e?1:0}function re(n,e){return ei(n,e,1/0)}function tO(n,e){const t=pn(n);for(let i=0;i<t;i++)if(e.indexOf(n[i])===-1)return i;return t}function jh(n){return parseInt(n,10)}function ko(n){return parseInt(n,10)}function Xh(n){return n===" "||n==="	"||n===`
`||n==="\r"}function nO(n){return n==='"'||n==="'"}function iO(n){const e=n.charCodeAt(0);return e>=65&&e<=90}function Ue(n){return n.length}function Ua(n){return n.toLowerCase()}function sO(n,e){return re(n.toLowerCase(),e.toLowerCase())}function zh(n,e,t){return e}function ee(n){n.data="",n.len=0}const Po=ee;function C(n,e){n.data+=e,n.len=n.data.length}const Le=C;function _(n,e,...t){const i=et(e,...t);C(n,i)}function k(n,e,...t){ee(n),_(n,e,...t)}function Ba(n,e,t,i){const s="'"+e.replace(i?/[']/g:/['\\]/g,"\\$&")+"'";C(n,s)}function Jn(n,e,t){if(Pe(e,"\\")!=null&&Wi(t)>=80100){n.len>0&&n.data[n.len-1]!=" "&&Le(n," "),Le(n,H_),Ba(n,e,fp(t),!1);return}Ba(n,e,t.encoding,t.std_strings)}function et(n,...e){let t="",i=0,s=0,r;for(;(r=n.indexOf("%",s))!==-1;){let a=0,l=!1;t+=n.slice(s,r),s=r+1;let c=n[s++];if(c==="%"&&(t+="%"),c==="*"&&(a=parseInt(e[i++],10),c=n[s++]),c==="-"&&(l=!0,c=n[s++]),c>="0"&&c<="9"&&(a=parseInt(c,10),c=n[s++]),c==="s"||c==="c"||c==="d"||c==="u"){const h=String(e[i++]),f=a-h.length;l===!1&&f>0&&(t+=" ".repeat(f)),t+=h,l===!0&&f>0&&(t+=" ".repeat(f))}}return t+=n.slice(s),t}const Mo=et;function Kh(n){return n?n.dbName:null}function Wi(n){return!n||n.status===1?0:n.sversion}function fp(n){return!n||n.status!=0?-1:n.client_encoding}function me(n){return n.rowCount}function up(n){return n.fields.length}function dp(n,e){return n.fields[e].name}function rO(n,e){return n.fields[e].dataTypeID}function Ke(n,e,t){return n.rows[e][t]===null?1:0}function D(n,e,t){const i=n.rows[e][t];return String(i===null?"":i)}function vn(n,e){let t,i,s,r,a;if(!n||e==null||e[0]==null)return-1;for(t=!1,s="",i=0,a=pn(e);i<a;i++){let l=e[i];t?l=='"'?e[i+1]=='"'?(s+='"',i++):t=!1:s+=l:l=='"'?t=!0:(l=Ua(l),s+=l)}for(r=0,a=up(n);r<a;r++)if(re(s,dp(n,r))==0)return r;return-1}function fn(n,e,t,i){return n>=1e5?t=et("%d",n/1e4):t=et("%d.%d",Math.floor(n/1e4),Math.floor(n/100)%100),t}function Dn(n,e,t,i){if(e!==0&&e!==4)throw new Error(`scan type ${e} not implemented`);const s=[],r=/^(.*);*$/;let a;for(;;){if(a=n[0][n[1]],a==null)return null;if(!Xh(a))break;n[1]++}if(e===4)return n[0].slice(n[1],n[1]=n[0].length);let l="";for(;;){if(a=n[0][n[1]++],a==null)return s.length>0?null:l.match(r)[1];if(nO(a))a===s[s.length-1]?s.pop():s.push(a),a==='"'&&(l+=a);else{if(s.length===0&&Xh(a))return l.match(r)[1];l+=a}}}function bl(n){return n}const oO=`Help
  \\? [commands]          show help on backslash commands
  \\h [NAME]              help on syntax of SQL commands, * for all commands

Informational
  (options: S = show system objects, + = additional detail)
  \\d[S+]                 list tables, views, and sequences
  \\d[S+]  NAME           describe table, view, sequence, or index
  \\da[S]  [PATTERN]      list aggregates
  \\dA[+]  [PATTERN]      list access methods
  \\dAc[+] [AMPTRN [TYPEPTRN]]  list operator classes
  \\dAf[+] [AMPTRN [TYPEPTRN]]  list operator families
  \\dAo[+] [AMPTRN [OPFPTRN]]   list operators of operator families
  \\dAp[+] [AMPTRN [OPFPTRN]]   list support functions of operator families
  \\db[+]  [PATTERN]      list tablespaces
  \\dc[S+] [PATTERN]      list conversions
  \\dconfig[+] [PATTERN]  list configuration parameters
  \\dC[+]  [PATTERN]      list casts
  \\dd[S]  [PATTERN]      show object descriptions not displayed elsewhere
  \\dD[S+] [PATTERN]      list domains
  \\ddp    [PATTERN]      list default privileges
  \\dE[S+] [PATTERN]      list foreign tables
  \\des[+] [PATTERN]      list foreign servers
  \\det[+] [PATTERN]      list foreign tables
  \\deu[+] [PATTERN]      list user mappings
  \\dew[+] [PATTERN]      list foreign-data wrappers
  \\df[anptw][S+] [FUNCPTRN [TYPEPTRN ...]]
                         list [only agg/normal/procedure/trigger/window] functions
  \\dF[+]  [PATTERN]      list text search configurations
  \\dFd[+] [PATTERN]      list text search dictionaries
  \\dFp[+] [PATTERN]      list text search parsers
  \\dFt[+] [PATTERN]      list text search templates
  \\dg[S+] [PATTERN]      list roles
  \\di[S+] [PATTERN]      list indexes
  \\dl[+]                 list large objects, same as \\lo_list
  \\dL[S+] [PATTERN]      list procedural languages
  \\dm[S+] [PATTERN]      list materialized views
  \\dn[S+] [PATTERN]      list schemas
  \\do[S+] [OPPTRN [TYPEPTRN [TYPEPTRN]]]
                         list operators
  \\dO[S+] [PATTERN]      list collations
  \\dp[S]  [PATTERN]      list table, view, and sequence access privileges
  \\dP[itn+] [PATTERN]    list [only index/table] partitioned relations [n=nested]
  \\drds [ROLEPTRN [DBPTRN]] list per-database role settings
  \\drg[S] [PATTERN]      list role grants
  \\dRp[+] [PATTERN]      list replication publications
  \\dRs[+] [PATTERN]      list replication subscriptions
  \\ds[S+] [PATTERN]      list sequences
  \\dt[S+] [PATTERN]      list tables
  \\dT[S+] [PATTERN]      list data types
  \\du[S+] [PATTERN]      list roles
  \\dv[S+] [PATTERN]      list views
  \\dx[+]  [PATTERN]      list extensions
  \\dX     [PATTERN]      list extended statistics
  \\dy[+]  [PATTERN]      list event triggers
  \\l[+]   [PATTERN]      list databases
  \\lo_list[+]            list large objects
  \\sf[+]  FUNCNAME       show a function's definition
  \\sv[+]  VIEWNAME       show a view's definition
  \\z[S]   [PATTERN]      same as \\dp
`,Pi=[["ABORT","abort the current transaction","sql-abort",aO],["ALTER AGGREGATE","change the definition of an aggregate function","sql-alteraggregate",lO],["ALTER COLLATION","change the definition of a collation","sql-altercollation",cO],["ALTER CONVERSION","change the definition of a conversion","sql-alterconversion",hO],["ALTER DATABASE","change a database","sql-alterdatabase",fO],["ALTER DEFAULT PRIVILEGES","define default access privileges","sql-alterdefaultprivileges",uO],["ALTER DOMAIN","change the definition of a domain","sql-alterdomain",dO],["ALTER EVENT TRIGGER","change the definition of an event trigger","sql-altereventtrigger",pO],["ALTER EXTENSION","change the definition of an extension","sql-alterextension",mO],["ALTER FOREIGN DATA WRAPPER","change the definition of a foreign-data wrapper","sql-alterforeigndatawrapper",gO],["ALTER FOREIGN TABLE","change the definition of a foreign table","sql-alterforeigntable",EO],["ALTER FUNCTION","change the definition of a function","sql-alterfunction",TO],["ALTER GROUP","change role name or membership","sql-altergroup",AO],["ALTER INDEX","change the definition of an index","sql-alterindex",SO],["ALTER LANGUAGE","change the definition of a procedural language","sql-alterlanguage",RO],["ALTER LARGE OBJECT","change the definition of a large object","sql-alterlargeobject",_O],["ALTER MATERIALIZED VIEW","change the definition of a materialized view","sql-altermaterializedview",OO],["ALTER OPERATOR","change the definition of an operator","sql-alteroperator",NO],["ALTER OPERATOR CLASS","change the definition of an operator class","sql-alteropclass",bO],["ALTER OPERATOR FAMILY","change the definition of an operator family","sql-alteropfamily",CO],["ALTER POLICY","change the definition of a row-level security policy","sql-alterpolicy",yO],["ALTER PROCEDURE","change the definition of a procedure","sql-alterprocedure",LO],["ALTER PUBLICATION","change the definition of a publication","sql-alterpublication",IO],["ALTER ROLE","change a database role","sql-alterrole",wO],["ALTER ROUTINE","change the definition of a routine","sql-alterroutine",xO],["ALTER RULE","change the definition of a rule","sql-alterrule",vO],["ALTER SCHEMA","change the definition of a schema","sql-alterschema",DO],["ALTER SEQUENCE","change the definition of a sequence generator","sql-altersequence",kO],["ALTER SERVER","change the definition of a foreign server","sql-alterserver",PO],["ALTER STATISTICS","change the definition of an extended statistics object","sql-alterstatistics",MO],["ALTER SUBSCRIPTION","change the definition of a subscription","sql-altersubscription",FO],["ALTER SYSTEM","change a server configuration parameter","sql-altersystem",UO],["ALTER TABLE","change the definition of a table","sql-altertable",BO],["ALTER TABLESPACE","change the definition of a tablespace","sql-altertablespace",HO],["ALTER TEXT SEARCH CONFIGURATION","change the definition of a text search configuration","sql-altertsconfig",WO],["ALTER TEXT SEARCH DICTIONARY","change the definition of a text search dictionary","sql-altertsdictionary",GO],["ALTER TEXT SEARCH PARSER","change the definition of a text search parser","sql-altertsparser",VO],["ALTER TEXT SEARCH TEMPLATE","change the definition of a text search template","sql-altertstemplate",qO],["ALTER TRIGGER","change the definition of a trigger","sql-altertrigger",YO],["ALTER TYPE","change the definition of a type","sql-altertype",jO],["ALTER USER","change a database role","sql-alteruser",XO],["ALTER USER MAPPING","change the definition of a user mapping","sql-alterusermapping",zO],["ALTER VIEW","change the definition of a view","sql-alterview",KO],["ANALYZE","collect statistics about a database","sql-analyze",$O],["BEGIN","start a transaction block","sql-begin",JO],["CALL","invoke a procedure","sql-call",QO],["CHECKPOINT","force a write-ahead log checkpoint","sql-checkpoint",ZO],["CLOSE","close a cursor","sql-close",eN],["CLUSTER","cluster a table according to an index","sql-cluster",tN],["COMMENT","define or change the comment of an object","sql-comment",nN],["COMMIT","commit the current transaction","sql-commit",iN],["COMMIT PREPARED","commit a transaction that was earlier prepared for two-phase commit","sql-commit-prepared",sN],["COPY","copy data between a file and a table","sql-copy",rN],["CREATE ACCESS METHOD","define a new access method","sql-create-access-method",oN],["CREATE AGGREGATE","define a new aggregate function","sql-createaggregate",aN],["CREATE CAST","define a new cast","sql-createcast",lN],["CREATE COLLATION","define a new collation","sql-createcollation",cN],["CREATE CONVERSION","define a new encoding conversion","sql-createconversion",hN],["CREATE DATABASE","create a new database","sql-createdatabase",fN],["CREATE DOMAIN","define a new domain","sql-createdomain",uN],["CREATE EVENT TRIGGER","define a new event trigger","sql-createeventtrigger",dN],["CREATE EXTENSION","install an extension","sql-createextension",pN],["CREATE FOREIGN DATA WRAPPER","define a new foreign-data wrapper","sql-createforeigndatawrapper",mN],["CREATE FOREIGN TABLE","define a new foreign table","sql-createforeigntable",gN],["CREATE FUNCTION","define a new function","sql-createfunction",EN],["CREATE GROUP","define a new database role","sql-creategroup",TN],["CREATE INDEX","define a new index","sql-createindex",AN],["CREATE LANGUAGE","define a new procedural language","sql-createlanguage",SN],["CREATE MATERIALIZED VIEW","define a new materialized view","sql-creatematerializedview",RN],["CREATE OPERATOR","define a new operator","sql-createoperator",_N],["CREATE OPERATOR CLASS","define a new operator class","sql-createopclass",ON],["CREATE OPERATOR FAMILY","define a new operator family","sql-createopfamily",NN],["CREATE POLICY","define a new row-level security policy for a table","sql-createpolicy",bN],["CREATE PROCEDURE","define a new procedure","sql-createprocedure",CN],["CREATE PUBLICATION","define a new publication","sql-createpublication",yN],["CREATE ROLE","define a new database role","sql-createrole",LN],["CREATE RULE","define a new rewrite rule","sql-createrule",IN],["CREATE SCHEMA","define a new schema","sql-createschema",wN],["CREATE SEQUENCE","define a new sequence generator","sql-createsequence",xN],["CREATE SERVER","define a new foreign server","sql-createserver",vN],["CREATE STATISTICS","define extended statistics","sql-createstatistics",DN],["CREATE SUBSCRIPTION","define a new subscription","sql-createsubscription",kN],["CREATE TABLE","define a new table","sql-createtable",PN],["CREATE TABLE AS","define a new table from the results of a query","sql-createtableas",MN],["CREATE TABLESPACE","define a new tablespace","sql-createtablespace",FN],["CREATE TEXT SEARCH CONFIGURATION","define a new text search configuration","sql-createtsconfig",UN],["CREATE TEXT SEARCH DICTIONARY","define a new text search dictionary","sql-createtsdictionary",BN],["CREATE TEXT SEARCH PARSER","define a new text search parser","sql-createtsparser",HN],["CREATE TEXT SEARCH TEMPLATE","define a new text search template","sql-createtstemplate",WN],["CREATE TRANSFORM","define a new transform","sql-createtransform",GN],["CREATE TRIGGER","define a new trigger","sql-createtrigger",VN],["CREATE TYPE","define a new data type","sql-createtype",qN],["CREATE USER","define a new database role","sql-createuser",YN],["CREATE USER MAPPING","define a new mapping of a user to a foreign server","sql-createusermapping",jN],["CREATE VIEW","define a new view","sql-createview",XN],["DEALLOCATE","deallocate a prepared statement","sql-deallocate",zN],["DECLARE","define a cursor","sql-declare",KN],["DELETE","delete rows of a table","sql-delete",$N],["DISCARD","discard session state","sql-discard",JN],["DO","execute an anonymous code block","sql-do",QN],["DROP ACCESS METHOD","remove an access method","sql-drop-access-method",ZN],["DROP AGGREGATE","remove an aggregate function","sql-dropaggregate",eb],["DROP CAST","remove a cast","sql-dropcast",tb],["DROP COLLATION","remove a collation","sql-dropcollation",nb],["DROP CONVERSION","remove a conversion","sql-dropconversion",ib],["DROP DATABASE","remove a database","sql-dropdatabase",sb],["DROP DOMAIN","remove a domain","sql-dropdomain",rb],["DROP EVENT TRIGGER","remove an event trigger","sql-dropeventtrigger",ob],["DROP EXTENSION","remove an extension","sql-dropextension",ab],["DROP FOREIGN DATA WRAPPER","remove a foreign-data wrapper","sql-dropforeigndatawrapper",lb],["DROP FOREIGN TABLE","remove a foreign table","sql-dropforeigntable",cb],["DROP FUNCTION","remove a function","sql-dropfunction",hb],["DROP GROUP","remove a database role","sql-dropgroup",fb],["DROP INDEX","remove an index","sql-dropindex",ub],["DROP LANGUAGE","remove a procedural language","sql-droplanguage",db],["DROP MATERIALIZED VIEW","remove a materialized view","sql-dropmaterializedview",pb],["DROP OPERATOR","remove an operator","sql-dropoperator",mb],["DROP OPERATOR CLASS","remove an operator class","sql-dropopclass",gb],["DROP OPERATOR FAMILY","remove an operator family","sql-dropopfamily",Eb],["DROP OWNED","remove database objects owned by a database role","sql-drop-owned",Tb],["DROP POLICY","remove a row-level security policy from a table","sql-droppolicy",Ab],["DROP PROCEDURE","remove a procedure","sql-dropprocedure",Sb],["DROP PUBLICATION","remove a publication","sql-droppublication",Rb],["DROP ROLE","remove a database role","sql-droprole",_b],["DROP ROUTINE","remove a routine","sql-droproutine",Ob],["DROP RULE","remove a rewrite rule","sql-droprule",Nb],["DROP SCHEMA","remove a schema","sql-dropschema",bb],["DROP SEQUENCE","remove a sequence","sql-dropsequence",Cb],["DROP SERVER","remove a foreign server descriptor","sql-dropserver",yb],["DROP STATISTICS","remove extended statistics","sql-dropstatistics",Lb],["DROP SUBSCRIPTION","remove a subscription","sql-dropsubscription",Ib],["DROP TABLE","remove a table","sql-droptable",wb],["DROP TABLESPACE","remove a tablespace","sql-droptablespace",xb],["DROP TEXT SEARCH CONFIGURATION","remove a text search configuration","sql-droptsconfig",vb],["DROP TEXT SEARCH DICTIONARY","remove a text search dictionary","sql-droptsdictionary",Db],["DROP TEXT SEARCH PARSER","remove a text search parser","sql-droptsparser",kb],["DROP TEXT SEARCH TEMPLATE","remove a text search template","sql-droptstemplate",Pb],["DROP TRANSFORM","remove a transform","sql-droptransform",Mb],["DROP TRIGGER","remove a trigger","sql-droptrigger",Fb],["DROP TYPE","remove a data type","sql-droptype",Ub],["DROP USER","remove a database role","sql-dropuser",Bb],["DROP USER MAPPING","remove a user mapping for a foreign server","sql-dropusermapping",Hb],["DROP VIEW","remove a view","sql-dropview",Wb],["END","commit the current transaction","sql-end",Gb],["EXECUTE","execute a prepared statement","sql-execute",Vb],["EXPLAIN","show the execution plan of a statement","sql-explain",qb],["FETCH","retrieve rows from a query using a cursor","sql-fetch",Yb],["GRANT","define access privileges","sql-grant",jb],["IMPORT FOREIGN SCHEMA","import table definitions from a foreign server","sql-importforeignschema",Xb],["INSERT","create new rows in a table","sql-insert",zb],["LISTEN","listen for a notification","sql-listen",Kb],["LOAD","load a shared library file","sql-load",$b],["LOCK","lock a table","sql-lock",Jb],["MERGE","conditionally insert, update, or delete rows of a table","sql-merge",Qb],["MOVE","position a cursor","sql-move",Zb],["NOTIFY","generate a notification","sql-notify",eC],["PREPARE","prepare a statement for execution","sql-prepare",tC],["PREPARE TRANSACTION","prepare the current transaction for two-phase commit","sql-prepare-transaction",nC],["REASSIGN OWNED","change the ownership of database objects owned by a database role","sql-reassign-owned",iC],["REFRESH MATERIALIZED VIEW","replace the contents of a materialized view","sql-refreshmaterializedview",sC],["REINDEX","rebuild indexes","sql-reindex",rC],["RELEASE SAVEPOINT","release a previously defined savepoint","sql-release-savepoint",oC],["RESET","restore the value of a run-time parameter to the default value","sql-reset",aC],["REVOKE","remove access privileges","sql-revoke",lC],["ROLLBACK","abort the current transaction","sql-rollback",cC],["ROLLBACK PREPARED","cancel a transaction that was earlier prepared for two-phase commit","sql-rollback-prepared",hC],["ROLLBACK TO SAVEPOINT","roll back to a savepoint","sql-rollback-to",fC],["SAVEPOINT","define a new savepoint within the current transaction","sql-savepoint",uC],["SECURITY LABEL","define or change a security label applied to an object","sql-security-label",dC],["SELECT","retrieve rows from a table or view","sql-select",pC],["SELECT INTO","define a new table from the results of a query","sql-selectinto",mC],["SET","change a run-time parameter","sql-set",gC],["SET CONSTRAINTS","set constraint check timing for the current transaction","sql-set-constraints",EC],["SET ROLE","set the current user identifier of the current session","sql-set-role",TC],["SET SESSION AUTHORIZATION","set the session user identifier and the current user identifier of the current session","sql-set-session-authorization",AC],["SET TRANSACTION","set the characteristics of the current transaction","sql-set-transaction",SC],["SHOW","show the value of a run-time parameter","sql-show",RC],["START TRANSACTION","start a transaction block","sql-start-transaction",_C],["TABLE","retrieve rows from a table or view","sql-select",OC],["TRUNCATE","empty a table or set of tables","sql-truncate",NC],["UNLISTEN","stop listening for a notification","sql-unlisten",bC],["UPDATE","update rows of a table","sql-update",CC],["VACUUM","garbage-collect and optionally analyze a database","sql-vacuum",yC],["VALUES","compute a set of rows","sql-values",LC],["WITH","retrieve rows from a table or view","sql-select",IC]];function aO(n){_(n,"ABORT [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function lO(n){_(n,`ALTER AGGREGATE %s ( %s ) RENAME TO %s
ALTER AGGREGATE %s ( %s )
                OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER AGGREGATE %s ( %s ) SET SCHEMA %s

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,o("name"),o("aggregate_signature"),o("new_name"),o("name"),o("aggregate_signature"),o("new_owner"),o("name"),o("aggregate_signature"),o("new_schema"),o("where aggregate_signature is:"),o("argmode"),o("argname"),o("argtype"),o("argmode"),o("argname"),o("argtype"),o("argmode"),o("argname"),o("argtype"))}function cO(n){_(n,`ALTER COLLATION %s REFRESH VERSION

ALTER COLLATION %s RENAME TO %s
ALTER COLLATION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER COLLATION %s SET SCHEMA %s`,o("name"),o("name"),o("new_name"),o("name"),o("new_owner"),o("name"),o("new_schema"))}function hO(n){_(n,`ALTER CONVERSION %s RENAME TO %s
ALTER CONVERSION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER CONVERSION %s SET SCHEMA %s`,o("name"),o("new_name"),o("name"),o("new_owner"),o("name"),o("new_schema"))}function fO(n){_(n,`ALTER DATABASE %s [ [ WITH ] %s [ ... ] ]

%s

    ALLOW_CONNECTIONS %s
    CONNECTION LIMIT %s
    IS_TEMPLATE %s

ALTER DATABASE %s RENAME TO %s

ALTER DATABASE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER DATABASE %s SET TABLESPACE %s

ALTER DATABASE %s REFRESH COLLATION VERSION

ALTER DATABASE %s SET %s { TO | = } { %s | DEFAULT }
ALTER DATABASE %s SET %s FROM CURRENT
ALTER DATABASE %s RESET %s
ALTER DATABASE %s RESET ALL`,o("name"),o("option"),o("where option can be:"),o("allowconn"),o("connlimit"),o("istemplate"),o("name"),o("new_name"),o("name"),o("new_owner"),o("name"),o("new_tablespace"),o("name"),o("name"),o("configuration_parameter"),o("value"),o("name"),o("configuration_parameter"),o("name"),o("configuration_parameter"),o("name"))}function uO(n){_(n,`ALTER DEFAULT PRIVILEGES
    [ FOR { ROLE | USER } %s [, ...] ]
    [ IN SCHEMA %s [, ...] ]
    %s

%s

GRANT { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER | MAINTAIN }
    [, ...] | ALL [ PRIVILEGES ] }
    ON TABLES
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON SEQUENCES
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { EXECUTE | ALL [ PRIVILEGES ] }
    ON { FUNCTIONS | ROUTINES }
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON TYPES
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { { USAGE | CREATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON SCHEMAS
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

REVOKE [ GRANT OPTION FOR ]
    { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER | MAINTAIN }
    [, ...] | ALL [ PRIVILEGES ] }
    ON TABLES
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON SEQUENCES
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { EXECUTE | ALL [ PRIVILEGES ] }
    ON { FUNCTIONS | ROUTINES }
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON TYPES
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { USAGE | CREATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON SCHEMAS
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]`,o("target_role"),o("schema_name"),o("abbreviated_grant_or_revoke"),o("where abbreviated_grant_or_revoke is one of:"),o("role_name"),o("role_name"),o("role_name"),o("role_name"),o("role_name"),o("role_name"),o("role_name"),o("role_name"),o("role_name"),o("role_name"))}function dO(n){_(n,`ALTER DOMAIN %s
    { SET DEFAULT %s | DROP DEFAULT }
ALTER DOMAIN %s
    { SET | DROP } NOT NULL
ALTER DOMAIN %s
    ADD %s [ NOT VALID ]
ALTER DOMAIN %s
    DROP CONSTRAINT [ IF EXISTS ] %s [ RESTRICT | CASCADE ]
ALTER DOMAIN %s
     RENAME CONSTRAINT %s TO %s
ALTER DOMAIN %s
    VALIDATE CONSTRAINT %s
ALTER DOMAIN %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER DOMAIN %s
    RENAME TO %s
ALTER DOMAIN %s
    SET SCHEMA %s`,o("name"),o("expression"),o("name"),o("name"),o("domain_constraint"),o("name"),o("constraint_name"),o("name"),o("constraint_name"),o("new_constraint_name"),o("name"),o("constraint_name"),o("name"),o("new_owner"),o("name"),o("new_name"),o("name"),o("new_schema"))}function pO(n){_(n,`ALTER EVENT TRIGGER %s DISABLE
ALTER EVENT TRIGGER %s ENABLE [ REPLICA | ALWAYS ]
ALTER EVENT TRIGGER %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER EVENT TRIGGER %s RENAME TO %s`,o("name"),o("name"),o("name"),o("new_owner"),o("name"),o("new_name"))}function mO(n){_(n,`ALTER EXTENSION %s UPDATE [ TO %s ]
ALTER EXTENSION %s SET SCHEMA %s
ALTER EXTENSION %s ADD %s
ALTER EXTENSION %s DROP %s

%s

  ACCESS METHOD %s |
  AGGREGATE %s ( %s ) |
  CAST (%s AS %s) |
  COLLATION %s |
  CONVERSION %s |
  DOMAIN %s |
  EVENT TRIGGER %s |
  FOREIGN DATA WRAPPER %s |
  FOREIGN TABLE %s |
  FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  MATERIALIZED VIEW %s |
  OPERATOR %s (%s, %s) |
  OPERATOR CLASS %s USING %s |
  OPERATOR FAMILY %s USING %s |
  [ PROCEDURAL ] LANGUAGE %s |
  PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  SCHEMA %s |
  SEQUENCE %s |
  SERVER %s |
  TABLE %s |
  TEXT SEARCH CONFIGURATION %s |
  TEXT SEARCH DICTIONARY %s |
  TEXT SEARCH PARSER %s |
  TEXT SEARCH TEMPLATE %s |
  TRANSFORM FOR %s LANGUAGE %s |
  TYPE %s |
  VIEW %s

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,o("name"),o("new_version"),o("name"),o("new_schema"),o("name"),o("member_object"),o("name"),o("member_object"),o("where member_object is:"),o("object_name"),o("aggregate_name"),o("aggregate_signature"),o("source_type"),o("target_type"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("function_name"),o("argmode"),o("argname"),o("argtype"),o("object_name"),o("operator_name"),o("left_type"),o("right_type"),o("object_name"),o("index_method"),o("object_name"),o("index_method"),o("object_name"),o("procedure_name"),o("argmode"),o("argname"),o("argtype"),o("routine_name"),o("argmode"),o("argname"),o("argtype"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("type_name"),o("lang_name"),o("object_name"),o("object_name"),o("and aggregate_signature is:"),o("argmode"),o("argname"),o("argtype"),o("argmode"),o("argname"),o("argtype"),o("argmode"),o("argname"),o("argtype"))}function gO(n){_(n,`ALTER FOREIGN DATA WRAPPER %s
    [ HANDLER %s | NO HANDLER ]
    [ VALIDATOR %s | NO VALIDATOR ]
    [ OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ]) ]
ALTER FOREIGN DATA WRAPPER %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER FOREIGN DATA WRAPPER %s RENAME TO %s`,o("name"),o("handler_function"),o("validator_function"),o("option"),o("value"),o("name"),o("new_owner"),o("name"),o("new_name"))}function EO(n){_(n,`ALTER FOREIGN TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    %s [, ... ]
ALTER FOREIGN TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    RENAME [ COLUMN ] %s TO %s
ALTER FOREIGN TABLE [ IF EXISTS ] %s
    RENAME TO %s
ALTER FOREIGN TABLE [ IF EXISTS ] %s
    SET SCHEMA %s

%s

    ADD [ COLUMN ] %s %s [ COLLATE %s ] [ %s [ ... ] ]
    DROP [ COLUMN ] [ IF EXISTS ] %s [ RESTRICT | CASCADE ]
    ALTER [ COLUMN ] %s [ SET DATA ] TYPE %s [ COLLATE %s ]
    ALTER [ COLUMN ] %s SET DEFAULT %s
    ALTER [ COLUMN ] %s DROP DEFAULT
    ALTER [ COLUMN ] %s { SET | DROP } NOT NULL
    ALTER [ COLUMN ] %s SET STATISTICS %s
    ALTER [ COLUMN ] %s SET ( %s = %s [, ... ] )
    ALTER [ COLUMN ] %s RESET ( %s [, ... ] )
    ALTER [ COLUMN ] %s SET STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT }
    ALTER [ COLUMN ] %s OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ])
    ADD %s [ NOT VALID ]
    VALIDATE CONSTRAINT %s
    DROP CONSTRAINT [ IF EXISTS ]  %s [ RESTRICT | CASCADE ]
    DISABLE TRIGGER [ %s | ALL | USER ]
    ENABLE TRIGGER [ %s | ALL | USER ]
    ENABLE REPLICA TRIGGER %s
    ENABLE ALWAYS TRIGGER %s
    SET WITHOUT OIDS
    INHERIT %s
    NO INHERIT %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
    OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ])`,o("name"),o("action"),o("name"),o("column_name"),o("new_column_name"),o("name"),o("new_name"),o("name"),o("new_schema"),o("where action is one of:"),o("column_name"),o("data_type"),o("collation"),o("column_constraint"),o("column_name"),o("column_name"),o("data_type"),o("collation"),o("column_name"),o("expression"),o("column_name"),o("column_name"),o("column_name"),o("integer"),o("column_name"),o("attribute_option"),o("value"),o("column_name"),o("attribute_option"),o("column_name"),o("column_name"),o("option"),o("value"),o("table_constraint"),o("constraint_name"),o("constraint_name"),o("trigger_name"),o("trigger_name"),o("trigger_name"),o("trigger_name"),o("parent_table"),o("parent_table"),o("new_owner"),o("option"),o("value"))}function TO(n){_(n,`ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    %s [ ... ] [ RESTRICT ]
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    RENAME TO %s
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    SET SCHEMA %s
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    [ NO ] DEPENDS ON EXTENSION %s

%s

    CALLED ON NULL INPUT | RETURNS NULL ON NULL INPUT | STRICT
    IMMUTABLE | STABLE | VOLATILE
    [ NOT ] LEAKPROOF
    [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    PARALLEL { UNSAFE | RESTRICTED | SAFE }
    COST %s
    ROWS %s
    SUPPORT %s
    SET %s { TO | = } { %s | DEFAULT }
    SET %s FROM CURRENT
    RESET %s
    RESET ALL`,o("name"),o("argmode"),o("argname"),o("argtype"),o("action"),o("name"),o("argmode"),o("argname"),o("argtype"),o("new_name"),o("name"),o("argmode"),o("argname"),o("argtype"),o("new_owner"),o("name"),o("argmode"),o("argname"),o("argtype"),o("new_schema"),o("name"),o("argmode"),o("argname"),o("argtype"),o("extension_name"),o("where action is one of:"),o("execution_cost"),o("result_rows"),o("support_function"),o("configuration_parameter"),o("value"),o("configuration_parameter"),o("configuration_parameter"))}function AO(n){_(n,`ALTER GROUP %s ADD USER %s [, ... ]
ALTER GROUP %s DROP USER %s [, ... ]

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER

ALTER GROUP %s RENAME TO %s`,o("role_specification"),o("user_name"),o("role_specification"),o("user_name"),o("where role_specification can be:"),o("role_name"),o("group_name"),o("new_name"))}function SO(n){_(n,`ALTER INDEX [ IF EXISTS ] %s RENAME TO %s
ALTER INDEX [ IF EXISTS ] %s SET TABLESPACE %s
ALTER INDEX %s ATTACH PARTITION %s
ALTER INDEX %s [ NO ] DEPENDS ON EXTENSION %s
ALTER INDEX [ IF EXISTS ] %s SET ( %s [= %s] [, ... ] )
ALTER INDEX [ IF EXISTS ] %s RESET ( %s [, ... ] )
ALTER INDEX [ IF EXISTS ] %s ALTER [ COLUMN ] %s
    SET STATISTICS %s
ALTER INDEX ALL IN TABLESPACE %s [ OWNED BY %s [, ... ] ]
    SET TABLESPACE %s [ NOWAIT ]`,o("name"),o("new_name"),o("name"),o("tablespace_name"),o("name"),o("index_name"),o("name"),o("extension_name"),o("name"),o("storage_parameter"),o("value"),o("name"),o("storage_parameter"),o("name"),o("column_number"),o("integer"),o("name"),o("role_name"),o("new_tablespace"))}function RO(n){_(n,`ALTER [ PROCEDURAL ] LANGUAGE %s RENAME TO %s
ALTER [ PROCEDURAL ] LANGUAGE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,o("name"),o("new_name"),o("name"),o("new_owner"))}function _O(n){_(n,"ALTER LARGE OBJECT %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }",o("large_object_oid"),o("new_owner"))}function OO(n){_(n,`ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    %s [, ... ]
ALTER MATERIALIZED VIEW %s
    [ NO ] DEPENDS ON EXTENSION %s
ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    RENAME [ COLUMN ] %s TO %s
ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    RENAME TO %s
ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    SET SCHEMA %s
ALTER MATERIALIZED VIEW ALL IN TABLESPACE %s [ OWNED BY %s [, ... ] ]
    SET TABLESPACE %s [ NOWAIT ]

%s

    ALTER [ COLUMN ] %s SET STATISTICS %s
    ALTER [ COLUMN ] %s SET ( %s = %s [, ... ] )
    ALTER [ COLUMN ] %s RESET ( %s [, ... ] )
    ALTER [ COLUMN ] %s SET STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT }
    ALTER [ COLUMN ] %s SET COMPRESSION %s
    CLUSTER ON %s
    SET WITHOUT CLUSTER
    SET ACCESS METHOD %s
    SET TABLESPACE %s
    SET ( %s [= %s] [, ... ] )
    RESET ( %s [, ... ] )
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,o("name"),o("action"),o("name"),o("extension_name"),o("name"),o("column_name"),o("new_column_name"),o("name"),o("new_name"),o("name"),o("new_schema"),o("name"),o("role_name"),o("new_tablespace"),o("where action is one of:"),o("column_name"),o("integer"),o("column_name"),o("attribute_option"),o("value"),o("column_name"),o("attribute_option"),o("column_name"),o("column_name"),o("compression_method"),o("index_name"),o("new_access_method"),o("new_tablespace"),o("storage_parameter"),o("value"),o("storage_parameter"),o("new_owner"))}function NO(n){_(n,`ALTER OPERATOR %s ( { %s | NONE } , %s )
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER OPERATOR %s ( { %s | NONE } , %s )
    SET SCHEMA %s

ALTER OPERATOR %s ( { %s | NONE } , %s )
    SET ( {  RESTRICT = { %s | NONE }
           | JOIN = { %s | NONE }
           | COMMUTATOR = %s
           | NEGATOR = %s
           | HASHES
           | MERGES
          } [, ... ] )`,o("name"),o("left_type"),o("right_type"),o("new_owner"),o("name"),o("left_type"),o("right_type"),o("new_schema"),o("name"),o("left_type"),o("right_type"),o("res_proc"),o("join_proc"),o("com_op"),o("neg_op"))}function bO(n){_(n,`ALTER OPERATOR CLASS %s USING %s
    RENAME TO %s

ALTER OPERATOR CLASS %s USING %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER OPERATOR CLASS %s USING %s
    SET SCHEMA %s`,o("name"),o("index_method"),o("new_name"),o("name"),o("index_method"),o("new_owner"),o("name"),o("index_method"),o("new_schema"))}function CO(n){_(n,`ALTER OPERATOR FAMILY %s USING %s ADD
  {  OPERATOR %s %s ( %s, %s )
              [ FOR SEARCH | FOR ORDER BY %s ]
   | FUNCTION %s [ ( %s [ , %s ] ) ]
              %s [ ( %s [, ...] ) ]
  } [, ... ]

ALTER OPERATOR FAMILY %s USING %s DROP
  {  OPERATOR %s ( %s [ , %s ] )
   | FUNCTION %s ( %s [ , %s ] )
  } [, ... ]

ALTER OPERATOR FAMILY %s USING %s
    RENAME TO %s

ALTER OPERATOR FAMILY %s USING %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER OPERATOR FAMILY %s USING %s
    SET SCHEMA %s`,o("name"),o("index_method"),o("strategy_number"),o("operator_name"),o("op_type"),o("op_type"),o("sort_family_name"),o("support_number"),o("op_type"),o("op_type"),o("function_name"),o("argument_type"),o("name"),o("index_method"),o("strategy_number"),o("op_type"),o("op_type"),o("support_number"),o("op_type"),o("op_type"),o("name"),o("index_method"),o("new_name"),o("name"),o("index_method"),o("new_owner"),o("name"),o("index_method"),o("new_schema"))}function yO(n){_(n,`ALTER POLICY %s ON %s RENAME TO %s

ALTER POLICY %s ON %s
    [ TO { %s | PUBLIC | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...] ]
    [ USING ( %s ) ]
    [ WITH CHECK ( %s ) ]`,o("name"),o("table_name"),o("new_name"),o("name"),o("table_name"),o("role_name"),o("using_expression"),o("check_expression"))}function LO(n){_(n,`ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    %s [ ... ] [ RESTRICT ]
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    RENAME TO %s
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    SET SCHEMA %s
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    [ NO ] DEPENDS ON EXTENSION %s

%s

    [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    SET %s { TO | = } { %s | DEFAULT }
    SET %s FROM CURRENT
    RESET %s
    RESET ALL`,o("name"),o("argmode"),o("argname"),o("argtype"),o("action"),o("name"),o("argmode"),o("argname"),o("argtype"),o("new_name"),o("name"),o("argmode"),o("argname"),o("argtype"),o("new_owner"),o("name"),o("argmode"),o("argname"),o("argtype"),o("new_schema"),o("name"),o("argmode"),o("argname"),o("argtype"),o("extension_name"),o("where action is one of:"),o("configuration_parameter"),o("value"),o("configuration_parameter"),o("configuration_parameter"))}function IO(n){_(n,`ALTER PUBLICATION %s ADD %s [, ...]
ALTER PUBLICATION %s SET %s [, ...]
ALTER PUBLICATION %s DROP %s [, ...]
ALTER PUBLICATION %s SET ( %s [= %s] [, ... ] )
ALTER PUBLICATION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER PUBLICATION %s RENAME TO %s

%s

    TABLE [ ONLY ] %s [ * ] [ ( %s [, ... ] ) ] [ WHERE ( %s ) ] [, ... ]
    TABLES IN SCHEMA { %s | CURRENT_SCHEMA } [, ... ]`,o("name"),o("publication_object"),o("name"),o("publication_object"),o("name"),o("publication_object"),o("name"),o("publication_parameter"),o("value"),o("name"),o("new_owner"),o("name"),o("new_name"),o("where publication_object is one of:"),o("table_name"),o("column_name"),o("expression"),o("schema_name"))}function wO(n){_(n,`ALTER ROLE %s [ WITH ] %s [ ... ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'

ALTER ROLE %s RENAME TO %s

ALTER ROLE { %s | ALL } [ IN DATABASE %s ] SET %s { TO | = } { %s | DEFAULT }
ALTER ROLE { %s | ALL } [ IN DATABASE %s ] SET %s FROM CURRENT
ALTER ROLE { %s | ALL } [ IN DATABASE %s ] RESET %s
ALTER ROLE { %s | ALL } [ IN DATABASE %s ] RESET ALL

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,o("role_specification"),o("option"),o("where option can be:"),o("connlimit"),o("password"),o("timestamp"),o("name"),o("new_name"),o("role_specification"),o("database_name"),o("configuration_parameter"),o("value"),o("role_specification"),o("database_name"),o("configuration_parameter"),o("role_specification"),o("database_name"),o("configuration_parameter"),o("role_specification"),o("database_name"),o("where role_specification can be:"),o("role_name"))}function xO(n){_(n,`ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    %s [ ... ] [ RESTRICT ]
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    RENAME TO %s
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    SET SCHEMA %s
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    [ NO ] DEPENDS ON EXTENSION %s

%s

    IMMUTABLE | STABLE | VOLATILE
    [ NOT ] LEAKPROOF
    [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    PARALLEL { UNSAFE | RESTRICTED | SAFE }
    COST %s
    ROWS %s
    SET %s { TO | = } { %s | DEFAULT }
    SET %s FROM CURRENT
    RESET %s
    RESET ALL`,o("name"),o("argmode"),o("argname"),o("argtype"),o("action"),o("name"),o("argmode"),o("argname"),o("argtype"),o("new_name"),o("name"),o("argmode"),o("argname"),o("argtype"),o("new_owner"),o("name"),o("argmode"),o("argname"),o("argtype"),o("new_schema"),o("name"),o("argmode"),o("argname"),o("argtype"),o("extension_name"),o("where action is one of:"),o("execution_cost"),o("result_rows"),o("configuration_parameter"),o("value"),o("configuration_parameter"),o("configuration_parameter"))}function vO(n){_(n,"ALTER RULE %s ON %s RENAME TO %s",o("name"),o("table_name"),o("new_name"))}function DO(n){_(n,`ALTER SCHEMA %s RENAME TO %s
ALTER SCHEMA %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,o("name"),o("new_name"),o("name"),o("new_owner"))}function kO(n){_(n,`ALTER SEQUENCE [ IF EXISTS ] %s
    [ AS %s ]
    [ INCREMENT [ BY ] %s ]
    [ MINVALUE %s | NO MINVALUE ] [ MAXVALUE %s | NO MAXVALUE ]
    [ START [ WITH ] %s ]
    [ RESTART [ [ WITH ] %s ] ]
    [ CACHE %s ] [ [ NO ] CYCLE ]
    [ OWNED BY { %s.%s | NONE } ]
ALTER SEQUENCE [ IF EXISTS ] %s SET { LOGGED | UNLOGGED }
ALTER SEQUENCE [ IF EXISTS ] %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER SEQUENCE [ IF EXISTS ] %s RENAME TO %s
ALTER SEQUENCE [ IF EXISTS ] %s SET SCHEMA %s`,o("name"),o("data_type"),o("increment"),o("minvalue"),o("maxvalue"),o("start"),o("restart"),o("cache"),o("table_name"),o("column_name"),o("name"),o("name"),o("new_owner"),o("name"),o("new_name"),o("name"),o("new_schema"))}function PO(n){_(n,`ALTER SERVER %s [ VERSION '%s' ]
    [ OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ] ) ]
ALTER SERVER %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER SERVER %s RENAME TO %s`,o("name"),o("new_version"),o("option"),o("value"),o("name"),o("new_owner"),o("name"),o("new_name"))}function MO(n){_(n,`ALTER STATISTICS %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER STATISTICS %s RENAME TO %s
ALTER STATISTICS %s SET SCHEMA %s
ALTER STATISTICS %s SET STATISTICS { %s | DEFAULT }`,o("name"),o("new_owner"),o("name"),o("new_name"),o("name"),o("new_schema"),o("name"),o("new_target"))}function FO(n){_(n,`ALTER SUBSCRIPTION %s CONNECTION '%s'
ALTER SUBSCRIPTION %s SET PUBLICATION %s [, ...] [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s ADD PUBLICATION %s [, ...] [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s DROP PUBLICATION %s [, ...] [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s REFRESH PUBLICATION [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s ENABLE
ALTER SUBSCRIPTION %s DISABLE
ALTER SUBSCRIPTION %s SET ( %s [= %s] [, ... ] )
ALTER SUBSCRIPTION %s SKIP ( %s = %s )
ALTER SUBSCRIPTION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER SUBSCRIPTION %s RENAME TO %s`,o("name"),o("conninfo"),o("name"),o("publication_name"),o("publication_option"),o("value"),o("name"),o("publication_name"),o("publication_option"),o("value"),o("name"),o("publication_name"),o("publication_option"),o("value"),o("name"),o("refresh_option"),o("value"),o("name"),o("name"),o("name"),o("subscription_parameter"),o("value"),o("name"),o("skip_option"),o("value"),o("name"),o("new_owner"),o("name"),o("new_name"))}function UO(n){_(n,`ALTER SYSTEM SET %s { TO | = } { %s | '%s' | DEFAULT }

ALTER SYSTEM RESET %s
ALTER SYSTEM RESET ALL`,o("configuration_parameter"),o("value"),o("value"),o("configuration_parameter"))}function BO(n){_(n,`ALTER TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    %s [, ... ]
ALTER TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    RENAME [ COLUMN ] %s TO %s
ALTER TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    RENAME CONSTRAINT %s TO %s
ALTER TABLE [ IF EXISTS ] %s
    RENAME TO %s
ALTER TABLE [ IF EXISTS ] %s
    SET SCHEMA %s
ALTER TABLE ALL IN TABLESPACE %s [ OWNED BY %s [, ... ] ]
    SET TABLESPACE %s [ NOWAIT ]
ALTER TABLE [ IF EXISTS ] %s
    ATTACH PARTITION %s { FOR VALUES %s | DEFAULT }
ALTER TABLE [ IF EXISTS ] %s
    DETACH PARTITION %s [ CONCURRENTLY | FINALIZE ]

%s

    ADD [ COLUMN ] [ IF NOT EXISTS ] %s %s [ COLLATE %s ] [ %s [ ... ] ]
    DROP [ COLUMN ] [ IF EXISTS ] %s [ RESTRICT | CASCADE ]
    ALTER [ COLUMN ] %s [ SET DATA ] TYPE %s [ COLLATE %s ] [ USING %s ]
    ALTER [ COLUMN ] %s SET DEFAULT %s
    ALTER [ COLUMN ] %s DROP DEFAULT
    ALTER [ COLUMN ] %s { SET | DROP } NOT NULL
    ALTER [ COLUMN ] %s SET EXPRESSION AS ( %s )
    ALTER [ COLUMN ] %s DROP EXPRESSION [ IF EXISTS ]
    ALTER [ COLUMN ] %s ADD GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY [ ( %s ) ]
    ALTER [ COLUMN ] %s { SET GENERATED { ALWAYS | BY DEFAULT } | SET %s | RESTART [ [ WITH ] %s ] } [...]
    ALTER [ COLUMN ] %s DROP IDENTITY [ IF EXISTS ]
    ALTER [ COLUMN ] %s SET STATISTICS { %s | DEFAULT }
    ALTER [ COLUMN ] %s SET ( %s = %s [, ... ] )
    ALTER [ COLUMN ] %s RESET ( %s [, ... ] )
    ALTER [ COLUMN ] %s SET STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT }
    ALTER [ COLUMN ] %s SET COMPRESSION %s
    ADD %s [ NOT VALID ]
    ADD %s
    ALTER CONSTRAINT %s [ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]
    VALIDATE CONSTRAINT %s
    DROP CONSTRAINT [ IF EXISTS ]  %s [ RESTRICT | CASCADE ]
    DISABLE TRIGGER [ %s | ALL | USER ]
    ENABLE TRIGGER [ %s | ALL | USER ]
    ENABLE REPLICA TRIGGER %s
    ENABLE ALWAYS TRIGGER %s
    DISABLE RULE %s
    ENABLE RULE %s
    ENABLE REPLICA RULE %s
    ENABLE ALWAYS RULE %s
    DISABLE ROW LEVEL SECURITY
    ENABLE ROW LEVEL SECURITY
    FORCE ROW LEVEL SECURITY
    NO FORCE ROW LEVEL SECURITY
    CLUSTER ON %s
    SET WITHOUT CLUSTER
    SET WITHOUT OIDS
    SET ACCESS METHOD { %s | DEFAULT }
    SET TABLESPACE %s
    SET { LOGGED | UNLOGGED }
    SET ( %s [= %s] [, ... ] )
    RESET ( %s [, ... ] )
    INHERIT %s
    NO INHERIT %s
    OF %s
    NOT OF
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
    REPLICA IDENTITY { DEFAULT | USING INDEX %s | FULL | NOTHING }

%s

IN ( %s [, ...] ) |
FROM ( { %s | MINVALUE | MAXVALUE } [, ...] )
  TO ( { %s | MINVALUE | MAXVALUE } [, ...] ) |
WITH ( MODULUS %s, REMAINDER %s )

%s

[ CONSTRAINT %s ]
{ NOT NULL |
  NULL |
  CHECK ( %s ) [ NO INHERIT ] |
  DEFAULT %s |
  GENERATED ALWAYS AS ( %s ) STORED |
  GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY [ ( %s ) ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] %s |
  PRIMARY KEY %s |
  REFERENCES %s [ ( %s ) ] [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ]
    [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

[ CONSTRAINT %s ]
{ CHECK ( %s ) [ NO INHERIT ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] ( %s [, ... ] ) %s |
  PRIMARY KEY ( %s [, ... ] ) %s |
  EXCLUDE [ USING %s ] ( %s WITH %s [, ... ] ) %s [ WHERE ( %s ) ] |
  FOREIGN KEY ( %s [, ... ] ) REFERENCES %s [ ( %s [, ... ] ) ]
    [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ] [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

    [ CONSTRAINT %s ]
    { UNIQUE | PRIMARY KEY } USING INDEX %s
    [ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

[ INCLUDE ( %s [, ... ] ) ]
[ WITH ( %s [= %s] [, ... ] ) ]
[ USING INDEX TABLESPACE %s ]

%s

{ %s | ( %s ) } [ COLLATE %s ] [ %s [ ( %s = %s [, ... ] ) ] ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ]

%s

{ NO ACTION | RESTRICT | CASCADE | SET NULL [ ( %s [, ... ] ) ] | SET DEFAULT [ ( %s [, ... ] ) ] }`,o("name"),o("action"),o("name"),o("column_name"),o("new_column_name"),o("name"),o("constraint_name"),o("new_constraint_name"),o("name"),o("new_name"),o("name"),o("new_schema"),o("name"),o("role_name"),o("new_tablespace"),o("name"),o("partition_name"),o("partition_bound_spec"),o("name"),o("partition_name"),o("where action is one of:"),o("column_name"),o("data_type"),o("collation"),o("column_constraint"),o("column_name"),o("column_name"),o("data_type"),o("collation"),o("expression"),o("column_name"),o("expression"),o("column_name"),o("column_name"),o("column_name"),o("expression"),o("column_name"),o("column_name"),o("sequence_options"),o("column_name"),o("sequence_option"),o("restart"),o("column_name"),o("column_name"),o("integer"),o("column_name"),o("attribute_option"),o("value"),o("column_name"),o("attribute_option"),o("column_name"),o("column_name"),o("compression_method"),o("table_constraint"),o("table_constraint_using_index"),o("constraint_name"),o("constraint_name"),o("constraint_name"),o("trigger_name"),o("trigger_name"),o("trigger_name"),o("trigger_name"),o("rewrite_rule_name"),o("rewrite_rule_name"),o("rewrite_rule_name"),o("rewrite_rule_name"),o("index_name"),o("new_access_method"),o("new_tablespace"),o("storage_parameter"),o("value"),o("storage_parameter"),o("parent_table"),o("parent_table"),o("type_name"),o("new_owner"),o("index_name"),o("and partition_bound_spec is:"),o("partition_bound_expr"),o("partition_bound_expr"),o("partition_bound_expr"),o("numeric_literal"),o("numeric_literal"),o("and column_constraint is:"),o("constraint_name"),o("expression"),o("default_expr"),o("generation_expr"),o("sequence_options"),o("index_parameters"),o("index_parameters"),o("reftable"),o("refcolumn"),o("referential_action"),o("referential_action"),o("and table_constraint is:"),o("constraint_name"),o("expression"),o("column_name"),o("index_parameters"),o("column_name"),o("index_parameters"),o("index_method"),o("exclude_element"),o("operator"),o("index_parameters"),o("predicate"),o("column_name"),o("reftable"),o("refcolumn"),o("referential_action"),o("referential_action"),o("and table_constraint_using_index is:"),o("constraint_name"),o("index_name"),o("index_parameters in UNIQUE, PRIMARY KEY, and EXCLUDE constraints are:"),o("column_name"),o("storage_parameter"),o("value"),o("tablespace_name"),o("exclude_element in an EXCLUDE constraint is:"),o("column_name"),o("expression"),o("collation"),o("opclass"),o("opclass_parameter"),o("value"),o("referential_action in a FOREIGN KEY/REFERENCES constraint is:"),o("column_name"),o("column_name"))}function HO(n){_(n,`ALTER TABLESPACE %s RENAME TO %s
ALTER TABLESPACE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TABLESPACE %s SET ( %s = %s [, ... ] )
ALTER TABLESPACE %s RESET ( %s [, ... ] )`,o("name"),o("new_name"),o("name"),o("new_owner"),o("name"),o("tablespace_option"),o("value"),o("name"),o("tablespace_option"))}function WO(n){_(n,`ALTER TEXT SEARCH CONFIGURATION %s
    ADD MAPPING FOR %s [, ... ] WITH %s [, ... ]
ALTER TEXT SEARCH CONFIGURATION %s
    ALTER MAPPING FOR %s [, ... ] WITH %s [, ... ]
ALTER TEXT SEARCH CONFIGURATION %s
    ALTER MAPPING REPLACE %s WITH %s
ALTER TEXT SEARCH CONFIGURATION %s
    ALTER MAPPING FOR %s [, ... ] REPLACE %s WITH %s
ALTER TEXT SEARCH CONFIGURATION %s
    DROP MAPPING [ IF EXISTS ] FOR %s [, ... ]
ALTER TEXT SEARCH CONFIGURATION %s RENAME TO %s
ALTER TEXT SEARCH CONFIGURATION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TEXT SEARCH CONFIGURATION %s SET SCHEMA %s`,o("name"),o("token_type"),o("dictionary_name"),o("name"),o("token_type"),o("dictionary_name"),o("name"),o("old_dictionary"),o("new_dictionary"),o("name"),o("token_type"),o("old_dictionary"),o("new_dictionary"),o("name"),o("token_type"),o("name"),o("new_name"),o("name"),o("new_owner"),o("name"),o("new_schema"))}function GO(n){_(n,`ALTER TEXT SEARCH DICTIONARY %s (
    %s [ = %s ] [, ... ]
)
ALTER TEXT SEARCH DICTIONARY %s RENAME TO %s
ALTER TEXT SEARCH DICTIONARY %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TEXT SEARCH DICTIONARY %s SET SCHEMA %s`,o("name"),o("option"),o("value"),o("name"),o("new_name"),o("name"),o("new_owner"),o("name"),o("new_schema"))}function VO(n){_(n,`ALTER TEXT SEARCH PARSER %s RENAME TO %s
ALTER TEXT SEARCH PARSER %s SET SCHEMA %s`,o("name"),o("new_name"),o("name"),o("new_schema"))}function qO(n){_(n,`ALTER TEXT SEARCH TEMPLATE %s RENAME TO %s
ALTER TEXT SEARCH TEMPLATE %s SET SCHEMA %s`,o("name"),o("new_name"),o("name"),o("new_schema"))}function YO(n){_(n,`ALTER TRIGGER %s ON %s RENAME TO %s
ALTER TRIGGER %s ON %s [ NO ] DEPENDS ON EXTENSION %s`,o("name"),o("table_name"),o("new_name"),o("name"),o("table_name"),o("extension_name"))}function jO(n){_(n,`ALTER TYPE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TYPE %s RENAME TO %s
ALTER TYPE %s SET SCHEMA %s
ALTER TYPE %s RENAME ATTRIBUTE %s TO %s [ CASCADE | RESTRICT ]
ALTER TYPE %s %s [, ... ]
ALTER TYPE %s ADD VALUE [ IF NOT EXISTS ] %s [ { BEFORE | AFTER } %s ]
ALTER TYPE %s RENAME VALUE %s TO %s
ALTER TYPE %s SET ( %s = %s [, ... ] )

%s

    ADD ATTRIBUTE %s %s [ COLLATE %s ] [ CASCADE | RESTRICT ]
    DROP ATTRIBUTE [ IF EXISTS ] %s [ CASCADE | RESTRICT ]
    ALTER ATTRIBUTE %s [ SET DATA ] TYPE %s [ COLLATE %s ] [ CASCADE | RESTRICT ]`,o("name"),o("new_owner"),o("name"),o("new_name"),o("name"),o("new_schema"),o("name"),o("attribute_name"),o("new_attribute_name"),o("name"),o("action"),o("name"),o("new_enum_value"),o("neighbor_enum_value"),o("name"),o("existing_enum_value"),o("new_enum_value"),o("name"),o("property"),o("value"),o("where action is one of:"),o("attribute_name"),o("data_type"),o("collation"),o("attribute_name"),o("attribute_name"),o("data_type"),o("collation"))}function XO(n){_(n,`ALTER USER %s [ WITH ] %s [ ... ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'

ALTER USER %s RENAME TO %s

ALTER USER { %s | ALL } [ IN DATABASE %s ] SET %s { TO | = } { %s | DEFAULT }
ALTER USER { %s | ALL } [ IN DATABASE %s ] SET %s FROM CURRENT
ALTER USER { %s | ALL } [ IN DATABASE %s ] RESET %s
ALTER USER { %s | ALL } [ IN DATABASE %s ] RESET ALL

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,o("role_specification"),o("option"),o("where option can be:"),o("connlimit"),o("password"),o("timestamp"),o("name"),o("new_name"),o("role_specification"),o("database_name"),o("configuration_parameter"),o("value"),o("role_specification"),o("database_name"),o("configuration_parameter"),o("role_specification"),o("database_name"),o("configuration_parameter"),o("role_specification"),o("database_name"),o("where role_specification can be:"),o("role_name"))}function zO(n){_(n,`ALTER USER MAPPING FOR { %s | USER | CURRENT_ROLE | CURRENT_USER | SESSION_USER | PUBLIC }
    SERVER %s
    OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ] )`,o("user_name"),o("server_name"),o("option"),o("value"))}function KO(n){_(n,`ALTER VIEW [ IF EXISTS ] %s ALTER [ COLUMN ] %s SET DEFAULT %s
ALTER VIEW [ IF EXISTS ] %s ALTER [ COLUMN ] %s DROP DEFAULT
ALTER VIEW [ IF EXISTS ] %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER VIEW [ IF EXISTS ] %s RENAME [ COLUMN ] %s TO %s
ALTER VIEW [ IF EXISTS ] %s RENAME TO %s
ALTER VIEW [ IF EXISTS ] %s SET SCHEMA %s
ALTER VIEW [ IF EXISTS ] %s SET ( %s [= %s] [, ... ] )
ALTER VIEW [ IF EXISTS ] %s RESET ( %s [, ... ] )`,o("name"),o("column_name"),o("expression"),o("name"),o("column_name"),o("name"),o("new_owner"),o("name"),o("column_name"),o("new_column_name"),o("name"),o("new_name"),o("name"),o("new_schema"),o("name"),o("view_option_name"),o("view_option_value"),o("name"),o("view_option_name"))}function $O(n){_(n,`ANALYZE [ ( %s [, ...] ) ] [ %s [, ...] ]

%s

    VERBOSE [ %s ]
    SKIP_LOCKED [ %s ]
    BUFFER_USAGE_LIMIT %s

%s

    %s [ ( %s [, ...] ) ]`,o("option"),o("table_and_columns"),o("where option can be one of:"),o("boolean"),o("boolean"),o("size"),o("and table_and_columns is:"),o("table_name"),o("column_name"))}function JO(n){_(n,`BEGIN [ WORK | TRANSACTION ] [ %s [, ...] ]

%s

    ISOLATION LEVEL { SERIALIZABLE | REPEATABLE READ | READ COMMITTED | READ UNCOMMITTED }
    READ WRITE | READ ONLY
    [ NOT ] DEFERRABLE`,o("transaction_mode"),o("where transaction_mode is one of:"))}function QO(n){_(n,"CALL %s ( [ %s ] [, ...] )",o("name"),o("argument"))}function ZO(n){_(n,"CHECKPOINT")}function eN(n){_(n,"CLOSE { %s | ALL }",o("name"))}function tN(n){_(n,`CLUSTER [ ( %s [, ...] ) ] [ %s [ USING %s ] ]

%s

    VERBOSE [ %s ]`,o("option"),o("table_name"),o("index_name"),o("where option can be one of:"),o("boolean"))}function nN(n){_(n,`COMMENT ON
{
  ACCESS METHOD %s |
  AGGREGATE %s ( %s ) |
  CAST (%s AS %s) |
  COLLATION %s |
  COLUMN %s.%s |
  CONSTRAINT %s ON %s |
  CONSTRAINT %s ON DOMAIN %s |
  CONVERSION %s |
  DATABASE %s |
  DOMAIN %s |
  EXTENSION %s |
  EVENT TRIGGER %s |
  FOREIGN DATA WRAPPER %s |
  FOREIGN TABLE %s |
  FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  INDEX %s |
  LARGE OBJECT %s |
  MATERIALIZED VIEW %s |
  OPERATOR %s (%s, %s) |
  OPERATOR CLASS %s USING %s |
  OPERATOR FAMILY %s USING %s |
  POLICY %s ON %s |
  [ PROCEDURAL ] LANGUAGE %s |
  PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  PUBLICATION %s |
  ROLE %s |
  ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  RULE %s ON %s |
  SCHEMA %s |
  SEQUENCE %s |
  SERVER %s |
  STATISTICS %s |
  SUBSCRIPTION %s |
  TABLE %s |
  TABLESPACE %s |
  TEXT SEARCH CONFIGURATION %s |
  TEXT SEARCH DICTIONARY %s |
  TEXT SEARCH PARSER %s |
  TEXT SEARCH TEMPLATE %s |
  TRANSFORM FOR %s LANGUAGE %s |
  TRIGGER %s ON %s |
  TYPE %s |
  VIEW %s
} IS { %s | NULL }

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,o("object_name"),o("aggregate_name"),o("aggregate_signature"),o("source_type"),o("target_type"),o("object_name"),o("relation_name"),o("column_name"),o("constraint_name"),o("table_name"),o("constraint_name"),o("domain_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("function_name"),o("argmode"),o("argname"),o("argtype"),o("object_name"),o("large_object_oid"),o("object_name"),o("operator_name"),o("left_type"),o("right_type"),o("object_name"),o("index_method"),o("object_name"),o("index_method"),o("policy_name"),o("table_name"),o("object_name"),o("procedure_name"),o("argmode"),o("argname"),o("argtype"),o("object_name"),o("object_name"),o("routine_name"),o("argmode"),o("argname"),o("argtype"),o("rule_name"),o("table_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("type_name"),o("lang_name"),o("trigger_name"),o("table_name"),o("object_name"),o("object_name"),o("string_literal"),o("where aggregate_signature is:"),o("argmode"),o("argname"),o("argtype"),o("argmode"),o("argname"),o("argtype"),o("argmode"),o("argname"),o("argtype"))}function iN(n){_(n,"COMMIT [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function sN(n){_(n,"COMMIT PREPARED %s",o("transaction_id"))}function rN(n){_(n,`COPY %s [ ( %s [, ...] ) ]
    FROM { '%s' | PROGRAM '%s' | STDIN }
    [ [ WITH ] ( %s [, ...] ) ]
    [ WHERE %s ]

COPY { %s [ ( %s [, ...] ) ] | ( %s ) }
    TO { '%s' | PROGRAM '%s' | STDOUT }
    [ [ WITH ] ( %s [, ...] ) ]

%s

    FORMAT %s
    FREEZE [ %s ]
    DELIMITER '%s'
    NULL '%s'
    DEFAULT '%s'
    HEADER [ %s | MATCH ]
    QUOTE '%s'
    ESCAPE '%s'
    FORCE_QUOTE { ( %s [, ...] ) | * }
    FORCE_NOT_NULL { ( %s [, ...] ) | * }
    FORCE_NULL { ( %s [, ...] ) | * }
    ON_ERROR %s
    ENCODING '%s'
    LOG_VERBOSITY %s`,o("table_name"),o("column_name"),o("filename"),o("command"),o("option"),o("condition"),o("table_name"),o("column_name"),o("query"),o("filename"),o("command"),o("option"),o("where option can be one of:"),o("format_name"),o("boolean"),o("delimiter_character"),o("null_string"),o("default_string"),o("boolean"),o("quote_character"),o("escape_character"),o("column_name"),o("column_name"),o("column_name"),o("error_action"),o("encoding_name"),o("verbosity"))}function oN(n){_(n,`CREATE ACCESS METHOD %s
    TYPE %s
    HANDLER %s`,o("name"),o("access_method_type"),o("handler_function"))}function aN(n){_(n,`CREATE [ OR REPLACE ] AGGREGATE %s ( [ %s ] [ %s ] %s [ , ... ] ) (
    SFUNC = %s,
    STYPE = %s
    [ , SSPACE = %s ]
    [ , FINALFUNC = %s ]
    [ , FINALFUNC_EXTRA ]
    [ , FINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , COMBINEFUNC = %s ]
    [ , SERIALFUNC = %s ]
    [ , DESERIALFUNC = %s ]
    [ , INITCOND = %s ]
    [ , MSFUNC = %s ]
    [ , MINVFUNC = %s ]
    [ , MSTYPE = %s ]
    [ , MSSPACE = %s ]
    [ , MFINALFUNC = %s ]
    [ , MFINALFUNC_EXTRA ]
    [ , MFINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , MINITCOND = %s ]
    [ , SORTOP = %s ]
    [ , PARALLEL = { SAFE | RESTRICTED | UNSAFE } ]
)

CREATE [ OR REPLACE ] AGGREGATE %s ( [ [ %s ] [ %s ] %s [ , ... ] ]
                        ORDER BY [ %s ] [ %s ] %s [ , ... ] ) (
    SFUNC = %s,
    STYPE = %s
    [ , SSPACE = %s ]
    [ , FINALFUNC = %s ]
    [ , FINALFUNC_EXTRA ]
    [ , FINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , INITCOND = %s ]
    [ , PARALLEL = { SAFE | RESTRICTED | UNSAFE } ]
    [ , HYPOTHETICAL ]
)

%s

CREATE [ OR REPLACE ] AGGREGATE %s (
    BASETYPE = %s,
    SFUNC = %s,
    STYPE = %s
    [ , SSPACE = %s ]
    [ , FINALFUNC = %s ]
    [ , FINALFUNC_EXTRA ]
    [ , FINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , COMBINEFUNC = %s ]
    [ , SERIALFUNC = %s ]
    [ , DESERIALFUNC = %s ]
    [ , INITCOND = %s ]
    [ , MSFUNC = %s ]
    [ , MINVFUNC = %s ]
    [ , MSTYPE = %s ]
    [ , MSSPACE = %s ]
    [ , MFINALFUNC = %s ]
    [ , MFINALFUNC_EXTRA ]
    [ , MFINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , MINITCOND = %s ]
    [ , SORTOP = %s ]
)`,o("name"),o("argmode"),o("argname"),o("arg_data_type"),o("sfunc"),o("state_data_type"),o("state_data_size"),o("ffunc"),o("combinefunc"),o("serialfunc"),o("deserialfunc"),o("initial_condition"),o("msfunc"),o("minvfunc"),o("mstate_data_type"),o("mstate_data_size"),o("mffunc"),o("minitial_condition"),o("sort_operator"),o("name"),o("argmode"),o("argname"),o("arg_data_type"),o("argmode"),o("argname"),o("arg_data_type"),o("sfunc"),o("state_data_type"),o("state_data_size"),o("ffunc"),o("initial_condition"),o("or the old syntax"),o("name"),o("base_type"),o("sfunc"),o("state_data_type"),o("state_data_size"),o("ffunc"),o("combinefunc"),o("serialfunc"),o("deserialfunc"),o("initial_condition"),o("msfunc"),o("minvfunc"),o("mstate_data_type"),o("mstate_data_size"),o("mffunc"),o("minitial_condition"),o("sort_operator"))}function lN(n){_(n,`CREATE CAST (%s AS %s)
    WITH FUNCTION %s [ (%s [, ...]) ]
    [ AS ASSIGNMENT | AS IMPLICIT ]

CREATE CAST (%s AS %s)
    WITHOUT FUNCTION
    [ AS ASSIGNMENT | AS IMPLICIT ]

CREATE CAST (%s AS %s)
    WITH INOUT
    [ AS ASSIGNMENT | AS IMPLICIT ]`,o("source_type"),o("target_type"),o("function_name"),o("argument_type"),o("source_type"),o("target_type"),o("source_type"),o("target_type"))}function cN(n){_(n,`CREATE COLLATION [ IF NOT EXISTS ] %s (
    [ LOCALE = %s, ]
    [ LC_COLLATE = %s, ]
    [ LC_CTYPE = %s, ]
    [ PROVIDER = %s, ]
    [ DETERMINISTIC = %s, ]
    [ RULES = %s, ]
    [ VERSION = %s ]
)
CREATE COLLATION [ IF NOT EXISTS ] %s FROM %s`,o("name"),o("locale"),o("lc_collate"),o("lc_ctype"),o("provider"),o("boolean"),o("rules"),o("version"),o("name"),o("existing_collation"))}function hN(n){_(n,`CREATE [ DEFAULT ] CONVERSION %s
    FOR %s TO %s FROM %s`,o("name"),o("source_encoding"),o("dest_encoding"),o("function_name"))}function fN(n){_(n,`CREATE DATABASE %s
    [ WITH ] [ OWNER [=] %s ]
           [ TEMPLATE [=] %s ]
           [ ENCODING [=] %s ]
           [ STRATEGY [=] %s ]
           [ LOCALE [=] %s ]
           [ LC_COLLATE [=] %s ]
           [ LC_CTYPE [=] %s ]
           [ BUILTIN_LOCALE [=] %s ]
           [ ICU_LOCALE [=] %s ]
           [ ICU_RULES [=] %s ]
           [ LOCALE_PROVIDER [=] %s ]
           [ COLLATION_VERSION = %s ]
           [ TABLESPACE [=] %s ]
           [ ALLOW_CONNECTIONS [=] %s ]
           [ CONNECTION LIMIT [=] %s ]
           [ IS_TEMPLATE [=] %s ]
           [ OID [=] %s ]`,o("name"),o("user_name"),o("template"),o("encoding"),o("strategy"),o("locale"),o("lc_collate"),o("lc_ctype"),o("builtin_locale"),o("icu_locale"),o("icu_rules"),o("locale_provider"),o("collation_version"),o("tablespace_name"),o("allowconn"),o("connlimit"),o("istemplate"),o("oid"))}function uN(n){_(n,`CREATE DOMAIN %s [ AS ] %s
    [ COLLATE %s ]
    [ DEFAULT %s ]
    [ %s [ ... ] ]

%s

[ CONSTRAINT %s ]
{ NOT NULL | NULL | CHECK (%s) }`,o("name"),o("data_type"),o("collation"),o("expression"),o("domain_constraint"),o("where domain_constraint is:"),o("constraint_name"),o("expression"))}function dN(n){_(n,`CREATE EVENT TRIGGER %s
    ON %s
    [ WHEN %s IN (%s [, ... ]) [ AND ... ] ]
    EXECUTE { FUNCTION | PROCEDURE } %s()`,o("name"),o("event"),o("filter_variable"),o("filter_value"),o("function_name"))}function pN(n){_(n,`CREATE EXTENSION [ IF NOT EXISTS ] %s
    [ WITH ] [ SCHEMA %s ]
             [ VERSION %s ]
             [ CASCADE ]`,o("extension_name"),o("schema_name"),o("version"))}function mN(n){_(n,`CREATE FOREIGN DATA WRAPPER %s
    [ HANDLER %s | NO HANDLER ]
    [ VALIDATOR %s | NO VALIDATOR ]
    [ OPTIONS ( %s '%s' [, ... ] ) ]`,o("name"),o("handler_function"),o("validator_function"),o("option"),o("value"))}function gN(n){_(n,`CREATE FOREIGN TABLE [ IF NOT EXISTS ] %s ( [
  { %s %s [ OPTIONS ( %s '%s' [, ... ] ) ] [ COLLATE %s ] [ %s [ ... ] ]
    | %s }
    [, ... ]
] )
[ INHERITS ( %s [, ... ] ) ]
  SERVER %s
[ OPTIONS ( %s '%s' [, ... ] ) ]

CREATE FOREIGN TABLE [ IF NOT EXISTS ] %s
  PARTITION OF %s [ (
  { %s [ WITH OPTIONS ] [ %s [ ... ] ]
    | %s }
    [, ... ]
) ]
{ FOR VALUES %s | DEFAULT }
  SERVER %s
[ OPTIONS ( %s '%s' [, ... ] ) ]

%s

[ CONSTRAINT %s ]
{ NOT NULL |
  NULL |
  CHECK ( %s ) [ NO INHERIT ] |
  DEFAULT %s |
  GENERATED ALWAYS AS ( %s ) STORED }

%s

[ CONSTRAINT %s ]
CHECK ( %s ) [ NO INHERIT ]

%s

IN ( %s [, ...] ) |
FROM ( { %s | MINVALUE | MAXVALUE } [, ...] )
  TO ( { %s | MINVALUE | MAXVALUE } [, ...] ) |
WITH ( MODULUS %s, REMAINDER %s )`,o("table_name"),o("column_name"),o("data_type"),o("option"),o("value"),o("collation"),o("column_constraint"),o("table_constraint"),o("parent_table"),o("server_name"),o("option"),o("value"),o("table_name"),o("parent_table"),o("column_name"),o("column_constraint"),o("table_constraint"),o("partition_bound_spec"),o("server_name"),o("option"),o("value"),o("where column_constraint is:"),o("constraint_name"),o("expression"),o("default_expr"),o("generation_expr"),o("and table_constraint is:"),o("constraint_name"),o("expression"),o("and partition_bound_spec is:"),o("partition_bound_expr"),o("partition_bound_expr"),o("partition_bound_expr"),o("numeric_literal"),o("numeric_literal"))}function EN(n){_(n,`CREATE [ OR REPLACE ] FUNCTION
    %s ( [ [ %s ] [ %s ] %s [ { DEFAULT | = } %s ] [, ...] ] )
    [ RETURNS %s
      | RETURNS TABLE ( %s %s [, ...] ) ]
  { LANGUAGE %s
    | TRANSFORM { FOR TYPE %s } [, ... ]
    | WINDOW
    | { IMMUTABLE | STABLE | VOLATILE }
    | [ NOT ] LEAKPROOF
    | { CALLED ON NULL INPUT | RETURNS NULL ON NULL INPUT | STRICT }
    | { [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER }
    | PARALLEL { UNSAFE | RESTRICTED | SAFE }
    | COST %s
    | ROWS %s
    | SUPPORT %s
    | SET %s { TO %s | = %s | FROM CURRENT }
    | AS '%s'
    | AS '%s', '%s'
    | %s
  } ...`,o("name"),o("argmode"),o("argname"),o("argtype"),o("default_expr"),o("rettype"),o("column_name"),o("column_type"),o("lang_name"),o("type_name"),o("execution_cost"),o("result_rows"),o("support_function"),o("configuration_parameter"),o("value"),o("value"),o("definition"),o("obj_file"),o("link_symbol"),o("sql_body"))}function TN(n){_(n,`CREATE GROUP %s [ [ WITH ] %s [ ... ] ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'
    | IN ROLE %s [, ...]
    | IN GROUP %s [, ...]
    | ROLE %s [, ...]
    | ADMIN %s [, ...]
    | USER %s [, ...]
    | SYSID %s`,o("name"),o("option"),o("where option can be:"),o("connlimit"),o("password"),o("timestamp"),o("role_name"),o("role_name"),o("role_name"),o("role_name"),o("role_name"),o("uid"))}function AN(n){_(n,`CREATE [ UNIQUE ] INDEX [ CONCURRENTLY ] [ [ IF NOT EXISTS ] %s ] ON [ ONLY ] %s [ USING %s ]
    ( { %s | ( %s ) } [ COLLATE %s ] [ %s [ ( %s = %s [, ... ] ) ] ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ] [, ...] )
    [ INCLUDE ( %s [, ...] ) ]
    [ NULLS [ NOT ] DISTINCT ]
    [ WITH ( %s [= %s] [, ... ] ) ]
    [ TABLESPACE %s ]
    [ WHERE %s ]`,o("name"),o("table_name"),o("method"),o("column_name"),o("expression"),o("collation"),o("opclass"),o("opclass_parameter"),o("value"),o("column_name"),o("storage_parameter"),o("value"),o("tablespace_name"),o("predicate"))}function SN(n){_(n,`CREATE [ OR REPLACE ] [ TRUSTED ] [ PROCEDURAL ] LANGUAGE %s
    HANDLER %s [ INLINE %s ] [ VALIDATOR %s ]
CREATE [ OR REPLACE ] [ TRUSTED ] [ PROCEDURAL ] LANGUAGE %s`,o("name"),o("call_handler"),o("inline_handler"),o("valfunction"),o("name"))}function RN(n){_(n,`CREATE MATERIALIZED VIEW [ IF NOT EXISTS ] %s
    [ (%s [, ...] ) ]
    [ USING %s ]
    [ WITH ( %s [= %s] [, ... ] ) ]
    [ TABLESPACE %s ]
    AS %s
    [ WITH [ NO ] DATA ]`,o("table_name"),o("column_name"),o("method"),o("storage_parameter"),o("value"),o("tablespace_name"),o("query"))}function _N(n){_(n,`CREATE OPERATOR %s (
    {FUNCTION|PROCEDURE} = %s
    [, LEFTARG = %s ] [, RIGHTARG = %s ]
    [, COMMUTATOR = %s ] [, NEGATOR = %s ]
    [, RESTRICT = %s ] [, JOIN = %s ]
    [, HASHES ] [, MERGES ]
)`,o("name"),o("function_name"),o("left_type"),o("right_type"),o("com_op"),o("neg_op"),o("res_proc"),o("join_proc"))}function ON(n){_(n,`CREATE OPERATOR CLASS %s [ DEFAULT ] FOR TYPE %s
  USING %s [ FAMILY %s ] AS
  {  OPERATOR %s %s [ ( %s, %s ) ] [ FOR SEARCH | FOR ORDER BY %s ]
   | FUNCTION %s [ ( %s [ , %s ] ) ] %s ( %s [, ...] )
   | STORAGE %s
  } [, ... ]`,o("name"),o("data_type"),o("index_method"),o("family_name"),o("strategy_number"),o("operator_name"),o("op_type"),o("op_type"),o("sort_family_name"),o("support_number"),o("op_type"),o("op_type"),o("function_name"),o("argument_type"),o("storage_type"))}function NN(n){_(n,"CREATE OPERATOR FAMILY %s USING %s",o("name"),o("index_method"))}function bN(n){_(n,`CREATE POLICY %s ON %s
    [ AS { PERMISSIVE | RESTRICTIVE } ]
    [ FOR { ALL | SELECT | INSERT | UPDATE | DELETE } ]
    [ TO { %s | PUBLIC | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...] ]
    [ USING ( %s ) ]
    [ WITH CHECK ( %s ) ]`,o("name"),o("table_name"),o("role_name"),o("using_expression"),o("check_expression"))}function CN(n){_(n,`CREATE [ OR REPLACE ] PROCEDURE
    %s ( [ [ %s ] [ %s ] %s [ { DEFAULT | = } %s ] [, ...] ] )
  { LANGUAGE %s
    | TRANSFORM { FOR TYPE %s } [, ... ]
    | [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    | SET %s { TO %s | = %s | FROM CURRENT }
    | AS '%s'
    | AS '%s', '%s'
    | %s
  } ...`,o("name"),o("argmode"),o("argname"),o("argtype"),o("default_expr"),o("lang_name"),o("type_name"),o("configuration_parameter"),o("value"),o("value"),o("definition"),o("obj_file"),o("link_symbol"),o("sql_body"))}function yN(n){_(n,`CREATE PUBLICATION %s
    [ FOR ALL TABLES
      | FOR %s [, ... ] ]
    [ WITH ( %s [= %s] [, ... ] ) ]

%s

    TABLE [ ONLY ] %s [ * ] [ ( %s [, ... ] ) ] [ WHERE ( %s ) ] [, ... ]
    TABLES IN SCHEMA { %s | CURRENT_SCHEMA } [, ... ]`,o("name"),o("publication_object"),o("publication_parameter"),o("value"),o("where publication_object is one of:"),o("table_name"),o("column_name"),o("expression"),o("schema_name"))}function LN(n){_(n,`CREATE ROLE %s [ [ WITH ] %s [ ... ] ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'
    | IN ROLE %s [, ...]
    | ROLE %s [, ...]
    | ADMIN %s [, ...]
    | SYSID %s`,o("name"),o("option"),o("where option can be:"),o("connlimit"),o("password"),o("timestamp"),o("role_name"),o("role_name"),o("role_name"),o("uid"))}function IN(n){_(n,`CREATE [ OR REPLACE ] RULE %s AS ON %s
    TO %s [ WHERE %s ]
    DO [ ALSO | INSTEAD ] { NOTHING | %s | ( %s ; %s ... ) }

%s

    SELECT | INSERT | UPDATE | DELETE`,o("name"),o("event"),o("table_name"),o("condition"),o("command"),o("command"),o("command"),o("where event can be one of:"))}function wN(n){_(n,`CREATE SCHEMA %s [ AUTHORIZATION %s ] [ %s [ ... ] ]
CREATE SCHEMA AUTHORIZATION %s [ %s [ ... ] ]
CREATE SCHEMA IF NOT EXISTS %s [ AUTHORIZATION %s ]
CREATE SCHEMA IF NOT EXISTS AUTHORIZATION %s

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,o("schema_name"),o("role_specification"),o("schema_element"),o("role_specification"),o("schema_element"),o("schema_name"),o("role_specification"),o("role_specification"),o("where role_specification can be:"),o("user_name"))}function xN(n){_(n,`CREATE [ { TEMPORARY | TEMP } | UNLOGGED ] SEQUENCE [ IF NOT EXISTS ] %s
    [ AS %s ]
    [ INCREMENT [ BY ] %s ]
    [ MINVALUE %s | NO MINVALUE ] [ MAXVALUE %s | NO MAXVALUE ]
    [ START [ WITH ] %s ] [ CACHE %s ] [ [ NO ] CYCLE ]
    [ OWNED BY { %s.%s | NONE } ]`,o("name"),o("data_type"),o("increment"),o("minvalue"),o("maxvalue"),o("start"),o("cache"),o("table_name"),o("column_name"))}function vN(n){_(n,`CREATE SERVER [ IF NOT EXISTS ] %s [ TYPE '%s' ] [ VERSION '%s' ]
    FOREIGN DATA WRAPPER %s
    [ OPTIONS ( %s '%s' [, ... ] ) ]`,o("server_name"),o("server_type"),o("server_version"),o("fdw_name"),o("option"),o("value"))}function DN(n){_(n,`CREATE STATISTICS [ [ IF NOT EXISTS ] %s ]
    ON ( %s )
    FROM %s

CREATE STATISTICS [ [ IF NOT EXISTS ] %s ]
    [ ( %s [, ... ] ) ]
    ON { %s | ( %s ) }, { %s | ( %s ) } [, ...]
    FROM %s`,o("statistics_name"),o("expression"),o("table_name"),o("statistics_name"),o("statistics_kind"),o("column_name"),o("expression"),o("column_name"),o("expression"),o("table_name"))}function kN(n){_(n,`CREATE SUBSCRIPTION %s
    CONNECTION '%s'
    PUBLICATION %s [, ...]
    [ WITH ( %s [= %s] [, ... ] ) ]`,o("subscription_name"),o("conninfo"),o("publication_name"),o("subscription_parameter"),o("value"))}function PN(n){_(n,`CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s ( [
  { %s %s [ STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT } ] [ COMPRESSION %s ] [ COLLATE %s ] [ %s [ ... ] ]
    | %s
    | LIKE %s [ %s ... ] }
    [, ... ]
] )
[ INHERITS ( %s [, ... ] ) ]
[ PARTITION BY { RANGE | LIST | HASH } ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ... ] ) ]
[ USING %s ]
[ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
[ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
[ TABLESPACE %s ]

CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s
    OF %s [ (
  { %s [ WITH OPTIONS ] [ %s [ ... ] ]
    | %s }
    [, ... ]
) ]
[ PARTITION BY { RANGE | LIST | HASH } ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ... ] ) ]
[ USING %s ]
[ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
[ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
[ TABLESPACE %s ]

CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s
    PARTITION OF %s [ (
  { %s [ WITH OPTIONS ] [ %s [ ... ] ]
    | %s }
    [, ... ]
) ] { FOR VALUES %s | DEFAULT }
[ PARTITION BY { RANGE | LIST | HASH } ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ... ] ) ]
[ USING %s ]
[ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
[ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
[ TABLESPACE %s ]

%s

[ CONSTRAINT %s ]
{ NOT NULL |
  NULL |
  CHECK ( %s ) [ NO INHERIT ] |
  DEFAULT %s |
  GENERATED ALWAYS AS ( %s ) STORED |
  GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY [ ( %s ) ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] %s |
  PRIMARY KEY %s |
  REFERENCES %s [ ( %s ) ] [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ]
    [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

[ CONSTRAINT %s ]
{ CHECK ( %s ) [ NO INHERIT ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] ( %s [, ... ] ) %s |
  PRIMARY KEY ( %s [, ... ] ) %s |
  EXCLUDE [ USING %s ] ( %s WITH %s [, ... ] ) %s [ WHERE ( %s ) ] |
  FOREIGN KEY ( %s [, ... ] ) REFERENCES %s [ ( %s [, ... ] ) ]
    [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ] [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

{ INCLUDING | EXCLUDING } { COMMENTS | COMPRESSION | CONSTRAINTS | DEFAULTS | GENERATED | IDENTITY | INDEXES | STATISTICS | STORAGE | ALL }

%s

IN ( %s [, ...] ) |
FROM ( { %s | MINVALUE | MAXVALUE } [, ...] )
  TO ( { %s | MINVALUE | MAXVALUE } [, ...] ) |
WITH ( MODULUS %s, REMAINDER %s )

%s

[ INCLUDE ( %s [, ... ] ) ]
[ WITH ( %s [= %s] [, ... ] ) ]
[ USING INDEX TABLESPACE %s ]

%s

{ %s | ( %s ) } [ COLLATE %s ] [ %s [ ( %s = %s [, ... ] ) ] ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ]

%s

{ NO ACTION | RESTRICT | CASCADE | SET NULL [ ( %s [, ... ] ) ] | SET DEFAULT [ ( %s [, ... ] ) ] }`,o("table_name"),o("column_name"),o("data_type"),o("compression_method"),o("collation"),o("column_constraint"),o("table_constraint"),o("source_table"),o("like_option"),o("parent_table"),o("column_name"),o("expression"),o("collation"),o("opclass"),o("method"),o("storage_parameter"),o("value"),o("tablespace_name"),o("table_name"),o("type_name"),o("column_name"),o("column_constraint"),o("table_constraint"),o("column_name"),o("expression"),o("collation"),o("opclass"),o("method"),o("storage_parameter"),o("value"),o("tablespace_name"),o("table_name"),o("parent_table"),o("column_name"),o("column_constraint"),o("table_constraint"),o("partition_bound_spec"),o("column_name"),o("expression"),o("collation"),o("opclass"),o("method"),o("storage_parameter"),o("value"),o("tablespace_name"),o("where column_constraint is:"),o("constraint_name"),o("expression"),o("default_expr"),o("generation_expr"),o("sequence_options"),o("index_parameters"),o("index_parameters"),o("reftable"),o("refcolumn"),o("referential_action"),o("referential_action"),o("and table_constraint is:"),o("constraint_name"),o("expression"),o("column_name"),o("index_parameters"),o("column_name"),o("index_parameters"),o("index_method"),o("exclude_element"),o("operator"),o("index_parameters"),o("predicate"),o("column_name"),o("reftable"),o("refcolumn"),o("referential_action"),o("referential_action"),o("and like_option is:"),o("and partition_bound_spec is:"),o("partition_bound_expr"),o("partition_bound_expr"),o("partition_bound_expr"),o("numeric_literal"),o("numeric_literal"),o("index_parameters in UNIQUE, PRIMARY KEY, and EXCLUDE constraints are:"),o("column_name"),o("storage_parameter"),o("value"),o("tablespace_name"),o("exclude_element in an EXCLUDE constraint is:"),o("column_name"),o("expression"),o("collation"),o("opclass"),o("opclass_parameter"),o("value"),o("referential_action in a FOREIGN KEY/REFERENCES constraint is:"),o("column_name"),o("column_name"))}function MN(n){_(n,`CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s
    [ (%s [, ...] ) ]
    [ USING %s ]
    [ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
    [ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
    [ TABLESPACE %s ]
    AS %s
    [ WITH [ NO ] DATA ]`,o("table_name"),o("column_name"),o("method"),o("storage_parameter"),o("value"),o("tablespace_name"),o("query"))}function FN(n){_(n,`CREATE TABLESPACE %s
    [ OWNER { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER } ]
    LOCATION '%s'
    [ WITH ( %s = %s [, ... ] ) ]`,o("tablespace_name"),o("new_owner"),o("directory"),o("tablespace_option"),o("value"))}function UN(n){_(n,`CREATE TEXT SEARCH CONFIGURATION %s (
    PARSER = %s |
    COPY = %s
)`,o("name"),o("parser_name"),o("source_config"))}function BN(n){_(n,`CREATE TEXT SEARCH DICTIONARY %s (
    TEMPLATE = %s
    [, %s = %s [, ... ]]
)`,o("name"),o("template"),o("option"),o("value"))}function HN(n){_(n,`CREATE TEXT SEARCH PARSER %s (
    START = %s ,
    GETTOKEN = %s ,
    END = %s ,
    LEXTYPES = %s
    [, HEADLINE = %s ]
)`,o("name"),o("start_function"),o("gettoken_function"),o("end_function"),o("lextypes_function"),o("headline_function"))}function WN(n){_(n,`CREATE TEXT SEARCH TEMPLATE %s (
    [ INIT = %s , ]
    LEXIZE = %s
)`,o("name"),o("init_function"),o("lexize_function"))}function GN(n){_(n,`CREATE [ OR REPLACE ] TRANSFORM FOR %s LANGUAGE %s (
    FROM SQL WITH FUNCTION %s [ (%s [, ...]) ],
    TO SQL WITH FUNCTION %s [ (%s [, ...]) ]
);`,o("type_name"),o("lang_name"),o("from_sql_function_name"),o("argument_type"),o("to_sql_function_name"),o("argument_type"))}function VN(n){_(n,`CREATE [ OR REPLACE ] [ CONSTRAINT ] TRIGGER %s { BEFORE | AFTER | INSTEAD OF } { %s [ OR ... ] }
    ON %s
    [ FROM %s ]
    [ NOT DEFERRABLE | [ DEFERRABLE ] [ INITIALLY IMMEDIATE | INITIALLY DEFERRED ] ]
    [ REFERENCING { { OLD | NEW } TABLE [ AS ] %s } [ ... ] ]
    [ FOR [ EACH ] { ROW | STATEMENT } ]
    [ WHEN ( %s ) ]
    EXECUTE { FUNCTION | PROCEDURE } %s ( %s )

%s

    INSERT
    UPDATE [ OF %s [, ... ] ]
    DELETE
    TRUNCATE`,o("name"),o("event"),o("table_name"),o("referenced_table_name"),o("transition_relation_name"),o("condition"),o("function_name"),o("arguments"),o("where event can be one of:"),o("column_name"))}function qN(n){_(n,`CREATE TYPE %s AS
    ( [ %s %s [ COLLATE %s ] [, ... ] ] )

CREATE TYPE %s AS ENUM
    ( [ '%s' [, ... ] ] )

CREATE TYPE %s AS RANGE (
    SUBTYPE = %s
    [ , SUBTYPE_OPCLASS = %s ]
    [ , COLLATION = %s ]
    [ , CANONICAL = %s ]
    [ , SUBTYPE_DIFF = %s ]
    [ , MULTIRANGE_TYPE_NAME = %s ]
)

CREATE TYPE %s (
    INPUT = %s,
    OUTPUT = %s
    [ , RECEIVE = %s ]
    [ , SEND = %s ]
    [ , TYPMOD_IN = %s ]
    [ , TYPMOD_OUT = %s ]
    [ , ANALYZE = %s ]
    [ , SUBSCRIPT = %s ]
    [ , INTERNALLENGTH = { %s | VARIABLE } ]
    [ , PASSEDBYVALUE ]
    [ , ALIGNMENT = %s ]
    [ , STORAGE = %s ]
    [ , LIKE = %s ]
    [ , CATEGORY = %s ]
    [ , PREFERRED = %s ]
    [ , DEFAULT = %s ]
    [ , ELEMENT = %s ]
    [ , DELIMITER = %s ]
    [ , COLLATABLE = %s ]
)

CREATE TYPE %s`,o("name"),o("attribute_name"),o("data_type"),o("collation"),o("name"),o("label"),o("name"),o("subtype"),o("subtype_operator_class"),o("collation"),o("canonical_function"),o("subtype_diff_function"),o("multirange_type_name"),o("name"),o("input_function"),o("output_function"),o("receive_function"),o("send_function"),o("type_modifier_input_function"),o("type_modifier_output_function"),o("analyze_function"),o("subscript_function"),o("internallength"),o("alignment"),o("storage"),o("like_type"),o("category"),o("preferred"),o("default"),o("element"),o("delimiter"),o("collatable"),o("name"))}function YN(n){_(n,`CREATE USER %s [ [ WITH ] %s [ ... ] ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'
    | IN ROLE %s [, ...]
    | IN GROUP %s [, ...]
    | ROLE %s [, ...]
    | ADMIN %s [, ...]
    | USER %s [, ...]
    | SYSID %s`,o("name"),o("option"),o("where option can be:"),o("connlimit"),o("password"),o("timestamp"),o("role_name"),o("role_name"),o("role_name"),o("role_name"),o("role_name"),o("uid"))}function jN(n){_(n,`CREATE USER MAPPING [ IF NOT EXISTS ] FOR { %s | USER | CURRENT_ROLE | CURRENT_USER | PUBLIC }
    SERVER %s
    [ OPTIONS ( %s '%s' [ , ... ] ) ]`,o("user_name"),o("server_name"),o("option"),o("value"))}function XN(n){_(n,`CREATE [ OR REPLACE ] [ TEMP | TEMPORARY ] [ RECURSIVE ] VIEW %s [ ( %s [, ...] ) ]
    [ WITH ( %s [= %s] [, ... ] ) ]
    AS %s
    [ WITH [ CASCADED | LOCAL ] CHECK OPTION ]`,o("name"),o("column_name"),o("view_option_name"),o("view_option_value"),o("query"))}function zN(n){_(n,"DEALLOCATE [ PREPARE ] { %s | ALL }",o("name"))}function KN(n){_(n,`DECLARE %s [ BINARY ] [ ASENSITIVE | INSENSITIVE ] [ [ NO ] SCROLL ]
    CURSOR [ { WITH | WITHOUT } HOLD ] FOR %s`,o("name"),o("query"))}function $N(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
DELETE FROM [ ONLY ] %s [ * ] [ [ AS ] %s ]
    [ USING %s [, ...] ]
    [ WHERE %s | WHERE CURRENT OF %s ]
    [ RETURNING { * | %s [ [ AS ] %s ] } [, ...] ]`,o("with_query"),o("table_name"),o("alias"),o("from_item"),o("condition"),o("cursor_name"),o("output_expression"),o("output_name"))}function JN(n){_(n,"DISCARD { ALL | PLANS | SEQUENCES | TEMPORARY | TEMP }")}function QN(n){_(n,"DO [ LANGUAGE %s ] %s",o("lang_name"),o("code"))}function ZN(n){_(n,"DROP ACCESS METHOD [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",o("name"))}function eb(n){_(n,`DROP AGGREGATE [ IF EXISTS ] %s ( %s ) [, ...] [ CASCADE | RESTRICT ]

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,o("name"),o("aggregate_signature"),o("where aggregate_signature is:"),o("argmode"),o("argname"),o("argtype"),o("argmode"),o("argname"),o("argtype"),o("argmode"),o("argname"),o("argtype"))}function tb(n){_(n,"DROP CAST [ IF EXISTS ] (%s AS %s) [ CASCADE | RESTRICT ]",o("source_type"),o("target_type"))}function nb(n){_(n,"DROP COLLATION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",o("name"))}function ib(n){_(n,"DROP CONVERSION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",o("name"))}function sb(n){_(n,`DROP DATABASE [ IF EXISTS ] %s [ [ WITH ] ( %s [, ...] ) ]

%s

    FORCE`,o("name"),o("option"),o("where option can be:"))}function rb(n){_(n,"DROP DOMAIN [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function ob(n){_(n,"DROP EVENT TRIGGER [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",o("name"))}function ab(n){_(n,"DROP EXTENSION [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function lb(n){_(n,"DROP FOREIGN DATA WRAPPER [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function cb(n){_(n,"DROP FOREIGN TABLE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function hb(n){_(n,`DROP FUNCTION [ IF EXISTS ] %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
    [ CASCADE | RESTRICT ]`,o("name"),o("argmode"),o("argname"),o("argtype"))}function fb(n){_(n,"DROP GROUP [ IF EXISTS ] %s [, ...]",o("name"))}function ub(n){_(n,"DROP INDEX [ CONCURRENTLY ] [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function db(n){_(n,"DROP [ PROCEDURAL ] LANGUAGE [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",o("name"))}function pb(n){_(n,"DROP MATERIALIZED VIEW [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function mb(n){_(n,"DROP OPERATOR [ IF EXISTS ] %s ( { %s | NONE } , %s ) [, ...] [ CASCADE | RESTRICT ]",o("name"),o("left_type"),o("right_type"))}function gb(n){_(n,"DROP OPERATOR CLASS [ IF EXISTS ] %s USING %s [ CASCADE | RESTRICT ]",o("name"),o("index_method"))}function Eb(n){_(n,"DROP OPERATOR FAMILY [ IF EXISTS ] %s USING %s [ CASCADE | RESTRICT ]",o("name"),o("index_method"))}function Tb(n){_(n,"DROP OWNED BY { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...] [ CASCADE | RESTRICT ]",o("name"))}function Ab(n){_(n,"DROP POLICY [ IF EXISTS ] %s ON %s [ CASCADE | RESTRICT ]",o("name"),o("table_name"))}function Sb(n){_(n,`DROP PROCEDURE [ IF EXISTS ] %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
    [ CASCADE | RESTRICT ]`,o("name"),o("argmode"),o("argname"),o("argtype"))}function Rb(n){_(n,"DROP PUBLICATION [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function _b(n){_(n,"DROP ROLE [ IF EXISTS ] %s [, ...]",o("name"))}function Ob(n){_(n,`DROP ROUTINE [ IF EXISTS ] %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
    [ CASCADE | RESTRICT ]`,o("name"),o("argmode"),o("argname"),o("argtype"))}function Nb(n){_(n,"DROP RULE [ IF EXISTS ] %s ON %s [ CASCADE | RESTRICT ]",o("name"),o("table_name"))}function bb(n){_(n,"DROP SCHEMA [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function Cb(n){_(n,"DROP SEQUENCE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function yb(n){_(n,"DROP SERVER [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function Lb(n){_(n,"DROP STATISTICS [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function Ib(n){_(n,"DROP SUBSCRIPTION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",o("name"))}function wb(n){_(n,"DROP TABLE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function xb(n){_(n,"DROP TABLESPACE [ IF EXISTS ] %s",o("name"))}function vb(n){_(n,"DROP TEXT SEARCH CONFIGURATION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",o("name"))}function Db(n){_(n,"DROP TEXT SEARCH DICTIONARY [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",o("name"))}function kb(n){_(n,"DROP TEXT SEARCH PARSER [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",o("name"))}function Pb(n){_(n,"DROP TEXT SEARCH TEMPLATE [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",o("name"))}function Mb(n){_(n,"DROP TRANSFORM [ IF EXISTS ] FOR %s LANGUAGE %s [ CASCADE | RESTRICT ]",o("type_name"),o("lang_name"))}function Fb(n){_(n,"DROP TRIGGER [ IF EXISTS ] %s ON %s [ CASCADE | RESTRICT ]",o("name"),o("table_name"))}function Ub(n){_(n,"DROP TYPE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function Bb(n){_(n,"DROP USER [ IF EXISTS ] %s [, ...]",o("name"))}function Hb(n){_(n,"DROP USER MAPPING [ IF EXISTS ] FOR { %s | USER | CURRENT_ROLE | CURRENT_USER | PUBLIC } SERVER %s",o("user_name"),o("server_name"))}function Wb(n){_(n,"DROP VIEW [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",o("name"))}function Gb(n){_(n,"END [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function Vb(n){_(n,"EXECUTE %s [ ( %s [, ...] ) ]",o("name"),o("parameter"))}function qb(n){_(n,`EXPLAIN [ ( %s [, ...] ) ] %s

%s

    ANALYZE [ %s ]
    VERBOSE [ %s ]
    COSTS [ %s ]
    SETTINGS [ %s ]
    GENERIC_PLAN [ %s ]
    BUFFERS [ %s ]
    SERIALIZE [ { NONE | TEXT | BINARY } ]
    WAL [ %s ]
    TIMING [ %s ]
    SUMMARY [ %s ]
    MEMORY [ %s ]
    FORMAT { TEXT | XML | JSON | YAML }`,o("option"),o("statement"),o("where option can be one of:"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("boolean"))}function Yb(n){_(n,`FETCH [ %s ] [ FROM | IN ] %s

%s

    NEXT
    PRIOR
    FIRST
    LAST
    ABSOLUTE %s
    RELATIVE %s
    %s
    ALL
    FORWARD
    FORWARD %s
    FORWARD ALL
    BACKWARD
    BACKWARD %s
    BACKWARD ALL`,o("direction"),o("cursor_name"),o("where direction can be one of:"),o("count"),o("count"),o("count"),o("count"),o("count"))}function jb(n){_(n,`GRANT { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER | MAINTAIN }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { [ TABLE ] %s [, ...]
         | ALL TABLES IN SCHEMA %s [, ...] }
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { SELECT | INSERT | UPDATE | REFERENCES } ( %s [, ...] )
    [, ...] | ALL [ PRIVILEGES ] ( %s [, ...] ) }
    ON [ TABLE ] %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { SEQUENCE %s [, ...]
         | ALL SEQUENCES IN SCHEMA %s [, ...] }
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { CREATE | CONNECT | TEMPORARY | TEMP } [, ...] | ALL [ PRIVILEGES ] }
    ON DATABASE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON DOMAIN %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN DATA WRAPPER %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN SERVER %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { EXECUTE | ALL [ PRIVILEGES ] }
    ON { { FUNCTION | PROCEDURE | ROUTINE } %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
         | ALL { FUNCTIONS | PROCEDURES | ROUTINES } IN SCHEMA %s [, ...] }
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON LANGUAGE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { SELECT | UPDATE } [, ...] | ALL [ PRIVILEGES ] }
    ON LARGE OBJECT %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { SET | ALTER SYSTEM } [, ... ] | ALL [ PRIVILEGES ] }
    ON PARAMETER %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { CREATE | USAGE } [, ...] | ALL [ PRIVILEGES ] }
    ON SCHEMA %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { CREATE | ALL [ PRIVILEGES ] }
    ON TABLESPACE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON TYPE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT %s [, ...] TO %s [, ...]
    [ WITH { ADMIN | INHERIT | SET } { OPTION | TRUE | FALSE } ]
    [ GRANTED BY %s ]

%s

    [ GROUP ] %s
  | PUBLIC
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,o("table_name"),o("schema_name"),o("role_specification"),o("role_specification"),o("column_name"),o("column_name"),o("table_name"),o("role_specification"),o("role_specification"),o("sequence_name"),o("schema_name"),o("role_specification"),o("role_specification"),o("database_name"),o("role_specification"),o("role_specification"),o("domain_name"),o("role_specification"),o("role_specification"),o("fdw_name"),o("role_specification"),o("role_specification"),o("server_name"),o("role_specification"),o("role_specification"),o("routine_name"),o("argmode"),o("arg_name"),o("arg_type"),o("schema_name"),o("role_specification"),o("role_specification"),o("lang_name"),o("role_specification"),o("role_specification"),o("loid"),o("role_specification"),o("role_specification"),o("configuration_parameter"),o("role_specification"),o("role_specification"),o("schema_name"),o("role_specification"),o("role_specification"),o("tablespace_name"),o("role_specification"),o("role_specification"),o("type_name"),o("role_specification"),o("role_specification"),o("role_name"),o("role_specification"),o("role_specification"),o("where role_specification can be:"),o("role_name"))}function Xb(n){_(n,`IMPORT FOREIGN SCHEMA %s
    [ { LIMIT TO | EXCEPT } ( %s [, ...] ) ]
    FROM SERVER %s
    INTO %s
    [ OPTIONS ( %s '%s' [, ... ] ) ]`,o("remote_schema"),o("table_name"),o("server_name"),o("local_schema"),o("option"),o("value"))}function zb(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
INSERT INTO %s [ AS %s ] [ ( %s [, ...] ) ]
    [ OVERRIDING { SYSTEM | USER } VALUE ]
    { DEFAULT VALUES | VALUES ( { %s | DEFAULT } [, ...] ) [, ...] | %s }
    [ ON CONFLICT [ %s ] %s ]
    [ RETURNING { * | %s [ [ AS ] %s ] } [, ...] ]

%s

    ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ...] ) [ WHERE %s ]
    ON CONSTRAINT %s

%s

    DO NOTHING
    DO UPDATE SET { %s = { %s | DEFAULT } |
                    ( %s [, ...] ) = [ ROW ] ( { %s | DEFAULT } [, ...] ) |
                    ( %s [, ...] ) = ( %s )
                  } [, ...]
              [ WHERE %s ]`,o("with_query"),o("table_name"),o("alias"),o("column_name"),o("expression"),o("query"),o("conflict_target"),o("conflict_action"),o("output_expression"),o("output_name"),o("where conflict_target can be one of:"),o("index_column_name"),o("index_expression"),o("collation"),o("opclass"),o("index_predicate"),o("constraint_name"),o("and conflict_action is one of:"),o("column_name"),o("expression"),o("column_name"),o("expression"),o("column_name"),o("sub-SELECT"),o("condition"))}function Kb(n){_(n,"LISTEN %s",o("channel"))}function $b(n){_(n,"LOAD '%s'",o("filename"))}function Jb(n){_(n,`LOCK [ TABLE ] [ ONLY ] %s [ * ] [, ...] [ IN %s MODE ] [ NOWAIT ]

%s

    ACCESS SHARE | ROW SHARE | ROW EXCLUSIVE | SHARE UPDATE EXCLUSIVE
    | SHARE | SHARE ROW EXCLUSIVE | EXCLUSIVE | ACCESS EXCLUSIVE`,o("name"),o("lockmode"),o("where lockmode is one of:"))}function Qb(n){_(n,`[ WITH %s [, ...] ]
MERGE INTO [ ONLY ] %s [ * ] [ [ AS ] %s ]
USING %s ON %s
%s [...]
[ RETURNING { * | %s [ [ AS ] %s ] } [, ...] ]

%s

{ [ ONLY ] %s [ * ] | ( %s ) } [ [ AS ] %s ]

%s

{ WHEN MATCHED [ AND %s ] THEN { %s | %s | DO NOTHING } |
  WHEN NOT MATCHED BY SOURCE [ AND %s ] THEN { %s | %s | DO NOTHING } |
  WHEN NOT MATCHED [ BY TARGET ] [ AND %s ] THEN { %s | DO NOTHING } }

%s

INSERT [( %s [, ...] )]
[ OVERRIDING { SYSTEM | USER } VALUE ]
{ VALUES ( { %s | DEFAULT } [, ...] ) | DEFAULT VALUES }

%s

UPDATE SET { %s = { %s | DEFAULT } |
             ( %s [, ...] ) = [ ROW ] ( { %s | DEFAULT } [, ...] ) |
             ( %s [, ...] ) = ( %s )
           } [, ...]

%s

DELETE`,o("with_query"),o("target_table_name"),o("target_alias"),o("data_source"),o("join_condition"),o("when_clause"),o("output_expression"),o("output_name"),o("where data_source is:"),o("source_table_name"),o("source_query"),o("source_alias"),o("and when_clause is:"),o("condition"),o("merge_update"),o("merge_delete"),o("condition"),o("merge_update"),o("merge_delete"),o("condition"),o("merge_insert"),o("and merge_insert is:"),o("column_name"),o("expression"),o("and merge_update is:"),o("column_name"),o("expression"),o("column_name"),o("expression"),o("column_name"),o("sub-SELECT"),o("and merge_delete is:"))}function Zb(n){_(n,`MOVE [ %s ] [ FROM | IN ] %s

%s

    NEXT
    PRIOR
    FIRST
    LAST
    ABSOLUTE %s
    RELATIVE %s
    %s
    ALL
    FORWARD
    FORWARD %s
    FORWARD ALL
    BACKWARD
    BACKWARD %s
    BACKWARD ALL`,o("direction"),o("cursor_name"),o("where direction can be one of:"),o("count"),o("count"),o("count"),o("count"),o("count"))}function eC(n){_(n,"NOTIFY %s [ , %s ]",o("channel"),o("payload"))}function tC(n){_(n,"PREPARE %s [ ( %s [, ...] ) ] AS %s",o("name"),o("data_type"),o("statement"))}function nC(n){_(n,"PREPARE TRANSACTION %s",o("transaction_id"))}function iC(n){_(n,`REASSIGN OWNED BY { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...]
               TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,o("old_role"),o("new_role"))}function sC(n){_(n,`REFRESH MATERIALIZED VIEW [ CONCURRENTLY ] %s
    [ WITH [ NO ] DATA ]`,o("name"))}function rC(n){_(n,`REINDEX [ ( %s [, ...] ) ] { INDEX | TABLE | SCHEMA } [ CONCURRENTLY ] %s
REINDEX [ ( %s [, ...] ) ] { DATABASE | SYSTEM } [ CONCURRENTLY ] [ %s ]

%s

    CONCURRENTLY [ %s ]
    TABLESPACE %s
    VERBOSE [ %s ]`,o("option"),o("name"),o("option"),o("name"),o("where option can be one of:"),o("boolean"),o("new_tablespace"),o("boolean"))}function oC(n){_(n,"RELEASE [ SAVEPOINT ] %s",o("savepoint_name"))}function aC(n){_(n,`RESET %s
RESET ALL`,o("configuration_parameter"))}function lC(n){_(n,`REVOKE [ GRANT OPTION FOR ]
    { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER | MAINTAIN }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { [ TABLE ] %s [, ...]
         | ALL TABLES IN SCHEMA %s [, ...] }
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { SELECT | INSERT | UPDATE | REFERENCES } ( %s [, ...] )
    [, ...] | ALL [ PRIVILEGES ] ( %s [, ...] ) }
    ON [ TABLE ] %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { SEQUENCE %s [, ...]
         | ALL SEQUENCES IN SCHEMA %s [, ...] }
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { CREATE | CONNECT | TEMPORARY | TEMP } [, ...] | ALL [ PRIVILEGES ] }
    ON DATABASE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON DOMAIN %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN DATA WRAPPER %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN SERVER %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { EXECUTE | ALL [ PRIVILEGES ] }
    ON { { FUNCTION | PROCEDURE | ROUTINE } %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
         | ALL { FUNCTIONS | PROCEDURES | ROUTINES } IN SCHEMA %s [, ...] }
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON LANGUAGE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { SELECT | UPDATE } [, ...] | ALL [ PRIVILEGES ] }
    ON LARGE OBJECT %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { SET | ALTER SYSTEM } [, ...] | ALL [ PRIVILEGES ] }
    ON PARAMETER %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { CREATE | USAGE } [, ...] | ALL [ PRIVILEGES ] }
    ON SCHEMA %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { CREATE | ALL [ PRIVILEGES ] }
    ON TABLESPACE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON TYPE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ { ADMIN | INHERIT | SET } OPTION FOR ]
    %s [, ...] FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

%s

    [ GROUP ] %s
  | PUBLIC
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,o("table_name"),o("schema_name"),o("role_specification"),o("role_specification"),o("column_name"),o("column_name"),o("table_name"),o("role_specification"),o("role_specification"),o("sequence_name"),o("schema_name"),o("role_specification"),o("role_specification"),o("database_name"),o("role_specification"),o("role_specification"),o("domain_name"),o("role_specification"),o("role_specification"),o("fdw_name"),o("role_specification"),o("role_specification"),o("server_name"),o("role_specification"),o("role_specification"),o("function_name"),o("argmode"),o("arg_name"),o("arg_type"),o("schema_name"),o("role_specification"),o("role_specification"),o("lang_name"),o("role_specification"),o("role_specification"),o("loid"),o("role_specification"),o("role_specification"),o("configuration_parameter"),o("role_specification"),o("role_specification"),o("schema_name"),o("role_specification"),o("role_specification"),o("tablespace_name"),o("role_specification"),o("role_specification"),o("type_name"),o("role_specification"),o("role_specification"),o("role_name"),o("role_specification"),o("role_specification"),o("where role_specification can be:"),o("role_name"))}function cC(n){_(n,"ROLLBACK [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function hC(n){_(n,"ROLLBACK PREPARED %s",o("transaction_id"))}function fC(n){_(n,"ROLLBACK [ WORK | TRANSACTION ] TO [ SAVEPOINT ] %s",o("savepoint_name"))}function uC(n){_(n,"SAVEPOINT %s",o("savepoint_name"))}function dC(n){_(n,`SECURITY LABEL [ FOR %s ] ON
{
  TABLE %s |
  COLUMN %s.%s |
  AGGREGATE %s ( %s ) |
  DATABASE %s |
  DOMAIN %s |
  EVENT TRIGGER %s |
  FOREIGN TABLE %s |
  FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  LARGE OBJECT %s |
  MATERIALIZED VIEW %s |
  [ PROCEDURAL ] LANGUAGE %s |
  PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  PUBLICATION %s |
  ROLE %s |
  ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  SCHEMA %s |
  SEQUENCE %s |
  SUBSCRIPTION %s |
  TABLESPACE %s |
  TYPE %s |
  VIEW %s
} IS { %s | NULL }

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,o("provider"),o("object_name"),o("table_name"),o("column_name"),o("aggregate_name"),o("aggregate_signature"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("function_name"),o("argmode"),o("argname"),o("argtype"),o("large_object_oid"),o("object_name"),o("object_name"),o("procedure_name"),o("argmode"),o("argname"),o("argtype"),o("object_name"),o("object_name"),o("routine_name"),o("argmode"),o("argname"),o("argtype"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("object_name"),o("string_literal"),o("where aggregate_signature is:"),o("argmode"),o("argname"),o("argtype"),o("argmode"),o("argname"),o("argtype"),o("argmode"),o("argname"),o("argtype"))}function pC(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    [ { * | %s [ [ AS ] %s ] } [, ...] ]
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY [ ALL | DISTINCT ] %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } { ONLY | WITH TIES } ]
    [ FOR { UPDATE | NO KEY UPDATE | SHARE | KEY SHARE } [ OF %s [, ...] ] [ NOWAIT | SKIP LOCKED ] [...] ]

%s

    [ ONLY ] %s [ * ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
                [ TABLESAMPLE %s ( %s [, ...] ) [ REPEATABLE ( %s ) ] ]
    [ LATERAL ] ( %s ) [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] ) [ AS ] %s ( %s [, ...] )
    [ LATERAL ] %s ( [ %s [, ...] ] ) AS ( %s [, ...] )
    [ LATERAL ] ROWS FROM( %s ( [ %s [, ...] ] ) [ AS ( %s [, ...] ) ] [, ...] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s %s %s { ON %s | USING ( %s [, ...] ) [ AS %s ] }
    %s NATURAL %s %s
    %s CROSS JOIN %s

%s

    ( )
    %s
    ( %s [, ...] )
    ROLLUP ( { %s | ( %s [, ...] ) } [, ...] )
    CUBE ( { %s | ( %s [, ...] ) } [, ...] )
    GROUPING SETS ( %s [, ...] )

%s

    %s [ ( %s [, ...] ) ] AS [ [ NOT ] MATERIALIZED ] ( %s | %s | %s | %s | %s | %s )
        [ SEARCH { BREADTH | DEPTH } FIRST BY %s [, ...] SET %s ]
        [ CYCLE %s [, ...] SET %s [ TO %s DEFAULT %s ] USING %s ]

TABLE [ ONLY ] %s [ * ]`,o("with_query"),o("expression"),o("expression"),o("output_name"),o("from_item"),o("condition"),o("grouping_element"),o("condition"),o("window_name"),o("window_definition"),o("select"),o("expression"),o("operator"),o("count"),o("start"),o("count"),o("from_reference"),o("where from_item can be one of:"),o("table_name"),o("alias"),o("column_alias"),o("sampling_method"),o("argument"),o("seed"),o("select"),o("alias"),o("column_alias"),o("with_query_name"),o("alias"),o("column_alias"),o("function_name"),o("argument"),o("alias"),o("column_alias"),o("function_name"),o("argument"),o("alias"),o("column_definition"),o("function_name"),o("argument"),o("column_definition"),o("function_name"),o("argument"),o("column_definition"),o("alias"),o("column_alias"),o("from_item"),o("join_type"),o("from_item"),o("join_condition"),o("join_column"),o("join_using_alias"),o("from_item"),o("join_type"),o("from_item"),o("from_item"),o("from_item"),o("and grouping_element can be one of:"),o("expression"),o("expression"),o("expression"),o("expression"),o("expression"),o("expression"),o("grouping_element"),o("and with_query is:"),o("with_query_name"),o("column_name"),o("select"),o("values"),o("insert"),o("update"),o("delete"),o("merge"),o("column_name"),o("search_seq_col_name"),o("column_name"),o("cycle_mark_col_name"),o("cycle_mark_value"),o("cycle_mark_default"),o("cycle_path_col_name"),o("table_name"))}function mC(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    [ { * | %s [ [ AS ] %s ] } [, ...] ]
    INTO [ TEMPORARY | TEMP | UNLOGGED ] [ TABLE ] %s
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } ONLY ]
    [ FOR { UPDATE | SHARE } [ OF %s [, ...] ] [ NOWAIT ] [...] ]`,o("with_query"),o("expression"),o("expression"),o("output_name"),o("new_table"),o("from_item"),o("condition"),o("expression"),o("condition"),o("window_name"),o("window_definition"),o("select"),o("expression"),o("operator"),o("count"),o("start"),o("count"),o("table_name"))}function gC(n){_(n,`SET [ SESSION | LOCAL ] %s { TO | = } { %s | '%s' | DEFAULT }
SET [ SESSION | LOCAL ] TIME ZONE { %s | '%s' | LOCAL | DEFAULT }`,o("configuration_parameter"),o("value"),o("value"),o("value"),o("value"))}function EC(n){_(n,"SET CONSTRAINTS { ALL | %s [, ...] } { DEFERRED | IMMEDIATE }",o("name"))}function TC(n){_(n,`SET [ SESSION | LOCAL ] ROLE %s
SET [ SESSION | LOCAL ] ROLE NONE
RESET ROLE`,o("role_name"))}function AC(n){_(n,`SET [ SESSION | LOCAL ] SESSION AUTHORIZATION %s
SET [ SESSION | LOCAL ] SESSION AUTHORIZATION DEFAULT
RESET SESSION AUTHORIZATION`,o("user_name"))}function SC(n){_(n,`SET TRANSACTION %s [, ...]
SET TRANSACTION SNAPSHOT %s
SET SESSION CHARACTERISTICS AS TRANSACTION %s [, ...]

%s

    ISOLATION LEVEL { SERIALIZABLE | REPEATABLE READ | READ COMMITTED | READ UNCOMMITTED }
    READ WRITE | READ ONLY
    [ NOT ] DEFERRABLE`,o("transaction_mode"),o("snapshot_id"),o("transaction_mode"),o("where transaction_mode is one of:"))}function RC(n){_(n,`SHOW %s
SHOW ALL`,o("name"))}function _C(n){_(n,`START TRANSACTION [ %s [, ...] ]

%s

    ISOLATION LEVEL { SERIALIZABLE | REPEATABLE READ | READ COMMITTED | READ UNCOMMITTED }
    READ WRITE | READ ONLY
    [ NOT ] DEFERRABLE`,o("transaction_mode"),o("where transaction_mode is one of:"))}function OC(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    [ { * | %s [ [ AS ] %s ] } [, ...] ]
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY [ ALL | DISTINCT ] %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } { ONLY | WITH TIES } ]
    [ FOR { UPDATE | NO KEY UPDATE | SHARE | KEY SHARE } [ OF %s [, ...] ] [ NOWAIT | SKIP LOCKED ] [...] ]

%s

    [ ONLY ] %s [ * ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
                [ TABLESAMPLE %s ( %s [, ...] ) [ REPEATABLE ( %s ) ] ]
    [ LATERAL ] ( %s ) [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] ) [ AS ] %s ( %s [, ...] )
    [ LATERAL ] %s ( [ %s [, ...] ] ) AS ( %s [, ...] )
    [ LATERAL ] ROWS FROM( %s ( [ %s [, ...] ] ) [ AS ( %s [, ...] ) ] [, ...] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s %s %s { ON %s | USING ( %s [, ...] ) [ AS %s ] }
    %s NATURAL %s %s
    %s CROSS JOIN %s

%s

    ( )
    %s
    ( %s [, ...] )
    ROLLUP ( { %s | ( %s [, ...] ) } [, ...] )
    CUBE ( { %s | ( %s [, ...] ) } [, ...] )
    GROUPING SETS ( %s [, ...] )

%s

    %s [ ( %s [, ...] ) ] AS [ [ NOT ] MATERIALIZED ] ( %s | %s | %s | %s | %s | %s )
        [ SEARCH { BREADTH | DEPTH } FIRST BY %s [, ...] SET %s ]
        [ CYCLE %s [, ...] SET %s [ TO %s DEFAULT %s ] USING %s ]

TABLE [ ONLY ] %s [ * ]`,o("with_query"),o("expression"),o("expression"),o("output_name"),o("from_item"),o("condition"),o("grouping_element"),o("condition"),o("window_name"),o("window_definition"),o("select"),o("expression"),o("operator"),o("count"),o("start"),o("count"),o("from_reference"),o("where from_item can be one of:"),o("table_name"),o("alias"),o("column_alias"),o("sampling_method"),o("argument"),o("seed"),o("select"),o("alias"),o("column_alias"),o("with_query_name"),o("alias"),o("column_alias"),o("function_name"),o("argument"),o("alias"),o("column_alias"),o("function_name"),o("argument"),o("alias"),o("column_definition"),o("function_name"),o("argument"),o("column_definition"),o("function_name"),o("argument"),o("column_definition"),o("alias"),o("column_alias"),o("from_item"),o("join_type"),o("from_item"),o("join_condition"),o("join_column"),o("join_using_alias"),o("from_item"),o("join_type"),o("from_item"),o("from_item"),o("from_item"),o("and grouping_element can be one of:"),o("expression"),o("expression"),o("expression"),o("expression"),o("expression"),o("expression"),o("grouping_element"),o("and with_query is:"),o("with_query_name"),o("column_name"),o("select"),o("values"),o("insert"),o("update"),o("delete"),o("merge"),o("column_name"),o("search_seq_col_name"),o("column_name"),o("cycle_mark_col_name"),o("cycle_mark_value"),o("cycle_mark_default"),o("cycle_path_col_name"),o("table_name"))}function NC(n){_(n,`TRUNCATE [ TABLE ] [ ONLY ] %s [ * ] [, ... ]
    [ RESTART IDENTITY | CONTINUE IDENTITY ] [ CASCADE | RESTRICT ]`,o("name"))}function bC(n){_(n,"UNLISTEN { %s | * }",o("channel"))}function CC(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
UPDATE [ ONLY ] %s [ * ] [ [ AS ] %s ]
    SET { %s = { %s | DEFAULT } |
          ( %s [, ...] ) = [ ROW ] ( { %s | DEFAULT } [, ...] ) |
          ( %s [, ...] ) = ( %s )
        } [, ...]
    [ FROM %s [, ...] ]
    [ WHERE %s | WHERE CURRENT OF %s ]
    [ RETURNING { * | %s [ [ AS ] %s ] } [, ...] ]`,o("with_query"),o("table_name"),o("alias"),o("column_name"),o("expression"),o("column_name"),o("expression"),o("column_name"),o("sub-SELECT"),o("from_item"),o("condition"),o("cursor_name"),o("output_expression"),o("output_name"))}function yC(n){_(n,`VACUUM [ ( %s [, ...] ) ] [ %s [, ...] ]

%s

    FULL [ %s ]
    FREEZE [ %s ]
    VERBOSE [ %s ]
    ANALYZE [ %s ]
    DISABLE_PAGE_SKIPPING [ %s ]
    SKIP_LOCKED [ %s ]
    INDEX_CLEANUP { AUTO | ON | OFF }
    PROCESS_MAIN [ %s ]
    PROCESS_TOAST [ %s ]
    TRUNCATE [ %s ]
    PARALLEL %s
    SKIP_DATABASE_STATS [ %s ]
    ONLY_DATABASE_STATS [ %s ]
    BUFFER_USAGE_LIMIT %s

%s

    %s [ ( %s [, ...] ) ]`,o("option"),o("table_and_columns"),o("where option can be one of:"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("boolean"),o("integer"),o("boolean"),o("boolean"),o("size"),o("and table_and_columns is:"),o("table_name"),o("column_name"))}function LC(n){_(n,`VALUES ( %s [, ...] ) [, ...]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } ONLY ]`,o("expression"),o("sort_expression"),o("operator"),o("count"),o("start"),o("count"))}function IC(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    [ { * | %s [ [ AS ] %s ] } [, ...] ]
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY [ ALL | DISTINCT ] %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } { ONLY | WITH TIES } ]
    [ FOR { UPDATE | NO KEY UPDATE | SHARE | KEY SHARE } [ OF %s [, ...] ] [ NOWAIT | SKIP LOCKED ] [...] ]

%s

    [ ONLY ] %s [ * ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
                [ TABLESAMPLE %s ( %s [, ...] ) [ REPEATABLE ( %s ) ] ]
    [ LATERAL ] ( %s ) [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] ) [ AS ] %s ( %s [, ...] )
    [ LATERAL ] %s ( [ %s [, ...] ] ) AS ( %s [, ...] )
    [ LATERAL ] ROWS FROM( %s ( [ %s [, ...] ] ) [ AS ( %s [, ...] ) ] [, ...] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s %s %s { ON %s | USING ( %s [, ...] ) [ AS %s ] }
    %s NATURAL %s %s
    %s CROSS JOIN %s

%s

    ( )
    %s
    ( %s [, ...] )
    ROLLUP ( { %s | ( %s [, ...] ) } [, ...] )
    CUBE ( { %s | ( %s [, ...] ) } [, ...] )
    GROUPING SETS ( %s [, ...] )

%s

    %s [ ( %s [, ...] ) ] AS [ [ NOT ] MATERIALIZED ] ( %s | %s | %s | %s | %s | %s )
        [ SEARCH { BREADTH | DEPTH } FIRST BY %s [, ...] SET %s ]
        [ CYCLE %s [, ...] SET %s [ TO %s DEFAULT %s ] USING %s ]

TABLE [ ONLY ] %s [ * ]`,o("with_query"),o("expression"),o("expression"),o("output_name"),o("from_item"),o("condition"),o("grouping_element"),o("condition"),o("window_name"),o("window_definition"),o("select"),o("expression"),o("operator"),o("count"),o("start"),o("count"),o("from_reference"),o("where from_item can be one of:"),o("table_name"),o("alias"),o("column_alias"),o("sampling_method"),o("argument"),o("seed"),o("select"),o("alias"),o("column_alias"),o("with_query_name"),o("alias"),o("column_alias"),o("function_name"),o("argument"),o("alias"),o("column_alias"),o("function_name"),o("argument"),o("alias"),o("column_definition"),o("function_name"),o("argument"),o("column_definition"),o("function_name"),o("argument"),o("column_definition"),o("alias"),o("column_alias"),o("from_item"),o("join_type"),o("from_item"),o("join_condition"),o("join_column"),o("join_using_alias"),o("from_item"),o("join_type"),o("from_item"),o("from_item"),o("from_item"),o("and grouping_element can be one of:"),o("expression"),o("expression"),o("expression"),o("expression"),o("expression"),o("expression"),o("grouping_element"),o("and with_query is:"),o("with_query_name"),o("column_name"),o("select"),o("values"),o("insert"),o("update"),o("delete"),o("merge"),o("column_name"),o("search_seq_col_name"),o("column_name"),o("cycle_mark_col_name"),o("cycle_mark_value"),o("cycle_mark_default"),o("cycle_path_col_name"),o("table_name"))}var pp=n=>{var{theme:e,settings:t={},styles:i=[]}=n,s={".cm-gutters":{}},r={};t.background&&(r.backgroundColor=t.background),t.backgroundImage&&(r.backgroundImage=t.backgroundImage),t.foreground&&(r.color=t.foreground),t.fontSize&&(r.fontSize=t.fontSize),(t.background||t.foreground)&&(s["&"]=r),t.fontFamily&&(s["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(s[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(s[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(s[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(s[".cm-content"]={caretColor:t.caret},s[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var a={};t.gutterActiveForeground&&(a.color=t.gutterActiveForeground),t.lineHighlight&&(s[".cm-activeLine"]={backgroundColor:t.lineHighlight},a.backgroundColor=t.lineHighlight),s[".cm-activeLineGutter"]=a,t.selection&&(s["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(s["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var l=Q.theme(s,{dark:e==="dark"}),c=Ai.define(i),h=[l,ul(c)];return h},wC={background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},xC=[{tag:[w.standard(w.tagName),w.tagName],color:"#116329"},{tag:[w.comment,w.bracket],color:"#6a737d"},{tag:[w.className,w.propertyName],color:"#6f42c1"},{tag:[w.variableName,w.attributeName,w.number,w.operator],color:"#005cc5"},{tag:[w.keyword,w.typeName,w.typeOperator,w.typeName],color:"#d73a49"},{tag:[w.string,w.meta,w.regexp],color:"#032f62"},{tag:[w.name,w.quote],color:"#22863a"},{tag:[w.heading,w.strong],color:"#24292e",fontWeight:"bold"},{tag:[w.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[w.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[w.atom,w.bool,w.special(w.variableName)],color:"#e36209"},{tag:[w.url,w.escape,w.regexp,w.link],color:"#032f62"},{tag:w.link,textDecoration:"underline"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.invalid,color:"#cb2431"}],vC=n=>{var{theme:e="light",settings:t={},styles:i=[]}=n||{};return pp({theme:e,settings:Va({},wC,t),styles:[...xC,...i]})},DC=vC(),kC={background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},PC=[{tag:[w.standard(w.tagName),w.tagName],color:"#7ee787"},{tag:[w.comment,w.bracket],color:"#8b949e"},{tag:[w.className,w.propertyName],color:"#d2a8ff"},{tag:[w.variableName,w.attributeName,w.number,w.operator],color:"#79c0ff"},{tag:[w.keyword,w.typeName,w.typeOperator,w.typeName],color:"#ff7b72"},{tag:[w.string,w.meta,w.regexp],color:"#a5d6ff"},{tag:[w.name,w.quote],color:"#7ee787"},{tag:[w.heading,w.strong],color:"#d2a8ff",fontWeight:"bold"},{tag:[w.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[w.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[w.atom,w.bool,w.special(w.variableName)],color:"#ffab70"},{tag:w.link,textDecoration:"underline"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.invalid,color:"#f97583"}],MC=n=>{var{theme:e="dark",settings:t={},styles:i=[]}=n||{};return pp({theme:e,settings:Va({},kC,t),styles:[...PC,...i]})},FC=MC();const UC=[{label:"\\d",type:"function",displayLabel:"\\d[S+] [ pattern ]",detail:"PSQL Describe"},{label:"\\da",type:"function",displayLabel:"\\da[S] [ pattern ]",detail:"Lists aggregate functions"},{label:"\\dA",type:"function",displayLabel:"\\dA[+] [ pattern ]",detail:"Lists access methods"},{label:"\\dAc",type:"function",displayLabel:"\\dAc[+] [access-method-pattern [input-type-pattern]]",detail:"Lists operator classes"},{label:"\\dAf",type:"function",displayLabel:"\\dAf[+] [access-method-pattern [input-type-pattern]]",detail:"Lists operator families"},{label:"\\dAo",type:"function",displayLabel:"\\dAo[+] [access-method-pattern [operator-family-pattern]]",detail:"Lists operators associated with operator families"},{label:"\\dAp",type:"function",displayLabel:"\\dAp[+] [access-method-pattern [operator-family-pattern]]",detail:"Lists support functions associated with operator families"},{label:"\\db",type:"function",displayLabel:"\\db[+] [ pattern ]",detail:"Lists tablespaces"},{label:"\\dc",type:"function",displayLabel:"\\dc[S+] [ pattern ]",detail:"Lists conversions between character-set encodings"},{label:"\\dconfig",type:"function",displayLabel:"\\dconfig[+] [ pattern ]",detail:"Lists server configuration parameters and their values"},{label:"\\dC",type:"function",displayLabel:"\\dC[+] [ pattern ]",detail:"Lists type casts"},{label:"\\dd",type:"function",displayLabel:"\\dd[S] [ pattern ]",detail:"Shows the descriptions of objects of type constraint, operator class, operator family, rule, and trigger"},{label:"\\dD",type:"function",displayLabel:"\\dD[S+] [ pattern ]",detail:"Lists domains"},{label:"\\ddp",type:"function",displayLabel:"\\ddp [ pattern ]",detail:"Lists default access privilege settings"},{label:"\\dE",type:"function",displayLabel:"\\dE[S+] [ pattern ]",detail:"Lists foreign tables"},{label:"\\di",type:"function",displayLabel:"\\di[S+] [ pattern ]",detail:"Lists indexes"},{label:"\\dm",type:"function",displayLabel:"\\dm[S+] [ pattern ]",detail:"Lists materialized views"},{label:"\\ds",type:"function",displayLabel:"\\ds[S+] [ pattern ]",detail:"Lists sequences"},{label:"\\dt",type:"function",displayLabel:"\\dt[S+] [ pattern ]",detail:"Lists tables"},{label:"\\dv",type:"function",displayLabel:"\\dv[S+] [ pattern ]",detail:"Lists views"},{label:"\\des",type:"function",displayLabel:"\\des[+] [ pattern ]",detail:"Lists foreign servers"},{label:"\\det",type:"function",displayLabel:"\\det[+] [ pattern ]",detail:"Lists foreign tables"},{label:"\\deu",type:"function",displayLabel:"\\deu[+] [ pattern ]",detail:"Lists user mappings"},{label:"\\dew",type:"function",displayLabel:"\\dew[+] [ pattern ]",detail:"Lists foreign-data wrappers"},{label:"\\df",type:"function",displayLabel:"\\df[anptwS+] [ pattern [ arg_pattern ... ] ]",detail:"Lists functions"},{label:"\\dF",type:"function",displayLabel:"\\dF[+] [ pattern ]",detail:"Lists text search configurations"},{label:"\\dFd",type:"function",displayLabel:"\\dFd[+] [ pattern ]",detail:"Lists text search dictionaries"},{label:"\\dFp",type:"function",displayLabel:"\\dFp[+] [ pattern ]",detail:"Lists text search parsers"},{label:"\\dFt",type:"function",displayLabel:"\\dFt[+] [ pattern ]",detail:"Lists text search templates"},{label:"\\dg",type:"function",displayLabel:"\\dg[S+] [ pattern ]",detail:"Lists database roles"},{label:"\\dl",type:"function",displayLabel:"\\dl[+] ",detail:"List large objects"},{label:"\\dL",type:"function",displayLabel:"\\dL[S+] [ pattern ]",detail:"Lists procedural languages"},{label:"\\dn",type:"function",displayLabel:"\\dn[S+] [ pattern ]",detail:"Lists schemas"},{label:"\\do",type:"function",displayLabel:"\\do[S+] [ pattern [ arg_pattern [ arg_pattern ] ] ]",detail:"Lists operators with their operand and result types"},{label:"\\dO",type:"function",displayLabel:"\\dO[S+] [ pattern ]",detail:"Lists collations"},{label:"\\dp",type:"function",displayLabel:"\\dp[S] [ pattern ]",detail:"Lists tables, views and sequences with their associated access privileges"},{label:"\\dP",type:"function",displayLabel:"\\dP[itn+] [ pattern ]",detail:"Lists partitioned relations"},{label:"\\drds",type:"function",displayLabel:"\\drds [ role-pattern [ database-pattern ] ]",detail:"Lists defined configuration settings"},{label:"\\drg",type:"function",displayLabel:"\\drg[S] [ pattern ]",detail:"Lists information about each granted role membership"},{label:"\\dRp",type:"function",displayLabel:"\\dRp[+] [ pattern ]",detail:"Lists replication publications"},{label:"\\dRs",type:"function",displayLabel:"\\dRs[+] [ pattern ]",detail:"Lists replication subscriptions"},{label:"\\dT",type:"function",displayLabel:"\\dT[S+] [ pattern ]",detail:"Lists data types"},{label:"\\du",type:"function",displayLabel:"\\du[S+] [ pattern ]",detail:"Lists database roles"},{label:"\\dx",type:"function",displayLabel:"\\dx[+] [ pattern ]",detail:"Lists installed extensions"},{label:"\\dX",type:"function",displayLabel:"\\dX [ pattern ]",detail:"Lists extended statistics"},{label:"\\dy",type:"function",displayLabel:"\\dy[+] [ pattern ]",detail:"Lists event triggers"}];function BC(n){const e=n.matchBefore(/\\\w*/);return!e||e.from===e.to?null:{from:e.from,options:UC}}function HC(n={}){const e=n.dialect||hp;return new nA(e.language,[n.schema?e.language.data.of({autocomplete:U_(n)}):[],e.language.data.of({autocomplete:F_(e,!!n.upperCaseKeywords)}),e.language.data.of({autocomplete:BC})])}async function WC(n,e){if(n.trim().toLowerCase().startsWith("\\"))return GC(n,e);const t=performance.now();try{const i=await e.exec(n,{rowMode:"array"}),s=performance.now()-t;return{query:n,results:i,time:s}}catch(i){return{query:n,error:i.message,time:performance.now()-t}}}async function GC(n,e){const t=performance.now();let i,s;const{promise:r,cancel:a}=eO(n,"postgres",async c=>(s=(await e.exec(c,{rowMode:"array"}))[0],{rows:s.rows,fields:s.fields,rowCount:s.rows.length}),c=>{i=c});await r;const l=performance.now()-t;return i?typeof i=="string"?i.startsWith("ERROR:")?{query:n,error:i,time:l}:{query:n,text:i,time:l}:{query:n,text:i.title,results:[s],time:l}:{query:n,error:"No output",time:l}}async function $h(n){const e=await n.query(`
    SELECT 
      table_schema AS schema,
      table_name AS table,
      array_agg(column_name) AS columns
    FROM 
      information_schema.columns
    GROUP BY 
      table_schema, table_name
    ORDER BY 
      table_schema, table_name;
  `),t={};for(const i of e.rows)t[`${i.schema}.${i.table}`]=Array.isArray(i.columns)?i.columns:i.columns.slice(1,-1).split(",");return t}const Fo=100,Jh=200;function VC(n){return n===null?"PGliteRepl-null":typeof n=="number"?"PGliteRepl-number":typeof n=="boolean"?"PGliteRepl-boolean":""}function mp(n){let e;return n===null?e="null":typeof n=="number"?e=n.toString():typeof n=="boolean"?e=n?"true":"false":n instanceof Date?e=n.toISOString():Array.isArray(n)?e=`[${n.map(mp).join(", ")}]`:typeof n=="object"?e=JSON.stringify(n):ArrayBuffer.isView(n)?e=`${n.byteLength} bytes`:n===void 0?e="undefined":e=n.toString(),e.length>Jh?e.slice(0,Jh)+"…":e}function qC({result:n}){const[e,t]=pe.useState(Fo),i=n.rows.slice(0,e);pe.useEffect(()=>{t(Fo)},[n]);const s=()=>{t(r=>r+Fo)};return Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:"PGliteRepl-table-scroll",children:Z.jsxs("table",{className:"PGliteRepl-table",children:[Z.jsx("thead",{children:Z.jsx("tr",{children:n.fields.map(r=>Z.jsx("th",{children:r.name},r.name))})}),Z.jsx("tbody",{children:i.map((r,a)=>Z.jsx("tr",{children:r.map((l,c)=>Z.jsx("td",{className:VC(l),children:mp(l)},c))},a))})]})}),Z.jsxs("div",{className:"PGliteRepl-table-row-count",children:[n.rows.length>e?`${e} of `:"",n.rows.length," rows"," ",n.rows.length>e&&Z.jsx("a",{href:"",onClick:r=>{r.preventDefault(),s()},children:"Show more"})]})]})}function YC({result:n}){return Z.jsx("div",{className:"PGliteRepl-line",children:n.fields.length>0?Z.jsx(qC,{result:n}):Z.jsx("div",{className:"PGliteRepl-null",children:"null"})})}function jC({response:n,showTime:e}){var t;let i;return n.error?i=Z.jsx("div",{className:"PGliteRepl-line PGliteRepl-error",children:n.error}):i=Z.jsx(Z.Fragment,{children:(t=n.results)==null?void 0:t.map((s,r)=>Z.jsx(YC,{result:s},r))}),Z.jsxs(Z.Fragment,{children:[Z.jsx("pre",{className:"PGliteRepl-line PGliteRepl-query",children:n.query}),n.text&&Z.jsx("div",{className:"PGliteRepl-line PGliteRepl-text",children:n.text}),i,Z.jsxs("div",{className:"PGliteRepl-divider",children:[Z.jsx("hr",{}),e&&Z.jsxs("div",{className:"PGliteRepl-time",children:[n.time.toFixed(1),"ms"]})]})]})}const XC=wd.filter(n=>n.key!=="Enter"),zC=DC,KC=FC;function $C({pg:n,border:e=!1,lightTheme:t=zC,darkTheme:i=KC,theme:s="auto",showTime:r=!1,disableUpdateSchema:a=!1}){const[l,c]=pe.useState(""),h=pe.useRef(""),[f,u]=pe.useState(!0),[m,T]=pe.useState([]),N=pe.useRef(null),[b,p]=pe.useState({}),L=pe.useRef(-1),x=pe.useRef(null),[W,V]=pe.useState(s==="dark"?i:t),[H,M]=pe.useState({}),q=ym(n);pe.useEffect(()=>{let te=!1;const K=async()=>{await q.waitReady,!te&&u(!1)};return u(!0),K(),()=>{te=!0}},[q]),pe.useEffect(()=>{if(s==="auto"){const te=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";V(te==="dark"?i:t);const K=fe=>{V(fe.matches?i:t),setTimeout(()=>{Y()},0)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",K),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",K)}}else{V(s==="dark"?i:t),setTimeout(()=>{Y()},0);return}},[s,t,i]);const se=pe.useCallback((te,K)=>{Y(),c(te),L.current===-1&&(h.current=te)},[]),z=pe.useMemo(()=>[ds.of([{key:"Enter",preventDefault:!0,run:()=>l.trim()===""?!1:(WC(l,q).then(te=>{T(K=>[...K,te]),N.current&&setTimeout(()=>{N.current.scrollTop=N.current.scrollHeight},0),a||$h(q).then(p)}),L.current=-1,h.current="",c(""),!0)},{key:"ArrowUp",run:te=>{const K=te.state;if(K.doc.lineAt(K.selection.main.head).number===1){const de=L.current;return L.current++,L.current>=m.length&&(L.current=m.length-1),L.current<-1&&(L.current=-1),L.current===de||(L.current===-1?c(h.current):c(m[m.length-L.current-1].query)),!0}return!1}},{key:"ArrowDown",run:te=>{const K=te.state,fe=K.doc.lineAt(K.selection.main.head).number,de=K.doc.lines;if(fe===de){const Te=L.current;return L.current--,L.current>=m.length&&(L.current=m.length-1),L.current<-1&&(L.current=-1),L.current===Te||(L.current===-1?c(h.current):c(m[m.length-L.current-1].query)),!0}return!1}},...XC]),HC({dialect:hp,schema:b,tables:[{label:"d",displayLabel:"\\d"}],defaultSchema:"public"})],[q,b,l,m,a]),Y=()=>{var te,K;const fe=(K=(te=x.current)==null?void 0:te.editor)==null?void 0:K.querySelector(".cm-editor");if(!fe)throw new Error("No CodeMirror editor found");const de=fe.querySelector(".cm-gutters"),Te=window.getComputedStyle(fe),ye=Te.color,Ne=Te.backgroundColor,ke=window.getComputedStyle(de),Oe=ke.borderRight,We=parseInt(ke.borderRightWidth)||0,at=We?ke.borderRightColor:ye.replace("rgb","rgba").replace(")",", 0.15)"),ze=We?ke.borderRight:`1px solid ${at}`;M({"--PGliteRepl-foreground-color":ye,"--PGliteRepl-background-color":Ne,"--PGliteRepl-border":ze,"--PGliteRepl-gutter-border":Oe,"--PGliteRepl-border-color":at})};return Z.jsxs("div",{className:`
      PGliteRepl-root
      ${e?"PGliteRepl-root-border":""}
    `,style:H,children:[Z.jsxs("div",{className:"PGliteRepl-output",ref:te=>N.current=te,children:[f&&Z.jsx("div",{className:"PGliteRepl-loading-msg",children:"Loading..."}),m.map(te=>Z.jsx("div",{children:Z.jsx(jC,{response:te||[],showTime:r})},`${te.query}-${te.time}`))]}),Z.jsx(np,{ref:x,className:`PGliteRepl-input ${f?"PGliteRepl-input-loading":""}`,width:"100%",value:l,basicSetup:{defaultKeymap:!1},extensions:z,theme:W,onChange:se,editable:!f,onCreateEditor:()=>{Y(),setTimeout(Y,0),$h(q).then(p)}})]})}var Cl="Collapsible",[JC,gp]=Qh(Cl),[QC,yl]=JC(Cl),Ep=pe.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:i,defaultOpen:s,disabled:r,onOpenChange:a,...l}=n,[c=!1,h]=Wa({prop:i,defaultProp:s,onChange:a});return Z.jsx(QC,{scope:t,disabled:r,contentId:Zh(),open:c,onOpenToggle:pe.useCallback(()=>h(f=>!f),[h]),children:Z.jsx(cs.div,{"data-state":Il(c),"data-disabled":r?"":void 0,...l,ref:e})})});Ep.displayName=Cl;var Tp="CollapsibleTrigger",Ap=pe.forwardRef((n,e)=>{const{__scopeCollapsible:t,...i}=n,s=yl(Tp,t);return Z.jsx(cs.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Il(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...i,ref:e,onClick:ef(n.onClick,s.onOpenToggle)})});Ap.displayName=Tp;var Ll="CollapsibleContent",Sp=pe.forwardRef((n,e)=>{const{forceMount:t,...i}=n,s=yl(Ll,n.__scopeCollapsible);return Z.jsx(Lm,{present:t||s.open,children:({present:r})=>Z.jsx(ZC,{...i,ref:e,present:r})})});Sp.displayName=Ll;var ZC=pe.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:i,children:s,...r}=n,a=yl(Ll,t),[l,c]=pe.useState(i),h=pe.useRef(null),f=tf(e,h),u=pe.useRef(0),m=u.current,T=pe.useRef(0),N=T.current,b=a.open||l,p=pe.useRef(b),L=pe.useRef(void 0);return pe.useEffect(()=>{const x=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(x)},[]),Im(()=>{const x=h.current;if(x){L.current=L.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const W=x.getBoundingClientRect();u.current=W.height,T.current=W.width,p.current||(x.style.transitionDuration=L.current.transitionDuration,x.style.animationName=L.current.animationName),c(i)}},[a.open,i]),Z.jsx(cs.div,{"data-state":Il(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!b,...r,ref:f,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":N?`${N}px`:void 0,...n.style},children:b&&s})});function Il(n){return n?"open":"closed"}var ey=Ep,ty=Ap,ny=Sp,ln="Accordion",iy=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[wl,sy,ry]=wm(ln),[Qr,_y]=Qh(ln,[ry,gp]),xl=gp(),Rp=Ct.forwardRef((n,e)=>{const{type:t,...i}=n,s=i,r=i;return Z.jsx(wl.Provider,{scope:n.__scopeAccordion,children:t==="multiple"?Z.jsx(cy,{...r,ref:e}):Z.jsx(ly,{...s,ref:e})})});Rp.displayName=ln;var[_p,oy]=Qr(ln),[Op,ay]=Qr(ln,{collapsible:!1}),ly=Ct.forwardRef((n,e)=>{const{value:t,defaultValue:i,onValueChange:s=()=>{},collapsible:r=!1,...a}=n,[l,c]=Wa({prop:t,defaultProp:i,onChange:s});return Z.jsx(_p,{scope:n.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:Ct.useCallback(()=>r&&c(""),[r,c]),children:Z.jsx(Op,{scope:n.__scopeAccordion,collapsible:r,children:Z.jsx(Np,{...a,ref:e})})})}),cy=Ct.forwardRef((n,e)=>{const{value:t,defaultValue:i,onValueChange:s=()=>{},...r}=n,[a=[],l]=Wa({prop:t,defaultProp:i,onChange:s}),c=Ct.useCallback(f=>l((u=[])=>[...u,f]),[l]),h=Ct.useCallback(f=>l((u=[])=>u.filter(m=>m!==f)),[l]);return Z.jsx(_p,{scope:n.__scopeAccordion,value:a,onItemOpen:c,onItemClose:h,children:Z.jsx(Op,{scope:n.__scopeAccordion,collapsible:!0,children:Z.jsx(Np,{...r,ref:e})})})}),[hy,Zr]=Qr(ln),Np=Ct.forwardRef((n,e)=>{const{__scopeAccordion:t,disabled:i,dir:s,orientation:r="vertical",...a}=n,l=Ct.useRef(null),c=tf(l,e),h=sy(t),u=xm(s)==="ltr",m=ef(n.onKeyDown,T=>{if(!iy.includes(T.key))return;const N=T.target,b=h().filter(se=>!se.ref.current?.disabled),p=b.findIndex(se=>se.ref.current===N),L=b.length;if(p===-1)return;T.preventDefault();let x=p;const W=0,V=L-1,H=()=>{x=p+1,x>V&&(x=W)},M=()=>{x=p-1,x<W&&(x=V)};switch(T.key){case"Home":x=W;break;case"End":x=V;break;case"ArrowRight":r==="horizontal"&&(u?H():M());break;case"ArrowDown":r==="vertical"&&H();break;case"ArrowLeft":r==="horizontal"&&(u?M():H());break;case"ArrowUp":r==="vertical"&&M();break}const q=x%L;b[q].ref.current?.focus()});return Z.jsx(hy,{scope:t,disabled:i,direction:s,orientation:r,children:Z.jsx(wl.Slot,{scope:t,children:Z.jsx(cs.div,{...a,"data-orientation":r,ref:c,onKeyDown:i?void 0:m})})})}),Ur="AccordionItem",[fy,vl]=Qr(Ur),bp=Ct.forwardRef((n,e)=>{const{__scopeAccordion:t,value:i,...s}=n,r=Zr(Ur,t),a=oy(Ur,t),l=xl(t),c=Zh(),h=i&&a.value.includes(i)||!1,f=r.disabled||n.disabled;return Z.jsx(fy,{scope:t,open:h,disabled:f,triggerId:c,children:Z.jsx(ey,{"data-orientation":r.orientation,"data-state":xp(h),...l,...s,ref:e,disabled:f,open:h,onOpenChange:u=>{u?a.onItemOpen(i):a.onItemClose(i)}})})});bp.displayName=Ur;var Cp="AccordionHeader",yp=Ct.forwardRef((n,e)=>{const{__scopeAccordion:t,...i}=n,s=Zr(ln,t),r=vl(Cp,t);return Z.jsx(cs.h3,{"data-orientation":s.orientation,"data-state":xp(r.open),"data-disabled":r.disabled?"":void 0,...i,ref:e})});yp.displayName=Cp;var Ha="AccordionTrigger",Lp=Ct.forwardRef((n,e)=>{const{__scopeAccordion:t,...i}=n,s=Zr(ln,t),r=vl(Ha,t),a=ay(Ha,t),l=xl(t);return Z.jsx(wl.ItemSlot,{scope:t,children:Z.jsx(ty,{"aria-disabled":r.open&&!a.collapsible||void 0,"data-orientation":s.orientation,id:r.triggerId,...l,...i,ref:e})})});Lp.displayName=Ha;var Ip="AccordionContent",wp=Ct.forwardRef((n,e)=>{const{__scopeAccordion:t,...i}=n,s=Zr(ln,t),r=vl(Ip,t),a=xl(t);return Z.jsx(ny,{role:"region","aria-labelledby":r.triggerId,"data-orientation":s.orientation,...a,...i,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});wp.displayName=Ip;function xp(n){return n?"open":"closed"}var uy=Rp,dy=bp,py=yp,vp=Lp,Dp=wp;const my=uy,kp=pe.forwardRef(({className:n,...e},t)=>Z.jsx(dy,{ref:t,className:Ga("border-b",n),...e}));kp.displayName="AccordionItem";const Pp=pe.forwardRef(({className:n,children:e,...t},i)=>Z.jsx(py,{className:"flex",children:Z.jsxs(vp,{ref:i,className:Ga("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",n),...t,children:[e,Z.jsx(vm,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));Pp.displayName=vp.displayName;const Mp=pe.forwardRef(({className:n,children:e,...t},i)=>Z.jsx(Dp,{ref:i,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:Z.jsx("div",{className:Ga("pb-4 pt-0",n),children:e})}));Mp.displayName=Dp.displayName;const Oy=Dm("/repl")({component:gy});function gy(){const{theme:n}=km();return Z.jsx("div",{className:"container p-4 mx-auto",children:Z.jsxs(Mm,{className:"p-4",children:[Z.jsx(Fm,{children:"REPL"}),Z.jsx(my,{type:"single",collapsible:!0,children:Z.jsxs(kp,{value:"item-1",children:[Z.jsx(Pp,{children:"Current schema"}),Z.jsx(Mp,{children:Z.jsx("pre",{className:"p-2 text-xs rounded-md bg-secondary",children:`CREATE TABLE IF NOT EXISTS records(
  id text PRIMARY KEY,
  type TEXT NOT NULL,
  source_name text,
  source_version text,
  device text,
  unit text,
  value real NOT NULL,
  creation_date timestamp,
  start_date timestamp,
  end_date timestamp
);

CREATE TABLE IF NOT EXISTS record_metadata(
  record_id text REFERENCES records(id),
  key TEXT NOT NULL,
  value text NOT NULL,
  PRIMARY KEY (record_id, key)
);

CREATE INDEX idx_records_type ON records(type);

CREATE INDEX idx_records_dates ON records(start_date, end_date);

CREATE INDEX idx_metadata_key ON record_metadata(key);`})})]})}),Z.jsx($C,{pg:Pm,showTime:!0,border:!0,theme:n==="system"?"auto":n})]})})}export{Oy as Route};
